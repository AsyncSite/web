# OAuth 회원가입 통합 테스트 가이드

## 개요
이 문서는 회원가입 페이지에 추가된 Google OAuth 통합을 테스트하는 가이드입니다.

## 테스트 시나리오

### 1. 신규 사용자 Google 회원가입
**시나리오**: Google 계정으로 처음 가입하는 사용자

**테스트 단계**:
1. http://localhost:3000/signup 접속
2. "Google로 계속하기" 버튼 표시 확인
3. 버튼 클릭
4. Google OAuth 페이지로 리다이렉트 확인
5. Google 계정으로 로그인 및 권한 승인
6. `/auth/callback`으로 리턴
7. 자동으로 `/users/me` 프로필 페이지로 이동
8. 사용자 정보 표시 확인

**예상 결과**:
- 백엔드에서 자동으로 사용자 계정 생성
- JWT 토큰 발급 및 저장
- 프로필 페이지에서 Google 계정 정보 표시

### 2. 기존 Google 사용자 재가입 시도
**시나리오**: 이미 Google로 가입한 사용자가 회원가입 페이지에서 다시 Google 버튼 클릭

**테스트 단계**:
1. 로그아웃 상태에서 http://localhost:3000/signup 접속
2. "Google로 계속하기" 버튼 클릭
3. Google 인증 진행

**예상 결과**:
- 새 계정 생성이 아닌 기존 계정으로 로그인 처리
- 정상적으로 프로필 페이지로 이동

### 3. 이메일 중복 시나리오
**시나리오**: 일반 가입으로 등록한 이메일과 동일한 Google 계정으로 OAuth 시도

**테스트 단계**:
1. test@gmail.com으로 일반 회원가입 완료
2. 로그아웃
3. 회원가입 페이지에서 test@gmail.com Google 계정으로 OAuth 시도

**예상 결과**:
- 백엔드에서 OAuth 계정 연동 처리
- 동일한 이메일의 계정에 Google OAuth 추가
- 정상 로그인 처리

### 4. 단계별 가입 중 Google 전환
**시나리오**: 일반 가입 진행 중 Google로 전환

**테스트 단계**:
1. 회원가입 페이지에서 이메일 입력
2. 이름 입력 단계까지 진행
3. 페이지 상단의 "Google로 계속하기" 클릭

**예상 결과**:
- 입력한 정보는 무시되고 Google OAuth 플로우로 진행
- Google 계정 정보로 새 계정 생성

### 5. 로그인 상태에서 접근
**시나리오**: 이미 로그인한 사용자가 회원가입 페이지 접근

**테스트 단계**:
1. 로그인 완료
2. URL로 직접 /signup 접근

**예상 결과**:
- 자동으로 `/users/me`로 리다이렉트

### 6. OAuth 취소/에러 처리
**시나리오**: Google OAuth 중 취소 또는 에러 발생

**테스트 단계**:
1. 회원가입 페이지에서 "Google로 계속하기" 클릭
2. Google 페이지에서 취소 클릭

**예상 결과**:
- `/auth/callback?error=...`로 리다이렉트
- 에러 메시지 표시
- "로그인 페이지로 돌아가기" 버튼 제공

### 7. 모바일 반응형 테스트
**시나리오**: 모바일 화면에서 OAuth 버튼 표시 및 작동

**테스트 단계**:
1. 브라우저 개발자 도구로 모바일 뷰 전환
2. 회원가입 페이지 확인

**예상 결과**:
- Google 버튼이 전체 너비로 표시
- 터치 영역 충분
- 텍스트와 아이콘 정상 표시

## 확인 사항 체크리스트

### UI/UX
- [ ] 로그인과 회원가입 페이지의 Google 버튼 일관성
- [ ] "Google로 계속하기" 텍스트 통일
- [ ] 버튼 스타일링 일관성
- [ ] 구분선(divider) 표시 정상
- [ ] 모바일 반응형 디자인

### 기능
- [ ] OAuth 플로우 정상 작동
- [ ] 신규 사용자 자동 가입
- [ ] 기존 사용자 로그인 처리
- [ ] 토큰 저장 및 인증 상태 유지
- [ ] 에러 처리 및 메시지 표시

### 보안
- [ ] CSRF 토큰(state) 검증
- [ ] HTTPS 리다이렉트 (프로덕션)
- [ ] 토큰 안전한 저장

### 접근성
- [ ] aria-label 속성 제공
- [ ] 키보드 내비게이션 지원
- [ ] 버튼 비활성화 상태 처리

## 디버깅 명령어

```bash
# OAuth 관련 로그 확인
docker logs -f asyncsite-user-service | grep -i oauth

# 브라우저 콘솔에서 인증 상태 확인
localStorage.getItem('authToken')
localStorage.getItem('user')

# OAuth 엔드포인트 테스트
curl -I http://localhost:8080/api/auth/oauth/google/login
```