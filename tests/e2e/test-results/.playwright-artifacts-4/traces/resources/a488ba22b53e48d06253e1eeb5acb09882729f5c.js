var TossPayments=function(){"use strict";function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,o)}function o(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function s(e){n(a,o,i,s,u,"next",e)}function u(e){n(a,o,i,s,u,"throw",e)}s(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e,t,r){return m=h()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&d(o,r.prototype),o},m.apply(null,arguments)}function f(e){var t="function"==typeof Map?new Map:void 0;return f=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return m(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)},f(e)}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function y(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){var t=h();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=S(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}var P="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},E=function(e){return e&&e.Math==Math&&e},C=E("object"==typeof globalThis&&globalThis)||E("object"==typeof window&&window)||E("object"==typeof self&&self)||E("object"==typeof P&&P)||function(){return this}()||Function("return this")(),k={},A=function(e){try{return!!e()}catch(e){return!0}},I=!A((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),x=Function.prototype.call,T=x.bind?x.bind(x):function(){return x.apply(x,arguments)},N={},M={}.propertyIsEnumerable,O=Object.getOwnPropertyDescriptor,D=O&&!M.call({1:2},1);N.f=D?function(e){var t=O(this,e);return!!t&&t.enumerable}:M;var K,L,B=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},_=Function.prototype,U=_.bind,F=_.call,W=U&&U.bind(F),q=U?function(e){return e&&W(F,e)}:function(e){return e&&function(){return F.apply(e,arguments)}},G=q,V=G({}.toString),Y=G("".slice),H=function(e){return Y(V(e),8,-1)},j=q,z=A,J=H,Q=C.Object,X=j("".split),Z=z((function(){return!Q("z").propertyIsEnumerable(0)}))?function(e){return"String"==J(e)?X(e,""):Q(e)}:Q,$=C.TypeError,ee=function(e){if(null==e)throw $("Can't call method on "+e);return e},te=Z,re=ee,ne=function(e){return te(re(e))},oe=function(e){return"function"==typeof e},ie=oe,ae=function(e){return"object"==typeof e?null!==e:ie(e)},se=C,ue=oe,ce=function(e){return ue(e)?e:void 0},le=function(e,t){return arguments.length<2?ce(se[e]):se[e]&&se[e][t]},de=q({}.isPrototypeOf),he=le("navigator","userAgent")||"",me=C,fe=he,pe=me.process,ye=me.Deno,ve=pe&&pe.versions||ye&&ye.version,ge=ve&&ve.v8;ge&&(L=(K=ge.split("."))[0]>0&&K[0]<4?1:+(K[0]+K[1])),!L&&fe&&(!(K=fe.match(/Edge\/(\d+)/))||K[1]>=74)&&(K=fe.match(/Chrome\/(\d+)/))&&(L=+K[1]);var we=L,Se=we,Re=A,be=!!Object.getOwnPropertySymbols&&!Re((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Se&&Se<41})),Pe=be&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ee=le,Ce=oe,ke=de,Ae=Pe,Ie=C.Object,xe=Ae?function(e){return"symbol"==typeof e}:function(e){var t=Ee("Symbol");return Ce(t)&&ke(t.prototype,Ie(e))},Te=C.String,Ne=function(e){try{return Te(e)}catch(e){return"Object"}},Me=oe,Oe=Ne,De=C.TypeError,Ke=function(e){if(Me(e))return e;throw De(Oe(e)+" is not a function")},Le=Ke,Be=function(e,t){var r=e[t];return null==r?void 0:Le(r)},_e=T,Ue=oe,Fe=ae,We=C.TypeError,qe={exports:{}},Ge=C,Ve=Object.defineProperty,Ye=function(e,t){try{Ve(Ge,e,{value:t,configurable:!0,writable:!0})}catch(r){Ge[e]=t}return t},He=Ye,je="__core-js_shared__",ze=C[je]||He(je,{}),Je=ze;(qe.exports=function(e,t){return Je[e]||(Je[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.0",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"});var Qe=ee,Xe=C.Object,Ze=function(e){return Xe(Qe(e))},$e=Ze,et=q({}.hasOwnProperty),tt=Object.hasOwn||function(e,t){return et($e(e),t)},rt=q,nt=0,ot=Math.random(),it=rt(1..toString),at=function(e){return"Symbol("+(void 0===e?"":e)+")_"+it(++nt+ot,36)},st=C,ut=qe.exports,ct=tt,lt=at,dt=be,ht=Pe,mt=ut("wks"),ft=st.Symbol,pt=ft&&ft.for,yt=ht?ft:ft&&ft.withoutSetter||lt,vt=function(e){if(!ct(mt,e)||!dt&&"string"!=typeof mt[e]){var t="Symbol."+e;dt&&ct(ft,e)?mt[e]=ft[e]:mt[e]=ht&&pt?pt(t):yt(t)}return mt[e]},gt=T,wt=ae,St=xe,Rt=Be,bt=function(e,t){var r,n;if("string"===t&&Ue(r=e.toString)&&!Fe(n=_e(r,e)))return n;if(Ue(r=e.valueOf)&&!Fe(n=_e(r,e)))return n;if("string"!==t&&Ue(r=e.toString)&&!Fe(n=_e(r,e)))return n;throw We("Can't convert object to primitive value")},Pt=vt,Et=C.TypeError,Ct=Pt("toPrimitive"),kt=function(e,t){if(!wt(e)||St(e))return e;var r,n=Rt(e,Ct);if(n){if(void 0===t&&(t="default"),r=gt(n,e,t),!wt(r)||St(r))return r;throw Et("Can't convert object to primitive value")}return void 0===t&&(t="number"),bt(e,t)},At=kt,It=xe,xt=function(e){var t=At(e,"string");return It(t)?t:t+""},Tt=ae,Nt=C.document,Mt=Tt(Nt)&&Tt(Nt.createElement),Ot=function(e){return Mt?Nt.createElement(e):{}},Dt=Ot,Kt=!I&&!A((function(){return 7!=Object.defineProperty(Dt("div"),"a",{get:function(){return 7}}).a})),Lt=I,Bt=T,_t=N,Ut=B,Ft=ne,Wt=xt,qt=tt,Gt=Kt,Vt=Object.getOwnPropertyDescriptor;k.f=Lt?Vt:function(e,t){if(e=Ft(e),t=Wt(t),Gt)try{return Vt(e,t)}catch(e){}if(qt(e,t))return Ut(!Bt(_t.f,e,t),e[t])};var Yt={},Ht=C,jt=ae,zt=Ht.String,Jt=Ht.TypeError,Qt=function(e){if(jt(e))return e;throw Jt(zt(e)+" is not an object")},Xt=I,Zt=Kt,$t=Qt,er=xt,tr=C.TypeError,rr=Object.defineProperty;Yt.f=Xt?rr:function(e,t,r){if($t(e),t=er(t),$t(r),Zt)try{return rr(e,t,r)}catch(e){}if("get"in r||"set"in r)throw tr("Accessors not supported");return"value"in r&&(e[t]=r.value),e};var nr=Yt,or=B,ir=I?function(e,t,r){return nr.f(e,t,or(1,r))}:function(e,t,r){return e[t]=r,e},ar={exports:{}},sr=oe,ur=ze,cr=q(Function.toString);sr(ur.inspectSource)||(ur.inspectSource=function(e){return cr(e)});var lr,dr,hr,mr=ur.inspectSource,fr=oe,pr=mr,yr=C.WeakMap,vr=fr(yr)&&/native code/.test(pr(yr)),gr=qe.exports,wr=at,Sr=gr("keys"),Rr=function(e){return Sr[e]||(Sr[e]=wr(e))},br={},Pr=vr,Er=C,Cr=q,kr=ae,Ar=ir,Ir=tt,xr=ze,Tr=Rr,Nr=br,Mr="Object already initialized",Or=Er.TypeError,Dr=Er.WeakMap;if(Pr||xr.state){var Kr=xr.state||(xr.state=new Dr),Lr=Cr(Kr.get),Br=Cr(Kr.has),_r=Cr(Kr.set);lr=function(e,t){if(Br(Kr,e))throw new Or(Mr);return t.facade=e,_r(Kr,e,t),t},dr=function(e){return Lr(Kr,e)||{}},hr=function(e){return Br(Kr,e)}}else{var Ur=Tr("state");Nr[Ur]=!0,lr=function(e,t){if(Ir(e,Ur))throw new Or(Mr);return t.facade=e,Ar(e,Ur,t),t},dr=function(e){return Ir(e,Ur)?e[Ur]:{}},hr=function(e){return Ir(e,Ur)}}var Fr={set:lr,get:dr,has:hr,enforce:function(e){return hr(e)?dr(e):lr(e,{})},getterFor:function(e){return function(t){var r;if(!kr(t)||(r=dr(t)).type!==e)throw Or("Incompatible receiver, "+e+" required");return r}}},Wr=I,qr=tt,Gr=Function.prototype,Vr=Wr&&Object.getOwnPropertyDescriptor,Yr=qr(Gr,"name"),Hr={EXISTS:Yr,PROPER:Yr&&"something"===function(){}.name,CONFIGURABLE:Yr&&(!Wr||Wr&&Vr(Gr,"name").configurable)},jr=C,zr=oe,Jr=tt,Qr=ir,Xr=Ye,Zr=mr,$r=Hr.CONFIGURABLE,en=Fr.get,tn=Fr.enforce,rn=String(String).split("String");(ar.exports=function(e,t,r,n){var o,i=!!n&&!!n.unsafe,a=!!n&&!!n.enumerable,s=!!n&&!!n.noTargetGet,u=n&&void 0!==n.name?n.name:t;zr(r)&&("Symbol("===String(u).slice(0,7)&&(u="["+String(u).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Jr(r,"name")||$r&&r.name!==u)&&Qr(r,"name",u),(o=tn(r)).source||(o.source=rn.join("string"==typeof u?u:""))),e!==jr?(i?!s&&e[t]&&(a=!0):delete e[t],a?e[t]=r:Qr(e,t,r)):a?e[t]=r:Xr(t,r)})(Function.prototype,"toString",(function(){return zr(this)&&en(this).source||Zr(this)}));var nn={},on=Math.ceil,an=Math.floor,sn=function(e){var t=+e;return t!=t||0===t?0:(t>0?an:on)(t)},un=sn,cn=Math.max,ln=Math.min,dn=function(e,t){var r=un(e);return r<0?cn(r+t,0):ln(r,t)},hn=sn,mn=Math.min,fn=function(e){return e>0?mn(hn(e),9007199254740991):0},pn=fn,yn=function(e){return pn(e.length)},vn=ne,gn=dn,wn=yn,Sn=function(e){return function(t,r,n){var o,i=vn(t),a=wn(i),s=gn(n,a);if(e&&r!=r){for(;a>s;)if((o=i[s++])!=o)return!0}else for(;a>s;s++)if((e||s in i)&&i[s]===r)return e||s||0;return!e&&-1}},Rn={includes:Sn(!0),indexOf:Sn(!1)},bn=tt,Pn=ne,En=Rn.indexOf,Cn=br,kn=q([].push),An=function(e,t){var r,n=Pn(e),o=0,i=[];for(r in n)!bn(Cn,r)&&bn(n,r)&&kn(i,r);for(;t.length>o;)bn(n,r=t[o++])&&(~En(i,r)||kn(i,r));return i},In=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xn=An,Tn=In.concat("length","prototype");nn.f=Object.getOwnPropertyNames||function(e){return xn(e,Tn)};var Nn={};Nn.f=Object.getOwnPropertySymbols;var Mn=le,On=nn,Dn=Nn,Kn=Qt,Ln=q([].concat),Bn=Mn("Reflect","ownKeys")||function(e){var t=On.f(Kn(e)),r=Dn.f;return r?Ln(t,r(e)):t},_n=tt,Un=Bn,Fn=k,Wn=Yt,qn=function(e,t){for(var r=Un(t),n=Wn.f,o=Fn.f,i=0;i<r.length;i++){var a=r[i];_n(e,a)||n(e,a,o(t,a))}},Gn=A,Vn=oe,Yn=/#|\.prototype\./,Hn=function(e,t){var r=zn[jn(e)];return r==Qn||r!=Jn&&(Vn(t)?Gn(t):!!t)},jn=Hn.normalize=function(e){return String(e).replace(Yn,".").toLowerCase()},zn=Hn.data={},Jn=Hn.NATIVE="N",Qn=Hn.POLYFILL="P",Xn=Hn,Zn=C,$n=k.f,eo=ir,to=ar.exports,ro=Ye,no=qn,oo=Xn,io=function(e,t){var r,n,o,i,a,s=e.target,u=e.global,c=e.stat;if(r=u?Zn:c?Zn[s]||ro(s,{}):(Zn[s]||{}).prototype)for(n in t){if(i=t[n],o=e.noTargetGet?(a=$n(r,n))&&a.value:r[n],!oo(u?n:s+(c?".":"#")+n,e.forced)&&void 0!==o){if(typeof i==typeof o)continue;no(i,o)}(e.sham||o&&o.sham)&&eo(i,"sham",!0),to(r,n,i,e)}},ao=Function.prototype,so=ao.apply,uo=ao.bind,co=ao.call,lo="object"==typeof Reflect&&Reflect.apply||(uo?co.bind(so):function(){return co.apply(so,arguments)}),ho=H,mo=Array.isArray||function(e){return"Array"==ho(e)},fo={};fo[vt("toStringTag")]="z";var po,yo="[object z]"===String(fo),vo=C,go=yo,wo=oe,So=H,Ro=vt("toStringTag"),bo=vo.Object,Po="Arguments"==So(function(){return arguments}()),Eo=go?So:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=bo(e),Ro))?r:Po?So(t):"Object"==(n=So(t))&&wo(t.callee)?"Arguments":n},Co=Eo,ko=C.String,Ao=function(e){if("Symbol"===Co(e))throw TypeError("Cannot convert a Symbol value to a string");return ko(e)},Io=An,xo=In,To=Object.keys||function(e){return Io(e,xo)},No=Yt,Mo=Qt,Oo=ne,Do=To,Ko=I?Object.defineProperties:function(e,t){Mo(e);for(var r,n=Oo(t),o=Do(t),i=o.length,a=0;i>a;)No.f(e,r=o[a++],n[r]);return e},Lo=le("document","documentElement"),Bo=Qt,_o=Ko,Uo=In,Fo=br,Wo=Lo,qo=Ot,Go=Rr("IE_PROTO"),Vo=function(){},Yo=function(e){return"<script>"+e+"</"+"script>"},Ho=function(e){e.write(Yo("")),e.close();var t=e.parentWindow.Object;return e=null,t},jo=function(){try{po=new ActiveXObject("htmlfile")}catch(e){}var e,t;jo="undefined"!=typeof document?document.domain&&po?Ho(po):((t=qo("iframe")).style.display="none",Wo.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(Yo("document.F=Object")),e.close(),e.F):Ho(po);for(var r=Uo.length;r--;)delete jo.prototype[Uo[r]];return jo()};Fo[Go]=!0;var zo=Object.create||function(e,t){var r;return null!==e?(Vo.prototype=Bo(e),r=new Vo,Vo.prototype=null,r[Go]=e):r=jo(),void 0===t?r:_o(r,t)},Jo={},Qo=q([].slice),Xo=H,Zo=ne,$o=nn.f,ei=Qo,ti="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Jo.f=function(e){return ti&&"Window"==Xo(e)?function(e){try{return $o(e)}catch(e){return ei(ti)}}(e):$o(Zo(e))};var ri={},ni=vt;ri.f=ni;var oi=C,ii=tt,ai=ri,si=Yt.f,ui=function(e){var t=oi.Symbol||(oi.Symbol={});ii(t,e)||si(t,e,{value:ai.f(e)})},ci=Yt.f,li=tt,di=vt("toStringTag"),hi=function(e,t,r){e&&!li(e=r?e:e.prototype,di)&&ci(e,di,{configurable:!0,value:t})},mi=Ke,fi=q(q.bind),pi=function(e,t){return mi(e),void 0===t?e:fi?fi(e,t):function(){return e.apply(t,arguments)}},yi=q,vi=A,gi=oe,wi=Eo,Si=mr,Ri=function(){},bi=[],Pi=le("Reflect","construct"),Ei=/^\s*(?:class|function)\b/,Ci=yi(Ei.exec),ki=!Ei.exec(Ri),Ai=function(e){if(!gi(e))return!1;try{return Pi(Ri,bi,e),!0}catch(e){return!1}},Ii=!Pi||vi((function(){var e;return Ai(Ai.call)||!Ai(Object)||!Ai((function(){e=!0}))||e}))?function(e){if(!gi(e))return!1;switch(wi(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return ki||!!Ci(Ei,Si(e))}:Ai,xi=C,Ti=mo,Ni=Ii,Mi=ae,Oi=vt("species"),Di=xi.Array,Ki=function(e){var t;return Ti(e)&&(t=e.constructor,(Ni(t)&&(t===Di||Ti(t.prototype))||Mi(t)&&null===(t=t[Oi]))&&(t=void 0)),void 0===t?Di:t},Li=function(e,t){return new(Ki(e))(0===t?0:t)},Bi=pi,_i=Z,Ui=Ze,Fi=yn,Wi=Li,qi=q([].push),Gi=function(e){var t=1==e,r=2==e,n=3==e,o=4==e,i=6==e,a=7==e,s=5==e||i;return function(u,c,l,d){for(var h,m,f=Ui(u),p=_i(f),y=Bi(c,l),v=Fi(p),g=0,w=d||Wi,S=t?w(u,v):r||a?w(u,0):void 0;v>g;g++)if((s||g in p)&&(m=y(h=p[g],g,f),e))if(t)S[g]=m;else if(m)switch(e){case 3:return!0;case 5:return h;case 6:return g;case 2:qi(S,h)}else switch(e){case 4:return!1;case 7:qi(S,h)}return i?-1:n||o?o:S}},Vi={forEach:Gi(0),map:Gi(1),filter:Gi(2),some:Gi(3),every:Gi(4),find:Gi(5),findIndex:Gi(6),filterReject:Gi(7)},Yi=io,Hi=C,ji=le,zi=lo,Ji=T,Qi=q,Xi=I,Zi=be,$i=A,ea=tt,ta=mo,ra=oe,na=ae,oa=de,ia=xe,aa=Qt,sa=Ze,ua=ne,ca=xt,la=Ao,da=B,ha=zo,ma=To,fa=nn,pa=Jo,ya=Nn,va=k,ga=Yt,wa=N,Sa=Qo,Ra=ar.exports,ba=qe.exports,Pa=br,Ea=at,Ca=vt,ka=ri,Aa=ui,Ia=hi,xa=Fr,Ta=Vi.forEach,Na=Rr("hidden"),Ma="Symbol",Oa=Ca("toPrimitive"),Da=xa.set,Ka=xa.getterFor(Ma),La=Object.prototype,Ba=Hi.Symbol,_a=Ba&&Ba.prototype,Ua=Hi.TypeError,Fa=Hi.QObject,Wa=ji("JSON","stringify"),qa=va.f,Ga=ga.f,Va=pa.f,Ya=wa.f,Ha=Qi([].push),ja=ba("symbols"),za=ba("op-symbols"),Ja=ba("string-to-symbol-registry"),Qa=ba("symbol-to-string-registry"),Xa=ba("wks"),Za=!Fa||!Fa.prototype||!Fa.prototype.findChild,$a=Xi&&$i((function(){return 7!=ha(Ga({},"a",{get:function(){return Ga(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=qa(La,t);n&&delete La[t],Ga(e,t,r),n&&e!==La&&Ga(La,t,n)}:Ga,es=function(e,t){var r=ja[e]=ha(_a);return Da(r,{type:Ma,tag:e,description:t}),Xi||(r.description=t),r},ts=function(e,t,r){e===La&&ts(za,t,r),aa(e);var n=ca(t);return aa(r),ea(ja,n)?(r.enumerable?(ea(e,Na)&&e[Na][n]&&(e[Na][n]=!1),r=ha(r,{enumerable:da(0,!1)})):(ea(e,Na)||Ga(e,Na,da(1,{})),e[Na][n]=!0),$a(e,n,r)):Ga(e,n,r)},rs=function(e,t){aa(e);var r=ua(t),n=ma(r).concat(as(r));return Ta(n,(function(t){Xi&&!Ji(ns,r,t)||ts(e,t,r[t])})),e},ns=function(e){var t=ca(e),r=Ji(Ya,this,t);return!(this===La&&ea(ja,t)&&!ea(za,t))&&(!(r||!ea(this,t)||!ea(ja,t)||ea(this,Na)&&this[Na][t])||r)},os=function(e,t){var r=ua(e),n=ca(t);if(r!==La||!ea(ja,n)||ea(za,n)){var o=qa(r,n);return!o||!ea(ja,n)||ea(r,Na)&&r[Na][n]||(o.enumerable=!0),o}},is=function(e){var t=Va(ua(e)),r=[];return Ta(t,(function(e){ea(ja,e)||ea(Pa,e)||Ha(r,e)})),r},as=function(e){var t=e===La,r=Va(t?za:ua(e)),n=[];return Ta(r,(function(e){!ea(ja,e)||t&&!ea(La,e)||Ha(n,ja[e])})),n};(Zi||(Ba=function(){if(oa(_a,this))throw Ua("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?la(arguments[0]):void 0,t=Ea(e),r=function(e){this===La&&Ji(r,za,e),ea(this,Na)&&ea(this[Na],t)&&(this[Na][t]=!1),$a(this,t,da(1,e))};return Xi&&Za&&$a(La,t,{configurable:!0,set:r}),es(t,e)},Ra(_a=Ba.prototype,"toString",(function(){return Ka(this).tag})),Ra(Ba,"withoutSetter",(function(e){return es(Ea(e),e)})),wa.f=ns,ga.f=ts,va.f=os,fa.f=pa.f=is,ya.f=as,ka.f=function(e){return es(Ca(e),e)},Xi&&(Ga(_a,"description",{configurable:!0,get:function(){return Ka(this).description}}),Ra(La,"propertyIsEnumerable",ns,{unsafe:!0}))),Yi({global:!0,wrap:!0,forced:!Zi,sham:!Zi},{Symbol:Ba}),Ta(ma(Xa),(function(e){Aa(e)})),Yi({target:Ma,stat:!0,forced:!Zi},{for:function(e){var t=la(e);if(ea(Ja,t))return Ja[t];var r=Ba(t);return Ja[t]=r,Qa[r]=t,r},keyFor:function(e){if(!ia(e))throw Ua(e+" is not a symbol");if(ea(Qa,e))return Qa[e]},useSetter:function(){Za=!0},useSimple:function(){Za=!1}}),Yi({target:"Object",stat:!0,forced:!Zi,sham:!Xi},{create:function(e,t){return void 0===t?ha(e):rs(ha(e),t)},defineProperty:ts,defineProperties:rs,getOwnPropertyDescriptor:os}),Yi({target:"Object",stat:!0,forced:!Zi},{getOwnPropertyNames:is,getOwnPropertySymbols:as}),Yi({target:"Object",stat:!0,forced:$i((function(){ya.f(1)}))},{getOwnPropertySymbols:function(e){return ya.f(sa(e))}}),Wa)&&Yi({target:"JSON",stat:!0,forced:!Zi||$i((function(){var e=Ba();return"[null]"!=Wa([e])||"{}"!=Wa({a:e})||"{}"!=Wa(Object(e))}))},{stringify:function(e,t,r){var n=Sa(arguments),o=t;if((na(t)||void 0!==e)&&!ia(e))return ta(t)||(t=function(e,t){if(ra(o)&&(t=Ji(o,this,e,t)),!ia(t))return t}),n[1]=t,zi(Wa,null,n)}});if(!_a[Oa]){var ss=_a.valueOf;Ra(_a,Oa,(function(e){return Ji(ss,this)}))}Ia(Ba,Ma),Pa[Na]=!0;var us=io,cs=I,ls=C,ds=q,hs=tt,ms=oe,fs=de,ps=Ao,ys=Yt.f,vs=qn,gs=ls.Symbol,ws=gs&&gs.prototype;if(cs&&ms(gs)&&(!("description"in ws)||void 0!==gs().description)){var Ss={},Rs=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:ps(arguments[0]),t=fs(ws,this)?new gs(e):void 0===e?gs():gs(e);return""===e&&(Ss[t]=!0),t};vs(Rs,gs),Rs.prototype=ws,ws.constructor=Rs;var bs="Symbol(test)"==String(gs("test")),Ps=ds(ws.toString),Es=ds(ws.valueOf),Cs=/^Symbol\((.*)\)[^)]+$/,ks=ds("".replace),As=ds("".slice);ys(ws,"description",{configurable:!0,get:function(){var e=Es(this),t=Ps(e);if(hs(Ss,e))return"";var r=bs?As(t,7,-1):ks(t,Cs,"$1");return""===r?void 0:r}}),us({global:!0,forced:!0},{Symbol:Rs})}var Is=Eo,xs=yo?{}.toString:function(){return"[object "+Is(this)+"]"},Ts=yo,Ns=ar.exports,Ms=xs;Ts||Ns(Object.prototype,"toString",Ms,{unsafe:!0}),ui("iterator");var Os=zo,Ds=Yt,Ks=vt("unscopables"),Ls=Array.prototype;null==Ls[Ks]&&Ds.f(Ls,Ks,{configurable:!0,value:Os(null)});var Bs,_s,Us,Fs=function(e){Ls[Ks][e]=!0},Ws={},qs=!A((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Gs=C,Vs=tt,Ys=oe,Hs=Ze,js=qs,zs=Rr("IE_PROTO"),Js=Gs.Object,Qs=Js.prototype,Xs=js?Js.getPrototypeOf:function(e){var t=Hs(e);if(Vs(t,zs))return t[zs];var r=t.constructor;return Ys(r)&&t instanceof r?r.prototype:t instanceof Js?Qs:null},Zs=A,$s=oe,eu=Xs,tu=ar.exports,ru=vt("iterator"),nu=!1;[].keys&&("next"in(Us=[].keys())?(_s=eu(eu(Us)))!==Object.prototype&&(Bs=_s):nu=!0);var ou=null==Bs||Zs((function(){var e={};return Bs[ru].call(e)!==e}));ou&&(Bs={}),$s(Bs[ru])||tu(Bs,ru,(function(){return this}));var iu={IteratorPrototype:Bs,BUGGY_SAFARI_ITERATORS:nu},au=iu.IteratorPrototype,su=zo,uu=B,cu=hi,lu=Ws,du=function(){return this},hu=function(e,t,r){var n=t+" Iterator";return e.prototype=su(au,{next:uu(1,r)}),cu(e,n,!1),lu[n]=du,e},mu=C,fu=oe,pu=mu.String,yu=mu.TypeError,vu=q,gu=Qt,wu=function(e){if("object"==typeof e||fu(e))return e;throw yu("Can't set "+pu(e)+" as a prototype")},Su=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=vu(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return gu(r),wu(n),t?e(r,n):r.__proto__=n,r}}():void 0),Ru=io,bu=T,Pu=Hr,Eu=oe,Cu=hu,ku=Xs,Au=Su,Iu=hi,xu=ir,Tu=ar.exports,Nu=Ws,Mu=Pu.PROPER,Ou=Pu.CONFIGURABLE,Du=iu.IteratorPrototype,Ku=iu.BUGGY_SAFARI_ITERATORS,Lu=vt("iterator"),Bu="keys",_u="values",Uu="entries",Fu=function(){return this},Wu=function(e,t,r,n,o,i,a){Cu(r,t,n);var s,u,c,l=function(e){if(e===o&&p)return p;if(!Ku&&e in m)return m[e];switch(e){case Bu:case _u:case Uu:return function(){return new r(this,e)}}return function(){return new r(this)}},d=t+" Iterator",h=!1,m=e.prototype,f=m[Lu]||m["@@iterator"]||o&&m[o],p=!Ku&&f||l(o),y="Array"==t&&m.entries||f;if(y&&(s=ku(y.call(new e)))!==Object.prototype&&s.next&&(ku(s)!==Du&&(Au?Au(s,Du):Eu(s[Lu])||Tu(s,Lu,Fu)),Iu(s,d,!0)),Mu&&o==_u&&f&&f.name!==_u&&(Ou?xu(m,"name",_u):(h=!0,p=function(){return bu(f,this)})),o)if(u={values:l(_u),keys:i?p:l(Bu),entries:l(Uu)},a)for(c in u)(Ku||h||!(c in m))&&Tu(m,c,u[c]);else Ru({target:t,proto:!0,forced:Ku||h},u);return m[Lu]!==p&&Tu(m,Lu,p,{name:o}),Nu[t]=p,u},qu=ne,Gu=Fs,Vu=Ws,Yu=Fr,Hu=Wu,ju="Array Iterator",zu=Yu.set,Ju=Yu.getterFor(ju),Qu=Hu(Array,"Array",(function(e,t){zu(this,{type:ju,target:qu(e),index:0,kind:t})}),(function(){var e=Ju(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values");Vu.Arguments=Vu.Array,Gu("keys"),Gu("values"),Gu("entries");var Xu=q,Zu=sn,$u=Ao,ec=ee,tc=Xu("".charAt),rc=Xu("".charCodeAt),nc=Xu("".slice),oc=function(e){return function(t,r){var n,o,i=$u(ec(t)),a=Zu(r),s=i.length;return a<0||a>=s?e?"":void 0:(n=rc(i,a))<55296||n>56319||a+1===s||(o=rc(i,a+1))<56320||o>57343?e?tc(i,a):n:e?nc(i,a,a+2):o-56320+(n-55296<<10)+65536}},ic={codeAt:oc(!1),charAt:oc(!0)},ac=ic.charAt,sc=Ao,uc=Fr,cc=Wu,lc="String Iterator",dc=uc.set,hc=uc.getterFor(lc);cc(String,"String",(function(e){dc(this,{type:lc,string:sc(e),index:0})}),(function(){var e,t=hc(this),r=t.string,n=t.index;return n>=r.length?{value:void 0,done:!0}:(e=ac(r,n),t.index+=e.length,{value:e,done:!1})}));var mc={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},fc=Ot("span").classList,pc=fc&&fc.constructor&&fc.constructor.prototype,yc=pc===Object.prototype?void 0:pc,vc=C,gc=mc,wc=yc,Sc=Qu,Rc=ir,bc=vt,Pc=bc("iterator"),Ec=bc("toStringTag"),Cc=Sc.values,kc=function(e,t){if(e){if(e[Pc]!==Cc)try{Rc(e,Pc,Cc)}catch(t){e[Pc]=Cc}if(e[Ec]||Rc(e,Ec,t),gc[t])for(var r in Sc)if(e[r]!==Sc[r])try{Rc(e,r,Sc[r])}catch(t){e[r]=Sc[r]}}};for(var Ac in gc)kc(vc[Ac]&&vc[Ac].prototype,Ac);kc(wc,"DOMTokenList"),ui("asyncIterator"),ui("toStringTag"),hi(C.JSON,"JSON",!0),hi(Math,"Math",!0);var Ic=Ze,xc=Xs,Tc=qs;io({target:"Object",stat:!0,forced:A((function(){xc(1)})),sham:!Tc},{getPrototypeOf:function(e){return xc(Ic(e))}});var Nc=I,Mc=Hr.EXISTS,Oc=q,Dc=Yt.f,Kc=Function.prototype,Lc=Oc(Kc.toString),Bc=/^\s*function ([^ (]*)/,_c=Oc(Bc.exec);Nc&&!Mc&&Dc(Kc,"name",{configurable:!0,get:function(){try{return _c(Bc,Lc(this))[1]}catch(e){return""}}});var Uc=C.Promise,Fc=ar.exports,Wc=function(e,t,r){for(var n in t)Fc(e,n,t[n],r);return e},qc=le,Gc=Yt,Vc=I,Yc=vt("species"),Hc=function(e){var t=qc(e),r=Gc.f;Vc&&t&&!t[Yc]&&r(t,Yc,{configurable:!0,get:function(){return this}})},jc=de,zc=C.TypeError,Jc=function(e,t){if(jc(t,e))return e;throw zc("Incorrect invocation")},Qc=Ws,Xc=vt("iterator"),Zc=Array.prototype,$c=function(e){return void 0!==e&&(Qc.Array===e||Zc[Xc]===e)},el=Eo,tl=Be,rl=Ws,nl=vt("iterator"),ol=function(e){if(null!=e)return tl(e,nl)||tl(e,"@@iterator")||rl[el(e)]},il=T,al=Ke,sl=Qt,ul=Ne,cl=ol,ll=C.TypeError,dl=function(e,t){var r=arguments.length<2?cl(e):t;if(al(r))return sl(il(r,e));throw ll(ul(e)+" is not iterable")},hl=T,ml=Qt,fl=Be,pl=function(e,t,r){var n,o;ml(e);try{if(!(n=fl(e,"return"))){if("throw"===t)throw r;return r}n=hl(n,e)}catch(e){o=!0,n=e}if("throw"===t)throw r;if(o)throw n;return ml(n),r},yl=pi,vl=T,gl=Qt,wl=Ne,Sl=$c,Rl=yn,bl=de,Pl=dl,El=ol,Cl=pl,kl=C.TypeError,Al=function(e,t){this.stopped=e,this.result=t},Il=Al.prototype,xl=function(e,t,r){var n,o,i,a,s,u,c,l=r&&r.that,d=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_ITERATOR),m=!(!r||!r.INTERRUPTED),f=yl(t,l),p=function(e){return n&&Cl(n,"normal",e),new Al(!0,e)},y=function(e){return d?(gl(e),m?f(e[0],e[1],p):f(e[0],e[1])):m?f(e,p):f(e)};if(h)n=e;else{if(!(o=El(e)))throw kl(wl(e)+" is not iterable");if(Sl(o)){for(i=0,a=Rl(e);a>i;i++)if((s=y(e[i]))&&bl(Il,s))return s;return new Al(!1)}n=Pl(e,o)}for(u=n.next;!(c=vl(u,n)).done;){try{s=y(c.value)}catch(e){Cl(n,"throw",e)}if("object"==typeof s&&s&&bl(Il,s))return s}return new Al(!1)},Tl=vt("iterator"),Nl=!1;try{var Ml=0,Ol={next:function(){return{done:!!Ml++}},return:function(){Nl=!0}};Ol[Tl]=function(){return this},Array.from(Ol,(function(){throw 2}))}catch(e){}var Dl,Kl,Ll,Bl,_l=function(e,t){if(!t&&!Nl)return!1;var r=!1;try{var n={};n[Tl]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(e){}return r},Ul=Ii,Fl=Ne,Wl=C.TypeError,ql=Qt,Gl=function(e){if(Ul(e))return e;throw Wl(Fl(e)+" is not a constructor")},Vl=vt("species"),Yl=function(e,t){var r,n=ql(e).constructor;return void 0===n||null==(r=ql(n)[Vl])?t:Gl(r)},Hl=/(?:ipad|iphone|ipod).*applewebkit/i.test(he),jl="process"==H(C.process),zl=C,Jl=lo,Ql=pi,Xl=oe,Zl=tt,$l=A,ed=Lo,td=Qo,rd=Ot,nd=Hl,od=jl,id=zl.setImmediate,ad=zl.clearImmediate,sd=zl.process,ud=zl.Dispatch,cd=zl.Function,ld=zl.MessageChannel,dd=zl.String,hd=0,md={},fd="onreadystatechange";try{Dl=zl.location}catch(e){}var pd=function(e){if(Zl(md,e)){var t=md[e];delete md[e],t()}},yd=function(e){return function(){pd(e)}},vd=function(e){pd(e.data)},gd=function(e){zl.postMessage(dd(e),Dl.protocol+"//"+Dl.host)};id&&ad||(id=function(e){var t=td(arguments,1);return md[++hd]=function(){Jl(Xl(e)?e:cd(e),void 0,t)},Kl(hd),hd},ad=function(e){delete md[e]},od?Kl=function(e){sd.nextTick(yd(e))}:ud&&ud.now?Kl=function(e){ud.now(yd(e))}:ld&&!nd?(Bl=(Ll=new ld).port2,Ll.port1.onmessage=vd,Kl=Ql(Bl.postMessage,Bl)):zl.addEventListener&&Xl(zl.postMessage)&&!zl.importScripts&&Dl&&"file:"!==Dl.protocol&&!$l(gd)?(Kl=gd,zl.addEventListener("message",vd,!1)):Kl=fd in rd("script")?function(e){ed.appendChild(rd("script")).onreadystatechange=function(){ed.removeChild(this),pd(e)}}:function(e){setTimeout(yd(e),0)});var wd,Sd,Rd,bd,Pd,Ed,Cd,kd,Ad={set:id,clear:ad},Id=C,xd=/ipad|iphone|ipod/i.test(he)&&void 0!==Id.Pebble,Td=/web0s(?!.*chrome)/i.test(he),Nd=C,Md=pi,Od=k.f,Dd=Ad.set,Kd=Hl,Ld=xd,Bd=Td,_d=jl,Ud=Nd.MutationObserver||Nd.WebKitMutationObserver,Fd=Nd.document,Wd=Nd.process,qd=Nd.Promise,Gd=Od(Nd,"queueMicrotask"),Vd=Gd&&Gd.value;Vd||(wd=function(){var e,t;for(_d&&(e=Wd.domain)&&e.exit();Sd;){t=Sd.fn,Sd=Sd.next;try{t()}catch(e){throw Sd?bd():Rd=void 0,e}}Rd=void 0,e&&e.enter()},Kd||_d||Bd||!Ud||!Fd?!Ld&&qd&&qd.resolve?((Cd=qd.resolve(void 0)).constructor=qd,kd=Md(Cd.then,Cd),bd=function(){kd(wd)}):_d?bd=function(){Wd.nextTick(wd)}:(Dd=Md(Dd,Nd),bd=function(){Dd(wd)}):(Pd=!0,Ed=Fd.createTextNode(""),new Ud(wd).observe(Ed,{characterData:!0}),bd=function(){Ed.data=Pd=!Pd}));var Yd=Vd||function(e){var t={fn:e,next:void 0};Rd&&(Rd.next=t),Sd||(Sd=t,bd()),Rd=t},Hd={},jd=Ke,zd=function(e){var t,r;this.promise=new e((function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n})),this.resolve=jd(t),this.reject=jd(r)};Hd.f=function(e){return new zd(e)};var Jd,Qd,Xd,Zd,$d=Qt,eh=ae,th=Hd,rh=function(e,t){if($d(e),eh(t)&&t.constructor===e)return t;var r=th.f(e);return(0,r.resolve)(t),r.promise},nh=C,oh="object"==typeof window,ih=io,ah=C,sh=le,uh=T,ch=Uc,lh=ar.exports,dh=Wc,hh=Su,mh=hi,fh=Hc,ph=Ke,yh=oe,vh=ae,gh=Jc,wh=mr,Sh=xl,Rh=_l,bh=Yl,Ph=Ad.set,Eh=Yd,Ch=rh,kh=function(e,t){var r=nh.console;r&&r.error&&(1==arguments.length?r.error(e):r.error(e,t))},Ah=Hd,Ih=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},xh=Fr,Th=Xn,Nh=oh,Mh=jl,Oh=we,Dh=vt("species"),Kh="Promise",Lh=xh.get,Bh=xh.set,_h=xh.getterFor(Kh),Uh=ch&&ch.prototype,Fh=ch,Wh=Uh,qh=ah.TypeError,Gh=ah.document,Vh=ah.process,Yh=Ah.f,Hh=Yh,jh=!!(Gh&&Gh.createEvent&&ah.dispatchEvent),zh=yh(ah.PromiseRejectionEvent),Jh="unhandledrejection",Qh=!1,Xh=Th(Kh,(function(){var e=wh(Fh),t=e!==String(Fh);if(!t&&66===Oh)return!0;if(Oh>=51&&/native code/.test(e))return!1;var r=new Fh((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(r.constructor={})[Dh]=n,!(Qh=r.then((function(){}))instanceof n)||!t&&Nh&&!zh})),Zh=Xh||!Rh((function(e){Fh.all(e).catch((function(){}))})),$h=function(e){var t;return!(!vh(e)||!yh(t=e.then))&&t},em=function(e,t){if(!e.notified){e.notified=!0;var r=e.reactions;Eh((function(){for(var n=e.value,o=1==e.state,i=0;r.length>i;){var a,s,u,c=r[i++],l=o?c.ok:c.fail,d=c.resolve,h=c.reject,m=c.domain;try{l?(o||(2===e.rejection&&om(e),e.rejection=1),!0===l?a=n:(m&&m.enter(),a=l(n),m&&(m.exit(),u=!0)),a===c.promise?h(qh("Promise-chain cycle")):(s=$h(a))?uh(s,a,d,h):d(a)):h(n)}catch(e){m&&!u&&m.exit(),h(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&rm(e)}))}},tm=function(e,t,r){var n,o;jh?((n=Gh.createEvent("Event")).promise=t,n.reason=r,n.initEvent(e,!1,!0),ah.dispatchEvent(n)):n={promise:t,reason:r},!zh&&(o=ah["on"+e])?o(n):e===Jh&&kh("Unhandled promise rejection",r)},rm=function(e){uh(Ph,ah,(function(){var t,r=e.facade,n=e.value;if(nm(e)&&(t=Ih((function(){Mh?Vh.emit("unhandledRejection",n,r):tm(Jh,r,n)})),e.rejection=Mh||nm(e)?2:1,t.error))throw t.value}))},nm=function(e){return 1!==e.rejection&&!e.parent},om=function(e){uh(Ph,ah,(function(){var t=e.facade;Mh?Vh.emit("rejectionHandled",t):tm("rejectionhandled",t,e.value)}))},im=function(e,t,r){return function(n){e(t,n,r)}},am=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=2,em(e,!0))},sm=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw qh("Promise can't be resolved itself");var n=$h(t);n?Eh((function(){var r={done:!1};try{uh(n,t,im(sm,r,e),im(am,r,e))}catch(t){am(r,t,e)}})):(e.value=t,e.state=1,em(e,!1))}catch(t){am({done:!1},t,e)}}};if(Xh&&(Wh=(Fh=function(e){gh(this,Wh),ph(e),uh(Jd,this);var t=Lh(this);try{e(im(sm,t),im(am,t))}catch(e){am(t,e)}}).prototype,(Jd=function(e){Bh(this,{type:Kh,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=dh(Wh,{then:function(e,t){var r=_h(this),n=r.reactions,o=Yh(bh(this,Fh));return o.ok=!yh(e)||e,o.fail=yh(t)&&t,o.domain=Mh?Vh.domain:void 0,r.parent=!0,n[n.length]=o,0!=r.state&&em(r,!1),o.promise},catch:function(e){return this.then(void 0,e)}}),Qd=function(){var e=new Jd,t=Lh(e);this.promise=e,this.resolve=im(sm,t),this.reject=im(am,t)},Ah.f=Yh=function(e){return e===Fh||e===Xd?new Qd(e):Hh(e)},yh(ch)&&Uh!==Object.prototype)){Zd=Uh.then,Qh||(lh(Uh,"then",(function(e,t){var r=this;return new Fh((function(e,t){uh(Zd,r,e,t)})).then(e,t)}),{unsafe:!0}),lh(Uh,"catch",Wh.catch,{unsafe:!0}));try{delete Uh.constructor}catch(e){}hh&&hh(Uh,Wh)}ih({global:!0,wrap:!0,forced:Xh},{Promise:Fh}),mh(Fh,Kh,!1),fh(Kh),Xd=sh(Kh),ih({target:Kh,stat:!0,forced:Xh},{reject:function(e){var t=Yh(this);return uh(t.reject,void 0,e),t.promise}}),ih({target:Kh,stat:!0,forced:Xh},{resolve:function(e){return Ch(this,e)}}),ih({target:Kh,stat:!0,forced:Zh},{all:function(e){var t=this,r=Yh(t),n=r.resolve,o=r.reject,i=Ih((function(){var r=ph(t.resolve),i=[],a=0,s=1;Sh(e,(function(e){var u=a++,c=!1;s++,uh(r,t,e).then((function(e){c||(c=!0,i[u]=e,--s||n(i))}),o)})),--s||n(i)}));return i.error&&o(i.value),r.promise},race:function(e){var t=this,r=Yh(t),n=r.reject,o=Ih((function(){var o=ph(t.resolve);Sh(e,(function(e){uh(o,t,e).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}});var um=A,cm=function(e,t){var r=[][e];return!!r&&um((function(){r.call(null,t||function(){throw 1},1)}))},lm=Vi.forEach,dm=cm("forEach")?[].forEach:function(e){return lm(this,e,arguments.length>1?arguments[1]:void 0)},hm=C,mm=mc,fm=yc,pm=dm,ym=ir,vm=function(e){if(e&&e.forEach!==pm)try{ym(e,"forEach",pm)}catch(t){e.forEach=pm}};for(var gm in mm)mm[gm]&&vm(hm[gm]&&hm[gm].prototype);vm(fm);var wm=xt,Sm=Yt,Rm=B,bm=function(e,t,r){var n=wm(t);n in e?Sm.f(e,n,Rm(0,r)):e[n]=r},Pm=A,Em=we,Cm=vt("species"),km=function(e){return Em>=51||!Pm((function(){var t=[];return(t.constructor={})[Cm]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Am=io,Im=C,xm=mo,Tm=Ii,Nm=ae,Mm=dn,Om=yn,Dm=ne,Km=bm,Lm=vt,Bm=Qo,_m=km("slice"),Um=Lm("species"),Fm=Im.Array,Wm=Math.max;Am({target:"Array",proto:!0,forced:!_m},{slice:function(e,t){var r,n,o,i=Dm(this),a=Om(i),s=Mm(e,a),u=Mm(void 0===t?a:t,a);if(xm(i)&&(r=i.constructor,(Tm(r)&&(r===Fm||xm(r.prototype))||Nm(r)&&null===(r=r[Um]))&&(r=void 0),r===Fm||void 0===r))return Bm(i,s,u);for(n=new(void 0===r?Fm:r)(Wm(u-s,0)),o=0;s<u;s++,o++)s in i&&Km(n,o,i[s]);return n.length=o,n}}),io({global:!0},{globalThis:C});!function(e){var t=function(e){var t,n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),s=new T(n||[]);return i(a,"_invoke",{value:k(e,r,s)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var m="suspendedStart",f="executing",p="completed",y={};function v(){}function g(){}function w(){}var S={};l(S,s,(function(){return this}));var R=Object.getPrototypeOf,b=R&&R(R(N([])));b&&b!==n&&o.call(b,s)&&(S=b);var P=w.prototype=v.prototype=Object.create(S);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,a,s,u){var c=h(e[i],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"===r(d)&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(e,t,r){var n=m;return function(o,i){if(n===f)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return M()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=A(a,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===m)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var u=h(e,t,r);if("normal"===u.type){if(n=r.done?p:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=p,r.method="throw",r.arg=u.arg)}}}function A(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function N(e){if(e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:M}}function M(){return{value:t,done:!0}}return g.prototype=w,i(P,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:g,configurable:!0}),g.displayName=l(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,l(e,c,"GeneratorFunction")),e.prototype=Object.create(P),e},e.awrap=function(e){return{__await:e}},E(C.prototype),l(C.prototype,u,(function(){return this})),e.AsyncIterator=C,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new C(d(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(P),l(P,c,"Generator"),l(P,s,(function(){return this})),l(P,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:N(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"===("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}({exports:{}});var qm=Rn.includes,Gm=Fs;io({target:"Array",proto:!0},{includes:function(e){return qm(this,e,arguments.length>1?arguments[1]:void 0)}}),Gm("includes");var Vm=ae,Ym=H,Hm=vt("match"),jm=function(e){var t;return Vm(e)&&(void 0!==(t=e[Hm])?!!t:"RegExp"==Ym(e))},zm=jm,Jm=C.TypeError,Qm=function(e){if(zm(e))throw Jm("The method doesn't accept regular expressions");return e},Xm=vt("match"),Zm=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Xm]=!1,"/./"[e](t)}catch(e){}}return!1},$m=io,ef=Qm,tf=ee,rf=Ao,nf=Zm,of=q("".indexOf);$m({target:"String",proto:!0,forced:!nf("includes")},{includes:function(e){return!!~of(rf(tf(this)),rf(ef(e)),arguments.length>1?arguments[1]:void 0)}});var af,sf=io,uf=q,cf=k.f,lf=fn,df=Ao,hf=Qm,mf=ee,ff=Zm,pf=uf("".startsWith),yf=uf("".slice),vf=Math.min,gf=ff("startsWith");function wf(e,t,r){return t=bf(t),function(e,t){if(t&&("object"===Cf(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Af()?Reflect.construct(t,r||[],bf(e).constructor):t.apply(e,r))}function Sf(e,t,r){return Sf=Af()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&Ef(o,r.prototype),o},Sf.apply(null,arguments)}function Rf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bf(e){return bf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},bf(e)}function Pf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Rf(e,t,r[t])}))}return e}function Ef(e,t){return Ef=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ef(e,t)}function Cf(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function kf(e){var t="function"==typeof Map?new Map:void 0;return kf=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Sf(e,arguments,bf(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Ef(r,e)},kf(e)}function Af(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Af=function(){return!!e})()}sf({target:"String",proto:!0,forced:!!(gf||(af=cf(String.prototype,"startsWith"),!af||af.writable))&&!gf},{startsWith:function(e){var t=df(mf(this));hf(e);var r=lf(vf(arguments.length>1?arguments[1]:void 0,t.length)),n=df(e);return pf?pf(t,n,r):yf(t,r,r+n.length)===n}});var If="@tosspayments/client-id";function xf(){try{var e=localStorage.getItem(If);if(null!=e)return e;var t=Math.random().toString(36).substring(2);return localStorage.setItem(If,t),t}catch(e){return"LOCAL_STORAGE_NOT_ACCESSIBLE"}}var Tf=function(e){function t(e){var r,n=e.code,o=e.message;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=wf(this,t,["[".concat(n,"]: ").concat(o)])).isTossPaymentsError=!0,r.message=o,r.code=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ef(e,t)}(t,e),t}(kf(Error));function Nf(e){return!0===(null==e?void 0:e.isTossPaymentsError)}var Mf="___tosspayments_iframe___",Of="___tosspayments_dimmer___";function Df(e,t){var r=document.getElementById(t);if(null!=r)return r;var n=document.createElement(e);return n.id=t,n}function Kf(e){var t=e.id,r=void 0===t?Mf:t,n=e.styles,o=Df("iframe",r);return o.name=r,_f(o,Pf({border:"none"},n)),o}function Lf(e){var t=e.width,r=e.height,n=e.id,o=void 0===n?Mf:n,i=e.styles;return Kf({id:o,styles:Pf({position:"absolute",border:"none",top:"50%",left:"50%",width:"".concat(t,"px"),height:"".concat(r,"px"),marginLeft:"-".concat(t/2,"px"),marginTop:"-".concat(r/2,"px"),backgroundColor:"#707070"},i)})}function Bf(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).styles,t=Df("div",Of);return _f(t,Pf({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",zIndex:"9999999",transform:"translateZ(0)",backgroundColor:"rgba(0, 0, 0, 0.6)",margin:"0",padding:"0"},e)),t}function _f(e,t){for(var r in t)e.style[r]=t[r]}function Uf(e){var t,r,n=6e4*(new Date).getTimezoneOffset(),o=(t=e,(null!=(r=Date)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](t):t instanceof r)?e.getTime():e);return new Date(o-n).toISOString().slice(0,-1)}Kf.centered=Lf;var Ff=sn,Wf=Ao,qf=ee,Gf=C.RangeError,Vf=q,Yf=fn,Hf=Ao,jf=function(e){var t=Wf(qf(this)),r="",n=Ff(e);if(n<0||n==1/0)throw Gf("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(t+=t))1&n&&(r+=t);return r},zf=ee,Jf=Vf(jf),Qf=Vf("".slice),Xf=Math.ceil,Zf=function(e){return function(t,r,n){var o,i,a=Hf(zf(t)),s=Yf(r),u=a.length,c=void 0===n?" ":Hf(n);return s<=u||""==c?a:((i=Jf(c,Xf((o=s-u)/c.length))).length>o&&(i=Qf(i,0,o)),e?a+i:i+a)}},$f={start:Zf(!1),end:Zf(!0)},ep=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(he),tp=$f.start;io({target:"String",proto:!0,forced:ep},{padStart:function(e){return tp(this,e,arguments.length>1?arguments[1]:void 0)}});var rp=io,np=C,op=A,ip=mo,ap=ae,sp=Ze,up=yn,cp=bm,lp=Li,dp=km,hp=we,mp=vt("isConcatSpreadable"),fp=9007199254740991,pp="Maximum allowed index exceeded",yp=np.TypeError,vp=hp>=51||!op((function(){var e=[];return e[mp]=!1,e.concat()[0]!==e})),gp=dp("concat"),wp=function(e){if(!ap(e))return!1;var t=e[mp];return void 0!==t?!!t:ip(e)};function Sp(){var e=new Date,t="".concat(e.getFullYear()).substring(2,4),r="".concat(e.getMonth()+1).padStart(2,"0"),n="".concat(e.getDate()).padStart(2,"0");return"".concat("a").concat(t).concat(r).concat(n).concat(Rp())}rp({target:"Array",proto:!0,forced:!vp||!gp},{concat:function(e){var t,r,n,o,i,a=sp(this),s=lp(a,0),u=0;for(t=-1,n=arguments.length;t<n;t++)if(wp(i=-1===t?a:arguments[t])){if(u+(o=up(i))>fp)throw yp(pp);for(r=0;r<o;r++,u++)r in i&&cp(s,u,i[r])}else{if(u>=fp)throw yp(pp);cp(s,u++,i)}return s.length=u,s}});var Rp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n="",o=r;o--;)n+=e[Math.random()*e.length|0];return n}}("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",32);var bp={clientUrl:void 0,serverUrl:void 0,serverHeaders:{},pgWindowServerUrl:void 0,gtid:void 0,service:void 0},Pp="live",Ep="https://event.tosspayments.com",Cp="c7d4edf18f768b7cb67e880e2cc64aff0c1b50db",kp=Ze,Ap=To;function Ip(e,t,r){return new Promise((function(n,o){var i,a,s,u=new XMLHttpRequest;u.open(e,t,!0),u.addEventListener("error",(function(e){o(Tp(e,u))})),u.addEventListener("timeout",(function(e){o(Tp(e,u))})),u.addEventListener("abort",(function(e){o(Tp(e,u))})),u.addEventListener("load",(function(){if(u.status>=400){var e=xp(u.responseText);return(null==(r=e)?void 0:r.hasOwnProperty("message"))&&(null==r?void 0:r.hasOwnProperty("code"))?o(new Tf(e)):"object"===(void 0===(t=e)?"undefined":Cf(t))&&null!=t&&"ERROR"===t.result?o(new Tf(e.error)):o(e)}var t,r;n(xp(u.response))})),u.withCredentials=null!==(i=null==r?void 0:r.credentials)&&void 0!==i&&i,null==(null==r||null===(a=r.headers)||void 0===a?void 0:a["Content-Type"])&&u.setRequestHeader("Content-Type","application/json"),null!=(null==r?void 0:r.timeout)&&(u.timeout=r.timeout),Object.keys(null!==(s=null==r?void 0:r.headers)&&void 0!==s?s:{}).forEach((function(e){u.setRequestHeader(e,r.headers[e])})),"GET"===e?u.send():u.send(JSON.stringify(null==r?void 0:r.body))}))}function xp(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}function Tp(e,t){var r={type:e.type,errorTimeStamp:e.timeStamp,detail:e};return t&&(r.xhrDetails={status:t.status,statusText:t.statusText,responseURL:t.responseURL,readyState:t.readyState}),r}function Np(){return Mp.apply(this,arguments)}function Mp(){return Mp=o(regeneratorRuntime.mark((function e(){var r,n,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.length>0&&void 0!==o[0]?o[0]:{},n=t({host:window.location.host,phase:Pp,timestamp:Uf(Date.now()),sdk_version:Cp},r),e.next=7;break;case 7:return e.prev=7,e.next=10,Ip("POST","".concat(Ep,"/api/v1/logs"),{body:n});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[7,12]])}))),Mp.apply(this,arguments)}io({target:"Object",stat:!0,forced:A((function(){Ap(1)}))},{keys:function(e){return Ap(kp(e))}});var Op,Dp=function(e,r,n){Np({schema_id:1278649,global_trace_id:bp.gtid,service:bp.service,log_name:"payment::background__request_payment",log_type:"event",event_type:"background",event_name:"background__request_payment",params:t({clientKey:e,paymentMethod:r},n)})},Kp=function(e){var r=e.clientKey,n=e.logName,o=e.params;Np({global_trace_id:bp.gtid,log_name:"payment::background__".concat(n),log_type:"event",event_type:"background",event_name:"background__".concat(n),params:t({clientKey:r},o)})};!function(e){e["ì¤ë¹"]="READY",e["ê²°ì ì¤"]="ON_PAYMENT",e["ìë£"]="DONE"}(Op||(Op={}));var Lp=Op.ì¤ë¹,Bp={get isReady(){return Lp===Op.ì¤ë¹},setReady:function(){Lp=Op.ì¤ë¹},setOnPayment:function(){Lp=Op.ê²°ì ì¤},setDone:function(){Lp=Op.ìë£}},_p=oe,Up=ae,Fp=Su,Wp=function(e,t,r){var n,o;return Fp&&_p(n=t.constructor)&&n!==r&&Up(o=n.prototype)&&o!==r.prototype&&Fp(e,o),e},qp=q(1..valueOf),Gp="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Vp=ee,Yp=Ao,Hp=q("".replace),jp="[\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff]",zp=RegExp("^"+jp+jp+"*"),Jp=RegExp(jp+jp+"*$"),Qp=function(e){return function(t){var r=Yp(Vp(t));return 1&e&&(r=Hp(r,zp,"")),2&e&&(r=Hp(r,Jp,"")),r}},Xp={start:Qp(1),end:Qp(2),trim:Qp(3)},Zp=I,$p=C,ey=q,ty=Xn,ry=ar.exports,ny=tt,oy=Wp,iy=de,ay=xe,sy=kt,uy=A,cy=nn.f,ly=k.f,dy=Yt.f,hy=qp,my=Xp.trim,fy="Number",py=$p.Number,yy=py.prototype,vy=$p.TypeError,gy=ey("".slice),wy=ey("".charCodeAt),Sy=function(e){var t=sy(e,"number");return"bigint"==typeof t?t:Ry(t)},Ry=function(e){var t,r,n,o,i,a,s,u,c=sy(e,"number");if(ay(c))throw vy("Cannot convert a Symbol value to a number");if("string"==typeof c&&c.length>2)if(c=my(c),43===(t=wy(c,0))||45===t){if(88===(r=wy(c,2))||120===r)return NaN}else if(48===t){switch(wy(c,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+c}for(a=(i=gy(c,2)).length,s=0;s<a;s++)if((u=wy(i,s))<48||u>o)return NaN;return parseInt(i,n)}return+c};if(ty(fy,!py(" 0o1")||!py("0b1")||py("+0x1"))){for(var by,Py=function(e){var t=arguments.length<1?0:py(Sy(e)),r=this;return iy(yy,r)&&uy((function(){hy(r)}))?oy(Object(t),r,Py):t},Ey=Zp?cy(py):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Cy=0;Ey.length>Cy;Cy++)ny(py,by=Ey[Cy])&&!ny(Py,by)&&dy(Py,by,ly(py,by));Py.prototype=yy,yy.constructor=Py,ry($p,fy,Py)}var ky=io,Ay=Z,Iy=ne,xy=cm,Ty=q([].join),Ny=Ay!=Object,My=xy("join",",");ky({target:"Array",proto:!0,forced:Ny||!My},{join:function(e){return Ty(Iy(this),void 0===e?",":e)}});var Oy=Vi.map;io({target:"Array",proto:!0,forced:!km("map")},{map:function(e){return Oy(this,e,arguments.length>1?arguments[1]:void 0)}});var Dy=Qt,Ky=function(){var e=Dy(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Ly={},By=A,_y=C.RegExp;Ly.UNSUPPORTED_Y=By((function(){var e=_y("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Ly.BROKEN_CARET=By((function(){var e=_y("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));var Uy=A,Fy=C.RegExp,Wy=Uy((function(){var e=Fy(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)})),qy=A,Gy=C.RegExp,Vy=qy((function(){var e=Gy("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")})),Yy=T,Hy=q,jy=Ao,zy=Ky,Jy=Ly,Qy=qe.exports,Xy=zo,Zy=Fr.get,$y=Wy,ev=Vy,tv=Qy("native-string-replace",String.prototype.replace),rv=RegExp.prototype.exec,nv=rv,ov=Hy("".charAt),iv=Hy("".indexOf),av=Hy("".replace),sv=Hy("".slice),uv=function(){var e=/a/,t=/b*/g;return Yy(rv,e,"a"),Yy(rv,t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),cv=Jy.UNSUPPORTED_Y||Jy.BROKEN_CARET,lv=void 0!==/()??/.exec("")[1];(uv||lv||cv||$y||ev)&&(nv=function(e){var t,r,n,o,i,a,s,u=this,c=Zy(u),l=jy(e),d=c.raw;if(d)return d.lastIndex=u.lastIndex,t=Yy(nv,d,l),u.lastIndex=d.lastIndex,t;var h=c.groups,m=cv&&u.sticky,f=Yy(zy,u),p=u.source,y=0,v=l;if(m&&(f=av(f,"y",""),-1===iv(f,"g")&&(f+="g"),v=sv(l,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==ov(l,u.lastIndex-1))&&(p="(?: "+p+")",v=" "+v,y++),r=new RegExp("^(?:"+p+")",f)),lv&&(r=new RegExp("^"+p+"$(?!\\s)",f)),uv&&(n=u.lastIndex),o=Yy(rv,m?r:u,v),m?o?(o.input=sv(o.input,y),o[0]=sv(o[0],y),o.index=u.lastIndex,u.lastIndex+=o[0].length):u.lastIndex=0:uv&&o&&(u.lastIndex=u.global?o.index+o[0].length:n),lv&&o&&o.length>1&&Yy(tv,o[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&h)for(o.groups=a=Xy(null),i=0;i<h.length;i++)a[(s=h[i])[0]]=o[s[1]];return o});var dv=nv;io({target:"RegExp",proto:!0,forced:/./.exec!==dv},{exec:dv});var hv=q,mv=ar.exports,fv=dv,pv=A,yv=vt,vv=ir,gv=yv("species"),wv=RegExp.prototype,Sv=function(e,t,r,n){var o=yv(e),i=!pv((function(){var t={};return t[o]=function(){return 7},7!=""[e](t)})),a=i&&!pv((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[gv]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return t=!0,null},r[o](""),!t}));if(!i||!a||r){var s=hv(/./[o]),u=t(o,""[e],(function(e,t,r,n,o){var a=hv(e),u=t.exec;return u===fv||u===wv.exec?i&&!o?{done:!0,value:s(t,r,n)}:{done:!0,value:a(r,t,n)}:{done:!1}}));mv(String.prototype,e,u[0]),mv(wv,o,u[1])}n&&vv(wv[o],"sham",!0)},Rv=ic.charAt,bv=function(e,t,r){return t+(r?Rv(e,t).length:1)},Pv=T,Ev=Qt,Cv=oe,kv=H,Av=dv,Iv=C.TypeError,xv=function(e,t){var r=e.exec;if(Cv(r)){var n=Pv(r,e,t);return null!==n&&Ev(n),n}if("RegExp"===kv(e))return Pv(Av,e,t);throw Iv("RegExp#exec called on incompatible receiver")},Tv=T,Nv=Qt,Mv=fn,Ov=Ao,Dv=ee,Kv=Be,Lv=bv,Bv=xv;Sv("match",(function(e,t,r){return[function(t){var r=Dv(this),n=null==t?void 0:Kv(t,e);return n?Tv(n,t,r):new RegExp(t)[e](Ov(r))},function(e){var n=Nv(this),o=Ov(e),i=r(t,n,o);if(i.done)return i.value;if(!n.global)return Bv(n,o);var a=n.unicode;n.lastIndex=0;for(var s,u=[],c=0;null!==(s=Bv(n,o));){var l=Ov(s[0]);u[c]=l,""===l&&(n.lastIndex=Lv(o,Mv(n.lastIndex),a)),c++}return 0===c?null:u}]}));var _v=q,Uv=Ze,Fv=Math.floor,Wv=_v("".charAt),qv=_v("".replace),Gv=_v("".slice),Vv=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Yv=/\$([$&'`]|\d{1,2})/g,Hv=lo,jv=T,zv=q,Jv=Sv,Qv=A,Xv=Qt,Zv=oe,$v=sn,eg=fn,tg=Ao,rg=ee,ng=bv,og=Be,ig=function(e,t,r,n,o,i){var a=r+e.length,s=n.length,u=Yv;return void 0!==o&&(o=Uv(o),u=Vv),qv(i,u,(function(i,u){var c;switch(Wv(u,0)){case"$":return"$";case"&":return e;case"`":return Gv(t,0,r);case"'":return Gv(t,a);case"<":c=o[Gv(u,1,-1)];break;default:var l=+u;if(0===l)return i;if(l>s){var d=Fv(l/10);return 0===d?i:d<=s?void 0===n[d-1]?Wv(u,1):n[d-1]+Wv(u,1):i}c=n[l-1]}return void 0===c?"":c}))},ag=xv,sg=vt("replace"),ug=Math.max,cg=Math.min,lg=zv([].concat),dg=zv([].push),hg=zv("".indexOf),mg=zv("".slice),fg=function(e){return void 0===e?e:String(e)},pg="$0"==="a".replace(/./,"$0"),yg=!!/./[sg]&&""===/./[sg]("a","$0"),vg=!Qv((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));Jv("replace",(function(e,t,r){var n=yg?"$":"$0";return[function(e,r){var n=rg(this),o=null==e?void 0:og(e,sg);return o?jv(o,e,n,r):jv(t,tg(n),e,r)},function(e,o){var i=Xv(this),a=tg(e);if("string"==typeof o&&-1===hg(o,n)&&-1===hg(o,"$<")){var s=r(t,i,a,o);if(s.done)return s.value}var u=Zv(o);u||(o=tg(o));var c=i.global;if(c){var l=i.unicode;i.lastIndex=0}for(var d=[];;){var h=ag(i,a);if(null===h)break;if(dg(d,h),!c)break;""===tg(h[0])&&(i.lastIndex=ng(a,eg(i.lastIndex),l))}for(var m="",f=0,p=0;p<d.length;p++){for(var y=tg((h=d[p])[0]),v=ug(cg($v(h.index),a.length),0),g=[],w=1;w<h.length;w++)dg(g,fg(h[w]));var S=h.groups;if(u){var R=lg([y],g,v,a);void 0!==S&&dg(R,S);var b=tg(Hv(o,void 0,R))}else b=ig(y,a,v,g,S,o);v>=f&&(m+=mg(a,f,v)+b,f=v+y.length)}return m+mg(a,f)}]}),!vg||!pg||yg);var gg=q,wg=Hr.PROPER,Sg=ar.exports,Rg=Qt,bg=de,Pg=Ao,Eg=A,Cg=Ky,kg="toString",Ag=RegExp.prototype,Ig=Ag.toString,xg=gg(Cg),Tg=Eg((function(){return"/a/b"!=Ig.call({source:"a",flags:"b"})})),Ng=wg&&Ig.name!=kg;(Tg||Ng)&&Sg(RegExp.prototype,kg,(function(){var e=Rg(this),t=Pg(e.source),r=e.flags;return"/"+t+"/"+Pg(void 0===r&&bg(Ag,e)&&!("flags"in Ag)?xg(e):r)}),{unsafe:!0});var Mg=Vi.filter;io({target:"Array",proto:!0,forced:!km("filter")},{filter:function(e){return Mg(this,e,arguments.length>1?arguments[1]:void 0)}});var Og=Qo,Dg=Math.floor,Kg=function(e,t){var r=e.length,n=Dg(r/2);return r<8?Lg(e,t):Bg(e,Kg(Og(e,0,n),t),Kg(Og(e,n),t),t)},Lg=function(e,t){for(var r,n,o=e.length,i=1;i<o;){for(n=i,r=e[i];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==i++&&(e[n]=r)}return e},Bg=function(e,t,r,n){for(var o=t.length,i=r.length,a=0,s=0;a<o||s<i;)e[a+s]=a<o&&s<i?n(t[a],r[s])<=0?t[a++]:r[s++]:a<o?t[a++]:r[s++];return e},_g=Kg,Ug=he.match(/firefox\/(\d+)/i),Fg=!!Ug&&+Ug[1],Wg=/MSIE|Trident/.test(he),qg=he.match(/AppleWebKit\/(\d+)\./),Gg=!!qg&&+qg[1],Vg=io,Yg=q,Hg=Ke,jg=Ze,zg=yn,Jg=Ao,Qg=A,Xg=_g,Zg=cm,$g=Fg,ew=Wg,tw=we,rw=Gg,nw=[],ow=Yg(nw.sort),iw=Yg(nw.push),aw=Qg((function(){nw.sort(void 0)})),sw=Qg((function(){nw.sort(null)})),uw=Zg("sort"),cw=!Qg((function(){if(tw)return tw<70;if(!($g&&$g>3)){if(ew)return!0;if(rw)return rw<603;var e,t,r,n,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)nw.push({k:t+n,v:r})}for(nw.sort((function(e,t){return t.v-e.v})),n=0;n<nw.length;n++)t=nw[n].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}}));Vg({target:"Array",proto:!0,forced:aw||!sw||!uw||!cw},{sort:function(e){void 0!==e&&Hg(e);var t=jg(this);if(cw)return void 0===e?ow(t):ow(t,e);var r,n,o=[],i=zg(t);for(n=0;n<i;n++)n in t&&iw(o,t[n]);for(Xg(o,function(e){return function(t,r){return void 0===r?-1:void 0===t?1:void 0!==e?+e(t,r)||0:Jg(t)>Jg(r)?1:-1}}(e)),r=o.length,n=0;n<r;)t[n]=o[n++];for(;n<i;)delete t[n++];return t}});var lw=I,dw=C,hw=q,mw=Xn,fw=Wp,pw=ir,yw=Yt.f,vw=nn.f,gw=de,ww=jm,Sw=Ao,Rw=Ky,bw=Ly,Pw=ar.exports,Ew=A,Cw=tt,kw=Fr.enforce,Aw=Hc,Iw=Wy,xw=Vy,Tw=vt("match"),Nw=dw.RegExp,Mw=Nw.prototype,Ow=dw.SyntaxError,Dw=hw(Rw),Kw=hw(Mw.exec),Lw=hw("".charAt),Bw=hw("".replace),_w=hw("".indexOf),Uw=hw("".slice),Fw=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Ww=/a/g,qw=/a/g,Gw=new Nw(Ww)!==Ww,Vw=bw.UNSUPPORTED_Y,Yw=lw&&(!Gw||Vw||Iw||xw||Ew((function(){return qw[Tw]=!1,Nw(Ww)!=Ww||Nw(qw)==qw||"/a/i"!=Nw(Ww,"i")})));if(mw("RegExp",Yw)){for(var Hw=function(e,t){var r,n,o,i,a,s,u=gw(Mw,this),c=ww(e),l=void 0===t,d=[],h=e;if(!u&&c&&l&&e.constructor===Hw)return e;if((c||gw(Mw,e))&&(e=e.source,l&&(t="flags"in h?h.flags:Dw(h))),e=void 0===e?"":Sw(e),t=void 0===t?"":Sw(t),h=e,Iw&&"dotAll"in Ww&&(n=!!t&&_w(t,"s")>-1)&&(t=Bw(t,/s/g,"")),r=t,Vw&&"sticky"in Ww&&(o=!!t&&_w(t,"y")>-1)&&(t=Bw(t,/y/g,"")),xw&&(i=function(e){for(var t,r=e.length,n=0,o="",i=[],a={},s=!1,u=!1,c=0,l="";n<=r;n++){if("\\"===(t=Lw(e,n)))t+=Lw(e,++n);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:Kw(Fw,Uw(e,n+1))&&(n+=2,u=!0),o+=t,c++;continue;case">"===t&&u:if(""===l||Cw(a,l))throw new Ow("Invalid capture group name");a[l]=!0,i[i.length]=[l,c],u=!1,l="";continue}u?l+=t:o+=t}return[o,i]}(e),e=i[0],d=i[1]),a=fw(Nw(e,t),u?this:Mw,Hw),(n||o||d.length)&&(s=kw(a),n&&(s.dotAll=!0,s.raw=Hw(function(e){for(var t,r=e.length,n=0,o="",i=!1;n<=r;n++)"\\"!==(t=Lw(e,n))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),o+=t):o+="[\\s\\S]":o+=t+Lw(e,++n);return o}(e),r)),o&&(s.sticky=!0),d.length&&(s.groups=d)),e!==h)try{pw(a,"source",""===h?"(?:)":h)}catch(e){}return a},jw=function(e){e in Hw||yw(Hw,e,{configurable:!0,get:function(){return Nw[e]},set:function(t){Nw[e]=t}})},zw=vw(Nw),Jw=0;zw.length>Jw;)jw(zw[Jw++]);Mw.constructor=Hw,Hw.prototype=Mw,Pw(dw,"RegExp",Hw)}Aw("RegExp");var Qw=lo,Xw=T,Zw=q,$w=Sv,eS=jm,tS=Qt,rS=ee,nS=Yl,oS=bv,iS=fn,aS=Ao,sS=Be,uS=Qo,cS=xv,lS=dv,dS=A,hS=Ly.UNSUPPORTED_Y,mS=4294967295,fS=Math.min,pS=[].push,yS=Zw(/./.exec),vS=Zw(pS),gS=Zw("".slice),wS=!dS((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));$w("split",(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n=aS(rS(this)),o=void 0===r?mS:r>>>0;if(0===o)return[];if(void 0===e)return[n];if(!eS(e))return Xw(t,n,e,o);for(var i,a,s,u=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,d=new RegExp(e.source,c+"g");(i=Xw(lS,d,n))&&!((a=d.lastIndex)>l&&(vS(u,gS(n,l,i.index)),i.length>1&&i.index<n.length&&Qw(pS,u,uS(i,1)),s=i[0].length,l=a,u.length>=o));)d.lastIndex===i.index&&d.lastIndex++;return l===n.length?!s&&yS(d,"")||vS(u,""):vS(u,gS(n,l)),u.length>o?uS(u,0,o):u}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:Xw(t,this,e,r)}:t,[function(t,r){var o=rS(this),i=null==t?void 0:sS(t,e);return i?Xw(i,t,o,r):Xw(n,aS(o),t,r)},function(e,o){var i=tS(this),a=aS(e),s=r(n,i,a,o,n!==t);if(s.done)return s.value;var u=nS(i,RegExp),c=i.unicode,l=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(hS?"g":"y"),d=new u(hS?"^(?:"+i.source+")":i,l),h=void 0===o?mS:o>>>0;if(0===h)return[];if(0===a.length)return null===cS(d,a)?[a]:[];for(var m=0,f=0,p=[];f<a.length;){d.lastIndex=hS?0:f;var y,v=cS(d,hS?gS(a,f):a);if(null===v||(y=fS(iS(d.lastIndex+(hS?f:0)),a.length))===m)f=oS(a,f,c);else{if(vS(p,gS(a,m,f)),p.length===h)return p;for(var g=1;g<=v.length-1;g++)if(vS(p,v[g]),p.length===h)return p;f=m=y}}return vS(p,gS(a,m)),p}]}),!wS,hS);var SS={exports:{}},RS=!A((function(){return Object.isExtensible(Object.preventExtensions({}))})),bS=io,PS=q,ES=br,CS=ae,kS=tt,AS=Yt.f,IS=nn,xS=Jo,TS=RS,NS=!1,MS=at("meta"),OS=0,DS=Object.isExtensible||function(){return!0},KS=function(e){AS(e,MS,{value:{objectID:"O"+OS++,weakData:{}}})},LS=SS.exports={enable:function(){LS.enable=function(){},NS=!0;var e=IS.f,t=PS([].splice),r={};r[MS]=1,e(r).length&&(IS.f=function(r){for(var n=e(r),o=0,i=n.length;o<i;o++)if(n[o]===MS){t(n,o,1);break}return n},bS({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:xS.f}))},fastKey:function(e,t){if(!CS(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!kS(e,MS)){if(!DS(e))return"F";if(!t)return"E";KS(e)}return e[MS].objectID},getWeakData:function(e,t){if(!kS(e,MS)){if(!DS(e))return!0;if(!t)return!1;KS(e)}return e[MS].weakData},onFreeze:function(e){return TS&&NS&&DS(e)&&!kS(e,MS)&&KS(e),e}};ES[MS]=!0;var BS=io,_S=C,US=q,FS=Xn,WS=ar.exports,qS=SS.exports,GS=xl,VS=Jc,YS=oe,HS=ae,jS=A,zS=_l,JS=hi,QS=Wp,XS=function(e,t,r){var n=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),i=n?"set":"add",a=_S[e],s=a&&a.prototype,u=a,c={},l=function(e){var t=US(s[e]);WS(s,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(o&&!HS(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return o&&!HS(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!HS(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(FS(e,!YS(a)||!(o||s.forEach&&!jS((function(){(new a).entries().next()})))))u=r.getConstructor(t,e,n,i),qS.enable();else if(FS(e,!0)){var d=new u,h=d[i](o?{}:-0,1)!=d,m=jS((function(){d.has(1)})),f=zS((function(e){new a(e)})),p=!o&&jS((function(){for(var e=new a,t=5;t--;)e[i](t,t);return!e.has(-0)}));f||((u=t((function(e,t){VS(e,s);var r=QS(new a,e,u);return null!=t&&GS(t,r[i],{that:r,AS_ENTRIES:n}),r}))).prototype=s,s.constructor=u),(m||p)&&(l("delete"),l("has"),n&&l("get")),(p||h)&&l(i),o&&s.clear&&delete s.clear}return c[e]=u,BS({global:!0,forced:u!=a},c),JS(u,e),o||r.setStrong(u,e,n),u},ZS=Yt.f,$S=zo,eR=Wc,tR=pi,rR=Jc,nR=xl,oR=Wu,iR=Hc,aR=I,sR=SS.exports.fastKey,uR=Fr.set,cR=Fr.getterFor,lR={getConstructor:function(e,t,r,n){var o=e((function(e,o){rR(e,i),uR(e,{type:t,index:$S(null),first:void 0,last:void 0,size:0}),aR||(e.size=0),null!=o&&nR(o,e[n],{that:e,AS_ENTRIES:r})})),i=o.prototype,a=cR(t),s=function(e,t,r){var n,o,i=a(e),s=u(e,t);return s?s.value=r:(i.last=s={index:o=sR(t,!0),key:t,value:r,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=s),n&&(n.next=s),aR?i.size++:e.size++,"F"!==o&&(i.index[o]=s)),e},u=function(e,t){var r,n=a(e),o=sR(t);if("F"!==o)return n.index[o];for(r=n.first;r;r=r.next)if(r.key==t)return r};return eR(i,{clear:function(){for(var e=a(this),t=e.index,r=e.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete t[r.index],r=r.next;e.first=e.last=void 0,aR?e.size=0:this.size=0},delete:function(e){var t=this,r=a(t),n=u(t,e);if(n){var o=n.next,i=n.previous;delete r.index[n.index],n.removed=!0,i&&(i.next=o),o&&(o.previous=i),r.first==n&&(r.first=o),r.last==n&&(r.last=i),aR?r.size--:t.size--}return!!n},forEach:function(e){for(var t,r=a(this),n=tR(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:r.first;)for(n(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!u(this,e)}}),eR(i,r?{get:function(e){var t=u(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),aR&&ZS(i,"size",{get:function(){return a(this).size}}),o},setStrong:function(e,t,r){var n=t+" Iterator",o=cR(t),i=cR(n);oR(e,t,(function(e,t){uR(this,{type:n,target:e,state:o(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,r=e.last;r&&r.removed;)r=r.previous;return e.target&&(e.last=r=r?r.next:e.state.first)?"keys"==t?{value:r.key,done:!1}:"values"==t?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),r?"entries":"values",!r,!0),iR(t)}};XS("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),lR);var dR=Qt,hR=pl,mR=pi,fR=T,pR=Ze,yR=function(e,t,r,n){try{return n?t(dR(r)[0],r[1]):t(r)}catch(t){hR(e,"throw",t)}},vR=$c,gR=Ii,wR=yn,SR=bm,RR=dl,bR=ol,PR=C.Array,ER=function(e){var t=pR(e),r=gR(this),n=arguments.length,o=n>1?arguments[1]:void 0,i=void 0!==o;i&&(o=mR(o,n>2?arguments[2]:void 0));var a,s,u,c,l,d,h=bR(t),m=0;if(!h||this==PR&&vR(h))for(a=wR(t),s=r?new this(a):PR(a);a>m;m++)d=i?o(t[m],m):t[m],SR(s,m,d);else for(l=(c=RR(t,h)).next,s=r?new this:[];!(u=fR(l,c)).done;m++)d=i?yR(c,o,[u.value,m],!0):u.value,SR(s,m,d);return s.length=m,s},CR=ER;function kR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}io({target:"Array",stat:!0,forced:!_l((function(e){Array.from(e)}))},{from:CR});var AR=I,IR=q,xR=To,TR=ne,NR=IR(N.f),MR=IR([].push),OR=function(e){return function(t){for(var r,n=TR(t),o=xR(n),i=o.length,a=0,s=[];i>a;)r=o[a++],AR&&!NR(n,r)||MR(s,e?[r,n[r]]:n[r]);return s}},DR={entries:OR(!0),values:OR(!1)},KR=DR.values;function LR(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return kR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kR(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}io({target:"Object",stat:!0},{values:function(e){return KR(e)}});var BR=Ze,_R=dn,UR=yn,FR=function(e){for(var t=BR(this),r=UR(t),n=arguments.length,o=_R(n>1?arguments[1]:void 0,r),i=n>2?arguments[2]:void 0,a=void 0===i?r:_R(i,r);a>o;)t[o++]=e;return t},WR=Fs;io({target:"Array",proto:!0},{fill:FR}),WR("fill");var qR=Hr.PROPER,GR=A,VR=Gp,YR=Xp.trim;io({target:"String",proto:!0,forced:function(e){return GR((function(){return!!VR[e]()||"âÂá "!=="âÂá "[e]()||qR&&VR[e].name!==e}))}("trim")},{trim:function(){return YR(this)}});var HR=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},jR=T,zR=Qt,JR=ee,QR=HR,XR=Ao,ZR=Be,$R=xv;Sv("search",(function(e,t,r){return[function(t){var r=JR(this),n=null==t?void 0:ZR(t,e);return n?jR(n,t,r):new RegExp(t)[e](XR(r))},function(e){var n=zR(this),o=XR(e),i=r(t,n,o);if(i.done)return i.value;var a=n.lastIndex;QR(a,0)||(n.lastIndex=0);var s=$R(n,o);return QR(n.lastIndex,a)||(n.lastIndex=a),null===s?-1:s.index}]}));var eb=A,tb=vt("iterator"),rb=!eb((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),r+=n+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[tb]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host})),nb=io,ob=C,ib=le,ab=T,sb=q,ub=rb,cb=ar.exports,lb=Wc,db=hi,hb=hu,mb=Fr,fb=Jc,pb=oe,yb=tt,vb=pi,gb=Eo,wb=Qt,Sb=ae,Rb=Ao,bb=zo,Pb=B,Eb=dl,Cb=ol,kb=_g,Ab=vt("iterator"),Ib="URLSearchParams",xb="URLSearchParamsIterator",Tb=mb.set,Nb=mb.getterFor(Ib),Mb=mb.getterFor(xb),Ob=ib("fetch"),Db=ib("Request"),Kb=ib("Headers"),Lb=Db&&Db.prototype,Bb=Kb&&Kb.prototype,_b=ob.RegExp,Ub=ob.TypeError,Fb=ob.decodeURIComponent,Wb=ob.encodeURIComponent,qb=sb("".charAt),Gb=sb([].join),Vb=sb([].push),Yb=sb("".replace),Hb=sb([].shift),jb=sb([].splice),zb=sb("".split),Jb=sb("".slice),Qb=/\+/g,Xb=Array(4),Zb=function(e){return Xb[e-1]||(Xb[e-1]=_b("((?:%[\\da-f]{2}){"+e+"})","gi"))},$b=function(e){try{return Fb(e)}catch(t){return e}},eP=function(e){var t=Yb(e,Qb," "),r=4;try{return Fb(t)}catch(e){for(;r;)t=Yb(t,Zb(r--),$b);return t}},tP=/[!'()~]|%20/g,rP={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},nP=function(e){return rP[e]},oP=function(e){return Yb(Wb(e),tP,nP)},iP=function(e,t){if(t)for(var r,n,o=zb(t,"&"),i=0;i<o.length;)(r=o[i++]).length&&(n=zb(r,"="),Vb(e,{key:eP(Hb(n)),value:eP(Gb(n,"="))}))},aP=function(e){this.entries.length=0,iP(this.entries,e)},sP=function(e,t){if(e<t)throw Ub("Not enough arguments")},uP=hb((function(e,t){Tb(this,{type:xb,iterator:Eb(Nb(e).entries),kind:t})}),"Iterator",(function(){var e=Mb(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r})),cP=function(){fb(this,lP);var e,t,r,n,o,i,a,s,u,c=arguments.length>0?arguments[0]:void 0,l=this,d=[];if(Tb(l,{type:Ib,entries:d,updateURL:function(){},updateSearchParams:aP}),void 0!==c)if(Sb(c))if(e=Cb(c))for(r=(t=Eb(c,e)).next;!(n=ab(r,t)).done;){if(i=(o=Eb(wb(n.value))).next,(a=ab(i,o)).done||(s=ab(i,o)).done||!ab(i,o).done)throw Ub("Expected sequence with length 2");Vb(d,{key:Rb(a.value),value:Rb(s.value)})}else for(u in c)yb(c,u)&&Vb(d,{key:u,value:Rb(c[u])});else iP(d,"string"==typeof c?"?"===qb(c,0)?Jb(c,1):c:Rb(c))},lP=cP.prototype;if(lb(lP,{append:function(e,t){sP(arguments.length,2);var r=Nb(this);Vb(r.entries,{key:Rb(e),value:Rb(t)}),r.updateURL()},delete:function(e){sP(arguments.length,1);for(var t=Nb(this),r=t.entries,n=Rb(e),o=0;o<r.length;)r[o].key===n?jb(r,o,1):o++;t.updateURL()},get:function(e){sP(arguments.length,1);for(var t=Nb(this).entries,r=Rb(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){sP(arguments.length,1);for(var t=Nb(this).entries,r=Rb(e),n=[],o=0;o<t.length;o++)t[o].key===r&&Vb(n,t[o].value);return n},has:function(e){sP(arguments.length,1);for(var t=Nb(this).entries,r=Rb(e),n=0;n<t.length;)if(t[n++].key===r)return!0;return!1},set:function(e,t){sP(arguments.length,1);for(var r,n=Nb(this),o=n.entries,i=!1,a=Rb(e),s=Rb(t),u=0;u<o.length;u++)(r=o[u]).key===a&&(i?jb(o,u--,1):(i=!0,r.value=s));i||Vb(o,{key:a,value:s}),n.updateURL()},sort:function(){var e=Nb(this);kb(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,r=Nb(this).entries,n=vb(e,arguments.length>1?arguments[1]:void 0),o=0;o<r.length;)n((t=r[o++]).value,t.key,this)},keys:function(){return new uP(this,"keys")},values:function(){return new uP(this,"values")},entries:function(){return new uP(this,"entries")}},{enumerable:!0}),cb(lP,Ab,lP.entries,{name:"entries"}),cb(lP,"toString",(function(){for(var e,t=Nb(this).entries,r=[],n=0;n<t.length;)e=t[n++],Vb(r,oP(e.key)+"="+oP(e.value));return Gb(r,"&")}),{enumerable:!0}),db(cP,Ib),nb({global:!0,forced:!ub},{URLSearchParams:cP}),!ub&&pb(Kb)){var dP=sb(Bb.has),hP=sb(Bb.set),mP=function(e){if(Sb(e)){var t,r=e.body;if(gb(r)===Ib)return t=e.headers?new Kb(e.headers):new Kb,dP(t,"content-type")||hP(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),bb(e,{body:Pb(0,Rb(r)),headers:Pb(0,t)})}return e};if(pb(Ob)&&nb({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Ob(e,arguments.length>1?mP(arguments[1]):{})}}),pb(Db)){var fP=function(e){return fb(this,Lb),new Db(e,arguments.length>1?mP(arguments[1]):{})};Lb.constructor=fP,fP.prototype=Lb,nb({global:!0,forced:!0},{Request:fP})}}var pP={URLSearchParams:cP,getState:Nb},yP=xl,vP=bm;function gP(e){if(null!=Object.fromEntries)return Object.fromEntries(e);for(var t={},r=0,n=Array.from(e);r<n.length;r++){var o=LR(n[r],2),i=o[0],a=o[1];t[i]=a}return t}io({target:"Object",stat:!0},{fromEntries:function(e){var t={};return yP(e,(function(e,r){vP(t,e,r)}),{AS_ENTRIES:!0}),t}});var wP={create:function(e){var t=Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&");return t?"?".concat(t):""},parse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"!=typeof location?location.search:"",t=e.trim().replace(/^[?#&]/,"");return gP(new URLSearchParams(t))},get:function(e,t){var r=wP.parse()[e];return null==t||null==r?r:t(r)}},SP=io,RP=A,bP=ne,PP=k.f,EP=I,CP=RP((function(){PP(1)}));SP({target:"Object",stat:!0,forced:!EP||CP,sham:!EP},{getOwnPropertyDescriptor:function(e,t){return PP(bP(e),t)}});var kP=Bn,AP=ne,IP=k,xP=bm;io({target:"Object",stat:!0,sham:!I},{getOwnPropertyDescriptors:function(e){for(var t,r,n=AP(e),o=IP.f,i=kP(n),a={},s=0;i.length>s;)void 0!==(r=o(n,t=i[s++]))&&xP(a,t,r);return a}}),io({target:"Number",stat:!0},{isNaN:function(e){return e!=e}}),XS("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),lR);var TP=io,NP=Vi.find,MP=Fs,OP="find",DP=!0;OP in[]&&Array(1).find((function(){DP=!1})),TP({target:"Array",proto:!0,forced:DP},{find:function(e){return NP(this,e,arguments.length>1?arguments[1]:void 0)}}),MP(OP);var KP=DR.entries;function LP(e){var t,r;return e.startsWith("test_")?null!==(r=bp.clientUrl)&&void 0!==r?r:"https://payment-gateway-sandbox.tosspayments.com":null!==(t=bp.clientUrl)&&void 0!==t?t:"https://payment-gateway.tosspayments.com"}function BP(e){var t,r;return e.startsWith("test_")?null!==(r=bp.pgWindowServerUrl)&&void 0!==r?r:"https://apigw-sandbox.tosspayments.com":null!==(t=bp.pgWindowServerUrl)&&void 0!==t?t:"https://apigw.tosspayments.com"}io({target:"Object",stat:!0},{entries:function(e){return KP(e)}});var _P="INVALID_PARAMETER",UP="USER_CANCEL",FP="FORBIDDEN_SCRIPT",WP="NETWORK_ERROR";function qP(){return/MSIE|Trident/i.test(window.navigator.userAgent)}function GP(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window)||!qP()&&/android/i.test(window.navigator.userAgent)}var VP=[];function YP(e){var t=e.data;if(function(e){return!0===(null==e?void 0:e.tosspayments)}(t)){var r,n=b(VP);try{for(n.s();!(r=n.n()).done;){(0,r.value)({target:t.window,type:t.type,params:t.params})}}catch(e){n.e(e)}finally{n.f()}}}var HP={add:function(e){1===(VP=[].concat(w(VP),[e])).length&&window.addEventListener("message",YP)},remove:function(e){0===(VP=VP.filter((function(t){return t!==e}))).length&&window.removeEventListener("message",YP)},consume:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return new Promise((function(r){e.add((function n(o){t(o)&&(r(o),e.remove(n))}))}))},clear:function(){VP=[],window.removeEventListener("message",YP)}};function jP(e){return zP.apply(this,arguments)}function zP(){return zP=o(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.clientKey,n=t.method,o=t.requestParams,e.prev=1,e.next=4,JP({clientKey:r,method:n,requestParams:o});case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),!Nf(e.t0)){e.next=11;break}return e.abrupt("return",Promise.reject(e.t0));case 11:return e.abrupt("return",Promise.reject(new Tf({code:WP,message:"ë¤í¸ìí¬ ì¤ë¥ê° ë°ìíìµëë¤."})));case 12:case"end":return e.stop()}}),e,null,[[1,7]])}))),zP.apply(this,arguments)}function JP(e){return QP.apply(this,arguments)}function QP(){return QP=o(regeneratorRuntime.mark((function e(r){var n,o,i,a,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.clientKey,o=r.method,i=r.requestParams,a=BP(n),s={isMobile:GP(),Authorization:XP(n),billingParameter:JSON.stringify(t(t({},i),{},{payMethod:o}))},e.next=5,Ip("GET","".concat(a,"/payment-gateway-window/open/pg-window/v3/billing/route").concat(wP.create(s)),{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},timeout:6e4});case 5:return u=e.sent,e.abrupt("return",u.data);case 7:case"end":return e.stop()}}),e)}))),QP.apply(this,arguments)}function XP(e){return"Basic ".concat(window.btoa("".concat(e,":")))}function ZP(e,t,r,n){return $P.apply(this,arguments)}function $P(){return $P=o(regeneratorRuntime.mark((function e(t,r,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GP()){e.next=6;break}return e.next=3,rE(t,r,n,o);case 3:return e.abrupt("return");case 6:return e.abrupt("return",eE(t,r,n,o));case 7:case"end":return e.stop()}}),e)}))),$P.apply(this,arguments)}function eE(e,t,r,n){return tE.apply(this,arguments)}function tE(){return tE=o(regeneratorRuntime.mark((function e(t,r,n,o){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("SELF"!==(null==n||null===(i=n.windowTarget)||void 0===i?void 0:i.toUpperCase())){e.next=5;break}return aE(t,r,n,o),e.abrupt("return");case 5:return e.abrupt("return",oE(t,r,n,o));case 6:case"end":return e.stop()}}),e)}))),tE.apply(this,arguments)}function rE(e,t,r,n){return nE.apply(this,arguments)}function nE(){return nE=o(regeneratorRuntime.mark((function e(t,r,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:aE(t,r,n,o);case 1:case"end":return e.stop()}}),e)}))),nE.apply(this,arguments)}function oE(e,t,r,n){return iE.apply(this,arguments)}function iE(){return iE=o(regeneratorRuntime.mark((function e(t,r,n,o){var i,a,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bf(),(a=Lf({width:650,height:650,styles:{borderRadius:"20px"}})).title="í ì¤íì´ë¨¼ì¸  ì ìê²°ì ",a.src=sE(t,r,n,o),i.appendChild(a),document.body.appendChild(i),e.next=8,HP.consume((function(e){var t=e.target,r=e.type;return"LEGACY"===t&&["success","fail","cancel"].includes(r)}));case 8:s=e.sent,document.body.removeChild(i),Bp.setReady(),e.t0=s.type,e.next="success"===e.t0?14:"fail"===e.t0?15:(e.t0,17);break;case 14:return e.abrupt("return",s.params);case 15:throw u=s.params,new Tf({code:u.code,message:u.message});case 17:throw new Tf({code:UP,message:"ê²°ì ê° ì·¨ìëììµëë¤."});case 18:case"end":return e.stop()}}),e)}))),iE.apply(this,arguments)}function aE(e,t,r,n){location.href=sE(e,t,r,n)}function sE(e,r,n,o){var i=o.referer,a=GP()?"mobile":"pc",s="".concat(LP(e),"/billing/").concat(a);return"".concat(s).concat(wP.create({clientKey:e,isMobile:GP(),payload:JSON.stringify(t(t({},n),{},{referer:"null"!==location.origin?location.origin:i,payMethod:r})),gtid:bp.gtid}))}function uE(e,t,r){return cE.apply(this,arguments)}function cE(){return cE=o(regeneratorRuntime.mark((function e(r,n,o){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bp.isReady){e.next=2;break}return e.abrupt("return");case 2:return Bp.setOnPayment(),Kp({clientKey:r,logName:"request_billing_auth",params:t(t({},o),{},{paymentMethod:n})}),e.next=6,jP({clientKey:r,method:n,requestParams:o});case 6:return i=e.sent,a=i.referer,e.abrupt("return",ZP(r,n,o,{referer:a}));case 9:case"end":return e.stop()}}),e)}))),cE.apply(this,arguments)}var lE=function(){function e(t,r,n){i(this,e),this.stage=t,this.service=r,this.context=n}return s(e,[{key:"info",value:function(e,t){this.printLog("INFO",e,t)}},{key:"error",value:function(e,t){this.printLog("ERROR",e,t)}},{key:"setOrderId",value:function(e){this.context.orderId=e}},{key:"printLog",value:function(e,t,r){console.groupCollapsed("%c[LOG: ".concat(e,"]%c: ").concat(t),"color: white; font-weight: normal; background-color: #47556c; padding: 2px;","color: white; font-weight: normal; background-color: #64ad0d; padding: 2px;"),console.table(r),console.table({stage:this.stage}),console.table(this.context),console.groupEnd()}}]),e}(),dE="sandbox",hE="staging",mE="dev",fE=Object.defineProperty,pE=Object.defineProperties,yE=Object.getOwnPropertyDescriptors,vE=Object.getOwnPropertySymbols,gE=Object.prototype.hasOwnProperty,wE=Object.prototype.propertyIsEnumerable,SE=function(e,t,r){return t in e?fE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},RE=function(e,t){for(var r in t||(t={}))gE.call(t,r)&&SE(e,r,t[r]);if(vE){var n,o=b(vE(t));try{for(o.s();!(n=o.n()).done;){r=n.value;wE.call(t,r)&&SE(e,r,t[r])}}catch(e){o.e(e)}finally{o.f()}}return e},bE=function(e,t){return pE(e,yE(t))},PE=function(e,t,r){return new Promise((function(n,o){var i=function(e){try{s(r.next(e))}catch(e){o(e)}},a=function(e){try{s(r.throw(e))}catch(e){o(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,a)};s((r=r.apply(e,t)).next())}))};function EE(e){return function(t){return(null==t?void 0:t.toLowerCase())===e}}var CE=EE(dE),kE=EE(hE),AE=EE(mE),IE=EE("test"),xE=EE("local");function TE(e){return Object.keys(e).reduce((function(t,r){return bE(RE({},t),u({},r,function(e){if("string"==typeof e)return e;if("number"==typeof e)return"".concat(e);return JSON.stringify(e)}(e[r])))}),{})}var NE=function(){function e(t,r){i(this,e),this.phase=t,this.internal=r}return s(e,[{key:"requestLog",value:function(e){return PE(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.internal?OE(this.phase):ME(this.phase),"/v1/log"),{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"log=".concat(DE(JSON.stringify(TE(e))))});case 2:return t.abrupt("return");case 3:case"end":return t.stop()}}),t,this)})))}}]),e}();function ME(e){return AE(e)?"https://log-dev.tosspayments.com":kE(e)?"https://log-staging.tosspayments.com":CE(e)?"https://log-sandbox.tosspayments.com":"https://log.tosspayments.com"}function OE(e){return AE(e)?"https://log.dev.rnd-tosspayments.bz":kE(e)?"https://log.staging.tosspayments.bz":CE(e)?"https://log.sandbox.tosspayments.bz":"https://log.live.tosspayments.bz"}function DE(e){try{return encodeURIComponent(e)}catch(e){return"encode fail"}}var KE=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.options={debug:null!=(t=r.debug)&&t}}return s(e,[{key:"init",value:function(e){}},{key:"updateContext",value:function(e){}},{key:"log",value:function(e){return this.options.debug&&console.log("[HappyLogger:DebugMode] ",e),Promise.resolve()}},{key:"info",value:function(e){return this.log(e)}},{key:"error",value:function(e){return this.log(e)}},{key:"warn",value:function(e){return this.log(e)}}]),e}(),LE=function(){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.logClient=t,this.deviceNameParser=r,this.context={},this.options={debug:null!=(n=o.debug)&&n}}return s(e,[{key:"init",value:function(e){this.context=e,null!=this.context&&null==this.context.deviceName&&(this.context.deviceName=this.deviceNameParser.parse())}},{key:"updateContext",value:function(e){this.context=RE(RE({},this.context),e)}},{key:"log",value:function(e){return PE(this,null,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=bE(RE(RE({},this.context),e),{eventTimestamp:(o=null!=(r=e.eventTimeStamp)?r:Date.now(),i=void 0,a=void 0,i=6e4*(new Date).getTimezoneOffset(),a=o instanceof Date?o.getTime():o,new Date(a-i).toISOString().slice(0,-1))}),this.options.debug&&console.log("[HappyLogger:DebugMode] ",n),t.next=5,this.logClient.requestLog(n);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.options.debug&&console.log("[HappyLogger:DebugMode] fail to send log",t.t0);case 10:return t.abrupt("return");case 11:case"end":return t.stop()}var o,i,a}),t,this,[[0,7]])})))}},{key:"info",value:function(e){return PE(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.log(RE({level:"info"},e)));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"error",value:function(e){return PE(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.log(RE({level:"error"},e)));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"warn",value:function(e){return PE(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.log(RE({level:"warn"},e)));case 1:case"end":return t.stop()}}),t,this)})))}}]),e}();var BE=function(){function e(){i(this,e)}return s(e,[{key:"parse",value:function(){return"node"}}]),e}(),_E="PCChrome",UE="PCSafari",FE="MobileChrome",WE="MobileSafari",qE="AndroidWebView",GE="iOSWebView",VE="unknown";function YE(e){var t=e.userAgentString.toLowerCase(),r=VE,n=VE;return/mobile/i.test(t)?/android/i.test(t)?t.includes(" wv")?(r=qE,n=jE(t)):t.includes("chrome")&&(r=FE,n=jE(t)):/iphone|ipad|ipod/i.test(t)&&(e.isSafariWebview?(r=GE,n=zE(t)):t.includes("crios")?(r=FE,n=function(e){return HE(e,/crios\/(\d+)/)}(t)):t.includes("safari")&&(r=WE,n=zE(t))):t.includes("chrome")?(r=_E,n=jE(t)):t.includes("safari")&&!t.includes("chrome")&&(r=UE,n=zE(t)),{type:r,version:n}}function HE(e,t){var r=e.match(t);return r?r[1]:VE}function jE(e){return HE(e,/chrome\/(\d+)/)}function zE(e){return HE(e,/version\/(\d+)/)}var JE=function(){function e(){i(this,e)}return s(e,[{key:"parse",value:function(){var e,t;try{var r=null==(e=null==window?void 0:window.navigator)?void 0:e.userAgent;if(null==r)return"".concat(VE," - emptyUserAgent");var n=YE({userAgentString:r,isSafariWebview:null!=(null==(t=window.webkit)?void 0:t.messageHandlers)}),o=n.type,i=n.version;return"".concat(o," - ").concat(i)}catch(e){return"".concat(VE," - ").concat(null==e?void 0:e.message)}}}]),e}();function QE(e){var t=e.phase,r=e.debug,n=e.internal,o=void 0!==n&&n;if(IE(t)||xE(t))return new KE({debug:r});try{return new LE(new NE(t,o),null==window?new BE:new JE,{debug:r})}catch(e){return new KE({debug:r})}}var XE=function(){function e(r,n,o){i(this,e),this.happyLoggerInstance=QE({phase:r}),this.happyLoggerInstance.init(t({service:n},o))}return s(e,[{key:"setOrderId",value:function(e){this.happyLoggerInstance.updateContext({orderId:e})}},{key:"info",value:function(e,r){this.happyLoggerInstance.info(t({message:e},r))}},{key:"error",value:function(e,r){this.happyLoggerInstance.error(t({message:e},r))}}]),e}(),ZE=["isActiveDebugLogger","stage","service"];function $E(e){var t=e.isActiveDebugLogger,r=e.stage,n=e.service,o=p(e,ZE);return t?new XE(r,n,o):new lE(r,n,o)}function eC(e){return"baemin"===e?"live":e.startsWith("baemin-")?e.replace("baemin-",""):e}function tC(){var e=document.getElementById("___tosspayments_dimmer___");null!=e&&(document.body.removeChild(e),Bp.setReady())}var rC={"ì¹´ë":"CARD","ê°ìê³ì¢":"VIRTUAL_ACCOUNT","í´ëí°":"MOBILE_PHONE","í ì¤íì´":"TOSSPAY","í ì¤ê²°ì ":"TOSSPAY","ê³ì¢ì´ì²´":"TRANSFER","ë¬¸íìíê¶":"CULTURE_GIFT_CERTIFICATE","ê²ìë¬¸íìíê¶":"GAME_GIFT_CERTIFICATE","ëìë¬¸íìíê¶":"BOOK_GIFT_CERTIFICATE","í´ì¸ê°í¸ê²°ì ":"FOREIGN_EASY_PAY","ë¯¸ì í":""};function nC(e){if("string"==typeof(t=e)&&Object.keys(rC).includes(t))return rC[e];var t,r=e.toUpperCase();return function(e){return"string"==typeof e&&Object.values(rC).includes(e)}(r)?r:"CARD"}function oC(e){return null!=e.successUrl&&null!=e.failUrl||null!=e.successUrl&&null!=e.failUrl&&null!=e.pendingUrl||null==e.successUrl&&null==e.failUrl&&null!=e.pendingUrl}function iC(e,t,r,n){return aC.apply(this,arguments)}function aC(){return(aC=o(regeneratorRuntime.mark((function e(t,r,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GP()){e.next=5;break}return e.next=3,cC(t,n,o);case 3:e.next=7;break;case 5:return e.next=7,sC(t,r,n,o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sC(e,t,r,n){return uC.apply(this,arguments)}function uC(){return(uC=o(regeneratorRuntime.mark((function e(t,r,n,o){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("FOREIGN_EASY_PAY"===r.toUpperCase())&&"SELF"!==(null==n||null===(i=n.windowTarget)||void 0===i?void 0:i.toUpperCase())){e.next=6;break}Bp.setReady(),mC(t,n,o),e.next=8;break;case 6:return e.next=8,fC(t,n,o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cC(e,t,r){return lC.apply(this,arguments)}function lC(){return(lC=o(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mC(t,r,n);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dC(e,t,r){var n=LP(e),o=GP()?"mobile":"pc",i=hC(t)?"".concat(n,"/").concat(o,"/direct"):GP()?"".concat(n,"/mobile"):"".concat(n);return"".concat(i).concat(wP.create({clientKey:e,isMobile:GP(),isPromise:null==r?void 0:r.isPromise,mId:t.mId,paymentToken:r.token,gtid:bp.gtid}))}function hC(e){var t;return"DIRECT"===(null==e||null===(t=e.flowMode)||void 0===t?void 0:t.toUpperCase())}function mC(e,t,r){location.href=dC(e,t,r)}function fC(e,t,r){return pC.apply(this,arguments)}function pC(){return(pC=o(regeneratorRuntime.mark((function e(t,r,n){var o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Bf(),(i=hC(r)?Kf({styles:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}}):Lf({width:650,height:650,styles:{borderRadius:"20px"}})).title="í ì¤íì´ë¨¼ì¸  ì ìê²°ì ",i.src=dC(t,r,n),o.appendChild(i),document.body.appendChild(o),e.next=8,HP.consume((function(e){var t=e.target,r=e.type;return"LEGACY"===t&&["success","fail","cancel"].includes(r)}));case 8:a=e.sent,document.body.removeChild(o),Bp.setReady(),e.t0=a.type,e.next="success"===e.t0?14:"fail"===e.t0?15:(e.t0,17);break;case 14:return e.abrupt("return",a.params);case 15:throw s=a.params,new Tf({code:s.code,message:s.message});case 17:throw new Tf({code:UP,message:"ê²°ì ê° ì·¨ìëììµëë¤."});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}iC.async=function(e,t,r){return fC(e,t,r)};var yC=["clientKey","isPromise"];function vC(e){return gC.apply(this,arguments)}function gC(){return(gC=o(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!EC(r)){e.next=5;break}return e.next=4,wC(t(t({},r),{},{language:PC(r)}));case 4:case 7:return e.abrupt("return",e.sent);case 5:return e.next=7,wC(r);case 10:if(e.prev=10,e.t0=e.catch(0),!Nf(e.t0)){e.next=14;break}return e.abrupt("return",Promise.reject(e.t0));case 14:return Kp({clientKey:r.clientKey,logName:"error_validate_api",params:{error:e.t0}}),e.abrupt("return",Promise.reject(new Tf({code:WP,message:"ë¤í¸ìí¬ ì¤ë¥ê° ë°ìíìµëë¤."})));case 16:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function wC(e){return SC.apply(this,arguments)}function SC(){return SC=o(regeneratorRuntime.mark((function e(r){var n,o,i,a,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.clientKey,o=r.isPromise,i=p(r,yC),a=BP(n),s=t({Authorization:RC(n)},null!=i.mId?{"tosspayments-mid":i.mId}:{}),u={clientKey:n,isMobile:GP(),isPromise:o,paymentParameter:JSON.stringify(i)},e.next=6,Ip("POST","".concat(a,"/payment-gateway-window/open/pg-window/v1/px-payment-parameters").concat(wP.create(s)),{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:bC(u),timeout:6e4});case 6:return c=e.sent,l=c.data,e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)}))),SC.apply(this,arguments)}function RC(e){return"Basic ".concat(window.btoa("".concat(e,":")))}function bC(e){return Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}function PC(e){return EC(e)&&null!=e.language?e.language:EC(e)&&e.useInternationalCardOnly&&"USD"===e.currency?"EN":EC(e)&&e.useInternationalCardOnly&&"JPY"===e.currency?"JA":void 0}function EC(e){return"CARD"===e.methodType}function CC(e,t,r){return kC.apply(this,arguments)}function kC(){return(kC=o(regeneratorRuntime.mark((function e(t,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oC(n)){e.next=2;break}return e.abrupt("return",AC(t,r,n));case 2:return e.abrupt("return",AC.async(t,r,n));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AC(e,t,r){return IC.apply(this,arguments)}function IC(){return(IC=o(regeneratorRuntime.mark((function e(r,n,o){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vC(t(t({},o),{},{clientKey:r,isPromise:!1}));case 2:return i=e.sent,a=i.token,e.abrupt("return",iC(r,n,o,{token:a}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xC(e){return KC.includes(e)}function TC(e){return DC.includes(e)}AC.async=function(){var e=o(regeneratorRuntime.mark((function e(r,n,o){var i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!GP()){e.next=2;break}throw new Tf({code:_P,message:"ëª¨ë°ì¼ íë©´ììë Promise ë°©ìì ì§ìíì§ ììµëë¤."});case 2:if("self"!==o.windowTarget){e.next=4;break}throw new Tf({code:_P,message:'windowTarget="self"ë Promise ë°©ìì ì§ìíì§ ììµëë¤.'});case 4:if(!Object.keys(o).some((function(e){return["successUrl","failUrl"].includes(e)}))){e.next=6;break}throw new Tf({code:_P,message:'"successUrl" ëë "failUrl"ì ëê¸´ ê²½ì° Promise ë°©ìì ì§ìíì§ ììµëë¤.'});case 6:if(n!==rC.í´ì¸ê°í¸ê²°ì ){e.next=8;break}throw new Tf({code:_P,message:"í´ì¸ê°í¸ê²°ì ë Promise ë°©ìì ì§ìíì§ ììµëë¤."});case 8:return e.next=10,vC(t(t({},o),{},{clientKey:r,isPromise:!0}));case 10:return i=e.sent,a=i.token,e.abrupt("return",iC.async(r,o,{token:a,isPromise:!0}));case 13:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}();var NC="INVALID_CLIENT_KEY";function MC(e){if(xC(e)){var t=OC.find((function(t){return t.liveClientKey===e}));if(null==t)throw new Tf({code:NC,message:"ë³ê²½ë í´ë¼ì´ì¸í¸í¤ ì ì±ì´ ë°ìëì§ ìììµëë¤. í ì¤íì´ë¨¼ì¸ ì ë¬¸ìí´ì£¼ì¸ì. clientKey: ".concat(e)});return t.mid}if(TC(e)){var r=OC.find((function(t){return t.testClientKey===e}));if(null==r)throw new Tf({code:NC,message:"ë³ê²½ë í´ë¼ì´ì¸í¸í¤ ì ì±ì´ ë°ìëì§ ìììµëë¤. í ì¤íì´ë¨¼ì¸ ì ë¬¸ìí´ì£¼ì¸ì. clientKey: ".concat(e)});return r.tmid}throw new Tf({code:NC,message:"ë³ê²½ë í´ë¼ì´ì¸í¸í¤ ì ì±ì´ ë°ìëì§ ìììµëë¤. í ì¤íì´ë¨¼ì¸ ì ë¬¸ìí´ì£¼ì¸ì. clientKey: ".concat(e)})}var OC=[{mid:"idfarm9nnn",tmid:"tidfarm9nnn",liveClientKey:"live_ck_zZ0RnYX2w532b7Z9Yl3NeyqApQEJ",testClientKey:"test_ck_MGjLJoQ1aVZZqQjv1eJVw6KYe2RN"},{mid:"staygolf",tmid:"tstaygolf",liveClientKey:"live_ck_qLlDJaYngrokMekX7YlrezGdRpXx",testClientKey:"test_ck_dP9BRQmyarYnWQpwKM28J07KzLNk"},{mid:"lookpi1osy",tmid:"tlookpi1osy",liveClientKey:"live_ck_OEP59LybZ8Bv9gA6MQB86GYo7pRe",testClientKey:"test_ck_N5OWRapdA8dwEO67QGbro1zEqZKL"}],DC=OC.map((function(e){return e.testClientKey})),KC=OC.map((function(e){return e.liveClientKey})),LC=["cardCompany"];function BC(e,r,n){var o=function(e,t){var r=g("string"==typeof e?[e,t]:[void 0,e],2),n=r[0],o=r[1];return{rawMethod:n,rawParams:o}}(r,n),i=o.rawMethod,a=o.rawParams,s=function(e,r){if(e===rC.í ì¤íì´){var n=r;n.cardCompany;var o=p(n,LC);return{processedMethodCode:rC.ì¹´ë,processedParams:t(t({},o),{},{flowMode:"DIRECT",easyPay:"TOSSPAY"})}}return{processedMethodCode:e,processedParams:r}}(void 0===i?rC.ë¯¸ì í:nC(i),a),u=s.processedMethodCode,c=function(e,r){if(function(e){return xC(e)||TC(e)}(e))return{params:t(t({},r),{},{mId:MC(e)})};return{params:r}}(e,s.processedParams);return{methodCode:u,decidedParams:t(t({},c.params),{},{methodType:u})}}var _C,UC=I,FC=q,WC=T,qC=A,GC=To,VC=Nn,YC=N,HC=Ze,jC=Z,zC=Object.assign,JC=Object.defineProperty,QC=FC([].concat),XC=!zC||qC((function(){if(UC&&1!==zC({b:1},zC(JC({},"a",{enumerable:!0,get:function(){JC(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=zC({},e)[r]||GC(zC({},t)).join("")!=n}))?function(e,t){for(var r=HC(e),n=arguments.length,o=1,i=VC.f,a=YC.f;n>o;)for(var s,u=jC(arguments[o++]),c=i?QC(GC(u),i(u)):GC(u),l=c.length,d=0;l>d;)s=c[d++],UC&&!WC(a,u,s)||(r[s]=u[s]);return r}:zC,ZC=q,$C=2147483647,ek=/[^\0-\u007E]/,tk=/[.\u3002\uFF0E\uFF61]/g,rk="Overflow: input needs wider integers to process",nk=C.RangeError,ok=ZC(tk.exec),ik=Math.floor,ak=String.fromCharCode,sk=ZC("".charCodeAt),uk=ZC([].join),ck=ZC([].push),lk=ZC("".replace),dk=ZC("".split),hk=ZC("".toLowerCase),mk=function(e){return e+22+75*(e<26)},fk=function(e,t,r){var n=0;for(e=r?ik(e/700):e>>1,e+=ik(e/t);e>455;n+=36)e=ik(e/35);return ik(n+36*e/(e+38))},pk=function(e){var t=[];e=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=sk(e,r++);if(o>=55296&&o<=56319&&r<n){var i=sk(e,r++);56320==(64512&i)?ck(t,((1023&o)<<10)+(1023&i)+65536):(ck(t,o),r--)}else ck(t,o)}return t}(e);var r,n,o=e.length,i=128,a=0,s=72;for(r=0;r<e.length;r++)(n=e[r])<128&&ck(t,ak(n));var u=t.length,c=u;for(u&&ck(t,"-");c<o;){var l=$C;for(r=0;r<e.length;r++)(n=e[r])>=i&&n<l&&(l=n);var d=c+1;if(l-i>ik(($C-a)/d))throw nk(rk);for(a+=(l-i)*d,i=l,r=0;r<e.length;r++){if((n=e[r])<i&&++a>$C)throw nk(rk);if(n==i){for(var h=a,m=36;;m+=36){var f=m<=s?1:m>=s+26?26:m-s;if(h<f)break;var p=h-f,y=36-f;ck(t,ak(mk(f+p%y))),h=ik(p/y)}ck(t,ak(mk(h))),s=fk(a,d,c==u),a=0,++c}}++a,++i}return uk(t,"")},yk=io,vk=I,gk=rb,wk=C,Sk=pi,Rk=T,bk=q,Pk=Ko,Ek=ar.exports,Ck=Jc,kk=tt,Ak=XC,Ik=ER,xk=Qo,Tk=ic.codeAt,Nk=function(e){var t,r,n=[],o=dk(lk(hk(e),tk,"."),".");for(t=0;t<o.length;t++)r=o[t],ck(n,ok(ek,r)?"xn--"+pk(r):r);return uk(n,".")},Mk=Ao,Ok=hi,Dk=pP,Kk=Fr,Lk=Kk.set,Bk=Kk.getterFor("URL"),_k=Dk.URLSearchParams,Uk=Dk.getState,Fk=wk.URL,Wk=wk.TypeError,qk=wk.parseInt,Gk=Math.floor,Vk=Math.pow,Yk=bk("".charAt),Hk=bk(/./.exec),jk=bk([].join),zk=bk(1..toString),Jk=bk([].pop),Qk=bk([].push),Xk=bk("".replace),Zk=bk([].shift),$k=bk("".split),eA=bk("".slice),tA=bk("".toLowerCase),rA=bk([].unshift),nA="Invalid scheme",oA="Invalid host",iA="Invalid port",aA=/[a-z]/i,sA=/[\d+-.a-z]/i,uA=/\d/,cA=/^0x/i,lA=/^[0-7]+$/,dA=/^\d+$/,hA=/^[\da-f]+$/i,mA=/[\0\t\n\r #%/:<>?@[\\\]^|]/,fA=/[\0\t\n\r #/:<>?@[\\\]^|]/,pA=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,yA=/[\t\n\r]/g,vA=function(e,t){var r,n,o;if("["==Yk(t,0)){if("]"!=Yk(t,t.length-1))return oA;if(!(r=wA(eA(t,1,-1))))return oA;e.host=r}else if(AA(e)){if(t=Nk(t),Hk(mA,t))return oA;if(null===(r=gA(t)))return oA;e.host=r}else{if(Hk(fA,t))return oA;for(r="",n=Ik(t),o=0;o<n.length;o++)r+=CA(n[o],RA);e.host=r}},gA=function(e){var t,r,n,o,i,a,s,u=$k(e,".");if(u.length&&""==u[u.length-1]&&u.length--,(t=u.length)>4)return e;for(r=[],n=0;n<t;n++){if(""==(o=u[n]))return e;if(i=10,o.length>1&&"0"==Yk(o,0)&&(i=Hk(cA,o)?16:8,o=eA(o,8==i?1:2)),""===o)a=0;else{if(!Hk(10==i?dA:8==i?lA:hA,o))return e;a=qk(o,i)}Qk(r,a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=Vk(256,5-t))return null}else if(a>255)return null;for(s=Jk(r),n=0;n<r.length;n++)s+=r[n]*Vk(256,3-n);return s},wA=function(e){var t,r,n,o,i,a,s,u=[0,0,0,0,0,0,0,0],c=0,l=null,d=0,h=function(){return Yk(e,d)};if(":"==h()){if(":"!=Yk(e,1))return;d+=2,l=++c}for(;h();){if(8==c)return;if(":"!=h()){for(t=r=0;r<4&&Hk(hA,h());)t=16*t+qk(h(),16),d++,r++;if("."==h()){if(0==r)return;if(d-=r,c>6)return;for(n=0;h();){if(o=null,n>0){if(!("."==h()&&n<4))return;d++}if(!Hk(uA,h()))return;for(;Hk(uA,h());){if(i=qk(h(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;d++}u[c]=256*u[c]+o,2!=++n&&4!=n||c++}if(4!=n)return;break}if(":"==h()){if(d++,!h())return}else if(h())return;u[c++]=t}else{if(null!==l)return;d++,l=++c}}if(null!==l)for(a=c-l,c=7;0!=c&&a>0;)s=u[c],u[c--]=u[l+a-1],u[l+--a]=s;else if(8!=c)return;return u},SA=function(e){var t,r,n,o;if("number"==typeof e){for(t=[],r=0;r<4;r++)rA(t,e%256),e=Gk(e/256);return jk(t,".")}if("object"==typeof e){for(t="",n=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)0!==e[i]?(o>r&&(t=n,r=o),n=null,o=0):(null===n&&(n=i),++o);return o>r&&(t=n,r=o),t}(e),r=0;r<8;r++)o&&0===e[r]||(o&&(o=!1),n===r?(t+=r?":":"::",o=!0):(t+=zk(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},RA={},bA=Ak({},RA,{" ":1,'"':1,"<":1,">":1,"`":1}),PA=Ak({},bA,{"#":1,"?":1,"{":1,"}":1}),EA=Ak({},PA,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),CA=function(e,t){var r=Tk(e,0);return r>32&&r<127&&!kk(t,e)?e:encodeURIComponent(e)},kA={ftp:21,file:null,http:80,https:443,ws:80,wss:443},AA=function(e){return kk(kA,e.scheme)},IA=function(e){return""!=e.username||""!=e.password},xA=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},TA=function(e,t){var r;return 2==e.length&&Hk(aA,Yk(e,0))&&(":"==(r=Yk(e,1))||!t&&"|"==r)},NA=function(e){var t;return e.length>1&&TA(eA(e,0,2))&&(2==e.length||"/"===(t=Yk(e,2))||"\\"===t||"?"===t||"#"===t)},MA=function(e){var t=e.path,r=t.length;!r||"file"==e.scheme&&1==r&&TA(t[0],!0)||t.length--},OA=function(e){return"."===e||"%2e"===tA(e)},DA={},KA={},LA={},BA={},_A={},UA={},FA={},WA={},qA={},GA={},VA={},YA={},HA={},jA={},zA={},JA={},QA={},XA={},ZA={},$A={},eI={},tI=function(e,t,r,n){var o,i,a,s,u,c=r||DA,l=0,d="",h=!1,m=!1,f=!1;for(r||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=Xk(t,pA,"")),t=Xk(t,yA,""),o=Ik(t);l<=o.length;){switch(i=o[l],c){case DA:if(!i||!Hk(aA,i)){if(r)return nA;c=LA;continue}d+=tA(i),c=KA;break;case KA:if(i&&(Hk(sA,i)||"+"==i||"-"==i||"."==i))d+=tA(i);else{if(":"!=i){if(r)return nA;d="",c=LA,l=0;continue}if(r&&(AA(e)!=kk(kA,d)||"file"==d&&(IA(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=d,r)return void(AA(e)&&kA[e.scheme]==e.port&&(e.port=null));d="","file"==e.scheme?c=jA:AA(e)&&n&&n.scheme==e.scheme?c=BA:AA(e)?c=WA:"/"==o[l+1]?(c=_A,l++):(e.cannotBeABaseURL=!0,Qk(e.path,""),c=ZA)}break;case LA:if(!n||n.cannotBeABaseURL&&"#"!=i)return nA;if(n.cannotBeABaseURL&&"#"==i){e.scheme=n.scheme,e.path=xk(n.path),e.query=n.query,e.fragment="",e.cannotBeABaseURL=!0,c=eI;break}c="file"==n.scheme?jA:UA;continue;case BA:if("/"!=i||"/"!=o[l+1]){c=UA;continue}c=qA,l++;break;case _A:if("/"==i){c=GA;break}c=XA;continue;case UA:if(e.scheme=n.scheme,i==_C)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=xk(n.path),e.query=n.query;else if("/"==i||"\\"==i&&AA(e))c=FA;else if("?"==i)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=xk(n.path),e.query="",c=$A;else{if("#"!=i){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=xk(n.path),e.path.length--,c=XA;continue}e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=xk(n.path),e.query=n.query,e.fragment="",c=eI}break;case FA:if(!AA(e)||"/"!=i&&"\\"!=i){if("/"!=i){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,c=XA;continue}c=GA}else c=qA;break;case WA:if(c=qA,"/"!=i||"/"!=Yk(d,l+1))continue;l++;break;case qA:if("/"!=i&&"\\"!=i){c=GA;continue}break;case GA:if("@"==i){h&&(d="%40"+d),h=!0,a=Ik(d);for(var p=0;p<a.length;p++){var y=a[p];if(":"!=y||f){var v=CA(y,EA);f?e.password+=v:e.username+=v}else f=!0}d=""}else if(i==_C||"/"==i||"?"==i||"#"==i||"\\"==i&&AA(e)){if(h&&""==d)return"Invalid authority";l-=Ik(d).length+1,d="",c=VA}else d+=i;break;case VA:case YA:if(r&&"file"==e.scheme){c=JA;continue}if(":"!=i||m){if(i==_C||"/"==i||"?"==i||"#"==i||"\\"==i&&AA(e)){if(AA(e)&&""==d)return oA;if(r&&""==d&&(IA(e)||null!==e.port))return;if(s=vA(e,d))return s;if(d="",c=QA,r)return;continue}"["==i?m=!0:"]"==i&&(m=!1),d+=i}else{if(""==d)return oA;if(s=vA(e,d))return s;if(d="",c=HA,r==YA)return}break;case HA:if(!Hk(uA,i)){if(i==_C||"/"==i||"?"==i||"#"==i||"\\"==i&&AA(e)||r){if(""!=d){var g=qk(d,10);if(g>65535)return iA;e.port=AA(e)&&g===kA[e.scheme]?null:g,d=""}if(r)return;c=QA;continue}return iA}d+=i;break;case jA:if(e.scheme="file","/"==i||"\\"==i)c=zA;else{if(!n||"file"!=n.scheme){c=XA;continue}if(i==_C)e.host=n.host,e.path=xk(n.path),e.query=n.query;else if("?"==i)e.host=n.host,e.path=xk(n.path),e.query="",c=$A;else{if("#"!=i){NA(jk(xk(o,l),""))||(e.host=n.host,e.path=xk(n.path),MA(e)),c=XA;continue}e.host=n.host,e.path=xk(n.path),e.query=n.query,e.fragment="",c=eI}}break;case zA:if("/"==i||"\\"==i){c=JA;break}n&&"file"==n.scheme&&!NA(jk(xk(o,l),""))&&(TA(n.path[0],!0)?Qk(e.path,n.path[0]):e.host=n.host),c=XA;continue;case JA:if(i==_C||"/"==i||"\\"==i||"?"==i||"#"==i){if(!r&&TA(d))c=XA;else if(""==d){if(e.host="",r)return;c=QA}else{if(s=vA(e,d))return s;if("localhost"==e.host&&(e.host=""),r)return;d="",c=QA}continue}d+=i;break;case QA:if(AA(e)){if(c=XA,"/"!=i&&"\\"!=i)continue}else if(r||"?"!=i)if(r||"#"!=i){if(i!=_C&&(c=XA,"/"!=i))continue}else e.fragment="",c=eI;else e.query="",c=$A;break;case XA:if(i==_C||"/"==i||"\\"==i&&AA(e)||!r&&("?"==i||"#"==i)){if(".."===(u=tA(u=d))||"%2e."===u||".%2e"===u||"%2e%2e"===u?(MA(e),"/"==i||"\\"==i&&AA(e)||Qk(e.path,"")):OA(d)?"/"==i||"\\"==i&&AA(e)||Qk(e.path,""):("file"==e.scheme&&!e.path.length&&TA(d)&&(e.host&&(e.host=""),d=Yk(d,0)+":"),Qk(e.path,d)),d="","file"==e.scheme&&(i==_C||"?"==i||"#"==i))for(;e.path.length>1&&""===e.path[0];)Zk(e.path);"?"==i?(e.query="",c=$A):"#"==i&&(e.fragment="",c=eI)}else d+=CA(i,PA);break;case ZA:"?"==i?(e.query="",c=$A):"#"==i?(e.fragment="",c=eI):i!=_C&&(e.path[0]+=CA(i,RA));break;case $A:r||"#"!=i?i!=_C&&("'"==i&&AA(e)?e.query+="%27":e.query+="#"==i?"%23":CA(i,RA)):(e.fragment="",c=eI);break;case eI:i!=_C&&(e.fragment+=CA(i,bA))}l++}},rI=function(e){var t,r,n=Ck(this,nI),o=arguments.length>1?arguments[1]:void 0,i=Mk(e),a=Lk(n,{type:"URL"});if(void 0!==o)try{t=Bk(o)}catch(e){if(r=tI(t={},Mk(o)))throw Wk(r)}if(r=tI(a,i,null,t))throw Wk(r);var s=a.searchParams=new _k,u=Uk(s);u.updateSearchParams(a.query),u.updateURL=function(){a.query=Mk(s)||null},vk||(n.href=Rk(oI,n),n.origin=Rk(iI,n),n.protocol=Rk(aI,n),n.username=Rk(sI,n),n.password=Rk(uI,n),n.host=Rk(cI,n),n.hostname=Rk(lI,n),n.port=Rk(dI,n),n.pathname=Rk(hI,n),n.search=Rk(mI,n),n.searchParams=Rk(fI,n),n.hash=Rk(pI,n))},nI=rI.prototype,oI=function(){var e=Bk(this),t=e.scheme,r=e.username,n=e.password,o=e.host,i=e.port,a=e.path,s=e.query,u=e.fragment,c=t+":";return null!==o?(c+="//",IA(e)&&(c+=r+(n?":"+n:"")+"@"),c+=SA(o),null!==i&&(c+=":"+i)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+jk(a,"/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},iI=function(){var e=Bk(this),t=e.scheme,r=e.port;if("blob"==t)try{return new rI(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&AA(e)?t+"://"+SA(e.host)+(null!==r?":"+r:""):"null"},aI=function(){return Bk(this).scheme+":"},sI=function(){return Bk(this).username},uI=function(){return Bk(this).password},cI=function(){var e=Bk(this),t=e.host,r=e.port;return null===t?"":null===r?SA(t):SA(t)+":"+r},lI=function(){var e=Bk(this).host;return null===e?"":SA(e)},dI=function(){var e=Bk(this).port;return null===e?"":Mk(e)},hI=function(){var e=Bk(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+jk(t,"/"):""},mI=function(){var e=Bk(this).query;return e?"?"+e:""},fI=function(){return Bk(this).searchParams},pI=function(){var e=Bk(this).fragment;return e?"#"+e:""},yI=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(vk&&Pk(nI,{href:yI(oI,(function(e){var t=Bk(this),r=Mk(e),n=tI(t,r);if(n)throw Wk(n);Uk(t.searchParams).updateSearchParams(t.query)})),origin:yI(iI),protocol:yI(aI,(function(e){var t=Bk(this);tI(t,Mk(e)+":",DA)})),username:yI(sI,(function(e){var t=Bk(this),r=Ik(Mk(e));if(!xA(t)){t.username="";for(var n=0;n<r.length;n++)t.username+=CA(r[n],EA)}})),password:yI(uI,(function(e){var t=Bk(this),r=Ik(Mk(e));if(!xA(t)){t.password="";for(var n=0;n<r.length;n++)t.password+=CA(r[n],EA)}})),host:yI(cI,(function(e){var t=Bk(this);t.cannotBeABaseURL||tI(t,Mk(e),VA)})),hostname:yI(lI,(function(e){var t=Bk(this);t.cannotBeABaseURL||tI(t,Mk(e),YA)})),port:yI(dI,(function(e){var t=Bk(this);xA(t)||(""==(e=Mk(e))?t.port=null:tI(t,e,HA))})),pathname:yI(hI,(function(e){var t=Bk(this);t.cannotBeABaseURL||(t.path=[],tI(t,Mk(e),QA))})),search:yI(mI,(function(e){var t=Bk(this);""==(e=Mk(e))?t.query=null:("?"==Yk(e,0)&&(e=eA(e,1)),t.query="",tI(t,e,$A)),Uk(t.searchParams).updateSearchParams(t.query)})),searchParams:yI(fI),hash:yI(pI,(function(e){var t=Bk(this);""!=(e=Mk(e))?("#"==Yk(e,0)&&(e=eA(e,1)),t.fragment="",tI(t,e,eI)):t.fragment=null}))}),Ek(nI,"toJSON",(function(){return Rk(oI,this)}),{enumerable:!0}),Ek(nI,"toString",(function(){return Rk(oI,this)}),{enumerable:!0}),Fk){var vI=Fk.createObjectURL,gI=Fk.revokeObjectURL;vI&&Ek(rI,"createObjectURL",Sk(vI,Fk)),gI&&Ek(rI,"revokeObjectURL",Sk(gI,Fk))}Ok(rI,"URL"),yk({global:!0,forced:!gk,sham:!vk},{URL:rI});var wI=["live_ck_YZ1aOwX7K8mlkkjOvParyQxzvNPG","live_ck_YoEjb0gm23Pe22E9LPNVpGwBJn5e","live_ck_OEP59LybZ8BpKd412zGV6GYo7pRe","live_ck_k6bJXmgo28eGnqz60REVLAnGKWx4","live_ck_Lex6BJGQOVDyjRKjRmOrW4w2zNbg","live_ck_jZ61JOxRQVEywWmn5lQVW0X9bAqw","live_ck_Lex6BJGQOVDeRRQXRjkrW4w2zNbg","live_ck_kZLKGPx4M3MPLPbB6Y28BaWypv1o","live_ck_7DLJOpm5Qrl16KBvjkL8PNdxbWnY","live_ck_LBa5PzR0ArnXEmmGRZa3vmYnNeDM","live_ck_aBX7zk2yd8yzn76QD2B3x9POLqKQ","live_ck_OAQ92ymxN34gy9jAzgy8ajRKXvdk","live_ck_YZ1aOwX7K8mx5kmob4AryQxzvNPG","live_ck_LBa5PzR0ArnxenZqGBk3vmYnNeDM","live_ck_O6BYq7GWPVvgnw9xMZ7rNE5vbo1d","live_ck_OAQ92ymxN34exxk0zG0VajRKXvdk","live_ck_YPBal2vxj81gvlPRqjeV5RQgOAND","live_ck_k6bJXmgo28eD1047lMerLAnGKWx4","live_ck_XLkKEypNArWo0x2lPolrlmeaxYG5","live_ck_Wd46qopOB89pG1vLZDdrZmM75y0v"];function SI(e){var t;if(!["baemin","baemin-staging","baemin-dev"].includes(Pp)&&(!wI.includes(e)&&(t=document.querySelectorAll("script"),!Array.from(t).some((function(e){try{return"js.tosspayments.com"===new URL(e.src).host}catch(e){return!1}})))))throw new Tf({code:FP,message:"íì©ëì§ ìì ì¤í¬ë¦½í¸ë¥¼ ì¬ì©íìµëë¤. js.tosspayments.com ì ì¬ì©í´ì£¼ì¸ì."})}var RI=io,bI=A,PI=Jo.f;RI({target:"Object",stat:!0,forced:bI((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:PI}),io({target:"Reflect",stat:!0},{ownKeys:Bn});var EI=XC;io({target:"Object",stat:!0,forced:Object.assign!==EI},{assign:EI});var CI=io,kI=Math.ceil,AI=Math.floor;CI({target:"Math",stat:!0},{trunc:function(e){return(e>0?AI:kI)(e)}});var II=lo,xI=Ke,TI=Qt;io({target:"Reflect",stat:!0,forced:!A((function(){Reflect.apply((function(){}))}))},{apply:function(e,t,r){return II(xI(e),t,TI(r))}});var NI=io,MI=Uc,OI=A,DI=le,KI=oe,LI=Yl,BI=rh,_I=ar.exports;if(NI({target:"Promise",proto:!0,real:!0,forced:!!MI&&OI((function(){MI.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=LI(this,DI("Promise")),r=KI(e);return this.then(r?function(r){return BI(t,e()).then((function(){return r}))}:e,r?function(r){return BI(t,e()).then((function(){throw r}))}:e)}}),KI(MI)){var UI=DI("Promise").prototype.finally;MI.prototype.finally!==UI&&_I(MI.prototype,"finally",UI,{unsafe:!0})}var FI=T;io({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return FI(URL.prototype.toString,this)}}),
/*!
   * @license Tosspayments v1-adapter javascript SDK - npm published
   * Copyright â Toss Payments. All Rights Reserved
   * Documentation: https://docs.tosspayments.com/sdk/v2/js
   * Version: 4fb7b3fd55617f04db3fa08a053cf895f02479fe
   */
null==window.__SDK_LOAD_START_TIME__&&(window.__SDK_LOAD_START_TIME__=new Date);var WI,qI=Object.create,GI=Object.defineProperty,VI=Object.defineProperties,YI=Object.getOwnPropertyDescriptor,HI=Object.getOwnPropertyDescriptors,jI=Object.getOwnPropertyNames,zI=Object.getOwnPropertySymbols,JI=Object.getPrototypeOf,QI=Object.prototype.hasOwnProperty,XI=Object.prototype.propertyIsEnumerable,ZI=function(e,t,r){return t in e?GI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},$I=function(e,t){for(var r in t||(t={}))QI.call(t,r)&&ZI(e,r,t[r]);if(zI){var n,o=b(zI(t));try{for(o.s();!(n=o.n()).done;){r=n.value;XI.call(t,r)&&ZI(e,r,t[r])}}catch(e){o.e(e)}finally{o.f()}}return e},ex=function(e,t){return VI(e,HI(t))},tx=function(e,t){var r={};for(var n in e)QI.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&zI){var o,i=b(zI(e));try{for(i.s();!(o=i.n()).done;){n=o.value;t.indexOf(n)<0&&XI.call(e,n)&&(r[n]=e[n])}}catch(e){i.e(e)}finally{i.f()}}return r},rx=function(e,t){return function(){return t||(0,e[jI(e)[0]])((t={exports:{}}).exports,t),t.exports}},nx=function(e,t){for(var r in t)GI(e,r,{get:t[r],enumerable:!0})},ox=function(e,t,n,o){if(t&&"object"==r(t)||"function"==typeof t){var i,a=b(jI(t));try{var s=function(){var r=i.value;QI.call(e,r)||r===n||GI(e,r,{get:function(){return t[r]},enumerable:!(o=YI(t,r))||o.enumerable})};for(a.s();!(i=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}}return e},ix=function(e,t,r){return r=null!=e?qI(JI(e)):{},ox(!t&&e&&e.__esModule?r:GI(r,"default",{value:e,enumerable:!0}),e)},ax=function(e,t,r){return new Promise((function(n,o){var i=function(e){try{s(r.next(e))}catch(e){o(e)}},a=function(e){try{s(r.throw(e))}catch(e){o(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,a)};s((r=r.apply(e,t)).next())}))},sx={};function ux(){}function cx(){cx.init.call(this)}function lx(e){return void 0===e._maxListeners?cx.defaultMaxListeners:e._maxListeners}function dx(e,t,r,n){var o,i,a,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((i=e._events)?(i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),a=i[t]):(i=e._events=new ux,e._eventsCount=0),a){if("function"==typeof a?a=i[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),!a.warned&&(o=lx(e))&&o>0&&a.length>o){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,s=u,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=i[t]=r,++e._eventsCount;return e}function hx(e,t,r){var n=!1;function o(){e.removeListener(t,o),n||(n=!0,r.apply(e,arguments))}return o.listener=r,o}function mx(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function fx(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}nx(sx,{EventEmitter:function(){return cx},default:function(){return WI}});var px,yx,vx=(px={"node-modules-polyfills:events":function(){ux.prototype=Object.create(null),WI=cx,cx.EventEmitter=cx,cx.usingDomains=!1,cx.prototype.domain=void 0,cx.prototype._events=void 0,cx.prototype._maxListeners=void 0,cx.defaultMaxListeners=10,cx.init=function(){this.domain=null,cx.usingDomains&&undefined.active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new ux,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},cx.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},cx.prototype.getMaxListeners=function(){return lx(this)},cx.prototype.emit=function(e){var t,r,n,o,i,a,s,u="error"===e;if(a=this._events)u=u&&null==a.error;else if(!u)return!1;if(s=this.domain,u){if(t=arguments[1],!s){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(r=a[e]))return!1;var l="function"==typeof r;switch(n=arguments.length){case 1:!function(e,t,r){if(t)e.call(r);else for(var n=e.length,o=fx(e,n),i=0;i<n;++i)o[i].call(r)}(r,l,this);break;case 2:!function(e,t,r,n){if(t)e.call(r,n);else for(var o=e.length,i=fx(e,o),a=0;a<o;++a)i[a].call(r,n)}(r,l,this,arguments[1]);break;case 3:!function(e,t,r,n,o){if(t)e.call(r,n,o);else for(var i=e.length,a=fx(e,i),s=0;s<i;++s)a[s].call(r,n,o)}(r,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,r,n,o,i){if(t)e.call(r,n,o,i);else for(var a=e.length,s=fx(e,a),u=0;u<a;++u)s[u].call(r,n,o,i)}(r,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(o=new Array(n-1),i=1;i<n;i++)o[i-1]=arguments[i];!function(e,t,r,n){if(t)e.apply(r,n);else for(var o=e.length,i=fx(e,o),a=0;a<o;++a)i[a].apply(r,n)}(r,l,this,o)}return!0},cx.prototype.addListener=function(e,t){return dx(this,e,t,!1)},cx.prototype.on=cx.prototype.addListener,cx.prototype.prependListener=function(e,t){return dx(this,e,t,!0)},cx.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,hx(this,e,t)),this},cx.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,hx(this,e,t)),this},cx.prototype.removeListener=function(e,t){var r,n,o,i,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)0==--this._eventsCount?this._events=new ux:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length;i-- >0;)if(r[i]===t||r[i].listener&&r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;if(1===r.length){if(r[0]=void 0,0==--this._eventsCount)return this._events=new ux,this;delete n[e]}else!function(e,t){for(var r=t,n=r+1,o=e.length;n<o;r+=1,n+=1)e[r]=e[n];e.pop()}(r,o);n.removeListener&&this.emit("removeListener",e,a||t)}return this},cx.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=new ux,this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=new ux:delete r[e]),this;if(0===arguments.length){for(var n,o=Object.keys(r),i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new ux,this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},cx.prototype.listeners=function(e){var t,r=this._events;return r&&(t=r[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(t):[]},cx.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):mx.call(e,t)},cx.prototype.listenerCount=mx,cx.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}}},function(){return px&&(yx=(0,px[jI(px)[0]])(px=0)),yx}),gx=rx({"node-modules-polyfills-commonjs:events":function(e,t){var r,n=(vx(),r=sx,ox(GI({},"__esModule",{value:!0}),r));if(n&&n.default)for(var o in t.exports=n.default,n)t.exports[o]=n[o];else n&&(t.exports=n)}}),wx=rx({"../../../.yarn/cache/async-sema-npm-3.1.1-a5453a4d6a-ee0225c2e7.zip/node_modules/async-sema/lib/index.js":function(e){var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.RateLimit=e.Sema=void 0;var r=t(gx());function n(e){return t=Math.min(Math.max(16,e),1073741824),t>>>=0,t-=1,t|=t>>1,t|=t>>2,t|=t>>4,1+((t|=t>>8)|t>>16);var t}var o=function(){function e(t){i(this,e),this._capacity=n(t),this._length=0,this._front=0,this.arr=[]}return s(e,[{key:"push",value:function(e){var t=this._length;this.checkCapacity(t+1);var r=this._front+t&this._capacity-1;return this.arr[r]=e,this._length=t+1,t+1}},{key:"pop",value:function(){var e=this._length;if(0!==e){var t=this._front+e-1&this._capacity-1,r=this.arr[t];return this.arr[t]=void 0,this._length=e-1,r}}},{key:"shift",value:function(){var e=this._length;if(0!==e){var t=this._front,r=this.arr[t];return this.arr[t]=void 0,this._front=t+1&this._capacity-1,this._length=e-1,r}}},{key:"length",get:function(){return this._length}},{key:"checkCapacity",value:function(e){this._capacity<e&&this.resizeTo(n(1.5*this._capacity+16))}},{key:"resizeTo",value:function(e){var t=this._capacity;this._capacity=e;var r=this._front,n=this._length;if(r+n>t){var o=r+n&t-1;!function(e,t,r,n,o){for(var i=0;i<o;++i)r[i+n]=e[i+0],e[i+0]=void 0}(this.arr,0,this.arr,t,o)}}}]),e}(),a=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r)}(r.default);function u(e){return"function"==typeof e}function l(){return"1"}var d=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n.initFn,c=void 0===s?l:s,d=n.pauseFn,h=n.resumeFn,m=n.capacity,f=void 0===m?10:m;if(i(this,e),u(d)!==u(h))throw new Error("pauseFn and resumeFn must be both set for pausing");this.nrTokens=t,this.free=new o(t),this.waiting=new o(f),this.releaseEmitter=new a,this.noTokens=c===l,this.pauseFn=d,this.resumeFn=h,this.paused=!1,this.releaseEmitter.on("release",(function(e){var t=r.waiting.shift();t?t.resolve(e):(r.resumeFn&&r.paused&&(r.paused=!1,r.resumeFn()),r.free.push(e))}));for(var p=0;p<t;p++)this.free.push(c())}return s(e,[{key:"tryAcquire",value:function(){return this.free.pop()}},{key:"acquire",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.tryAcquire(),e.abrupt("return",void 0!==t?t:new Promise((function(e,t){r.pauseFn&&!r.paused&&(r.paused=!0,r.pauseFn()),r.waiting.push({resolve:e,reject:t})})));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"release",value:function(e){this.releaseEmitter.emit("release",this.noTokens?"1":e)}},{key:"drain",value:function(){for(var e=new Array(this.nrTokens),t=0;t<this.nrTokens;t++)e[t]=this.acquire();return Promise.all(e)}},{key:"nrWaiting",value:function(){return this.waiting.length}}]),e}();e.Sema=d,e.RateLimit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.timeUnit,n=void 0===r?1e3:r,o=t.uniformDistribution,i=void 0!==o&&o,a=new d(i?1:e),s=i?n/e:n;return function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.acquire();case 2:setTimeout((function(){return a.release()}),s);case 3:case"end":return e.stop()}}),e)})))}}}}),Sx=rx({"../../../.yarn/cache/strict-uri-encode-npm-1.1.0-a79c6f7f24-9466d371f7.zip/node_modules/strict-uri-encode/index.js":function(e,t){t.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}}}),Rx=rx({"../../../.yarn/cache/object-assign-npm-4.1.1-1004ad6dec-fcc6e4ea8c.zip/node_modules/object-assign/index.js":function(e,t){var r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,a,s=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var c in i=Object(arguments[u]))n.call(i,c)&&(s[c]=i[c]);if(r){a=r(i);for(var l=0;l<a.length;l++)o.call(i,a[l])&&(s[a[l]]=i[a[l]])}}return s}}}),bx=rx({"../../../.yarn/cache/decode-uri-component-npm-0.2.0-5bcc0f3597-0686aa1f56.zip/node_modules/decode-uri-component/index.js":function(e,t){var n="%[a-f0-9]{2}",o=new RegExp(n,"gi"),i=new RegExp("("+n+")+","gi");function a(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],a(r),a(n))}function s(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(o),r=1;r<t.length;r++)t=(e=a(t,r).join("")).match(o);return e}}t.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+r(e)+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"ï¿½ï¿½","%FF%FE":"ï¿½ï¿½"},r=i.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=s(r[0]);n!==r[0]&&(t[r[0]]=n)}r=i.exec(e)}t["%C2"]="ï¿½";for(var o=Object.keys(t),a=0;a<o.length;a++){var u=o[a];e=e.replace(new RegExp(u,"g"),t[u])}return e}(e)}}}}),Px=rx({"../../../.yarn/cache/query-string-npm-5.1.1-86edac70d6-8834591ed0.zip/node_modules/query-string/index.js":function(e){var t=Sx(),n=Rx(),o=bx();function i(e,r){return r.encode?r.strict?t(e):encodeURIComponent(e):e}function a(e){return Array.isArray(e)?e.sort():"object"==r(e)?a(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function s(e){var t=e.indexOf("?");return-1===t?"":e.slice(t+1)}function u(e,t){var i=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return function(e,r,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=n({arrayFormat:"none"},t)),s=Object.create(null);return"string"!=typeof e?s:(e=e.trim().replace(/^[?#&]/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),r=t.shift(),n=t.length>0?t.join("="):void 0;n=void 0===n?null:o(n),i(o(r),n,s)})),Object.keys(s).sort().reduce((function(e,t){var n=s[t];return Boolean(n)&&"object"==r(n)&&!Array.isArray(n)?e[t]=a(n):e[t]=n,e}),Object.create(null))):s}e.extract=s,e.parse=u,e.stringify=function(e,t){!1===(t=n({encode:!0,strict:!0,arrayFormat:"none"},t)).sort&&(t.sort=function(){});var r=function(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[i(t,e),"[",n,"]"].join(""):[i(t,e),"[",i(n,e),"]=",i(r,e)].join("")};case"bracket":return function(t,r){return null===r?i(t,e):[i(t,e),"[]=",i(r,e)].join("")};default:return function(t,r){return null===r?i(t,e):[i(t,e),"=",i(r,e)].join("")}}}(t);return e?Object.keys(e).sort(t.sort).map((function(n){var o=e[n];if(void 0===o)return"";if(null===o)return i(n,t);if(Array.isArray(o)){var a=[];return o.slice().forEach((function(e){void 0!==e&&a.push(r(n,e,a.length))})),a.join("&")}return i(n,t)+"="+i(o,t)})).filter((function(e){return e.length>0})).join("&"):""},e.parseUrl=function(e,t){return{url:e.split("?")[0]||"",query:u(s(e),t)}}}}),Ex={};function Cx(e,t){if(!e)throw"string"==typeof t?new Error(t):t}function kx(e){return function(e){if(Number.isNaN(e.getTime()))throw new RangeError("Invalid time value");var t="",r="",n=Ax(e.getDate(),2),o=Ax(e.getMonth()+1,2),i=Ax(e.getFullYear(),4);t="".concat(i,"-").concat(o,"-").concat(n);var a=e.getTimezoneOffset();if(0!==a){var s=Math.abs(a);r="".concat(a<0?"+":"-").concat(Ax(Math.trunc(s/60),2),":").concat(Ax(s%60,2))}else r="Z";var u=[Ax(e.getHours(),2),Ax(e.getMinutes(),2),Ax(e.getSeconds(),2)].join(":");return t="".concat(t,"T").concat(u).concat(r)}(e).substring(0,19)}function Ax(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}function Ix(e){return new Promise((function(t){setTimeout(t,e)}))}function xx(){}function Tx(e){var t=g(e.split("?"),2),r=t[0],n=t[1];return null==n?{baseUrl:r,query:{}}:{baseUrl:r,query:n.split("&").reduce((function(e,t){var r=g(t.split("="),2),n=r[0],o=r[1];return ex($I({},e),u({},decodeURIComponent(n),decodeURIComponent(o)))}),{})}}function Nx(e){return"?"+Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))})).join("&")}function Mx(e,t){var r=Tx(e),n=null!=r.query?Nx($I($I({},r.query),t)):"";return n.length>0?"".concat(r.baseUrl).concat(n):r.baseUrl}function Ox(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r="",n=e;n--;)r+=t[62*Math.random()|0];return r}function Dx(e){return null==e||"string"==typeof e&&0===e.length}function Kx(e,t){return new Proxy(e,{get:function(e,n){var o=e[n];return"function"==typeof o?function(e,t,n){return new Proxy(t,{apply:function(t,o,i){var a,s=Ox(),u=!1;Bx((function(){n.onStart({callId:s,functionName:e,request:w(i)})}));try{return"object"==r(a=Reflect.apply(t,o,i))&&a instanceof Promise?(u=!0,a.then((function(t){return Bx((function(){n.onSuccess({callId:s,functionName:e,response:t})})),t})).catch((function(t){throw Bx((function(){n.onFail({callId:s,functionName:e,error:Lx(t)})})),t})).finally((function(){Bx((function(){n.onEnd({callId:s,functionName:e})}))}))):(Bx((function(){n.onSuccess({callId:s,functionName:e,response:a})})),a)}catch(t){throw Bx((function(){n.onFail({callId:s,functionName:e,error:Lx(t)})})),t}finally{u||Bx((function(){n.onEnd({callId:s,functionName:e})}))}}})}(String(n),o,t):o}})}function Lx(e){if(e instanceof Error)return e;if(e&&"object"==r(e)&&"toJSON"in e&&"function"==typeof e.toJSON)return new Error(e.toJSON());try{return new Error(JSON.stringify(e))}catch(e){return new Error("Fail to Serialized")}}function Bx(e){try{e()}catch(e){}}nx(Ex,{createDebugLogger:function(){return Wx},getDebugLogger:function(){return qx}});var _x=function(){function e(t){i(this,e),this.transport=t}return s(e,[{key:"info",value:function(e,t){this.transport.info(e,t)}},{key:"error",value:function(e,t){this.transport.error(e,t)}},{key:"start",value:function(e,t,r){this.transport.info("".concat(e,":").concat(t,":start"),r)}},{key:"success",value:function(e,t,r){this.transport.info("".concat(e,":").concat(t,":success"),r)}},{key:"fail",value:function(e,t,r){this.transport.error("".concat(e,":").concat(t,":fail"),r)}},{key:"end",value:function(e,t,r){this.transport.info("".concat(e,":").concat(t,":end"),r)}},{key:"wrapDomainModels",value:function(e,t){var r=this;return Kx(t,{onStart:function(t){r.start(e,t.functionName,{request:Ux(t.request)})},onSuccess:function(t){r.success(e,t.functionName,{response:Ux(t.response)})},onFail:function(t){var n,o;r.fail(e,t.functionName,{error:Ux(t.error),exception:null!=(o=null==(n=t.error)?void 0:n.stack)?o:""})},onEnd:function(t){r.end(e,t.functionName)}})}},{key:"startTransaction",value:function(e,t,r,n){this.transport.startTransaction(r,"".concat(e,":").concat(t,":start"),n)}},{key:"successTransaction",value:function(e,t,r,n){this.transport.successTransaction(r,"".concat(e,":").concat(t,":success"),n)}},{key:"failTransaction",value:function(e,t,r,n){this.transport.failureTransaction(r,"".concat(e,":").concat(t,":fail"),n)}},{key:"endTransaction",value:function(e,t,r,n){this.transport.endTransaction(r,"".concat(e,":").concat(t,":end"),n)}},{key:"wrapSDKInstance",value:function(e,t){var r=this;return Kx(t,{onStart:function(t){r.startTransaction(e,t.functionName,t.callId,{request:Ux(t.request)})},onSuccess:function(t){r.successTransaction(e,t.functionName,t.callId,{response:Ux(t.response)})},onFail:function(t){var n,o;r.failTransaction(e,t.functionName,t.callId,{error:Ux(t.error),exception:null!=(o=null==(n=t.error)?void 0:n.stack)?o:""})},onEnd:function(t){r.endTransaction(e,t.functionName,t.callId)}})}}],[{key:"of",value:function(t){return new e(t.transport)}}]),e}();function Ux(e){return e instanceof Error?JSON.stringify(e.message):JSON.stringify(e)}var Fx=null;function Wx(e){Fx=new _x(e)}function qx(){if(null==Fx)throw new Error("Logger ê° ì´ê¸°í ëì§ ìììµëë¤.");return Fx}var Gx={};nx(Gx,{AlreadyWidgetRenderedError:function(){return qT},AuthenticateRequestDenyError:function(){return Yx},AuthenticateTokenAcquireFailError:function(){return Hx},BelowZeroAmountError:function(){return oT},BiometricAuthCanceledError:function(){return Qx},BiometricAuthFailedError:function(){return Xx},BrandpayAuthenticatedAPIService:function(){return YT},ClientKey:function(){return SN},CollectionManager:function(){return RN},CustomPaymentMethodUnableToPayError:function(){return _T},CustomerKey:function(){return PN},CustomerSessionFactory:function(){return EN},DomesticAmount:function(){return GT},ExceedDepositAmountLimitError:function(){return KT},ExceedMaxDueDateError:function(){return BT},ExclusiveServiceTask:function(){return uN},IncorrectFailUrlFormatError:function(){return gT},IncorrectPendingUrlFormatError:function(){return wT},IncorrectSuccessUrlFormatError:function(){return vT},InsecureKeyUsageError:function(){return sT},InvalidAmountCurrencyError:function(){return nT},InvalidAmountValueError:function(){return rT},InvalidBillingAuthenticationRequestError:function(){return PT},InvalidCallbackParameterError:function(){return fT},InvalidClientKeyError:function(){return aT},InvalidCustomerKeyError:function(){return iT},InvalidEventParameterError:function(){return mT},InvalidMetadataError:function(){return CT},InvalidMethodTransactionError:function(){return yT},InvalidPaymentAuthenticationRequestError:function(){return ET},InvalidRequestError:function(){return hT},InvalidSelectorError:function(){return NT},InvalidVariantKeyError:function(){return FT},InvalidWindowTargetParameterError:function(){return pT},LockedUserError:function(){return $x},Mid:function(){return CN},MissingRequiredPendingUrlParameterError:function(){return ST},NeedAgreementWithRequiredTermsError:function(){return MT},NeedAgreementWithTermsError:function(){return Vx},NeedAllowPopupError:function(){return zx},NeedCardPaymentDetailError:function(){return OT},NeedMerchantOneTouchSettingError:function(){return jx},NeedRefundAccountDetailError:function(){return DT},NonRegisteredUserError:function(){return Zx},NotFoundCustomerSessionError:function(){return lT},NotFoundMidError:function(){return uT},NotRegisteredRedirectUrlError:function(){return Jx},NotSelectedPaymentMethodError:function(){return WT},NotSetupAmountError:function(){return tT},NotSupportedAPIIndividualKeyError:function(){return IT},NotSupportedEnvironment:function(){return eT},NotSupportedMethodError:function(){return RT},NotSupportedMidError:function(){return cT},NotSupportedPromiseError:function(){return TT},NotSupportedWidgetKeyError:function(){return AT},OverseasAmount:function(){return VT},PaymentRequestFailError:function(){return bT},ProductBuilder:function(){return HT},ProviderStatusUnhealthyError:function(){return LT},RenderWidgetServiceTask:function(){return cN},SandboxParameterNotAllowedError:function(){return xT},ServiceTask:function(){return sN},SetAmountServiceTask:function(){return lN},StandardBrandpayAddPaymentMethodService:function(){return dN},StandardBrandpayChangeCashReceiptSettingsService:function(){return hN},StandardBrandpayChangeOneTouchPaySettingsService:function(){return mN},StandardBrandpayChangePasswordService:function(){return fN},StandardBrandpayChangeSettingsService:function(){return pN},StandardBrandpayCustomerAuthService:function(){return ZT},StandardBrandpayGetIsOneTouchPayEnabledService:function(){return yN},StandardBrandpayRequestBillingAuthService:function(){return vN},StandardBrandpayRequestPaymentService:function(){return gN},StandardBrandpayStartCustomerSessionService:function(){return wN},StandardPaymentGatewayStartCustomerSessionService:function(){return FN},StandardPaymentGatewayStartRuntimeConfigurationService:function(){return _N},StandardPaymentWidgetRenderAgreementProductBuilder:function(){return VN},StandardPaymentWidgetRenderAgreementService:function(){return zN},StandardPaymentWidgetRenderPaymentMethodsProductBuilder:function(){return HN},StandardPaymentWidgetRenderPaymentMethodsService:function(){return QN},StandardPaymentWidgetStartCustomerSessionService:function(){return ZN},StandardPaymentWidgetUpdateAmountService:function(){return $N},StandardWidgetRequestPaymentService:function(){return eM},Task:function(){return JT},TaskError:function(){return QT},TaskScheduler:function(){return aN},UnknownError:function(){return kT},UnsupportedTestPhasePaymentMethodError:function(){return UT},UserCancelError:function(){return dT},V1PaymentGatewayRequestBillingAuthMobileCheckoutProductBuilder:function(){return kN},V1PaymentGatewayRequestBillingAuthPcCheckoutProductBuilder:function(){return IN},V1PaymentGatewayRequestBillingAuthenticationService:function(){return UN},V1PaymentGatewayRequestMobileCardPaymentDirectCheckoutProductBuilder:function(){return TN},V1PaymentGatewayRequestMobilePaymentWindowCheckoutProductBuilder:function(){return MN},V1PaymentGatewayRequestPCCardPaymentDirectCheckoutProductBuilder:function(){return DN},V1PaymentGatewayRequestPCPaymentWindowCheckoutProductBuilder:function(){return LN},V1PaymentGatewayRequestPaymentService:function(){return qN},WidgetCheckout:function(){return GN},WidgetMidResolver:function(){return rM},WidgetRequestPaymentUseCaseBuilder:function(){return tM}});var Vx=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ì½ê´ì´ ëìëì§ ìììµëë¤.")).name="NeedAgreementWithTermsError",e}return s(r)}(f(Error)),Yx=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ì¸ì¦ìì²­ ìµë íìê° ì´ê³¼ëììµëë¤.")).name="AuthenticateRequestDenyError",e}return s(r)}(f(Error)),Hx=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ì¸ì¦ í í°ì ë°ê¸ì ì¤í¨íììµëë¤.")).name="AuthenticateTokenAcquireFailError",e}return s(r)}(f(Error)),jx=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ìí°ì¹ ì¬ì©ì´ ë¶ê°ë¥í ìì ìëë¤.")).name="NeedMerchantOneTouchSettingError",e}return s(r)}(f(Error)),zx=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"íìì´ íì©ëì§ ìììµëë¤.")).name="NeedAllowPopupError",e}return s(r)}(f(Error)),Jx=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ë¦¬ë¤ì´ë í¸ URLì´ ë±ë¡ëì§ ìììµëë¤.")).name="NotRegisteredRedirectUrlError",e}return s(r)}(f(Error)),Qx=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"NativeBridgeì íµì  ì¤ ìë¬ê° ë°ìíìµëë¤.")).name="BiometricAuthCanceledError",n}return s(r)}(f(Error)),Xx=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"NativeBridgeì íµì  ì¤ ìë¬ê° ë°ìíìµëë¤.")).name="BiometricAuthFailedError",n}return s(r)}(f(Error)),Zx=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"ë±ë¡ëì§ ìì íììëë¤.")).name="NonRegisteredUserError",n}return s(r)}(f(Error)),$x=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"ê³ì ì´ ì ê²¼ìµëë¤.")).name="LockedUserError",n}return s(r)}(f(Error)),eT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ì§ìíì§ ìë íê²½ìëë¤.")).name="NotSupportedEnvironment",e}return s(r)}(f(Error)),tT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"amount ê°ì´ ì¤ì ëì§ ìììµëë¤.")).name="NotSetupAmountError",e}return s(r)}(f(Error)),rT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"amountì valueê° ì í¨íì§ ììµëë¤.")).name="InvalidAmountValueError",e}return s(r)}(f(Error)),nT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"amountì currencyê° ì í¨íì§ ììµëë¤.")).name="InvalidAmountCurrencyError",e}return s(r)}(f(Error)),oT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ê¸ì¡ì 0ë³´ë¤ ì»¤ì¼ í©ëë¤.")).name="BelowZeroAmountError",e}return s(r)}(f(Error)),iT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"customer keyê° ì í¨íì§ ììµëë¤.")).name="InvalidCustomerKeyError",e}return s(r)}(f(Error)),aT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"client keyê° ì í¨íì§ ììµëë¤.")).name="InvalidClientKeyError",e}return s(r)}(f(Error)),sT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"customer keyì secret keyë¥¼ ì¬ì©í  ì ììµëë¤.")).name="InsecureKeyUsageError",e}return s(r)}(f(Error)),uT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"midë¥¼ ì°¾ì ì ììµëë¤.")).name="NotFoundMidError",e}return s(r)}(f(Error)),cT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"mid ë¥¼ ì§ìíì§ ììµëë¤.")).name="NotSupportedMidError",e}return s(r)}(f(Error)),lT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"customer sessionì ì°¾ì ì ììµëë¤.")).name="NotFoundCustomerSessionError",e}return s(r)}(f(Error)),dT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ì·¨ìëììµëë¤.")).name="UserCancelError",e}return s(r)}(f(Error)),hT=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"ìëª»ë ìì²­ìëë¤.")).name="InvalidRequestError",n}return s(r)}(f(Error)),mT=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,"'".concat(e,"'ì ì§ìíì§ ììµëë¤."))).name="InvalidEventParameterError",n}return s(r)}(f(Error)),fT=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,"'".concat(e,"'ì ì½ë°± í¨ì íë¼ë¯¸í°ê° ì¬ë°ë¥´ì§ ììµëë¤."))).name="InvalidCallbackParameterError",n}return s(r)}(f(Error)),pT=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,"'".concat(e,"'ì ì§ìíì§ ììµëë¤."))).name="InvalidWindowTargetParameterError",n}return s(r)}(f(Error)),yT=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"ìëª»ë í¸ëì­ì ìì²­ìëë¤")).name="InvalidMethodTransactionError",n}return s(r)}(f(Error)),vT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ìëª»ë successUrl ìëë¤")).name="IncorrectSuccessUrlFormatError",e}return s(r)}(f(Error)),gT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ìëª»ë failUrl ìëë¤")).name="IncorrectFailUrlFormatError",e}return s(r)}(f(Error)),wT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ìëª»ë pendingUrl ìëë¤")).name="IncorrectPendingUrlFormatError",e}return s(r)}(f(Error)),ST=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"pendingUrl íë¼ë¯¸í°ê° ëë½ëììµëë¤.")).name="MissingRequiredPendingUrlParameterError",e}return s(r)}(f(Error)),RT=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"ì§ìëì§ ìë ê²°ì ìë¨ìëë¤.")).name="NotSupportedMethodError",n}return s(r)}(f(Error)),bT=function(e){c(r,e);var t=v(r);function r(e){var n,o=e.orderId,a=e.code,s=e.message;return i(this,r),(n=t.call(this,s)).name="PaymentRequestFailError",n.orderId=o,n.code=a,n}return s(r)}(f(Error)),PT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ë¹ë§ ì¸ì¦ ìì²­ íë¼ë¯¸í°ê° ì í¨íì§ ììµëë¤.")).name="InvalidBillingAuthenticationRequestError",e}return s(r)}(f(Error)),ET=function(e){c(r,e);var t=v(r);function r(e){var n,o=e.code,a=e.message;return i(this,r),(n=t.call(this,a)).name="InvalidPaymentAuthenticationRequestError",n.code=o,n}return s(r)}(f(Error)),CT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"metadataê° ì í¨íì§ ììµëë¤.")).name="InvalidMetadataError",e}return s(r)}(f(Error)),kT=function(e){c(r,e);var t=v(r);function r(e){var n,o;return i(this,r),(n=t.call(this,e instanceof Error?e.message:"ì ì ìë ìë¬ê° ë°ìíìµëë¤.")).name="UnknownError",e instanceof Error&&(n.stack=e.stack),n.code=null!=(o=null==e?void 0:e.code)?o:"",n}return s(r)}(f(Error)),AT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ê²°ì ìì ¯ ì°ëí¤ë ì§ìíì§ ììµëë¤.")).name="NotSupportedWidgetKeyError",e}return s(r)}(f(Error)),IT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"API ê°ë³ ì°ëí¤ë ì§ìíì§ ììµëë¤.")).name="NotSupportedAPIIndividualKeyError",e}return s(r)}(f(Error)),xT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"sandbox íë¦¬ë¯¸í°ë íì¤í¸ íê²½ììë§ ì¬ì©í  ì ììµëë¤. íì¤í¸ í¤ë¥¼ ì¬ì©í´ ì£¼ì¸ì.")).name="SandboxParameterNotAllowedError",e}return s(r)}(f(Error)),TT=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"Promise ë°©ìì ì§ìíì§ ììµëë¤. successUrl, failUrlì ì¬ì©í´ì£¼ì¸ì.")).name="NotSupportedPromiseError",n}return s(r)}(f(Error)),NT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"selectorê° ì í¨íì§ ììµëë¤.")).name="InvalidSelectorError",e}return s(r)}(f(Error)),MT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ì½ê´ì´ ëìëì§ ìììµëë¤.")).name="NeedAgreementWithRequiredTermsError",e}return s(r)}(f(Error)),OT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ì¹´ëì¬ ëë í ë¶ê¸°ê° ì ë³´ê° ë¶ì¡±í©ëë¤.")).name="NeedCardPaymentDetailError",e}return s(r)}(f(Error)),DT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ê°ìê³ì¢ì íë¶ ê³ì¢ ì ë³´ê° ë¶ì¡±í©ëë¤.")).name="NeedRefundAccountDetailError",e}return s(r)}(f(Error)),KT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ê°ìê³ì¢ì ìê¸íëë¥¼ ì´ê³¼íììµëë¤.")).name="ExceedDepositAmountLimitError",e}return s(r)}(f(Error)),LT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ìì²ì¬ì ìíê° ë¹ì ììëë¤.")).name="ProviderStatusUnhealthyError",e}return s(r)}(f(Error)),BT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ê°ìê³ì¢ ìµëì í¨ë§ë£ê¸°ê°ì´ ì´ê³¼ëììµëë¤.")).name="ExceedMaxDueDateError",e}return s(r)}(f(Error)),_T=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ì»¤ì¤í ê²°ì ìë¨ì¼ë¡ ê²°ì í  ì ììµëë¤.")).name="CustomPaymentMethodUnableToPayError",e}return s(r)}(f(Error)),UT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"íì¤í¸ íê²½ì ì§ìíì§ ìë ê²°ì ìë¨ìëë¤.")).name="UnsupportedTestPhasePaymentMethodError",e}return s(r)}(f(Error)),FT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"variant key ê° ì í¨íì§ ììµëë¤")).name="InvalidVariantKeyError",e}return s(r)}(f(Error)),WT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ê²°ì ìë¨ì´ ìì§ ì íëì§ ììì´ì. ê²°ì ìë¨ì ì íí´ ì£¼ì¸ì.")).name="NotSelectedPaymentMethodError",e}return s(r)}(f(Error)),qT=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ì´ë¯¸ ìì ¯ì´ ë ëë§ëì´ ììµëë¤. ë¤ì ë ëë§íë ¤ë©´ cleanup ì ë¨¼ì  í¸ì¶í´ì£¼ì¸ì.")).name="AlreadyWidgetRenderedError",e}return s(r)}(f(Error)),GT=function(){function e(t){i(this,e),this._currency="KRW",Cx("number"==typeof t&&!Number.isNaN(t),new rT),this._value=t}return s(e,[{key:"value",get:function(){return this._value}},{key:"currency",get:function(){return this._currency}},{key:"equals",value:function(e){return this.value===e.value}}],[{key:"of",value:function(t){return new e(t.value)}},{key:"isDomestic",value:function(e){return"KRW"===e.currency}}]),e}(),VT=function(){function e(t,r){i(this,e),Cx("number"==typeof t&&!Number.isNaN(t)&&this.ììì _ìë¦¬ìë_ìµë_ëìë¦¬ì¸ê°(t),new rT),Cx(["USD","JPY"].includes(r),new nT),this._value=t,this._currency=r}return s(e,[{key:"value",get:function(){return this._value}},{key:"currency",get:function(){return this._currency}},{key:"ììì _ìë¦¬ìë_ìµë_ëìë¦¬ì¸ê°",value:function(e){return/^-?\d+(\.\d{1,2})?$/.test(e.toString())}},{key:"equals",value:function(e){return this.value===e.value&&this.currency===e.currency}},{key:"isUSDCurrency",value:function(){return"USD"===this.currency}},{key:"isJPYCurrency",value:function(){return"JPY"===this.currency}}],[{key:"of",value:function(t){return new e(t.value,t.currency)}}]),e}(),YT=function(){function e(t,r,n){i(this,e),this.externalBrandpayAuthenticatedAPIService=t,this.brandpayCustomerSessionRepository=r,this.mutex=n}return s(e,[{key:"getTemporaryMethods",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.mutex.acquire();case 3:return t=this.brandpayCustomerSessionRepository.findCurrentToken(),e.next=6,this.externalBrandpayAuthenticatedAPIService.getTemporaryMethods(t);case 6:return r=e.sent,n=r.temporaryPaymentMethods,o=r.newCustomerToken,e.abrupt("return",(this.brandpayCustomerSessionRepository.saveCurrentToken(o),n));case 10:return e.prev=10,this.mutex.release(),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,,10,13]])})))}},{key:"getIdentity",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.mutex.acquire();case 3:return t=this.brandpayCustomerSessionRepository.findCurrentToken(),e.next=6,this.externalBrandpayAuthenticatedAPIService.getIdentity(t);case 6:return r=e.sent,n=r.identity,o=r.newCustomerToken,e.abrupt("return",(this.brandpayCustomerSessionRepository.saveCurrentToken(o),n));case 10:return e.prev=10,this.mutex.release(),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,,10,13]])})))}},{key:"getRegisteredPaymentMethods",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.mutex.acquire();case 3:return t=this.brandpayCustomerSessionRepository.findCurrentToken(),e.next=6,this.externalBrandpayAuthenticatedAPIService.getRegisteredPaymentMethods(t);case 6:return r=e.sent,n=r.registeredPaymentMethods,o=r.newCustomerToken,e.abrupt("return",(this.brandpayCustomerSessionRepository.saveCurrentToken(o),n));case 10:return e.prev=10,this.mutex.release(),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,,10,13]])})))}},{key:"getProperties",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.mutex.acquire();case 3:return t=this.brandpayCustomerSessionRepository.findCurrentToken(),e.next=6,this.externalBrandpayAuthenticatedAPIService.getProperties(t);case 6:return r=e.sent,n=r.properties,o=r.newCustomerToken,e.abrupt("return",(this.brandpayCustomerSessionRepository.saveCurrentToken(o),n));case 10:return e.prev=10,this.mutex.release(),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,,10,13]])})))}},{key:"updateProperties",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.mutex.acquire();case 3:return r=this.brandpayCustomerSessionRepository.findCurrentToken(),t.next=6,this.externalBrandpayAuthenticatedAPIService.updateProperties({customerToken:r,properties:e});case 6:return n=t.sent,o=n.newCustomerToken,t.abrupt("return",void this.brandpayCustomerSessionRepository.saveCurrentToken(o));case 9:return t.prev=9,this.mutex.release(),t.finish(9);case 12:case"end":return t.stop()}}),t,this,[[0,,9,12]])})))}}]),e}(),HT=function(){function e(t){i(this,e),this.productStage=t,this.parameters=new Map,this.events=new Map,this.productURLMap=null,this.commandNames=[],this.queryNames=[]}return s(e,[{key:"implementSpec",value:function(e){for(var t,r,n,o=e,i=0,a=Object.entries(o.parameter);i<a.length;i++){var s=g(a[i],2),u=s[0],c=s[1];this.parameters.set((n=u.replace("set","")).charAt(0).toLowerCase()+n.slice(1),c)}for(var l=0,d=Object.entries(o.event);l<d.length;l++){var h=g(d[l],2),m=h[0],f=h[1];this.events.set(m.replace("on","").replace(/([a-z])([A-Z])/g,"$1_$2").replace(/([A-Z])([A-Z][a-z])/g,"$1_$2").toUpperCase(),f)}return this.commandNames=null!=(t=null==o?void 0:o.command)?t:[],this.queryNames=null!=(r=null==o?void 0:o.query)?r:[],this.productURLMap=o.productURL,this}},{key:"build",value:function(){var e=new jT(this.productURLMap[this.productStage],this.parameters,this.events);return Object.assign(e,e.createCommandMethods(this.commandNames),e.createQueryMethods(this.queryNames))}}]),e}(),jT=function(){function e(t,r,n){i(this,e),this.productURL=t,this.parameters=r,this.events=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.events.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}},{key:"getProductURL",value:function(){return this.productURL}},{key:"createCommandMethods",value:function(e){var t,r=this,n={},o=b(e);try{var i=function(){var e=t.value;n[e]=function(t){return Cx("function"==typeof r.executeCommand,new Error("ì íì´ ëªë ¹ì ìíí  ì¤ë¹ê° ëì§ ìììµëë¤")),r.executeCommand(zT(e),t)}};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}return n}},{key:"createQueryMethods",value:function(e){var t,r=this,n={},o=b(e);try{var i=function(){var e=t.value;n[e]=function(t){return Cx("function"==typeof r.executeQuery,new Error("ì íì´ ëªë ¹ì ìíí  ì¤ë¹ê° ëì§ ìììµëë¤")),r.executeQuery(zT(e),t)}};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}return n}}]),e}();function zT(e){return e.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase()}var JT=function(){function e(t){var r=this;i(this,e),this.timeout=t,this.status="pending",this.cancelListeners=[],this.cancelReason=null,this.id=Ox(),this.resolve=function(e){},this.reject=function(){},this.process=new Promise((function(e,t){if(null==r.timeout)return r.resolve=e,void(r.reject=t);var n=setTimeout((function(){r.cancel(new XT(r))}),r.timeout);r.resolve=function(t){clearTimeout(n),e(t)},r.reject=function(e){clearTimeout(n),t(e)}}))}return s(e,[{key:"getId",value:function(){return this.id}},{key:"isPending",value:function(){return"pending"===this.status}},{key:"isProcessing",value:function(){return"processing"===this.status}},{key:"processing",value:function(){this.status="processing"}},{key:"wait",value:function(){return this.process}},{key:"finish",value:function(e){this.status="finished",this.resolve(e)}},{key:"isFinished",value:function(){return"finished"===this.status}},{key:"cancel",value:function(e){this.status="canceled";var t,r=b(this.cancelListeners);try{for(r.s();!(t=r.n()).done;){(0,t.value)(e)}}catch(e){r.e(e)}finally{r.f()}this.cancelReason=e,this.reject(e)}},{key:"onCancel",value:function(e){this.cancelListeners.push(e)}},{key:"isCanceled",value:function(){return"canceled"===this.status}},{key:"getCancelReason",value:function(){return this.cancelReason}}]),e}(),QT=function(e){c(r,e);var t=v(r);function r(e,n){var o;return i(this,r),(o=t.call(this,e)).task=n,o}return s(r)}(f(Error)),XT=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,"Task is Timeout",e)).task=e,n}return s(r)}(QT),ZT=function(){function e(t,r,n,o,a,s,u,c){i(this,e),this.brandpayAuthenticatedAPIService=t,this.brandpayPublicServerAPI=r,this.customerSessionRepository=n,this.checkoutProductLauncherFactory=o,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.externalBrandpayNativeSDKFacade=u,this.brandpayMidRepository=c}return s(e,[{key:"authenticateCustomer",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Cx,e.t1=!0,e.next=4,this.brandpayPublicServerAPI.isTermsAgreed();case 4:return e.t2=e.sent,e.t3=e.t1===e.t2,e.t4=new Zx,(0,e.t0)(e.t3,e.t4),e.next=10,this.brandpayPublicServerAPI.authenticateCustomerToken();case 10:return t=e.sent,this.customerSessionRepository.saveCurrentToken(t),e.prev=12,e.next=15,this.brandpayAuthenticatedAPIService.getTemporaryMethods();case 15:return r=e.sent,n=r.account,o=r.card,Cx(null==n&&null==o,new Zx),e.next=21,this.brandpayAuthenticatedAPIService.getIdentity();case 21:i=e.sent,a=i.isIdentified,s=i.authType,Cx(a,new Zx),Cx(null!=s&&"NONE"!==s,new Zx),e.next=32;break;case 27:if(e.prev=27,e.t5=e.catch(12),!(e.t5 instanceof $x)){e.next=31;break}throw e.t5;case 31:throw new Zx;case 32:case"end":return e.stop()}}),e,this,[[12,27]])})))}},{key:"registerCustomer",value:function(){return ax(this,arguments,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s=this,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},r=new JT(null),e.prev=2,n=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),o=this.productStageRepository.getLiveProductStage(),i={process:"PENDING"},a=new HT(o).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/register-customer",staging:"https://connect-staging.tosspayments.com/v2/m/entry/register-customer",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/register-customer"},parameter:{setClientKey:function(){return Promise.resolve(s.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var e,t,r=null!=(t=null==(e=s.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomerKey:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){return ax(s,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.brandpayPublicServerAPI.authenticateCustomerToken();case 3:return t=e.sent,e.abrupt("return",(this.customerSessionRepository.saveCurrentToken(t),t));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))},setSessionId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setRegisterablePaymentMethodTarget:function(){var e;return Promise.resolve(null!=(e=t.methodType)?e:"ë¯¸ì í")},setAddPaymentMethodFunnelResumeOptions:function(){var e;return Promise.resolve({resume:null!=(e=t.resume)&&e})},setCustomStyle:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomStyle())},setCustomContext:function(){return Promise.resolve(null)},setAppInfo:function(){return s.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return s.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return s.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(i)},setHardwareFeatureSupport:function(){return Promise.all([s.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule(),s.externalBrandpayNativeSDKFacade.isUsableOCRModule()]).then((function(e){var t=g(e,2);return{biometricAuth:{available:t[0]},ocr:{available:t[1]}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsCreditCardScanAvailable:function(){return s.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))},setScanCreditCardEventProcess:function(){return Promise.resolve({process:"FAIL",code:"FAILED",message:"NotSupportedEnvironment"})},setWithBillingTerms:function(){return Promise.resolve(!1)}},event:{onCloseRequest:function(){return ax(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.isFinished()||r.isProcessing(),e.t0){e.next=6;break}return r.processing(),e.next=5,n.shutdown();case 5:r.cancel(new dT);case 6:case"end":return e.stop()}}),e)})))},onCustomerRegister:function(){return ax(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.isProcessing(),e.t0){e.next=8;break}if(r.processing(),e.t1=t.keepProductAfterRegister,e.t1){e.next=7;break}return e.next=7,n.shutdown();case 7:r.finish();case 8:case"end":return e.stop()}}),e)})))},onPaymentMethodRegister:function(){var e;return null==(e=t.onPaymentMethodRegister)||e.call(t),Promise.resolve()},onBiometricAuthTokenRegister:function(e){return ax(s,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:i={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),i=t.t0 instanceof Qx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return s.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()},onCreditCardScan:function(){throw new eT}}}).build(),e.next=8,n.launch(a);case 8:return e.next=10,r.wait();case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(2),r.cancel(e.t0);case 16:return e.abrupt("return",r.wait());case 17:case"end":return e.stop()}}),e,this,[[2,13]])})))}}]),e}(),$T=function(){function e(){i(this,e),this.tasks=new Set,this.subscriber=null,this.status="pending"}return s(e,[{key:"add",value:function(e){this.tasks.add(e),this.process(e)}},{key:"isProcessing",value:function(){return"processing"===this.status}},{key:"subscribe",value:function(e){var t=this;if(null!=this.subscriber)throw new eN;this.subscriber=e,this.tasks.size>0&&this.tasks.forEach((function(e){return t.process(e)}));var r=!1;return{unsubscribe:function(){if(r)throw new tN;t.subscriber=null,r=!0}}}},{key:"process",value:function(e){var t=this;if(null!=this.subscriber)try{this.status="processing";var r=this.subscriber.next(e);r instanceof Promise?r.then((function(){t.tasks.delete(e),t.checkIfAllTasksDone()})).catch((function(){t.tasks.delete(e),t.checkIfAllTasksDone()})):(this.tasks.delete(e),this.checkIfAllTasksDone())}catch(t){this.tasks.delete(e),this.checkIfAllTasksDone()}}},{key:"checkIfAllTasksDone",value:function(){0===this.tasks.size&&this.subscriber&&(this.status="pending",this.subscriber.done())}}]),e}(),eN=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"[ParallelTaskScheduler] Already Subscribed")}return s(r)}(f(Error)),tN=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"[ParallelTaskScheduler] Already Unsubscribed")}return s(r)}(f(Error)),rN=function(){function e(){i(this,e),this.isPaused=!1,this.subscriber=null,this.buffer=[]}return s(e,[{key:"publish",value:function(e){this.buffer.push(e),this.handleLoop()}},{key:"subscribe",value:function(e){var t=this;if(null!=this.subscriber)throw new nN;this.subscriber=e,this.handleLoop();var r=!1;return{unsubscribe:function(){if(r)throw new oN;t.subscriber=null,r=!0}}}},{key:"handleLoop",value:function(){var e=this;if(this.buffer.length>0&&null!=this.subscriber&&!this.isPaused){this.isPaused=!0;try{var t=this.buffer.shift(),r=this.subscriber.next(t);r instanceof Promise?r.then((function(){e.isPaused=!1,e.handleLoop()})).catch((function(){e.isPaused=!1})):(this.isPaused=!1,this.handleLoop())}catch(e){this.isPaused=!1}}}}]),e}(),nN=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"[HappyMQ] Already Subscribed")}return s(r)}(f(Error)),oN=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"[HappyMQ] Already Unsubscribed")}return s(r)}(f(Error)),iN=function(){function e(){i(this,e),this.queue=new rN}return s(e,[{key:"add",value:function(e){this.queue.publish(e)}},{key:"subscribe",value:function(e){this.queue.subscribe(e)}}]),e}(),aN=function(){function e(t){var r=this;i(this,e),this.mutex=t,this.tasks=new Map,this.waitingTasks=function(){var e=[];return{enqueue:function(t){e.push(t)},dequeue:function(){return e.shift()},peek:function(){return e[0]},size:function(){return e.length},getItems:function(){return[].concat(e)}}}(),this.cancelSubscribers=[],this.sequentialTaskScheduler=new iN,this.parallelTaskScheduler=new $T,this.sequentialTaskScheduler.subscribe({next:function(e){return e.wait().catch((function(){r.notifyCancelSubscribers(e)})).finally((function(){r.mutex.release(),r.tasks.delete(e.getId())}))}}),this.parallelTaskScheduler.subscribe({next:function(e){return e.wait().catch((function(){r.notifyCancelSubscribers(e)})).finally((function(){r.tasks.delete(e.getId())}))},done:function(){r.mutex.release()}})}return s(e,[{key:"notifyCancelSubscribers",value:function(e){var t=e.getCancelReason();null!=t&&this.cancelSubscribers.forEach((function(e){e(t)}))}},{key:"start",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isRunnable(new Set(this.tasks.values()))){t.next=2;break}throw new yT("ì´ë¯¸ ë¤ë¥¸ ëªë ¹ì ìííê³  ìì´ì");case 2:if(this.tasks.set(e.getId(),e),this.waitingTasks.enqueue(e),!e.isParallel()){t.next=15;break}if(!this.parallelTaskScheduler.isProcessing()||this.getNextTask()!==e){t.next=9;break}this.waitingTasks.dequeue(),this.parallelTaskScheduler.add(e),t.next=13;break;case 9:return t.next=11,this.mutex.acquire();case 11:this.handleLeadingParallelTasks(),this.parallelTaskScheduler.add(e);case 13:t.next=19;break;case 15:return t.next=17,this.mutex.acquire();case 17:this.waitingTasks.dequeue(),this.sequentialTaskScheduler.add(e);case 19:case"end":return t.stop()}}),t,this)})))}},{key:"getNextTask",value:function(){return this.waitingTasks.peek()}},{key:"getNumberOfLeadingParallelTasks",value:function(){var e,t=0,r=b(this.waitingTasks.getItems());try{for(r.s();!(e=r.n()).done;){if(!e.value.isParallel())break;t++}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"handleLeadingParallelTasks",value:function(){var e=this.getNumberOfLeadingParallelTasks();if(e>0){for(var t=0;t<e;t++)this.waitingTasks.dequeue();for(var r=0;r<e-1;r++)this.mutex.release()}}},{key:"cancelPendingTask",value:function(e){var t,r=b(this.tasks.values());try{for(r.s();!(t=r.n()).done;){var n=t.value;n.isPending()&&n.cancel(e.reason)}}catch(e){r.e(e)}finally{r.f()}}},{key:"cancelEveryTask",value:function(e){var t,r=b(this.tasks.values());try{for(r.s();!(t=r.n()).done;){t.value.cancel(e.reason)}}catch(e){r.e(e)}finally{r.f()}}},{key:"subscribeCancel",value:function(e){this.cancelSubscribers.push(e)}}]),e}(),sN=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),t.call(this,"INFINITY"===(null==e?void 0:e.timeout)?null:null!=(n=null==e?void 0:e.timeout)?n:6e4)}return s(r)}(JT),uN=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"isRunnable",value:function(e){return 0===e.size||Array.from(e).every((function(e){return e instanceof lN}))}},{key:"isParallel",value:function(){return!1}}]),r}(sN),cN=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"isRunnable",value:function(e){return 0===e.size||Array.from(e).every((function(e){return e instanceof lN||e.isParallel()}))}},{key:"isParallel",value:function(){return!0}}]),r}(sN),lN=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r,[{key:"isRunnable",value:function(e){return!0}},{key:"isParallel",value:function(){return!1}}]),r}(sN),dN=function(){function e(t,r,n,o,a,s,u,c){i(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=o,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.externalBrandpayNativeSDKFacade=u,this.brandpayMidRepository=c}return s(e,[{key:"execute",value:function(){return ax(this,arguments,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s,u,c,l=this,d=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},n=new uN({timeout:"INFINITY"}),e.next=4,this.taskScheduler.start(n);case 4:return e.prev=4,e.prev=5,e.next=8,this.customerAuthService.authenticateCustomer();case 8:e.next=25;break;case 10:if(e.prev=10,e.t0=e.catch(5),!(e.t0 instanceof $x)){e.next=17;break}return e.next=15,this.customerAuthService.registerCustomer({resume:t.resume,keepProductAfterRegister:!0});case 15:e.next=25;break;case 17:if(e.t0 instanceof Zx){e.next=19;break}throw e.t0;case 19:return o=!1,e.next=22,this.customerAuthService.registerCustomer({resume:t.resume,onPaymentMethodRegister:function(){o=!0}});case 22:if(null==(r=t.onRegister)||r.call(t),!o){e.next=25;break}return e.abrupt("return",(n.finish(void 0),n.wait()));case 25:return i=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),a=this.productStageRepository.getLiveProductStage(),s={process:"PENDING"},u=!1,c=new HT(a).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/add-payment-method",staging:"https://connect-staging.tosspayments.com/v2/m/entry/add-payment-method",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/add-payment-method"},parameter:{setClientKey:function(){return Promise.resolve(l.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var e,t,r=null!=(t=null==(e=l.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomerKey:function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(l.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setSessionId:function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setRegisterablePaymentMethodTarget:function(){return Promise.resolve("ë¯¸ì í")},setCustomStyle:function(){return Promise.resolve(l.customerSessionRepository.findCurrentSession().getCustomStyle())},setCustomContext:function(){return Promise.resolve(null)},setAppInfo:function(){return l.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return l.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return l.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(s)},setHardwareFeatureSupport:function(){return Promise.all([l.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule(),l.externalBrandpayNativeSDKFacade.isUsableOCRModule()]).then((function(e){var t=g(e,2);return{biometricAuth:{available:t[0]},ocr:{available:t[1]}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsCreditCardScanAvailable:function(){return l.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))},setScanCreditCardEventProcess:function(){return Promise.resolve({process:"FAIL",code:"FAILED",message:"NotSupportedEnvironment"})},setWithBillingTerms:function(){return Promise.resolve(!1)}},event:{onCloseRequest:function(){return ax(l,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.isProcessing(),e.t0){e.next=6;break}return n.processing(),e.next=5,i.shutdown();case 5:u?n.finish(void 0):n.cancel(new dT);case 6:case"end":return e.stop()}}),e)})))},onPaymentMethodRegister:function(){return u=!0,Promise.resolve()},onBiometricAuthTokenRegister:function(e){return ax(l,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:s={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),s=t.t0 instanceof Qx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return l.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()},onCreditCardScan:function(){throw new eT}}}).build(),e.next=30,i.launch(c);case 30:return e.next=32,n.wait();case 32:return e.abrupt("return",e.sent);case 35:e.prev=35,e.t1=e.catch(4),n.cancel(e.t1);case 38:return e.abrupt("return",n.wait());case 39:case"end":return e.stop()}}),e,this,[[4,35],[5,10]])})))}}]),e}(),hN=function(){function e(t,r,n,o,a,s,u,c){i(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=o,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.externalBrandpayNativeSDKFacade=u,this.brandpayMidRepository=c}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new uN({timeout:"INFINITY"}),e.next=3,this.taskScheduler.start(t);case 3:return e.prev=3,e.prev=4,e.next=7,this.customerAuthService.authenticateCustomer();case 7:e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(4),e.t0 instanceof Zx||e.t0 instanceof $x){e.next=13;break}throw e.t0;case 13:return e.next=15,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 15:return r=this.customerSessionRepository.findCurrentSession(),n=this.checkoutProductLauncherFactory.getLauncher({target:r.getWindowTarget()}),o=this.productStageRepository.getLiveProductStage(),i={process:"PENDING"},a=new HT(o).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-cash-receipt-settings",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-cash-receipt-settings",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/change-cash-receipt-settings"},parameter:{setClientKey:function(){return Promise.resolve(s.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var e,t,r=null!=(t=null==(e=s.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomerKey:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(s.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setOrigin:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setSessionId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setCustomStyle:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return s.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return s.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return s.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(i)},setHardwareFeatureSupport:function(){return Promise.all([s.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule(),s.externalBrandpayNativeSDKFacade.isUsableOCRModule()]).then((function(e){var t=g(e,2);return{biometricAuth:{available:t[0]},ocr:{available:t[1]}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))}},event:{onCloseRequest:function(){return ax(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.isProcessing(),e.t0){e.next=6;break}return t.processing(),e.next=5,n.shutdown();case 5:t.cancel(new dT);case 6:case"end":return e.stop()}}),e)})))},onCashReceiptChange:function(e){return ax(s,null,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=t.isProcessing(),r.t0){r.next=6;break}return t.processing(),r.next=5,n.shutdown();case 5:t.finish(e);case 6:case"end":return r.stop()}}),r)})))},onBiometricAuthTokenRegister:function(e){return ax(s,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:i={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),i=t.t0 instanceof Qx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return s.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()}}}).build(),e.next=20,n.launch(a);case 20:return e.next=22,t.wait();case 22:return e.abrupt("return",e.sent);case 25:e.prev=25,e.t1=e.catch(3),t.cancel(e.t1);case 28:return e.abrupt("return",t.wait());case 29:case"end":return e.stop()}}),e,this,[[3,25],[4,9]])})))}}]),e}(),mN=function(){function e(t,r,n,o,a,s,u,c,l){i(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=o,this.brandpayPublicServerAPI=a,this.productStageRepository=s,this.brandpayClientKeyRepository=u,this.externalBrandpayNativeSDKFacade=c,this.brandpayMidRepository=l}return s(e,[{key:"execute",value:function(){return ax(this,arguments,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s,u,c=this,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},r=t.oneTouchPayLabel,n=new uN({timeout:"INFINITY"}),e.next=4,this.taskScheduler.start(n);case 4:return e.prev=4,e.next=7,this.brandpayPublicServerAPI.getMerchantIntegration();case 7:return o=e.sent,Cx(!0===o.useMerchantOneTouch,new jx),e.prev=10,e.next=13,this.customerAuthService.authenticateCustomer();case 13:e.next=21;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0 instanceof Zx||e.t0 instanceof $x){e.next=19;break}throw e.t0;case 19:return e.next=21,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 21:return i=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),a=this.productStageRepository.getLiveProductStage(),s={process:"PENDING"},u=new HT(a).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-one-touch-pay-settings",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-one-touch-pay-settings",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/change-one-touch-pay-settings"},parameter:{setClientKey:function(){return Promise.resolve(c.brandpayClientKeyRepository.findCurrentClientKey().value)},setCustomerKey:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(c.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setSessionId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setMid:function(){var e,t;return Promise.resolve(null!=(t=null==(e=c.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null)},setCustomStyle:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return c.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return c.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return c.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(s)},setHardwareFeatureSupport:function(){return Promise.all([c.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:g(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setOneTouchPayLabel:function(){return Promise.resolve(null!=r?r:"ìí°ì¹ê²°ì ")}},event:{onCloseRequest:function(){return ax(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.shutdown();case 2:n.cancel(new dT);case 3:case"end":return e.stop()}}),e)})))},onBiometricAuthTokenRegister:function(e){return ax(c,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:s={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),s=t.t0 instanceof Qx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return c.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()}}}).build(),e.next=26,i.launch(u);case 26:return e.next=28,n.wait();case 28:return e.abrupt("return",e.sent);case 31:e.prev=31,e.t1=e.catch(4),n.cancel(e.t1);case 34:return e.abrupt("return",n.wait());case 35:case"end":return e.stop()}}),e,this,[[4,31],[10,15]])})))}}]),e}(),fN=function(){function e(t,r,n,o,a,s,u,c){i(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=o,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.externalBrandpayNativeSDKFacade=u,this.brandpayMidRepository=c}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new uN({timeout:"INFINITY"}),e.next=3,this.taskScheduler.start(t);case 3:return e.prev=3,e.prev=4,e.next=7,this.customerAuthService.authenticateCustomer();case 7:e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(4),e.t0 instanceof Zx||e.t0 instanceof $x){e.next=13;break}throw e.t0;case 13:return e.next=15,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 15:return r=this.customerSessionRepository.findCurrentSession(),n=this.checkoutProductLauncherFactory.getLauncher({target:r.getWindowTarget()}),o=this.productStageRepository.getLiveProductStage(),i={process:"PENDING"},a=new HT(o).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-password",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-password",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/change-password"},parameter:{setClientKey:function(){return Promise.resolve(s.brandpayClientKeyRepository.findCurrentClientKey().value)},setCustomerKey:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(s.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setOrigin:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setSessionId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setMid:function(){var e,t,r=null!=(t=null==(e=s.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomStyle:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return s.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return s.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return s.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(i)},setHardwareFeatureSupport:function(){return Promise.all([s.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:g(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))}},event:{onCloseRequest:function(){return ax(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.isProcessing(),e.t0){e.next=6;break}return t.processing(),e.next=5,n.shutdown();case 5:t.cancel(new dT);case 6:case"end":return e.stop()}}),e)})))},onPasswordChange:function(){return ax(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.isProcessing(),e.t0){e.next=6;break}return t.processing(),e.next=5,n.shutdown();case 5:t.finish(void 0);case 6:case"end":return e.stop()}}),e)})))},onBiometricAuthTokenRegister:function(e){return ax(s,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:i={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),i=t.t0 instanceof Qx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return s.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()}}}).build(),e.next=20,n.launch(a);case 20:return e.next=22,t.wait();case 22:return e.abrupt("return",e.sent);case 25:e.prev=25,e.t1=e.catch(3),t.cancel(e.t1);case 28:return e.abrupt("return",t.wait());case 29:case"end":return e.stop()}}),e,this,[[3,25],[4,9]])})))}}]),e}(),pN=function(){function e(t,r,n,o,a,s,u,c){i(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=o,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.externalBrandpayNativeSDKFacade=u,this.brandpayMidRepository=c}return s(e,[{key:"execute",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new uN({timeout:"INFINITY"}),t.next=3,this.taskScheduler.start(r);case 3:return t.prev=3,t.prev=4,t.next=7,this.customerAuthService.authenticateCustomer();case 7:t.next=15;break;case 9:if(t.prev=9,t.t0=t.catch(4),t.t0 instanceof Zx||t.t0 instanceof $x){t.next=13;break}throw t.t0;case 13:return t.next=15,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 15:return n=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),o=this.productStageRepository.getLiveProductStage(),i={process:"PENDING"},a={process:"PENDING"},s=new HT(o).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-settings",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-settings",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/change-settings"},parameter:{setClientKey:function(){return Promise.resolve(u.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var e,t,r=null!=(t=null==(e=u.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomerKey:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(u.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setGlobalTraceId:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getInitiator())},setMerchantBrowserId:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setSafeArea:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setSessionId:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getSessionId())},setViewPort:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setOneTouchPayLabel:function(){var t;return Promise.resolve(null!=(t=null==e?void 0:e.oneTouchPayLabel)?t:"ìí°ì¹ê²°ì ")},setCustomStyle:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getCustomStyle())},setCustomContext:function(){return Promise.resolve(null)},setAppInfo:function(){return u.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return u.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return u.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(i)},setHardwareFeatureSupport:function(){return Promise.all([u.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule(),u.externalBrandpayNativeSDKFacade.isUsableOCRModule()]).then((function(e){var t=g(e,2);return{biometricAuth:{available:t[0]},ocr:{available:t[1]}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsCreditCardScanAvailable:function(){return u.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))},setScanCreditCardEventProcess:function(){return Promise.resolve({process:"FAIL",code:"FAILED",message:"NotSupportedEnvironment"})},setUnregisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(a)}},event:{onCloseRequest:function(){return ax(u,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.shutdown();case 2:r.cancel(new dT);case 3:case"end":return e.stop()}}),e)})))},onCustomerUnregister:function(){var t;return null==(t=null==e?void 0:e.onCustomerUnregister)||t.call(e),Promise.resolve()},onPaymentMethodRegister:function(){return ax(u,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(null==(r=null==e?void 0:e.onPaymentMethodRegister)||r.call(e),Promise.resolve()));case 1:case"end":return t.stop()}}),t)})))},onPaymentMethodUnregister:function(){var t;return null==(t=null==e?void 0:e.onPaymentMethodUnregister)||t.call(e),Promise.resolve()},onBiometricAuthTokenRegister:function(e){return ax(u,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:i={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),i=t.t0 instanceof Qx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return ax(u,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={process:"PENDING"},e.prev=1,e.next=4,this.externalBrandpayNativeSDKFacade.removeBiometricAuthToken();case 4:a={process:"SUCCESS"},e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a={process:"FAIL",code:"FAILED",message:e.t0.message};case 10:case"end":return e.stop()}}),e,this,[[1,7]])})))},onCreditCardScan:function(){throw new eT}}}).build(),t.next=20,n.launch(s);case 20:return t.next=22,r.wait();case 22:return t.abrupt("return",t.sent);case 25:t.prev=25,t.t1=t.catch(3),r.cancel(t.t1);case 28:return t.abrupt("return",r.wait());case 29:case"end":return t.stop()}}),t,this,[[3,25],[4,9]])})))}}]),e}(),yN=function(){function e(t,r,n,o){i(this,e),this.taskScheduler=t,this.brandpayCustomerSessionRepository=r,this.brandpayAuthenticatedAPIService=n,this.brandpayPublicServerAPI=o}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new uN,e.next=3,this.taskScheduler.start(t);case 3:return e.prev=3,e.t0=Cx,e.t1=!0,e.next=8,this.brandpayPublicServerAPI.isTermsAgreed();case 8:return e.t2=e.sent,e.t3=e.t1===e.t2,e.t4=new Vx,(0,e.t0)(e.t3,e.t4),e.next=14,this.brandpayPublicServerAPI.authenticateCustomerToken();case 14:return r=e.sent,this.brandpayCustomerSessionRepository.saveCurrentToken(r),e.next=18,this.brandpayAuthenticatedAPIService.getProperties();case 18:return n=e.sent,o=n.useMerchantOneTouch,i=n.useCustomerOneTouch,Cx(!0===o,new jx),t.finish(i),e.next=25,t.wait();case 25:return e.abrupt("return",e.sent);case 28:e.prev=28,e.t5=e.catch(3),t.cancel(e.t5);case 31:return e.abrupt("return",t.wait());case 32:case"end":return e.stop()}}),e,this,[[3,28]])})))}}]),e}(),vN=function(){function e(t,r,n,o,a,s,u){i(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=o,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.brandpayMidRepository=u}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new uN({timeout:"INFINITY"}),e.next=3,this.taskScheduler.start(t);case 3:return e.prev=3,e.prev=4,e.next=7,this.customerAuthService.authenticateCustomer();case 7:e.next=15;break;case 9:if(e.prev=9,e.t0=e.catch(4),e.t0 instanceof Zx||e.t0 instanceof $x){e.next=13;break}throw e.t0;case 13:return e.next=15,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 15:return r=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),n=this.productStageRepository.getLiveProductStage(),o=new HT(n).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/request-billing-auth",staging:"https://connect-staging.tosspayments.com/v2/m/entry/request-billing-auth",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/request-billing-auth"},parameter:{setClientKey:function(){return Promise.resolve(i.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var e,t,r=null!=(t=null==(e=i.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomerKey:function(){return Promise.resolve(i.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(i.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setGlobalTraceId:function(){return Promise.resolve(i.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(i.customerSessionRepository.findCurrentSession().getInitiator())},setMerchantBrowserId:function(){return Promise.resolve(i.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setSafeArea:function(){return Promise.resolve(i.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setSessionId:function(){return Promise.resolve(i.customerSessionRepository.findCurrentSession().getSessionId())},setViewPort:function(){return Promise.resolve(i.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(i.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setCustomStyle:function(){return Promise.resolve(i.customerSessionRepository.findCurrentSession().getCustomStyle())}},event:{onCloseRequest:function(){return ax(i,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.isProcessing(),e.t0){e.next=6;break}return t.processing(),e.next=5,r.shutdown();case 5:t.cancel(new dT);case 6:case"end":return e.stop()}}),e)})))},onBillingAuthSuccess:function(){return ax(i,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.isProcessing(),e.t0){e.next=6;break}return t.processing(),e.next=5,r.shutdown();case 5:t.finish(void 0);case 6:case"end":return e.stop()}}),e)})))}}}).build(),e.next=18,r.launch(o);case 18:return e.next=20,t.wait();case 20:return e.abrupt("return",e.sent);case 23:e.prev=23,e.t1=e.catch(3),t.cancel(e.t1);case 26:return e.abrupt("return",t.wait());case 27:case"end":return e.stop()}}),e,this,[[3,23],[4,9]])})))}}]),e}(),gN=function(){function e(t,r,n,o,a,s,u,c,l,d){i(this,e),this.taskScheduler=t,this.customerAuthService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=o,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.urlValidator=u,this.domainLogService=c,this.externalBrandpayNativeSDKFacade=l,this.brandpayPublicServerAPI=d}return s(e,[{key:"execute",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.parseRedirectUrl(e),n=new uN({timeout:"INFINITY"}),t.next=3,this.taskScheduler.start(n);case 3:if(t.prev=3,!(e.amount.value<=0)){t.next=6;break}throw new oT;case 6:return t.next=8,this.brandpayPublicServerAPI.validatePaymentRequest(e);case 8:return t.prev=8,t.next=11,this.customerAuthService.authenticateCustomer();case 11:this.domainLogService.logBrandpayAuthenticate({methodId:e.methodId}),t.next=20;break;case 14:if(t.prev=14,t.t0=t.catch(8),t.t0 instanceof Zx||t.t0 instanceof $x){t.next=18;break}throw t.t0;case 18:return t.next=20,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 20:return o=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),i=this.productStageRepository.getLiveProductStage(),a={process:"PENDING"},s={process:"PENDING"},u=new HT(i).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/request-payment",staging:"https://connect-staging.tosspayments.com/v2/m/entry/request-payment",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/request-payment"},parameter:{setClientKey:function(){return Promise.resolve(c.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var t;return Promise.resolve(null!=(t=e.mid)?t:null)},setCustomerKey:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(c.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setSessionId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setPaymentInfo:function(){var t=e.orderId,r=e.orderName,n=e.customerEmail,o=e.customerName,i=e.taxFreeAmount,a=e.cultureExpense,s=e.amount,u=e.methodId,c=e.cardInstallmentPlan,l=e.useCardPoint,d=e.discountCode,h=e.cashReceipt,m=e.metadata;return Promise.resolve({orderId:t,orderName:r,customerEmail:n,customerName:o,taxFreeAmount:i,cultureExpense:a,methodId:u,cardInstallmentPlan:c,useCardPoint:l,discountCode:d,cashReceipt:h,amount:s.value,metadata:m})},setCustomContext:function(){return Promise.resolve(null)},setCustomStyle:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return c.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return c.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return c.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(a)},setEncryptBiometricAuthTokenEventProcess:function(){return Promise.resolve(s)},setHardwareFeatureSupport:function(){return Promise.all([c.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:g(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsCreditCardScanAvailable:function(){return c.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))},setScanCreditCardEventProcess:function(){return Promise.resolve({process:"FAIL",code:"FAILED",message:"NotSupportedEnvironment"})}},event:{onCloseRequest:function(){return ax(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n.isProcessing(),e.t0){e.next=6;break}return n.processing(),e.next=5,o.shutdown();case 5:n.cancel(new dT);case 6:case"end":return e.stop()}}),e)})))},onPaymentSuccess:function(e){return ax(c,null,regeneratorRuntime.mark((function t(){var i,a,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=e).methodId,a=i.amount,s=tx(i,["methodId","amount"]),n.isProcessing()){t.next=9;break}return n.processing(),t.next=5,o.shutdown();case 5:if(u=GT.of({value:a}),null==r){t.next=8;break}return t.abrupt("return",void this.customerSessionRepository.findCurrentSession().getWindow().moveTo(r.successUrl,{query:ex($I({},s),{amount:u.value,currency:u.currency})}));case 8:n.finish(ex($I({},s),{amount:u}));case 9:case"end":return t.stop()}}),t,this)})))},onPaymentFail:function(e){return ax(c,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.isProcessing()){t.next=7;break}return n.processing(),t.next=4,o.shutdown();case 4:if(null==r){t.next=6;break}return t.abrupt("return",void this.customerSessionRepository.findCurrentSession().getWindow().moveTo(r.failUrl,{query:e}));case 6:n.cancel(new bT(e));case 7:case"end":return t.stop()}}),t,this)})))},onBiometricAuthTokenRegister:function(e){return ax(c,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:a={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a=t.t0 instanceof Qx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return c.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()},onBiometricAuthTokenEncrypt:function(e){return ax(c,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.getEncryptedBiometricAuthToken(e);case 4:r=t.sent,s={process:"SUCCESS",value:r},t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),s=t.t0 instanceof Qx?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 11:case"end":return t.stop()}}),t,this,[[1,8]])})))},onCreditCardScan:function(){throw new eT},onPaymentMethodNotExists:function(){return ax(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})))},onAccountAuthNumberExpired:function(){return ax(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve());case 1:case"end":return e.stop()}}),e)})))}}}).build(),t.next=25,o.launch(u);case 25:return t.abrupt("return",n.wait());case 28:t.prev=28,t.t1=t.catch(3),n.cancel(t.t1);case 31:return t.abrupt("return",n.wait());case 32:case"end":return t.stop()}}),t,this,[[3,28],[8,14]])})))}},{key:"parseRedirectUrl",value:function(e){return"successUrl"in e&&void 0!==e.successUrl||"failUrl"in e&&void 0!==e.failUrl?(Cx(this.urlValidator.isValid(e.successUrl),new vT),Cx(this.urlValidator.isValid(e.failUrl),new gT),{successUrl:e.successUrl,failUrl:e.failUrl}):null}}]),e}(),wN=function(){function e(t,r,n,o){i(this,e),this.brandpayCustomerSessionRepository=t,this.brandpayClientKeyRepository=r,this.customerSessionFactory=n,this.tracingIdRepository=o}return s(e,[{key:"execute",value:function(e){Cx(e.clientKey.isAPIIndividualKey(),new AT),null!=e.gtid&&this.tracingIdRepository.saveGlobalTraceId(e.gtid),this.brandpayClientKeyRepository.saveCurrentClientKey(e.clientKey);var t=this.customerSessionFactory.createBrandpayCustomerSession({customerKey:e.customerKey,initiator:"brandpay-only",windowTarget:e.windowTarget,redirectURL:e.redirectURL,customStyle:e.customStyle});return this.brandpayCustomerSessionRepository.saveCurrentSession(t),this.brandpayCustomerSessionRepository.findCurrentSession()}}]),e}(),SN=function(){function e(t){i(this,e),Cx("string"==typeof t,new aT),this._value=t}return s(e,[{key:"value",get:function(){return this._value}},{key:"equals",value:function(e){return this.value===e.value}},{key:"isTestKey",value:function(){return this.value.startsWith("test_")}},{key:"isWidgetKey",value:function(){return this.value.startsWith("test_gck")||this.value.startsWith("live_gck")}},{key:"isAPIIndividualKey",value:function(){return this.value.startsWith("test_ck")||this.value.startsWith("live_ck")}}]),e}(),RN=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{allowOverwrite:!1};i(this,e),this.options=t,this.collection=new Map}return s(e,[{key:"set",value:function(e,t){var r=this.get(e);!1===this.options.allowOverwrite&&Cx(null==r,new hT("".concat(e,": ì´ë¯¸ ì¬ì©ì¤ì¸ key ìëë¤."))),this.collection.set(e,t)}},{key:"get",value:function(e){return this.collection.get(e)}},{key:"remove",value:function(e){null!=this.get(e)&&this.collection.delete(e)}},{key:"entries",value:function(){return this.collection.entries()}}]),e}(),bN=function(){function e(t){i(this,e),Cx("string"==typeof t&&/^[A-Za-z0-9-_=.@]{2,50}$/.test(t),new iT),Cx(!this.isSecretKey(t),new sT),this._value=t}return s(e,[{key:"value",get:function(){return this._value}},{key:"equals",value:function(e){return this._value===e.value}},{key:"isAnonymous",value:function(){return this._value===e.ANONYMOUS}},{key:"isSecretKey",value:function(e){return e.startsWith("test_sk")||e.startsWith("live_sk")||e.startsWith("test_gsk")||e.startsWith("live_gsk")}}]),e}();bN.ANONYMOUS="@@ANONYMOUS";var PN=bN,EN=function(){function e(t,r,n){i(this,e),this.tracingIdRepository=t,this.windowManager=r,this.deviceManager=n}return s(e,[{key:"createBrandpayCustomerSession",value:function(e){var t=this.tracingIdRepository.findSessionId(),r=this.tracingIdRepository.findMerchantBrowserId(),n=this.tracingIdRepository.findGlobalTraceId(),o=this.windowManager.getWindow();return{getCustomerKey:function(){return e.customerKey},getWindowTarget:function(){var t;return null!=(t=e.windowTarget)?t:"iframe"},getRedirectURL:function(){return e.redirectURL},getSessionId:function(){return t},getMerchantBrowserId:function(){return r},getInitiator:function(){return e.initiator},isDebugMode:function(){return!0},getGlobalTraceId:function(){return n},getWindow:function(){return o},getCustomStyle:function(){var t,r,n,o,i,a,s,u,c,l,d,h;return{theme:null!=(r=null==(t=e.customStyle)?void 0:t.theme)?r:null,highlightColor:null!=(o=null==(n=e.customStyle)?void 0:n.highlightColor)?o:null,buttonStyle:null!=(a=null==(i=null==e?void 0:e.customStyle)?void 0:i.buttonStyle)?a:null,isPaymentMethodBottomSheetAddMethodVisible:null==(u=null==(s=null==e?void 0:e.customStyle)?void 0:s.isPaymentMethodBottomSheetAddMethodVisible)||u,isNavigationBarVisible:null==(l=null==(c=null==e?void 0:e.customStyle)?void 0:c.isNavigationBarVisible)||l,paddingTop:null!=(h=null==(d=null==e?void 0:e.customStyle)?void 0:d.paddingTop)?h:0}}}}},{key:"createPaymentGatewayCustomerSession",value:function(e){var t=this.tracingIdRepository.findSessionId(),r=this.tracingIdRepository.findMerchantBrowserId(),n=this.tracingIdRepository.findGlobalTraceId(),o=this.windowManager.getWindow(),i=this.deviceManager.getDevice();return{getCustomerKey:function(){return e.customerKey},getSessionId:function(){return t},getMerchantBrowserId:function(){return r},isDebugMode:function(){return!0},getGlobalTraceId:function(){return n},getWindow:function(){return o},getDeviceType:function(){return!0===i.isMobile()?"MOBILE":"PC"},isWidgetSession:function(){var t;return null!=(t=e.isWidgetSession)&&t}}}},{key:"createPaymentWidgetCustomerSession",value:function(e){var t=this.tracingIdRepository.findSessionId(),r=this.tracingIdRepository.findMerchantBrowserId(),n=this.tracingIdRepository.findGlobalTraceId(),o=this.windowManager.getWindow(),i=this.deviceManager.getDevice();return{getCustomerKey:function(){return e.customerKey},getSessionId:function(){return t},getMerchantBrowserId:function(){return r},isDebugMode:function(){return!0},getGlobalTraceId:function(){return n},getWindow:function(){return o},getPreviousPaymentMethodId:function(){return e.previousPaymentMethodId},getDeviceType:function(){return!0===i.isMobile()?"MOBILE":"PC"},getMemberType:function(){return e.customerKey.isAnonymous()?"NON_MEMBER":"MEMBER"}}}}]),e}(),CN=function(){function e(t){i(this,e),this._value=t}return s(e,[{key:"value",get:function(){return this._value}},{key:"equals",value:function(e){return this.value===e.value}}]),e}(),kN=function(){function e(t){i(this,e),this.productStage=t,this.eventListeners=new RN,this.parameters=new RN}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setGtidProvider",value:function(e){return this.parameters.set("gtid",e),this}},{key:"setIsMobileProvider",value:function(e){return this.parameters.set("isMobile",e),this}},{key:"setPayloadProvider",value:function(e){return this.parameters.set("payload",e),this}},{key:"onCancel",value:function(e){return this.eventListeners.set("cancel",e),this}},{key:"build",value:function(){return new AN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),AN=function(){function e(t,r,n){i(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeQuery=null,this.executeCommand=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-gateway-dev.tosspayments.com/billing/mobile",staging:"https://payment-gateway-staging.tosspayments.com/billing/mobile","staging-1":"https://payment-gateway-staging-1.tosspayments.com/billing/mobile","staging-2":"https://payment-gateway-staging-2.tosspayments.com/billing/mobile","staging-3":"https://payment-gateway-staging-3.tosspayments.com/billing/mobile",sandbox:"https://payment-gateway-sandbox.tosspayments.com/billing/mobile",live:"https://payment-gateway.tosspayments.com/billing/mobile"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),IN=function(){function e(t){i(this,e),this.productStage=t,this.eventListeners=new RN,this.parameters=new RN}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setGtidProvider",value:function(e){return this.parameters.set("gtid",e),this}},{key:"setIsMobileProvider",value:function(e){return this.parameters.set("isMobile",e),this}},{key:"setPayloadProvider",value:function(e){return this.parameters.set("payload",e),this}},{key:"onCancel",value:function(e){return this.eventListeners.set("cancel",e),this}},{key:"build",value:function(){return new xN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),xN=function(){function e(t,r,n){i(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeQuery=null,this.executeCommand=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-gateway-dev.tosspayments.com/billing/pc",staging:"https://payment-gateway-staging.tosspayments.com/billing/pc","staging-1":"https://payment-gateway-staging-1.tosspayments.com/billing/pc","staging-2":"https://payment-gateway-staging-2.tosspayments.com/billing/pc","staging-3":"https://payment-gateway-staging-3.tosspayments.com/billing/pc",sandbox:"https://payment-gateway-sandbox.tosspayments.com/billing/pc",live:"https://payment-gateway.tosspayments.com/billing/pc"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),TN=function(){function e(t){i(this,e),this.productStage=t,this.eventListeners=new RN,this.parameters=new RN}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("gtid",e),this}},{key:"setPaymentTokenProvider",value:function(e){return this.parameters.set("paymentToken",e),this}},{key:"setIsPromiseProvider",value:function(e){return this.parameters.set("isPromise",e),this}},{key:"setIsMobileProvider",value:function(e){return this.parameters.set("isMobile",e),this}},{key:"setMIdProvider",value:function(e){return this.parameters.set("mId",e),this}},{key:"onCancel",value:function(e){return this.eventListeners.set("cancel",e),this}},{key:"onSuccess",value:function(e){return this.eventListeners.set("success",e),this}},{key:"onFail",value:function(e){return this.eventListeners.set("fail",e),this}},{key:"build",value:function(){return new NN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),NN=function(){function e(t,r,n){i(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-gateway-dev.tosspayments.com/mobile/direct",staging:"https://payment-gateway-staging.tosspayments.com/mobile/direct","staging-1":"https://payment-gateway-staging-1.tosspayments.com/mobile/direct","staging-2":"https://payment-gateway-staging-2.tosspayments.com/mobile/direct","staging-3":"https://payment-gateway-staging-3.tosspayments.com/mobile/direct",sandbox:"https://payment-gateway-sandbox.tosspayments.com/mobile/direct",live:"https://payment-gateway.tosspayments.com/mobile/direct"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),MN=function(){function e(t){i(this,e),this.productStage=t,this.eventListeners=new RN,this.parameters=new RN}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setIsMobileProvider",value:function(e){return this.parameters.set("isMobile",e),this}},{key:"setPaymentTokenProvider",value:function(e){return this.parameters.set("paymentToken",e),this}},{key:"setIsPromiseProvider",value:function(e){return this.parameters.set("isPromise",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("gtid",e),this}},{key:"setMIdProvider",value:function(e){return this.parameters.set("mId",e),this}},{key:"onCancel",value:function(e){return this.eventListeners.set("cancel",e),this}},{key:"onSuccess",value:function(e){return this.eventListeners.set("success",e),this}},{key:"onFail",value:function(e){return this.eventListeners.set("fail",e),this}},{key:"build",value:function(){return new ON(this.productStage,this.parameters,this.eventListeners)}}]),e}(),ON=function(){function e(t,r,n){i(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-gateway-dev.tosspayments.com/mobile",staging:"https://payment-gateway-staging.tosspayments.com/mobile","staging-1":"https://payment-gateway-staging-1.tosspayments.com/mobile","staging-2":"https://payment-gateway-staging-2.tosspayments.com/mobile","staging-3":"https://payment-gateway-staging-3.tosspayments.com/mobile",sandbox:"https://payment-gateway-sandbox.tosspayments.com/mobile",live:"https://payment-gateway.tosspayments.com/mobile"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),DN=function(){function e(t){i(this,e),this.productStage=t,this.eventListeners=new RN,this.parameters=new RN}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setIsMobileProvider",value:function(e){return this.parameters.set("isMobile",e),this}},{key:"setPaymentTokenProvider",value:function(e){return this.parameters.set("paymentToken",e),this}},{key:"setIsPromiseProvider",value:function(e){return this.parameters.set("isPromise",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("gtid",e),this}},{key:"setMIdProvider",value:function(e){return this.parameters.set("mId",e),this}},{key:"onCancel",value:function(e){return this.eventListeners.set("cancel",e),this}},{key:"onSuccess",value:function(e){return this.eventListeners.set("success",e),this}},{key:"onFail",value:function(e){return this.eventListeners.set("fail",e),this}},{key:"build",value:function(){return new KN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),KN=function(){function e(t,r,n){i(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-gateway-dev.tosspayments.com/pc/direct",staging:"https://payment-gateway-staging.tosspayments.com/pc/direct","staging-1":"https://payment-gateway-staging-1.tosspayments.com/pc/direct","staging-2":"https://payment-gateway-staging-2.tosspayments.com/pc/direct","staging-3":"https://payment-gateway-staging-3.tosspayments.com/pc/direct",sandbox:"https://payment-gateway-sandbox.tosspayments.com/pc/direct",live:"https://payment-gateway.tosspayments.com/pc/direct"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),LN=function(){function e(t){i(this,e),this.productStage=t,this.eventListeners=new RN,this.parameters=new RN}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("gtid",e),this}},{key:"setPaymentTokenProvider",value:function(e){return this.parameters.set("paymentToken",e),this}},{key:"setIsPromiseProvider",value:function(e){return this.parameters.set("isPromise",e),this}},{key:"setIsMobileProvider",value:function(e){return this.parameters.set("isMobile",e),this}},{key:"setMIdProvider",value:function(e){return this.parameters.set("mId",e),this}},{key:"onCancel",value:function(e){return this.eventListeners.set("cancel",e),this}},{key:"onSuccess",value:function(e){return this.eventListeners.set("success",e),this}},{key:"onFail",value:function(e){return this.eventListeners.set("fail",e),this}},{key:"build",value:function(){return new BN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),BN=function(){function e(t,r,n){i(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-gateway-dev.tosspayments.com/pc",staging:"https://payment-gateway-staging.tosspayments.com/pc","staging-1":"https://payment-gateway-staging-1.tosspayments.com/pc","staging-2":"https://payment-gateway-staging-2.tosspayments.com/pc","staging-3":"https://payment-gateway-staging-3.tosspayments.com/pc",sandbox:"https://payment-gateway-sandbox.tosspayments.com/pc",live:"https://payment-gateway.tosspayments.com/pc"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}}]),e}(),_N=function(){function e(t){i(this,e),this.runtimeConfigRepository=t}return s(e,[{key:"execute",value:function(e){var t,r,n,o;this.runtimeConfigRepository.saveCurrentRuntimeConfig({client:null!=e.client?{productStage:null!=(r=null==(t=e.client)?void 0:t.productStage)?r:null}:null,server:null!=e.server?{baseUrl:null!=(o=null==(n=e.server)?void 0:n.baseUrl)?o:null}:null})}}]),e}(),UN=function(){function e(t,r,n,o,a,s,u){i(this,e),this.taskScheduler=t,this.customerSessionRepository=r,this.externalPaymentGatewayService=n,this.checkoutProductLauncherFactory=o,this.productStageRepository=a,this.urlValidator=s,this.clientKeyRepository=u}return s(e,[{key:"execute",value:function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,u,c,l,d,h,m=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.request,o=new uN({timeout:"INFINITY"}),e.next=4,this.taskScheduler.start(o);case 4:return e.prev=4,Cx("CARD"===r.method||"TRANSFER"===r.method,new RT("ë¹ë§ì ì¹´ëì ê³ì¢ì´ì²´ë§ ì§ìí©ëë¤")),Cx(this.urlValidator.isValid(r.successUrl),new vT),Cx(this.urlValidator.isValid(r.failUrl),new gT),i=this.clientKeyRepository.findCurrentClientKey(),a=this.customerSessionRepository.findCurrentSession().getCustomerKey(),s="MOBILE"===this.customerSessionRepository.findCurrentSession().getDeviceType(),e.next=11,this.externalPaymentGatewayService.isValidBillingAuthenticationRequest({clientKey:i,customerKey:a,isMobile:s,request:r});case 11:return u=e.sent,Cx(u.isValid,new PT),c=s?"self":null!=(n=r.windowTarget)?n:"iframe",l=this.checkoutProductLauncherFactory.getLauncher({target:c}),o.onCancel((function(){return l.shutdown()})),d=this.decideProductBuilder({isMobile:s}),h=new d(this.clientKeyRepository.findCurrentClientKey().isTestKey()?this.productStageRepository.getPretestProductStage():this.productStageRepository.getLiveProductStage()).setClientKeyProvider((function(){return ax(m,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.clientKeyRepository.findCurrentClientKey().value);case 1:case"end":return e.stop()}}),e,this)})))})).setGtidProvider((function(){return ax(m,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.customerSessionRepository.findCurrentSession().getGlobalTraceId());case 1:case"end":return e.stop()}}),e,this)})))})).setIsMobileProvider((function(){return ax(m,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s);case 1:case"end":return e.stop()}}),e)})))})).setPayloadProvider((function(){return ax(m,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.stringify({referer:this.customerSessionRepository.findCurrentSession().getWindow().getOrigin(),payMethod:r.method,customerKey:this.customerSessionRepository.findCurrentSession().getCustomerKey().value,customerId:this.customerSessionRepository.findCurrentSession().getCustomerKey().value,CustomerName:r.customerName,CustomerEmail:r.customerEmail,successUrl:r.successUrl,failUrl:r.failUrl,selectableCardTypes:r.selectableCardTypes,windowTarget:c}));case 1:case"end":return e.stop()}}),e,this)})))})).onCancel((function(){return ax(m,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.shutdown();case 2:o.cancel(new dT);case 3:case"end":return e.stop()}}),e)})))})).build(),e.next=19,l.launch(h);case 19:return e.next=21,o.wait();case 21:return e.abrupt("return",e.sent);case 24:e.prev=24,e.t0=e.catch(4),o.cancel(e.t0);case 27:return e.abrupt("return",o.wait());case 28:case"end":return e.stop()}}),e,this,[[4,24]])})))}},{key:"decideProductBuilder",value:function(e){return e.isMobile?kN:IN}}]),e}(),FN=function(){function e(t,r,n,o){i(this,e),this.paymentGatewayCustomerSessionRepository=t,this.clientKeyRepository=r,this.customerSessionFactory=n,this.tracingIdRepository=o}return s(e,[{key:"execute",value:function(e){WN.includes(e.clientKey.value)||Cx(e.clientKey.isAPIIndividualKey(),new AT),null!=e.gtid&&this.tracingIdRepository.saveGlobalTraceId(e.gtid),this.clientKeyRepository.saveCurrentClientKey(e.clientKey);var t=this.customerSessionFactory.createPaymentGatewayCustomerSession({customerKey:e.customerKey});return this.paymentGatewayCustomerSessionRepository.saveCurrentSession(t),this.paymentGatewayCustomerSessionRepository.findCurrentSession()}}]),e}(),WN=["live_gck_GePWvyJnrKJ2v5jOZG4eVgLzN97E","live_gck_0RnYX2w5322lnXOKdBdg3NeyqApQ"],qN=function(){function e(t,r,n,o,a,s,u){i(this,e),this.taskScheduler=t,this.paymentGatewayCustomerSessionRepository=r,this.externalPaymentGatewayService=n,this.checkoutProductLauncherFactory=o,this.productStageRepository=a,this.urlValidator=s,this.clientKeyRepository=u}return s(e,[{key:"execute",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ax(this,null,regeneratorRuntime.mark((function e(){var r,n,o,i,a,s,u,c,l,d,h,m,f,p,y,v,g,w,S,R,b=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new uN({timeout:"INFINITY"}),e.next=3,this.taskScheduler.start(r);case 3:if(e.prev=3,n=t[0],o=t[1],Cx(this.isValidMethodCode(n),new RT),this.isPendingUrlRequired(t)&&(Cx(null!=o.pendingUrl,new ST),Cx(this.urlValidator.isValid(o.pendingUrl),new wT)),this.isForeignEasyPay(n)?Cx(o.amount instanceof VT&&o.amount.isUSDCurrency(),new nT):this.isInternationalCardOnly(n,o)?Cx(o.amount instanceof VT||o.amount instanceof GT,new nT):Cx(o.amount instanceof GT,new nT),i=this.paymentGatewayCustomerSessionRepository.findCurrentSession(),a=this.parseIsPromise(o),s="MOBILE"===i.getDeviceType(),u="flowMode"in o&&"DIRECT"===o.flowMode,c="FOREIGN_EASY_PAY"===n,l="self"===o.windowTarget,d=this.getDefaultLanguage(n,o),Cx(!(a&&s),new TT("ëª¨ë°ì¼ íë©´ììë Promise ë°©ìì ì§ìíì§ ììµëë¤.")),Cx(!(a&&l),new TT('windowTarget="self"ë Promise ë°©ìì ì§ìíì§ ììµëë¤.')),Cx(!(a&&c),new TT("í´ì¸ê°í¸ê²°ì ë Promise ë°©ìì ì§ìíì§ ììµëë¤.")),h=this.checkoutProductLauncherFactory.getLauncher({target:s||l||c?"self":u?"full-iframe":"iframe"}),r.onCancel((function(){return h.shutdown()})),f=(m=o).clientKey,p=tx(m,["clientKey"]),y=null!=f?f:this.clientKeyRepository.findCurrentClientKey(),null==p.sandbox||!1!==y.isTestKey()){e.next=13;break}throw new xT;case 13:return e.next=15,this.externalPaymentGatewayService.validatePaymentRequest({clientKey:y,isMobile:s,isPromise:a,isWidgetSession:i.isWidgetSession(),method:n,request:ex($I({},p),{customerId:i.getCustomerKey().value,language:d})});case 15:return v=e.sent,g=v.paymentToken,w=this.decideProductBuilder({isDirect:u,isMobile:s}),S=new w(this.clientKeyRepository.findCurrentClientKey().isTestKey()?this.productStageRepository.getPretestProductStage():this.productStageRepository.getLiveProductStage()).setClientKeyProvider((function(){return ax(b,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y.value);case 1:case"end":return e.stop()}}),e)})))})).setIsMobileProvider((function(){return ax(b,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s);case 1:case"end":return e.stop()}}),e)})))})).setIsPromiseProvider((function(){return ax(b,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a);case 1:case"end":return e.stop()}}),e)})))})).setGlobalTraceIdProvider((function(){return ax(b,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.getGlobalTraceId());case 1:case"end":return e.stop()}}),e)})))})).setPaymentTokenProvider((function(){return ax(b,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",g);case 1:case"end":return e.stop()}}),e)})))})).onCancel((function(){return ax(b,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.shutdown();case 2:r.cancel(new dT);case 3:case"end":return e.stop()}}),e)})))})).onSuccess((function(e){return ax(b,[e],regeneratorRuntime.mark((function e(t){var n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.paymentKey,o=t.orderId,i=t.amount,e.next=3,h.shutdown();case 3:r.finish({paymentKey:n,orderId:o,amount:GT.isDomestic(p.amount)?GT.of({value:i}):VT.of(p.amount)});case 4:case"end":return e.stop()}}),e)})))})).onFail((function(e){return ax(b,[e],regeneratorRuntime.mark((function e(t){var n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.orderId,o=t.code,i=t.message,e.next=3,h.shutdown();case 3:r.cancel(new bT({orderId:n,code:o,message:i}));case 4:case"end":return e.stop()}}),e)})))})),null!=p.mId&&S.setMIdProvider((function(){return ax(b,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!=(t=p.mId)?t:null);case 1:case"end":return e.stop()}}),e)})))})),R=S.build(),e.next=23,h.launch(R);case 23:return e.next=25,r.wait();case 25:return e.abrupt("return",e.sent);case 28:e.prev=28,e.t0=e.catch(3),r.cancel(e.t0);case 31:return e.abrupt("return",r.wait());case 32:case"end":return e.stop()}}),e,this,[[3,28]])})))}},{key:"decideProductBuilder",value:function(e){var t=e.isDirect;return e.isMobile?t?TN:MN:t?DN:LN}},{key:"parseIsPromise",value:function(e){if("pendingUrl"in e&&void 0!==e.pendingUrl)return!1;var t="successUrl"in e&&void 0!==e.successUrl,r="failUrl"in e&&void 0!==e.failUrl;return!t||!r||(Cx(this.urlValidator.isValid(e.successUrl),new vT),Cx(this.urlValidator.isValid(e.failUrl),new gT),!1)}},{key:"isForeignEasyPay",value:function(e){return"FOREIGN_EASY_PAY"===e}},{key:"isInternationalCardOnly",value:function(e,t){return"CARD"===e&&"useInternationalCardOnly"in t&&!0===t.useInternationalCardOnly}},{key:"isValidMethodCode",value:function(e){return["CARD","VIRTUAL_ACCOUNT","MOBILE_PHONE","TRANSFER","CULTURE_GIFT_CERTIFICATE","GAME_GIFT_CERTIFICATE","BOOK_GIFT_CERTIFICATE","FOREIGN_EASY_PAY","ALL"].includes(e)}},{key:"getDefaultLanguage",value:function(e,t){if(this.isInternationalCardOnly(e,t)&&t.amount instanceof VT){if(t.amount.isJPYCurrency())return"JA";if(t.amount.isUSDCurrency())return"EN"}}},{key:"isPendingUrlRequired",value:function(e){var t=g(e,2),r=t[0],n=t[1];return"FOREIGN_EASY_PAY"===r&&"provider"in n&&["GCASH","TOUCHNGO","BOOST","BPI","BILLEASE","DANA","ALIPAYHK","TRUEMONEY","RABBIT_LINE_PAY","ALIPAY"].includes(n.provider)}}]),e}(),GN=function(){function e(){i(this,e),this.amount=null,this.subscribers=[]}return s(e,[{key:"addSubscriber",value:function(e){this.subscribers.push(e)}},{key:"setAmount",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null!=this.amount&&this.amount.equals(e),t.t0){t.next=5;break}return this.amount=e,t.next=5,this.subscribers.map((function(t){return t.subscribeAmount(e)}));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"getAmount",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.amount);case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),VN=function(){function e(t){i(this,e),this.productStage=t,this.eventListeners=new RN,this.parameters=new RN}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setCustomerKeyProvider",value:function(e){return this.parameters.set("customerKey",e),this}},{key:"setVariantKeyProvider",value:function(e){return this.parameters.set("variantKey",e),this}},{key:"setDeviceTypeProvider",value:function(e){return this.parameters.set("deviceType",e),this}},{key:"setMemberTypeProvider",value:function(e){return this.parameters.set("memberType",e),this}},{key:"setSessionId",value:function(e){return this.parameters.set("sessionId",e),this}},{key:"setMerchantBrowserId",value:function(e){return this.parameters.set("merchantBrowserId",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("globalTraceId",e),this}},{key:"onAgreementStatusChange",value:function(e){return this.eventListeners.set("AGREEMENT_STATUS_CHANGE",e),this}},{key:"build",value:function(){return new YN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),YN=function(){function e(t,r,n){i(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-widget-dev.tosspayments.com/v2/entry/agreement",staging:"https://payment-widget-staging.tosspayments.com/v2/entry/agreement",sandbox:"https://payment-widget-sandbox.tosspayments.com/v2/entry/agreement",live:"https://payment-widget.tosspayments.com/v2/entry/agreement"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}},{key:"getAgreementStatus",value:function(){return Cx("function"==typeof this.executeQuery,new Error("ì íì´ ì¿¼ë¦¬ë¥¼ ìíí  ì¤ë¹ê° ëì§ ìììµëë¤")),this.executeQuery("GET_AGREEMENT_STATUS")}}]),e}(),HN=function(){function e(t){i(this,e),this.productStage=t,this.eventListeners=new RN,this.parameters=new RN}return s(e,[{key:"setClientKeyProvider",value:function(e){return this.parameters.set("clientKey",e),this}},{key:"setVariantKeyProvider",value:function(e){return this.parameters.set("variantKey",e),this}},{key:"setDeviceTypeProvider",value:function(e){return this.parameters.set("deviceType",e),this}},{key:"setCustomerKeyProvider",value:function(e){return this.parameters.set("customerKey",e),this}},{key:"setAmountProvider",value:function(e){return this.parameters.set("amount",e),this}},{key:"setPreviousPaymentMethodIdProvider",value:function(e){return this.parameters.set("previousPaymentMethodId",e),this}},{key:"setGlobalTraceIdProvider",value:function(e){return this.parameters.set("globalTraceId",e),this}},{key:"setSessionIdProvider",value:function(e){return this.parameters.set("sessionId",e),this}},{key:"setMerchantBrowserIdProvider",value:function(e){return this.parameters.set("merchantBrowserId",e),this}},{key:"setOriginProvider",value:function(e){return this.parameters.set("origin",e),this}},{key:"setBrandpayCustomerTokenProvider",value:function(e){return this.parameters.set("brandpayCustomerToken",e),this}},{key:"setBrandpayMidProvider",value:function(e){return this.parameters.set("brandpayMid",e),this}},{key:"onPaymentMethodSelect",value:function(e){return this.eventListeners.set("PAYMENT_METHOD_SELECT",e),this}},{key:"onBrandpaySettingButtonClick",value:function(e){return this.eventListeners.set("BRANDPAY_SETTING_BUTTON_CLICK",e),this}},{key:"onBrandpayAddMethodButtonClick",value:function(e){return this.eventListeners.set("BRANDPAY_ADD_METHOD_BUTTON_CLICK",e),this}},{key:"onBrandpayCashReceiptButtonClick",value:function(e){return this.eventListeners.set("BRANDPAY_CASH_RECEIPT_BUTTON_CLICK",e),this}},{key:"build",value:function(){return new jN(this.productStage,this.parameters,this.eventListeners)}}]),e}(),jN=function(){function e(t,r,n){i(this,e),this.productStage=t,this.parameters=r,this.eventListeners=n,this.executeCommand=null,this.executeQuery=null,this.focusCallback=null}return s(e,[{key:"getProductURL",value:function(){return{dev:"https://payment-widget-dev.tosspayments.com/v2/entry/payment-methods",staging:"https://payment-widget-staging.tosspayments.com/v2/entry/payment-methods",sandbox:"https://payment-widget-sandbox.tosspayments.com/v2/entry/payment-methods",live:"https://payment-widget.tosspayments.com/v2/entry/payment-methods"}[this.productStage]}},{key:"getParameterResolvers",value:function(){return this.parameters.entries()}},{key:"getEventListeners",value:function(){return this.eventListeners.entries()}},{key:"onExecuteCommand",value:function(e){this.executeCommand=e,this.executeCommand}},{key:"onExecuteQuery",value:function(e){this.executeQuery=e,this.executeQuery}},{key:"onFocus",value:function(e){this.focusCallback=e}},{key:"focus",value:function(){var e;null==(e=this.focusCallback)||e.call(this)}},{key:"setAmount",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Cx("function"==typeof this.executeCommand,new Error("ì íì´ ëªë ¹ì ìíí  ì¤ë¹ê° ëì§ ìììµëë¤")),this.executeCommand("SET_AMOUNT",e);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"updateBrandpayCashReceipt",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Cx("function"==typeof this.executeCommand,new Error("ì íì´ ëªë ¹ì ìíí  ì¤ë¹ê° ëì§ ìììµëë¤")),this.executeCommand("UPDATE_BRANDPAY_CASH_RECEIPT",e);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"updateBrandpayPaymentMethod",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Cx("function"==typeof this.executeCommand,new Error("ì íì´ ëªë ¹ì ìíí  ì¤ë¹ê° ëì§ ìììµëë¤")),this.executeCommand("UPDATE_BRANDPAY_PAYMENT_METHOD",e);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"updateBrandpayCustomer",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Cx("function"==typeof this.executeCommand,new Error("ì íì´ ëªë ¹ì ìíí  ì¤ë¹ê° ëì§ ìììµëë¤")),this.executeCommand("UPDATE_BRANDPAY_CUSTOMER",e);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"getSelectedPaymentInfo",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(Cx("function"==typeof this.executeQuery,new Error("ì íì´ ëªë ¹ì ìíí  ì¤ë¹ê° ëì§ ìììµëë¤")),this.executeQuery("GET_SELECTED_PAYMENT_INFO")));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"getSelectedPaymentMethod",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(Cx("function"==typeof this.executeQuery,new Error("ì íì´ ëªë ¹ì ìíí  ì¤ë¹ê° ëì§ ìììµëë¤")),this.executeQuery("GET_SELECTED_PAYMENT_METHOD")));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"validatePaymentRequest",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(Cx("function"==typeof this.executeQuery,new Error("ì íì´ ëªë ¹ì ìíí  ì¤ë¹ê° ëì§ ìììµëë¤")),this.executeQuery("GET_PAYMENT_REQUEST_VALIDATION_RESULT")));case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),zN=function(){function e(t,r,n,o,a){i(this,e),this.taskScheduler=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.productStageRepository=o,this.clientKeyRepository=a}return s(e,[{key:"execute",value:function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,u,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.selector,n=t.variantKey,o=new cN,e.next=4,this.taskScheduler.start(o);case 4:return e.prev=4,i=new RN,a=this.productStageRepository.getLiveProductStage(),s=new VN(a).setClientKeyProvider((function(){return Promise.resolve(c.clientKeyRepository.findCurrentClientKey().value)})).setCustomerKeyProvider((function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomerKey().value)})).setVariantKeyProvider((function(){return Promise.resolve(null!=n?n:"AGREEMENT")})).setMemberTypeProvider((function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getMemberType())})).setDeviceTypeProvider((function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getDeviceType())})).setSessionId((function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getSessionId())})).setMerchantBrowserId((function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getMerchantBrowserId())})).setGlobalTraceIdProvider((function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getGlobalTraceId())})).onAgreementStatusChange((function(e){var t;return null==(t=i.get("agreementStatusChange"))||t({agreedRequiredTerms:e.agreedRequiredTerms,agreements:e.agreements.map((function(e){return{term:{id:e.term.id,required:e.term.required},agreed:e.agreed}}))}),Promise.resolve()})).build(),i.set("destroy",(function(){return u.shutdown(),Promise.resolve()})),u=this.checkoutProductLauncherFactory.getLauncher({target:r}),e.next=10,u.launch(s);case 10:return o.finish(new JN(s,i)),e.next=13,o.wait();case 13:return e.abrupt("return",e.sent);case 16:e.prev=16,e.t0=e.catch(4),o.cancel(e.t0);case 19:return e.abrupt("return",o.wait());case 20:case"end":return e.stop()}}),e,this,[[4,16]])})))}}]),e}(),JN=function(){function e(t,r){i(this,e),this.product=t,this.eventListeners=r}return s(e,[{key:"getAgreementStatus",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.product.getAgreementStatus());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"on",value:function(e,t){Cx("agreementStatusChange"===e,new mT(e)),Cx("function"==typeof t,new fT(e)),this.eventListeners.set(e,t)}},{key:"destroy",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this.eventListeners.get("destroy"))||t();case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),QN=function(){function e(t,r,n,o,a,s,u,c,l,d,h,m){i(this,e),this.taskScheduler=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.productStageRepository=o,this.widgetKeyRepository=a,this.widgetMidResolver=s,this.brandpayCustomerAuthService=u,this.brandpayCustomerSessionRepository=c,this.brandpayChangeSettingsUsecase=l,this.brandpayChangeCashReceiptSettingsUsecase=d,this.brandpayAddPaymentMethodUsecase=h,this.brandpayMidRepository=m}return s(e,[{key:"execute",value:function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,u,c,l,d,h,m=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.selector,n=t.variantKey,o=t.checkout,i=new cN,e.next=4,this.taskScheduler.start(i);case 4:return a="DEFAULT",e.t0=Cx,e.next=8,o.getAmount();case 8:return e.t1=e.sent,e.t2=null!=e.t1,e.t3=new tT,(0,e.t0)(e.t2,e.t3),e.prev=12,e.next=15,this.widgetMidResolver.resolve(null!=n?n:a);case 15:return s=this.customerSessionRepository.findCurrentSession(),u=this.brandpayCustomerSessionRepository.findCurrentSession(),c=new RN,l=this.productStageRepository.getLiveProductStage(),d=new HN(l).setClientKeyProvider((function(){return Promise.resolve(m.widgetKeyRepository.findCurrentClientKey().value)})).setCustomerKeyProvider((function(){var e;return Promise.resolve(null==(e=null==s?void 0:s.getCustomerKey())?void 0:e.value)})).setMerchantBrowserIdProvider((function(){return Promise.resolve(s.getMerchantBrowserId())})).setGlobalTraceIdProvider((function(){return Promise.resolve(s.getGlobalTraceId())})).setVariantKeyProvider((function(){return Promise.resolve(null!=n?n:a)})).setDeviceTypeProvider((function(){return Promise.resolve(s.getDeviceType())})).setPreviousPaymentMethodIdProvider((function(){return Promise.resolve(s.getPreviousPaymentMethodId())})).setSessionIdProvider((function(){return Promise.resolve(s.getSessionId())})).setOriginProvider((function(){return Promise.resolve(u.getWindow().getOrigin())})).setBrandpayMidProvider((function(){var e,t,r=null!=(t=null==(e=m.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)})).setAmountProvider((function(){return ax(m,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.getAmount();case 2:return t=e.sent,e.abrupt("return",(Cx(null!=t,new tT),{value:t.value,currency:t.currency}));case 4:case"end":return e.stop()}}),e)})))})).setBrandpayCustomerTokenProvider((function(){return ax(m,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.brandpayCustomerAuthService.authenticateCustomer();case 3:case 15:e.next=19;break;case 5:if(e.prev=5,e.t0=e.catch(0),!(e.t0 instanceof Zx)){e.next=17;break}return e.prev=8,e.abrupt("return",this.brandpayCustomerSessionRepository.findCurrentToken());case 12:return e.prev=12,e.t1=e.catch(8),e.abrupt("return",null);case 17:if(e.t0 instanceof $x){e.next=19;break}return e.abrupt("return",null);case 19:return e.prev=19,e.abrupt("return",this.brandpayCustomerSessionRepository.findCurrentToken());case 23:return e.prev=23,e.t2=e.catch(19),e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,this,[[0,5],[8,12],[19,23]])})))})).onPaymentMethodSelect((function(e){var t;return null==(t=c.get("paymentMethodSelect"))||t(e),Promise.resolve()})).onBrandpayAddMethodButtonClick((function(e){return ax(m,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.brandpayAddPaymentMethodUsecase.execute({resume:null==e?void 0:e.resume,onRegister:function(){d.updateBrandpayCustomer()}});case 2:return t.next=4,d.updateBrandpayPaymentMethod();case 4:case"end":return t.stop()}}),t,this)})))})).onBrandpayCashReceiptButtonClick((function(){return ax(m,null,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.brandpayChangeCashReceiptSettingsUsecase.execute();case 2:return t=e.sent,r=t.cashReceipt,e.next=6,d.updateBrandpayCashReceipt({cashReceipt:r});case 6:case"end":return e.stop()}}),e,this)})))})).onBrandpaySettingButtonClick((function(){return ax(m,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.brandpayChangeSettingsUsecase.execute({onCustomerUnregister:function(){d.updateBrandpayCustomer()},onPaymentMethodRegister:function(){d.updateBrandpayPaymentMethod()},onPaymentMethodUnregister:function(){d.updateBrandpayPaymentMethod()}});case 2:return e.next=4,d.updateBrandpayPaymentMethod();case 4:case"end":return e.stop()}}),e,this)})))})).build(),h=this.checkoutProductLauncherFactory.getLauncher({target:r}),e.next=18,h.launch(d);case 18:return c.set("destroy",(function(){return h.shutdown(),Promise.resolve()})),i.finish(new XN(d,c,this.customerSessionRepository,null!=n?n:a)),e.next=22,i.wait();case 22:return e.abrupt("return",e.sent);case 25:e.prev=25,e.t4=e.catch(12),i.cancel(e.t4);case 28:return e.abrupt("return",i.wait());case 29:case"end":return e.stop()}}),e,this,[[12,25]])})))}}]),e}(),XN=function(){function e(t,r,n,o){i(this,e),this.product=t,this.eventListeners=r,this.customerSessionRepository=n,this.variantKey=o}return s(e,[{key:"getVariantKey",value:function(){return this.variantKey}},{key:"getSelectedPaymentMethod",value:function(){return this.product.getSelectedPaymentMethod()}},{key:"on",value:function(e,t){Cx(["paymentMethodSelect"].includes(e),new mT(e)),Cx("function"==typeof t,new fT(e)),this.eventListeners.set(e,t)}},{key:"subscribeAmount",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.product.setAmount({value:e.value,currency:e.currency});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"validatePaymentRequest",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.product.validatePaymentRequest();case 2:if((t=e.sent).isValid){e.next=14;break}e.t0=(this.product.focus(),t.errorCode),e.next="PROVIDER_STATUS_UNHEALTHY"===e.t0?7:"NEED_CARD_PAYMENT_DETAIL"===e.t0?8:"NEED_REFUND_ACCOUNT_DETAIL"===e.t0?9:"EXCEED_MAX_DUE_DATE"===e.t0?10:"EXCEED_DEPOSIT_AMOUNT_LIMIT"===e.t0?11:"CUSTOM_PAYMENT_METHOD_UNABLE_TO_PAY"===e.t0?12:13;break;case 7:throw new LT;case 8:throw new OT;case 9:throw new DT;case 10:throw new BT;case 11:throw new KT;case 12:throw new _T;case 13:throw new kT("ì ì ìë ìë¬ê° ë°ìíìµëë¤");case 14:case"end":return e.stop()}}),e,this)})))}},{key:"getSelectedPaymentInfo",value:function(){return this.product.getSelectedPaymentInfo()}},{key:"savePreviousPaymentMethod",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.product.getSelectedPaymentMethod();case 2:return t=e.sent,e.abrupt("return",this.customerSessionRepository.savePreviousPaymentMethodId(t.id));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"destroy",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this.eventListeners.get("destroy"))||t();case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),ZN=function(){function e(t,r,n,o,a,s,u,c){i(this,e),this.paymentWidgetCustomerSessionRepository=t,this.clientKeyRepository=r,this.customerSessionFactory=n,this.tracingIdRepository=o,this.widgetBrandpayCustomerSessionRepository=a,this.widgetKeyinPaymentGatewaySessionRepository=s,this.widgetInternationalPaymentGatewaySessionRepository=u,this.widgetNormalPaymentGatewaySessionRepository=c}return s(e,[{key:"execute",value:function(e){var t;Cx(e.clientKey.isWidgetKey(),new IT),this.clientKeyRepository.saveCurrentClientKey(e.clientKey),null!=e.gtid&&this.tracingIdRepository.saveGlobalTraceId(e.gtid);var r=this.paymentWidgetCustomerSessionRepository.findPreviousPaymentMethodId(),n=this.customerSessionFactory.createPaymentWidgetCustomerSession({customerKey:e.customerKey,previousPaymentMethodId:r});return this.paymentWidgetCustomerSessionRepository.saveCurrentSession(n),this.widgetBrandpayCustomerSessionRepository.saveCurrentSession(this.customerSessionFactory.createBrandpayCustomerSession({customerKey:e.customerKey,initiator:"payment-widget",redirectURL:null==(t=e.brandpay)?void 0:t.redirectUrl})),this.widgetKeyinPaymentGatewaySessionRepository.saveCurrentSession(this.customerSessionFactory.createPaymentGatewayCustomerSession({customerKey:e.customerKey,isWidgetSession:!0})),this.widgetInternationalPaymentGatewaySessionRepository.saveCurrentSession(this.customerSessionFactory.createPaymentGatewayCustomerSession({customerKey:e.customerKey,isWidgetSession:!0})),this.widgetNormalPaymentGatewaySessionRepository.saveCurrentSession(this.customerSessionFactory.createPaymentGatewayCustomerSession({customerKey:e.customerKey,isWidgetSession:!0})),this.paymentWidgetCustomerSessionRepository.findCurrentSession()}}]),e}(),$N=function(){function e(t){i(this,e),this.taskScheduler=t}return s(e,[{key:"execute",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=new lN,r.next=3,this.taskScheduler.start(n);case 3:return e.setAmount(t).then((function(){n.finish(void 0)})),r.next=6,n.wait();case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r,this)})))}}]),e}(),eM=function(){function e(t,r,n,o,a,s){i(this,e),this.taskScheduler=t,this.customerSessionRepository=r,this.widgetClientKeyRepository=n,this.widgetRequestPaymentUseCases=o,this.externalPaymentWidgetService=a,this.domainLogService=s}return s(e,[{key:"execute",value:function(e,t,r){return ax(this,null,regeneratorRuntime.mark((function n(){var o,i,a,s,u,c,l,d,h,m,f,p,y,v,g,w,S,R,b,P,E,C,k,A,I,x,T,N,M;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=new uN({timeout:"INFINITY"}),n.next=3,this.taskScheduler.start(o);case 3:if(n.prev=3,n.t0=null!=r.agreementWidget,!n.t0){n.next=11;break}return n.t1=!1,n.next=9,r.agreementWidget.getAgreementStatus();case 9:n.t2=n.sent.agreedRequiredTerms,n.t0=n.t1===n.t2;case 11:if(!n.t0){n.next=13;break}throw new MT;case 13:return n.next=15,r.paymentMethodsWidget.getSelectedPaymentMethod();case 15:return a=n.sent,n.next=18,this.getMidBySelectedPaymentMethod(r.paymentMethodsWidget);case 18:return s=n.sent,this.domainLogService.logWidgetRequestPaymentStart({selectedPaymentMethod:a,paymentInfo:e,amount:t,mid:s}),n.prev=20,n.next=23,r.paymentMethodsWidget.validatePaymentRequest();case 23:n.next=28;break;case 25:throw n.prev=25,n.t3=n.catch(20),this.domainLogService.logWidgetRequestPaymentFail({selectedPaymentMethod:a,paymentInfo:e,amount:t,mid:s,error:n.t3}),n.t3;case 28:return n.next=30,r.paymentMethodsWidget.getSelectedPaymentInfo();case 30:if(u=n.sent,c=this.widgetClientKeyRepository.findCurrentClientKey(),l=this.customerSessionRepository.findCurrentSession(),!c.isTestKey()||!this.isNotSupportedPaymentMethodInTestPhase(u)){n.next=35;break}throw new UT;case 35:if(null==e.sandbox||!1!==c.isTestKey()){n.next=37;break}throw new xT;case 37:return n.next=39,r.paymentMethodsWidget.savePreviousPaymentMethod();case 39:d="BRANDPAY"===u.code?"BRANDPAY":"NORMAL",h="successUrl"in e?ex($I({},e),{successUrl:Mx(e.successUrl,{paymentType:d})}):e,m=h.pendingUrl,f=h.subMerchantSetting,p=tx(h,["pendingUrl","subMerchantSetting"]),n.t4=(this.domainLogService.logWidgetRequestPaymentSuccess({selectedPaymentMethod:a,paymentInfo:e,amount:t,mid:s}),u.code),n.next="BRANDPAY"===n.t4?43:"KEYIN"===n.t4?48:"PAYPAL"===n.t4?53:"GCASH"===n.t4||"TOUCHNGO"===n.t4||"BOOST"===n.t4||"BPI"===n.t4||"BILLEASE"===n.t4||"DANA"===n.t4||"ALIPAYHK"===n.t4||"TRUEMONEY"===n.t4||"RABBIT_LINE_PAY"===n.t4||"ALIPAY"===n.t4?58:"TRANSFER"===n.t4||"BANKPAY"===n.t4||"OPENBANKING"===n.t4?63:"VIRTUAL_ACCOUNT"===n.t4?68:"MOBILE_PHONE"===n.t4?73:"GAME_GIFT_CERTIFICATE"===n.t4||"BOOK_GIFT_CERTIFICATE"===n.t4||"CULTURE_GIFT_CERTIFICATE"===n.t4?78:"PINPAY"===n.t4?83:"TOSSPAY"===n.t4||"NAVERPAY"===n.t4||"SAMSUNGPAY"===n.t4||"APPLEPAY"===n.t4||"LPAY"===n.t4||"KAKAOPAY"===n.t4||"PAYCO"===n.t4||"SSG"===n.t4?88:"SHINHAN"===n.t4||"HYUNDAI"===n.t4||"SAMSUNG"===n.t4||"WOORI"===n.t4||"KOOKMIN"===n.t4||"LOTTE"===n.t4||"NONGHYEOP"===n.t4||"HANA"===n.t4||"BC"===n.t4||"KDBBANK"===n.t4||"TOSSBANK"===n.t4||"KAKAOBANK"===n.t4||"SUHYEOP"===n.t4||"JEONBUKBANK"===n.t4||"KBANK"===n.t4||"POST"===n.t4||"SAEMAUL"===n.t4||"CITI"===n.t4||"SAVINGBANK"===n.t4||"JEJUBANK"===n.t4||"GWANGJUBANK"===n.t4||"SHINHYEOP"===n.t4||"JCB"===n.t4||"UNIONPAY"===n.t4||"MASTER"===n.t4||"VISA"===n.t4||"DINERS"===n.t4||"DISCOVER"===n.t4||"IBK_BC"===n.t4||"AMEX"===n.t4?93:"KBPAY"===n.t4?98:103;break;case 43:return y=ex($I({amount:t,mid:s},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),methodId:u.params.methodId,cardInstallmentPlan:u.params.installmentPlan,discountCode:u.params.discountCode,useCardPoint:u.params.useCardPoint,cashReceipt:u.params.cashReceipt}),n.next=46,this.widgetRequestPaymentUseCases.getBrandpay().execute(y);case 46:return i=n.sent,n.abrupt("break",103);case 48:return v=ex($I({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),clientKey:null==f?void 0:f.keyinClientKey,mId:null==(null==f?void 0:f.keyinClientKey)?s:void 0}),n.next=51,this.widgetRequestPaymentUseCases.getKeyin().execute("CARD",v);case 51:return i=n.sent,n.abrupt("break",103);case 53:return g=ex($I({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),clientKey:null==f?void 0:f.foreignEasyPayClientKey,mId:null==(null==f?void 0:f.foreignEasyPayClientKey)?s:void 0,provider:u.code,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=56,this.widgetRequestPaymentUseCases.getInternational().execute("FOREIGN_EASY_PAY",g);case 56:return i=n.sent,n.abrupt("break",103);case 58:return w=ex($I({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),clientKey:null==f?void 0:f.foreignEasyPayClientKey,mId:null==(null==f?void 0:f.foreignEasyPayClientKey)?s:void 0,provider:u.code,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,pendingUrl:m}),n.next=61,this.widgetRequestPaymentUseCases.getInternational().execute("FOREIGN_EASY_PAY",w);case 61:return i=n.sent,n.abrupt("break",103);case 63:return S={BANKPAY:"BANKPAY",OPENBANKING:"OPENBANKING",TRANSFER:void 0}[u.code],R=ex($I({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),clientKey:null==f?void 0:f.normalClientKey,mId:null==(null==f?void 0:f.normalClientKey)?s:void 0,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,_transferProvider:S}),n.next=66,this.widgetRequestPaymentUseCases.getNormal().execute("TRANSFER",R);case 66:return i=n.sent,n.abrupt("break",103);case 68:return b=u.params,P=b.depositDeadline,E=b.refundAccount,C=b.customerEmail,k=ex($I({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:C}),clientKey:null==f?void 0:f.normalClientKey,mId:null==(null==f?void 0:f.normalClientKey)?s:void 0,dueDate:kx(P),refundReceiveAccount:null!=E?{bankCode:E.bankId,accountNumber:E.accountNumber,holderName:E.holderName}:void 0,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=71,this.widgetRequestPaymentUseCases.getNormal().execute("VIRTUAL_ACCOUNT",k);case 71:return i=n.sent,n.abrupt("break",103);case 73:return A=ex($I({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),clientKey:null==f?void 0:f.normalClientKey,mId:null==(null==f?void 0:f.normalClientKey)?s:void 0,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=76,this.widgetRequestPaymentUseCases.getNormal().execute("MOBILE_PHONE",A);case 76:return i=n.sent,n.abrupt("break",103);case 78:return I=ex($I({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),clientKey:null==f?void 0:f.normalClientKey,mId:null==(null==f?void 0:f.normalClientKey)?s:void 0,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=81,this.widgetRequestPaymentUseCases.getNormal().execute(u.code,I);case 81:return i=n.sent,n.abrupt("break",103);case 83:return x=ex($I({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),clientKey:null==f?void 0:f.normalClientKey,mId:null==(null==f?void 0:f.normalClientKey)?s:void 0,cardInstallmentPlan:u.params.installmentPlan,flowMode:"DIRECT",easyPay:"PINPAY",customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,paymentMethodOptions:{pinpay:{pinpayCustomerKey:l.getCustomerKey().value}}}),n.next=86,this.widgetRequestPaymentUseCases.getNormal().execute("CARD",x);case 86:return i=n.sent,n.abrupt("break",103);case 88:return T=ex($I({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),clientKey:null==f?void 0:f.normalClientKey,mId:null==(null==f?void 0:f.normalClientKey)?s:void 0,cardInstallmentPlan:u.params.installmentPlan,flowMode:"DIRECT",easyPay:u.code,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=91,this.widgetRequestPaymentUseCases.getNormal().execute("CARD",T);case 91:return i=n.sent,n.abrupt("break",103);case 93:return N=ex($I({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),clientKey:null==f?void 0:f.normalClientKey,mId:null==(null==f?void 0:f.normalClientKey)?s:void 0,cardInstallmentPlan:u.params.installmentPlan,useInternationalCardOnly:!!this.isForeignCardCompanyCode(u.code)||e.useInternationalCardOnly,useAppCardOnly:u.params.useAppCardOnly,useCardPoint:u.params.useCardPoint,freeInstallmentPlans:u.params.freeInstallmentPlans,flowMode:this.isForeignCardCompanyCode(u.code)?"DEFAULT":"DIRECT",cardCompany:u.code,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,discountCode:u.params.discountCode}),n.next=96,this.widgetRequestPaymentUseCases.getNormal().execute("CARD",N);case 96:return i=n.sent,n.abrupt("break",103);case 98:return M=ex($I({amount:t},p),{customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),clientKey:null==f?void 0:f.normalClientKey,mId:null==(null==f?void 0:f.normalClientKey)?s:void 0,cardInstallmentPlan:u.params.installmentPlan,useInternationalCardOnly:e.useInternationalCardOnly,useAppCardOnly:!0,useCardPoint:u.params.useCardPoint,freeInstallmentPlans:u.params.freeInstallmentPlans,flowMode:"DIRECT",cardCompany:"KOOKMIN",customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,discountCode:u.params.discountCode}),n.next=101,this.widgetRequestPaymentUseCases.getNormal().execute("CARD",M);case 101:return i=n.sent,n.abrupt("break",103);case 103:return o.finish(null!=i?ex($I({},i),{paymentType:d}):void 0),n.next=106,o.wait();case 106:return n.abrupt("return",n.sent);case 109:n.prev=109,n.t5=n.catch(3),o.cancel(n.t5);case 112:return n.abrupt("return",o.wait());case 113:case"end":return n.stop()}}),n,this,[[3,109],[20,25]])})))}},{key:"decideCustomerEmail",value:function(e){var t=e.customerEmailFromWidget,r=e.customerEmailFromMerchant;return Dx(t)?r:t}},{key:"isNotSupportedPaymentMethodInTestPhase",value:function(e){return!!this.isDigitalWalletProviderCode(e.code)&&["PAYCO"].includes(e.code)}},{key:"isDigitalWalletProviderCode",value:function(e){return["TOSSPAY","NAVERPAY","SAMSUNGPAY","APPLEPAY","LPAY","KAKAOPAY","PINPAY","PAYCO","SSG"].includes(e)}},{key:"getMidBySelectedPaymentMethod",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.widgetClientKeyRepository.findCurrentClientKey(),n=e.getVariantKey(),t.next=4,this.externalPaymentWidgetService.fetchMidPackage(r,n);case 4:return o=t.sent,t.next=7,e.getSelectedPaymentMethod();case 7:if("BRANDPAY"!==(i=t.sent).code){t.next=11;break}return a=o.getBrandpayMid(),t.abrupt("return",(Cx(null!=a,"ë¸ëëíì´ MIDê° ì¡´ì¬íì§ ììµëë¤."),a.value));case 11:if("KEYIN"!==i.code){t.next=14;break}return s=o.getKeyinMid(),t.abrupt("return",(Cx(null!=s,"í¤ì¸ MIDê° ì¡´ì¬íì§ ììµëë¤."),s.value));case 14:if(null==(u=o.getInternationalMid())){t.next=17;break}return t.abrupt("return",u.value);case 17:return c=o.getNormalMid(),t.abrupt("return",(Cx(null!=c,"ì¼ë° MIDê° ì¡´ì¬íì§ ììµëë¤."),c.value));case 19:case"end":return t.stop()}}),t,this)})))}},{key:"isForeignCardCompanyCode",value:function(e){return["JCB","UNIONPAY","MASTER","VISA","DINERS","DISCOVER","AMEX"].includes(e)}}]),e}(),tM=function(){function e(){i(this,e),this.requestBrandpayPaymentUseCase=null,this.requestKeyinPaymentGatewayUseCase=null,this.requestInternationalPaymentGatewayUseCase=null,this.requestNormalPaymentGatewayUseCase=null}return s(e,[{key:"setRequestBrandpayPaymentUseCase",value:function(e){return this.requestBrandpayPaymentUseCase=e,this}},{key:"setRequestKeyinPaymentGatewayUseCase",value:function(e){return this.requestKeyinPaymentGatewayUseCase=e,this}},{key:"setRequestInternationalPaymentGatewayUseCase",value:function(e){return this.requestInternationalPaymentGatewayUseCase=e,this}},{key:"setRequestNormalPaymentGatewayUseCase",value:function(e){return this.requestNormalPaymentGatewayUseCase=e,this}},{key:"build",value:function(){var e=this;return Cx(null!=this.requestBrandpayPaymentUseCase,"ë¸ëëíì´ ê²°ì  ì ì¤ì¼ì´ì¤ê° ì¤ì ëì§ ìììµëë¤."),Cx(null!=this.requestKeyinPaymentGatewayUseCase,"í¤ì¸ ê²°ì  ì ì¤ì¼ì´ì¤ê° ì¤ì ëì§ ìììµëë¤."),Cx(null!=this.requestInternationalPaymentGatewayUseCase,"í´ì¸ ê°í¸ ê²°ì  ì ì¤ì¼ì´ì¤ê° ì¤ì ëì§ ìììµëë¤."),Cx(null!=this.requestNormalPaymentGatewayUseCase,"ì¼ë° ê²°ì  ì ì¤ì¼ì´ì¤ê° ì¤ì ëì§ ìììµëë¤."),{getBrandpay:function(){return e.requestBrandpayPaymentUseCase},getKeyin:function(){return e.requestKeyinPaymentGatewayUseCase},getInternational:function(){return e.requestInternationalPaymentGatewayUseCase},getNormal:function(){return e.requestNormalPaymentGatewayUseCase}}}}]),e}(),rM=function(){function e(t,r,n,o,a,s){i(this,e),this.widgetKeyRepository=t,this.normalPaymentGatewayMidRepository=r,this.keyinPaymentGatewayMidRepository=n,this.internationalPaymentGatewayMidRepository=o,this.brandpayMidRepository=a,this.externalPaymentWidgetService=s}return s(e,[{key:"resolve",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.widgetKeyRepository.findCurrentClientKey(),t.next=3,this.externalPaymentWidgetService.fetchMidPackage(r,e);case 3:null!=(n=t.sent).getNormalMid()&&this.normalPaymentGatewayMidRepository.saveCurrentMid(n.getNormalMid()),null!=n.getKeyinMid()&&this.keyinPaymentGatewayMidRepository.saveCurrentMid(n.getKeyinMid()),null!=n.getInternationalMid()&&this.internationalPaymentGatewayMidRepository.saveCurrentMid(n.getInternationalMid()),null!=n.getBrandpayMid()&&this.brandpayMidRepository.saveCurrentMid(n.getBrandpayMid());case 5:case"end":return t.stop()}}),t,this)})))}}]),e}(),nM={};nx(nM,{AbstractBrandpayNativeServiceFactory:function(){return $O},ActivationLogService:function(){return JO},AsyncSemaMutex:function(){return iM},BrandpayAuthenticatedServerAPI:function(){return sD},BrandpayCheckoutProductLauncherFactory:function(){return VO},BrandpayNotSupportedEnvironmentFacade:function(){return ZO},BrandpayPublicServerAPI:function(){return uD},DynamicCompileConfigRepository:function(){return zO},EnvironmentVariableProductStageRepository:function(){return KD},LocalStorage:function(){return RM},MemoryStorage:function(){return SM},MemoryStorageClientKeyRepository:function(){return jO},MemoryStorageMidRepository:function(){return QO},MemoryStorageNoopMidRepository:function(){return XO},MemoryStoragePaymentGatewayRuntimeConfigRepository:function(){return BD},MemoryStorageSynchronizedWidgetPaymentRequestRepository:function(){return DD},PGWindowServerAPI:function(){return lD},PaymentGatewayCheckoutProductLauncherFactory:function(){return HO},PaymentWidgetCheckoutProductLauncherFactory:function(){return YO},SessionStorage:function(){return bM},SingletonMemoryStorage:function(){return PM},StandardBrandpayAuthenticatedServerAPIAdapter:function(){return dD},StandardBrandpayPublicServerAPIAdapter:function(){return hD},StandardPGWindowServerAPIAdapter:function(){return fD},StandardPaymentGatewayProductStageRepository:function(){return LD},StandardWidgetServerAPIAdapter:function(){return mD},TosspaymentsPaymentMethodIssuer:function(){return MD},V2BrandpayNativeSDKServiceFactory:function(){return eD},WebDeviceManager:function(){return aM},WebStorageBrandpayCustomerSessionRepository:function(){return NM},WebStoragePaymentGatewayCustomerSessionRepository:function(){return gD},WebStoragePaymentWidgetCustomerSessionRepository:function(){return OD},WebStorageTracingIdRepository:function(){return _D},WebUrlValidator:function(){return TM},WebWindowManager:function(){return CM},WidgetServerAPI:function(){return cD},XHRHttpClient:function(){return rD},isAndroid:function(){return cM},isIE:function(){return sM},isIos:function(){return uM},isMobile:function(){return lM},isTossPaymentsError:function(){return aD}});var oM=ix(wx(),1),iM=function(){function e(){i(this,e),this._isLocked=!1,this.semaInstance=new oM.Sema(1,{capacity:100})}return s(e,[{key:"acquire",value:function(){return this._isLocked=!0,this.semaInstance.acquire()}},{key:"release",value:function(){this.semaInstance.release(),this._isLocked=!1}},{key:"isLocked",value:function(){return this._isLocked}}]),e}(),aM=function(){function e(){i(this,e)}return s(e,[{key:"getDevice",value:function(){return{isMobile:function(){return lM()},isIos:function(){return uM()},isAndroid:function(){return cM()}}}}]),e}();function sM(){return/MSIE|Trident/i.test(window.navigator.userAgent)}function uM(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window)}function cM(){return!sM()&&/android/i.test(window.navigator.userAgent)}function lM(){return"undefined"!=typeof window&&(uM()||cM())}function dM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mM(e,t,r){return t&&hM(e.prototype,t),r&&hM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var fM=function(){function e(){dM(this,e),this.storage=new Map}return mM(e,[{key:"get",value:function(e){return this.storage.get(e)||null}},{key:"set",value:function(e,t){this.storage.set(e,t)}},{key:"remove",value:function(e){this.storage.delete(e)}},{key:"clear",value:function(){this.storage.clear()}}]),e}(),pM=function(){function e(){dM(this,e)}return mM(e,[{key:"get",value:function(e){return localStorage.getItem(e)}},{key:"set",value:function(e,t){localStorage.setItem(e,t)}},{key:"remove",value:function(e){localStorage.removeItem(e)}},{key:"clear",value:function(){localStorage.clear()}}],[{key:"canUse",value:function(){var e=vM();try{return localStorage.setItem(e,"test"),localStorage.removeItem(e),!0}catch(e){return!1}}}]),e}(),yM=function(){function e(){dM(this,e)}return mM(e,[{key:"get",value:function(e){return sessionStorage.getItem(e)}},{key:"set",value:function(e,t){sessionStorage.setItem(e,t)}},{key:"remove",value:function(e){sessionStorage.removeItem(e)}},{key:"clear",value:function(){sessionStorage.clear()}}],[{key:"canUse",value:function(){var e=vM();try{return sessionStorage.setItem(e,"test"),sessionStorage.removeItem(e),!0}catch(e){return!1}}}]),e}();function vM(){return new Array(4).fill(null).map((function(){return Math.random().toString(36).slice(2)})).join("")}var gM=pM.canUse()?new pM:new fM,wM=yM.canUse()?new yM:new fM,SM=function(){function e(){i(this,e),this.storage=new Map}return s(e,[{key:"get",value:function(e){var t;return null!=(t=this.storage.get(e))?t:null}},{key:"set",value:function(e,t){this.storage.set(e,t)}},{key:"delete",value:function(e){this.storage.delete(e)}},{key:"clear",value:function(){this.storage.clear()}}]),e}(),RM=function(){function e(){i(this,e)}return s(e,[{key:"get",value:function(e){try{var t=gM.get(e);return null===t?null:JSON.parse(t)}catch(e){return null}}},{key:"set",value:function(e,t){gM.set(e,JSON.stringify(t))}},{key:"delete",value:function(e){gM.remove(e)}},{key:"clear",value:function(){gM.clear()}}]),e}(),bM=function(){function e(){i(this,e)}return s(e,[{key:"get",value:function(e){try{var t=wM.get(e);return null===t?null:JSON.parse(t)}catch(e){return null}}},{key:"set",value:function(e,t){wM.set(e,JSON.stringify(t))}},{key:"delete",value:function(e){wM.remove(e)}},{key:"clear",value:function(){wM.clear()}}]),e}(),PM=new SM,EM=ix(Px(),1),CM=function(){function e(){i(this,e)}return s(e,[{key:"getWindow",value:function(){return{getViewPort:function(){return{height:window.innerHeight,width:window.innerWidth}},getSafeArea:xM,getOrigin:AM,getHref:IM,moveTo:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null!=t.query?function(e,t){var r=EM.default.parseUrl(e),n=EM.default.stringify($I($I({},r.query),t));return n.length>0?"".concat(r.url,"?").concat(n):r.url}(e,t.query):e;window.location.href=r}}}}]),e}(),kM=null;function AM(){return window.location.origin}function IM(){return window.location.href}function xM(){if(null!=kM)return kM;var e=document.createElement("div");return e.style.paddingBottom="env(safe-area-inset-bottom)",document.body.appendChild(e),kM={bottom:Number(window.getComputedStyle(e).paddingBottom.replace("px",""))},document.body.removeChild(e),kM}var TM=function(){function e(){i(this,e)}return s(e,[{key:"isValid",value:function(e){if(null==e)return!1;try{new URL(e)}catch(e){return!1}return!0}}]),e}(),NM=function(){function e(){i(this,e),this.currentSessionStorageKey="@tosspayments/brandpay-current-session",this.tokenStorageKey="@tosspayments/customer-token",this.memoryStorage=new SM}return s(e,[{key:"saveCurrentSession",value:function(e){this.memoryStorage.set(this.currentSessionStorageKey,e)}},{key:"findCurrentSession",value:function(){var e=this.memoryStorage.get(this.currentSessionStorageKey);if(null==e)throw new lT;return e}},{key:"findCurrentToken",value:function(){var e=this.memoryStorage.get(this.tokenStorageKey);if(null==e)throw new lT;return e}},{key:"saveCurrentToken",value:function(e){this.memoryStorage.set(this.tokenStorageKey,e)}}]),e}();function MM(e,t){for(var r in t)e.style[r]=t[r]}function OM(e,t){var r=document.getElementById(t);if(null!=r)return r;var n=document.createElement(e);return n.id=t,n}var DM="brandpay-loader-style";var KM=$I({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",zIndex:"9999999",transform:"translateZ(0)",backgroundColor:"rgba(0, 0, 0, 0.6)",margin:"0",padding:"0"},lM()?{background:"none"}:void 0),LM="___tosspayments_brandpay_dimmer___";function BM(e){var t=e.showDimmer,r=e.loaderColor,n=_M();if(null!=n)return MM(n,KM),n;var o=function(e){var t,r=document.createElement("style"),n=document.createElement("div");return r.id=DM,r.innerHTML="@keyframes brandpay-rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes brandpay-turn{0%{stroke-dashoffset:180}50%{stroke-dashoffset:45;transform:rotate(108deg)}to{stroke-dashoffset:180;transform:rotate(1turn)}}.brandpay-loader{position:absolute;top:50%;left:50%;margin-left:-24px;margin-top:-24px;display:inline-flex;flex-direction:column;align-items:center}.brandpay-loader>svg{display:block;margin:2px;width:48px;height:48px;stroke:".concat(null!=(t=e)?t:"#3188ff",";animation:brandpay-rotate 1.8s linear infinite forwards}.brandpay-loader>svg>circle{stroke-dasharray:180;stroke-dashoffset:0;transform-origin:center;animation:brandpay-turn 1.8s ease-in-out infinite forwards}"),null==document.querySelector("#".concat(DM))&&document.head.appendChild(r),n.id="brandpay-loader",n.classList.add("brandpay-loader"),n.innerHTML='<svg width="48" height="48" viewBox="0 0 66 66"><circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></svg>',n}(r),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.styles,r=OM("div",LM);return MM(r,$I($I({},KM),t)),r}();return i.appendChild(o),t&&document.body.appendChild(i),i}function _M(){return document.querySelector("#".concat(LM))}var UM={width:"1px",height:"1px",top:"-9999px",left:"-9999px"},FM=lM()?{position:"absolute",border:"none",width:"100%",height:"100%",top:"0",left:"0",transform:"none"}:{position:"absolute",border:"none",top:"50%",left:"50%",width:"375px",height:"667px",marginLeft:"-187.5px",marginTop:"-333.5px",backgroundColor:"#ffffff"},WM="__tosspayments_brandpay_iframe_v2__",qM=null;function GM(e,t){var r,n,o=t.container,i=null!=(r=HM())?r:function(){var e=document.createElement("iframe");return e.id=WM,YM(e),{iframe:e}}().iframe;return null==i||i.removeAttribute("sandbox"),null==qM&&o.appendChild(i),null==(n=i.contentWindow)||n.location.replace(e),(qM=i).title="í ì¤íì´ë¨¼ì¸  ë¸ëëíì´",qM.addEventListener("load",jM),{iframe:i}}function VM(){return qM}function YM(e){MM(e,FM)}function HM(){return document.querySelector("#".concat(WM))}function jM(){null!=qM&&YM(qM)}var zM=function(){function e(t){i(this,e),this.Bridge=t,this.mutex=new iM}return s(e,[{key:"launch",value:function(e){var t=this;return new Promise((function(r,n){return ax(t,null,regeneratorRuntime.mark((function t(){var o,i,a,s,u,c,l,d,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cleanup();case 2:return i=setTimeout((function(){h.shutdown(),n(new Error("Launch Request Timeout"))}),45e3),a=new Map(e.getParameterResolvers()),t.next=6,null==(o=a.get("customStyle"))?void 0:o();case 6:return s=t.sent,GM(e.getProductURL(),{container:BM({showDimmer:!0,loaderColor:null==s?void 0:s.highlightColor})}),t.next=10,this.Bridge.openBridge({targetWindow:VM().contentWindow,runtimeWindow:window});case 10:(u=t.sent).handleRequest("GET_PARAMETER",(function(e){return ax(h,[e],regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,null==(n=a.get(r))){e.next=12;break}return e.prev=3,e.next=6,n();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))})),u.subscribe("LIFECYCLE",(function(e){return ax(h,[e],regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("READY"!==t.name){e.next=3;break}return e.abrupt("return",(clearTimeout(i),void r()));case 3:case"end":return e.stop()}}),e)})))})),c=b(e.getEventListeners());try{for(d=function(){var e=g(l.value,2),t=e[0],r=e[1];u.subscribe(t,(function(e){return r(e)}))},c.s();!(l=c.n()).done;)d()}catch(e){c.e(e)}finally{c.f()}e.onExecuteQuery((function(e,t){return u.request(e,t,{timeout:45e3})})),e.onExecuteCommand((function(e,t){return u.request(e,t,{timeout:45e3})})),e.onFocus((function(){var e;null==(e=VM())||e.scrollIntoView()}));case 15:case"end":return t.stop()}}),t,this)})))}))}},{key:"shutdown",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mutex.acquire();case 2:return e.next=4,this.cleanup();case 4:!function(){var e=HM();null!=e&&MM(e,UM)}(),function(){var e=_M();null!=e&&MM(e,{width:"1px",height:"1px",top:"-9999px",left:"-9999px"})}(),this.mutex.release();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"cleanup",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var t,r=HM();null!=r?(null==(t=r.contentWindow)||t.location.replace("https://pages.tosspayments.com/blank.html"),r.onload=function(){r.onload=null,r.setAttribute("sandbox",""),e()},null==qM||qM.removeEventListener("load",jM)):e()}));case 2:case"end":return e.stop()}}),e)})))}}]),e}(),JM={menubar:!0,location:!1,resizable:!0,scrollbars:!0,status:!0,channelmode:!0};var QM=function(){function e(t){i(this,e),this.Bridge=t,this.popup=null,this.unsubscribePopupClosed=null}return s(e,[{key:"launch",value:function(e){var t=this;return new Promise((function(r,n){return ax(t,null,regeneratorRuntime.mark((function t(){var o,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cleanup();case 2:return o=setTimeout((function(){a.shutdown(),n(new Error("Launch Request Timeout"))}),45e3),null==this.popup?(this.popup=this.createPopup(e.getProductURL()),Cx(null!=this.popup,new zx)):(this.popup.location.href=e.getProductURL(),this.popup.focus()),t.next=6,this.openBridge();case 6:i=t.sent,this.connectBridge(i,e,(function(){clearTimeout(o),r()})),this.unsubscribePopupClosed=this.subscribePopupClosed((function(){var t,r=b(e.getEventListeners());try{for(r.s();!(t=r.n()).done;){var n=g(t.value,2),o=n[0],i=n[1];"CLOSE_REQUEST"===o&&i()}}catch(e){r.e(e)}finally{r.f()}})),e.onFocus((function(){var e;null==(e=a.popup)||e.focus()}));case 8:case"end":return t.stop()}}),t,this)})))}))}},{key:"shutdown",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cleanup(),null==(t=this.popup)||t.close(),this.popup=null;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"cleanup",value:function(){var e;null==(e=this.unsubscribePopupClosed)||e.call(this)}},{key:"createPopup",value:function(e){return function(e,t){var r,n=t,o=n.title,i=tx(n,["title"]);return window.open(e,o,(r=$I($I({},JM),i),Object.entries(r).map((function(e){var t=g(e,2),r=t[0],n=t[1];return"boolean"!=typeof n?"".concat(r,"=").concat(n):"".concat(r,!0===n?"=yes":"=no")})).join(",")))}(e,{title:"ë¸ëëíì´",width:375,height:667})}},{key:"openBridge",value:function(){return this.Bridge.openBridge({targetWindow:this.popup,runtimeWindow:window})}},{key:"connectBridge",value:function(e,t,r){return ax(this,null,regeneratorRuntime.mark((function n(){var o,i,a,s,u=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=new Map(t.getParameterResolvers()),e.handleRequest("GET_PARAMETER",(function(e){return ax(u,[e],regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,null==(n=o.get(r))){e.next=12;break}return e.prev=3,e.next=6,n();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))})),e.subscribe("LIFECYCLE",(function(e){return ax(u,[e],regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"READY"!==t.name||r();case 2:case"end":return e.stop()}}),e)})))})),i=b(t.getEventListeners());try{for(s=function(){var t=g(a.value,2),r=t[0],n=t[1];e.subscribe(r,(function(e){return n(e)}))},i.s();!(a=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}t.onExecuteQuery((function(t,r){return e.request(t,r,{timeout:45e3})})),t.onExecuteCommand((function(t,r){return e.request(t,r,{timeout:45e3})}));case 5:case"end":return n.stop()}}),n)})))}},{key:"subscribePopupClosed",value:function(e){var t=this,r=setInterval((function(){var r;(null==(r=t.popup)?void 0:r.closed)&&e()}),1e3);return function(){clearInterval(r)}}}],[{key:"getInstance",value:function(t){return null==e.instance&&(e.instance=new e(t)),e.instance}}]),e}();QM.instance=null;var XM=QM;function ZM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.styles,r=OM("div","__tosspayments_payment-gateway_dimmer__");return MM(r,$I({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",zIndex:"9999999",transform:"translateZ(0)",backgroundColor:"rgba(0, 0, 0, 0.6)",margin:"0",padding:"0",pointerEvents:"auto"},t)),r}var $M="__tosspayments_payment-gateway_iframe__";function eO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.styles,r=OM("iframe",$M);return r.name=$M,MM(r,$I({border:"none"},t)),r}var tO=[];function rO(e){var t,r=e.data,n=b(tO);try{for(n.s();!(t=n.n()).done;){(0,t.value)({target:r.window,type:r.type,params:r.params})}}catch(e){n.e(e)}finally{n.f()}}var nO=function(e){1===(tO=[].concat(w(tO),[e])).length&&window.addEventListener("message",rO)},oO=function(){tO=[],window.removeEventListener("message",rO)},iO=function(){function e(){i(this,e),this.dimmer=null}return s(e,[{key:"launch",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.dimmer=ZM(),(r=eO({styles:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}})).title="í ì¤íì´ë¨¼ì¸  ì ìê²°ì ",n={},o=b(e.getParameterResolvers()),t.prev=5,o.s();case 7:if((i=o.n()).done){t.next=14;break}return a=g(i.value,2),s=a[0],u=a[1],t.next=11,u();case 11:n[s]=t.sent;case 12:t.next=7;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),o.e(t.t0);case 19:return t.prev=19,o.f(),t.finish(19);case 22:r.src=e.getProductURL()+Nx(n),this.dimmer.appendChild(r),document.body.appendChild(this.dimmer),c=b(e.getEventListeners());try{for(d=function(){var e=g(l.value,2),t=e[0],r=e[1];nO((function(e){var n=e.target,o=e.type,i=e.params;"LEGACY"===n&&o===t&&r(i)}))},c.s();!(l=c.n()).done;)d()}catch(e){c.e(e)}finally{c.f()}e.onFocus((function(){null==r||r.scrollIntoView()}));case 26:case"end":return t.stop()}}),t,this,[[5,16,19,22]])})))}},{key:"shutdown",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oO(),this.dimmer&&(document.body.removeChild(this.dimmer),this.dimmer=null);case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),aO=function(){function e(){i(this,e),this.dimmer=null}return s(e,[{key:"launch",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.dimmer=ZM(),r=function(e){var t=e.width,r=e.height,n=e.styles;return eO({styles:$I({position:"absolute",border:"none",top:"50%",left:"50%",width:"".concat(t,"px"),height:"".concat(r,"px"),marginLeft:"-".concat(t/2,"px"),marginTop:"-".concat(r/2,"px"),backgroundColor:"#707070"},n)})}({width:650,height:650,styles:{borderRadius:"20px"}}),r.title="í ì¤íì´ë¨¼ì¸  ì ìê²°ì ",n={},o=b(e.getParameterResolvers()),t.prev=5,o.s();case 7:if((i=o.n()).done){t.next=14;break}return a=g(i.value,2),s=a[0],u=a[1],t.next=11,u();case 11:n[s]=t.sent;case 12:t.next=7;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),o.e(t.t0);case 19:return t.prev=19,o.f(),t.finish(19);case 22:r.src=e.getProductURL()+Nx(n),this.dimmer.appendChild(r),document.body.appendChild(this.dimmer),c=b(e.getEventListeners());try{for(d=function(){var e=g(l.value,2),t=e[0],r=e[1];nO((function(e){var n=e.target,o=e.type,i=e.params;"LEGACY"===n&&o===t&&r(i)}))},c.s();!(l=c.n()).done;)d()}catch(e){c.e(e)}finally{c.f()}e.onFocus((function(){null==r||r.scrollIntoView()}));case 26:case"end":return t.stop()}}),t,this,[[5,16,19,22]])})))}},{key:"shutdown",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oO(),this.dimmer&&(document.body.removeChild(this.dimmer),this.dimmer=null);case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),sO=function(){function e(){i(this,e)}return s(e,[{key:"launch",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={},n=b(e.getParameterResolvers()),t.prev=2,n.s();case 4:if((o=n.n()).done){t.next=11;break}return i=g(o.value,2),a=i[0],s=i[1],t.next=8,s();case 8:r[a]=t.sent;case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),n.e(t.t0);case 16:return t.prev=16,n.f(),t.finish(16);case 19:this.subscribeBFCacheRestoreEvent().then((function(){var t,r=b(e.getEventListeners());try{for(r.s();!(t=r.n()).done;){var n=g(t.value,2),o=n[0],i=n[1];"cancel"===o&&i()}}catch(e){r.e(e)}finally{r.f()}})),u=e.getProductURL()+Nx(r),location.href=u;case 22:case"end":return t.stop()}}),t,this,[[2,13,16,19]])})))}},{key:"shutdown",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},{key:"subscribeBFCacheRestoreEvent",value:function(){return new Promise((function(e){window.addEventListener("pageshow",(function t(r){r.persisted&&(window.removeEventListener("pageshow",t),e())}))}))}}]),e}(),uO="__tosspayments_payment_widget_iframe_wrapper__",cO=function(){function e(t){var r,n,o,a=t.src,s=t.title,u=t.styles,c=t.id,l=t.options;i(this,e),this.wrapper=this.createWrapper(),this.skeleton=null,this.skeletonOption={boxCount:0,padding:0,boxHeight:56},this.observers=[];var d=document.createElement("iframe");d.setAttribute("src",a),d.setAttribute("title",s),null!=c&&d.setAttribute("id",c),this.iframe=d,null!=u&&this.updateStyle(u),null!=(null==(r=null==l?void 0:l.skeleton)?void 0:r.boxCount)&&l.skeleton.boxCount>0&&(this.skeletonOption.boxCount=l.skeleton.boxCount,this.skeletonOption.padding=null!=(n=l.skeleton.padding)?n:0,this.skeletonOption.boxHeight=null!=(o=l.skeleton.boxHeight)?o:56,this.skeleton=this.createSkeleton(),this.wrapper.appendChild(this.skeleton))}return s(e,[{key:"onIframeRemoved",value:function(e){var t=this,r=new MutationObserver((function(r,n){var o,i=b(r);try{for(i.s();!(o=i.n()).done;){var a=o.value;"childList"===a.type&&a.removedNodes.forEach((function(r){r.contains(t.iframe)&&(e(),n.disconnect())}))}}catch(e){i.e(e)}finally{i.f()}}));r.observe(document.body,{childList:!0,subtree:!0}),this.observers.push(r)}},{key:"updateStyle",value:function(e){for(var t in e)this.iframe.style[t]=e[t]}},{key:"mount",value:function(e){this.wrapper.appendChild(this.iframe),e.appendChild(this.wrapper)}},{key:"cleanup",value:function(){this.wrapper.remove(),this.observers.forEach((function(e){return e.disconnect()})),this.observers=[]}},{key:"createWrapper",value:function(){var e=document.createElement("div");return e.classList.add(uO),e.setAttribute("style","position: relative; width: 100%;"),e}},{key:"createSkeleton",value:function(){var e=document.createElement("div");e.classList.add("__tosspayments_payment_widget_iframe_skeleton__"),e.setAttribute("style","position: absolute; top: 0; left: 0; width: 100%; min-height: ".concat(this.skeletonOption.boxHeight*this.skeletonOption.boxCount+2*this.skeletonOption.padding,"px; display: none; flex-direction: column; gap: 8px; padding: ").concat(this.skeletonOption.padding,"px; box-sizing: border-box;"));var t=document.createElement("div");return t.setAttribute("style","width: 100%; height: ".concat(this.skeletonOption.boxHeight,"px !important; background: linear-gradient(96deg, rgba(160, 174, 189, 0.2) 0%, rgba(160, 174, 189, 0) 100%); border-radius: 8px;")),Array.from({length:this.skeletonOption.boxCount}).forEach((function(){return e.appendChild(t.cloneNode(!0))})),e}},{key:"hideSkeleton",value:function(){clearTimeout(this.skeletonTimeoutId),this.skeletonTimeoutId=void 0,Cx(null!=this.skeleton,new Error("options.skeletonBoxCountë¥¼ ë£ì´ì£¼ì¸ì.")),this.skeleton.style.display="none",this.wrapper.style.height="auto"}},{key:"showSkeleton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!=e.onTimeout&&(this.skeletonTimeoutId=window.setTimeout(e.onTimeout.fn,e.onTimeout.delay)),Cx(null!=this.skeleton,new Error("options.skeletonBoxCountë¥¼ ë£ì´ì£¼ì¸ì.")),this.skeleton.style.display="flex",this.wrapper.style.height=this.skeletonOption.boxHeight*this.skeletonOption.boxCount+2*this.skeletonOption.padding+8*(this.skeletonOption.boxCount-1)+"px"}},{key:"focus",value:function(){var e;null==(e=this.iframe)||e.scrollIntoView()}}]),e}(),lO=function(){function e(t,r){i(this,e),this.selector=t,this.Bridge=r,this.widget=null}return s(e,[{key:"launch",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){return ax(r,null,regeneratorRuntime.mark((function r(){var o,i,a,s,u,c,l=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=setTimeout((function(){l.shutdown(),n(new Error("Launch Request Timeout"))}),45e3),this.widget=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new cO({src:e,title:"í ì¤íì´ë¨¼ì¸  ê²°ì ìì ¯",styles:{display:"block",border:"0px",width:"100%",height:"0px"},options:r}),o=document.querySelector(t);return Cx(null!=o,new NT),Cx(null==o.querySelector(".".concat(uO)),new qT),n.mount(o),n}(e.getProductURL(),this.selector,{skeleton:{boxCount:lM()?3:2,padding:lM()?24:30}}),this.widget.showSkeleton(),this.widget.onIframeRemoved((function(){l.shutdown()})),r.next=4,this.Bridge.openBridge({targetWindow:this.widget.iframe.contentWindow,runtimeWindow:window});case 4:i=r.sent,a=new Map(e.getParameterResolvers()),i.handleRequest("GET_PARAMETER",(function(e){return ax(l,[e],regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,null==(n=a.get(r))){e.next=12;break}return e.prev=3,e.next=6,n();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))})),i.subscribe("LIFECYCLE",(function(e){return ax(l,[e],regeneratorRuntime.mark((function e(r){var i,a,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.name,a=r.params,e.t0=i,e.next="READY"===e.t0?4:"FAIL"===e.t0?5:"RESIZED"===e.t0?6:7;break;case 4:return e.abrupt("return",(null==(s=this.widget)||s.hideSkeleton(),clearTimeout(o),void t()));case 5:return e.abrupt("return",(null==(u=this.widget)||u.hideSkeleton(),clearTimeout(o),this.shutdown(),void n(new Error(null==a?void 0:a.message))));case 6:return e.abrupt("return",void(null==(c=this.widget)||c.updateStyle({height:"".concat(a.height,"px")})));case 7:case"end":return e.stop()}}),e,this)})))})),s=b(e.getEventListeners());try{for(c=function(){var e=g(u.value,2),t=e[0],r=e[1];i.subscribe(t,(function(e){return r(e)}))},s.s();!(u=s.n()).done;)c()}catch(e){s.e(e)}finally{s.f()}e.onExecuteQuery((function(e,t){return i.request(e,t,{timeout:45e3})})),e.onExecuteCommand((function(e,t){return i.request(e,t,{timeout:45e3})})),e.onFocus((function(){var e;null==(e=l.widget)||e.focus()}));case 10:case"end":return r.stop()}}),r,this)})))})));case 1:case"end":return t.stop()}}),t)})))}},{key:"shutdown",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this.widget)||t.cleanup();case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),dO=function(e,t,r){return new Promise((function(n,o){var i=function(e){try{s(r.next(e))}catch(e){o(e)}},a=function(e){try{s(r.throw(e))}catch(e){o(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,a)};s((r=r.apply(e,t)).next())}))},hO="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW";function mO(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",r=e;r--;)t+=hO[64*Math.random()|0];return t}var fO=function(){function e(){i(this,e),this.isPaused=!1,this.subscriber=null,this.buffer=[]}return s(e,[{key:"publish",value:function(e){this.buffer.push(e),this.handleLoop()}},{key:"subscribe",value:function(e){var t=this;if(null!=this.subscriber)throw new pO;this.subscriber=e,this.handleLoop();var r=!1;return{unsubscribe:function(){if(r)throw new yO;t.subscriber=null,r=!0}}}},{key:"handleLoop",value:function(){var e=this;if(this.buffer.length>0&&null!=this.subscriber&&!this.isPaused){this.isPaused=!0;try{var t=this.buffer.shift(),r=this.subscriber.next(t);r instanceof Promise?r.then((function(){e.isPaused=!1,e.handleLoop()})).catch((function(){e.isPaused=!1})):(this.isPaused=!1,this.handleLoop())}catch(t){this.isPaused=!1}}}}]),e}(),pO=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"[HappyMQ] Already Subscribed")}return s(r)}(f(Error)),yO=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"[HappyMQ] Already Unsubscribed")}return s(r)}(f(Error)),vO=function(){function e(){i(this,e),this.taskMap=new Map,this.rejectByTimeoutTaskMap=new Map}return s(e,[{key:"start",value:function(e){var t=this;return new Promise((function(r,n){var o=null;null!=e.timeout&&(o=setTimeout((function(){t.rejectByTimeoutTaskMap.set(e.id,e),t.taskMap.delete(e.id),n(new wO(e))}),e.timeout)),t.taskMap.set(e.id,{task:e,executor:{resolve:function(n){null!=o&&clearTimeout(o),t.taskMap.delete(e.id),r(n)},reject:function(r){null!=o&&clearTimeout(o),t.taskMap.delete(e.id),n(r)}}})}))}},{key:"resolve",value:function(e,t){if(this.rejectByTimeoutTaskMap.has(e))throw new SO(this.rejectByTimeoutTaskMap.get(e));var r=this.taskMap.get(e);if(null==r)throw new gO;r.executor.resolve(t)}},{key:"reject",value:function(e,t){if(this.rejectByTimeoutTaskMap.has(e))throw new SO(this.rejectByTimeoutTaskMap.get(e));var r=this.taskMap.get(e);if(null==r)throw new gO;r.executor.reject(t)}}]),e}(),gO=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"[TaskHolder] Unknown Task")}return s(r)}(f(Error)),wO=function(e){c(r,e);var t=v(r);function r(e){return i(this,r),t.call(this,"[TaskHolder] TimeoutError task: ".concat(JSON.stringify(e)))}return s(r)}(f(Error)),SO=function(e){c(r,e);var t=v(r);function r(e){return i(this,r),t.call(this,"[TaskHolder] Already Reject Task By Timeout: ".concat(JSON.stringify(e)))}return s(r)}(f(Error)),RO=function(){function e(){i(this,e),this.topics=new Map}return s(e,[{key:"getQueue",value:function(e){var t,r=null!=(t=this.topics.get(e))?t:new fO;return this.topics.set(e,r),r}},{key:"publish",value:function(e,t){return this.getQueue(e).publish(t)}},{key:"subscribe",value:function(e,t){return this.getQueue(e).subscribe(t)}}]),e}(),bO=function(e){c(r,e);var t=v(r);function r(e){var n,o=e.id,a=e.type,s=e.body;return i(this,r),(n=t.call(this,"[BRIDGE] Unknown response received. id: ".concat(o,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=o,n.type=a,n.body=s,n}return s(r)}(f(Error)),PO=function(e){c(r,e);var t=v(r);function r(e){var n,o=e.id,a=e.type,s=e.body;return i(this,r),(n=t.call(this,"[BRIDGE] Handle request failed. id: ".concat(o,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=o,n.type=a,n.body=s,n}return s(r)}(f(Error)),EO=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.apply(this,arguments)}return s(r)}(f(Error)),CO=function(e){c(r,e);var t=v(r);function r(e){var n,o=e.id,a=e.type,s=e.body;return i(this,r),(n=t.call(this,"[BRIDGE] Reconnect failed. id: ".concat(o,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=o,n.type=a,n.body=s,n}return s(r)}(f(Error)),kO=function(e){c(r,e);var t=v(r);function r(e){var n,o=e.id,a=e.type,s=e.body;return i(this,r),(n=t.call(this,"[BRIDGE] Unknown Ack Received. id: ".concat(o,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=o,n.type=a,n.body=s,n}return s(r)}(f(Error)),AO=function(e){c(r,e);var t=v(r);function r(e){var n,o=e.id,a=e.type,s=e.body;return i(this,r),(n=t.call(this,"[BRIDGE] Request Timeout. id: ".concat(o,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=o,n.type=a,n.body=s,n}return s(r)}(f(Error)),IO=function(e){c(r,e);var t=v(r);function r(e){var n,o=e.id,a=e.type,s=e.body;return i(this,r),(n=t.call(this,"[BRIDGE] Receive Delayed Response. id: ".concat(o,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=o,n.type=a,n.body=s,n}return s(r)}(f(Error)),xO=function(e){c(r,e);var t=v(r);function r(e){var n,o=e.id,a=e.type,s=e.body;return i(this,r),(n=t.call(this,"[BRIDGE] Receive Delayed Ack. id: ".concat(o,", type: ").concat(a,", body: ").concat(JSON.stringify(s)))).id=o,n.type=a,n.body=s,n}return s(r)}(f(Error));function TO(e){return e instanceof Error?JSON.stringify(e.message):JSON.stringify(e)}var NO=function(){function e(t,r,n,o,a,s,u){var c=this;i(this,e),this.messagePort=t,this.inConnectMessageProcessor=r,this.windowId=n,this.runtimeWindow=o,this.oppositeWindow=a,this.debuggerQueue=s,this.errorHandlers=new Set,this.guaranteeDeliveryMessageQueue=new fO,this.eventSubscriberMap=new Map,this.receivedRequestBroker=new RO,this.waitHandleRequestTaskHolder=new vO,this.waitAckTaskHolder=new vO,this.reconnectTimeout=null!=u?u:5e3,this.context={sendMessage:function(e){return c.sendMessage(e)},sendGuaranteeDeliveryMessage:function(e){return c.sendGuaranteeDeliveryMessage(e)},publishError:function(e){return c.publishError(e)},publishDebugInfo:function(e){return c.publishDebugInfo(e)},triggerEventSubscribers:function(e,t){return c.triggerEventSubscribers(e,t)},triggerRequestHandler:function(e,t,r,n){return c.triggerRequestSubscribers(e,t,r,n)},startHandleRequestTask:function(e){return c.startHandleRequestTask(e)},resolveHandleRequestTask:function(e){return c.resolveHandleRequestTask(e)},rejectHandleRequestTask:function(e){return c.rejectHandleRequestTask(e)},startAckTask:function(e){return c.startAckTask(e)},resolveAckTask:function(e){return c.resolveAckTask(e)}},this.subscribeReconnect(),this.subscribeMessageEvent(),this.guaranteeDeliveryMessageQueue.subscribe({next:function(e){return dO(c,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.startAckTask({id:e.id,body:e,timeout:100}),this.sendMessage(e),t.prev=2,t.next=5,r;case 5:t.next=19;break;case 7:if(t.prev=7,t.t0=t.catch(2),t.t0 instanceof wO){t.next=11;break}throw t.t0;case 11:return t.next=13,this.reconnect();case 13:if(t.sent){t.next=18;break}return t.next=16,this.reconnect();case 16:if(t.sent){t.next=18;break}return t.abrupt("return",void this.publishError(new CO(e)));case 18:this.sendMessage(e);case 19:case"end":return t.stop()}}),t,this,[[2,7]])})))}})}return s(e,[{key:"publish",value:function(e,t){this.inConnectMessageProcessor.sendBroadcast({eventName:e,payload:t,context:this.context})}},{key:"subscribe",value:function(e,t){var r,n=this;return this.eventSubscriberMap.set(e,[].concat(w(null!=(r=this.eventSubscriberMap.get(e))?r:[]),[t])),{unsubscribe:function(){var r,o;n.eventSubscriberMap.set(e,null!=(o=null==(r=n.eventSubscriberMap.get(e))?void 0:r.filter((function(e){return e!==t})))?o:[])}}}},{key:"request",value:function(e,t,r){return this.inConnectMessageProcessor.sendRequest({requestName:e,payload:t,context:this.context,timeout:null==r?void 0:r.timeout})}},{key:"handleRequest",value:function(e,t){var r=this;try{var n=this.receivedRequestBroker.subscribe(e,{next:function(e){return dO(r,[e],regeneratorRuntime.mark((function e(r){var n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.payload,o=r.onHandleSuccess,i=r.onHandleFail,e.prev=1,e.t0=o,e.next=5,t(n);case 5:e.t1=e.sent,(0,e.t0)(e.t1),e.next=12;break;case 9:e.prev=9,e.t2=e.catch(1),this.publishError(e.t2),i(e.t2);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})))}});return{unhandle:function(){try{n.unsubscribe()}catch(e){if(!(e instanceof yO))throw e}}}}catch(e){if(e instanceof pO)throw new EO;throw e}}},{key:"subscribeError",value:function(e){this.errorHandlers.add((function(t){return dO(this,null,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e(t);case 3:r.next=7;break;case 5:r.prev=5,r.t0=r.catch(0);case 7:case"end":return r.stop()}}),r,null,[[0,5]])})))}))}},{key:"subscribeDebugger",value:function(e){this.debuggerQueue.subscribe({next:function(t){e(t)}})}},{key:"subscribeReconnect",value:function(){var e=this;this.runtimeWindow.addEventListener("message",(function(t){OO.hasBridgeReconnectMessage(t)&&OO.ofMessage(t.data).isRequestReconnectFrom(e.windowId)&&(e.messagePort=t.data.body.messagePort,e.subscribeMessageEvent(),t.source.postMessage(OO.REQUEST_RECONNECT_ACK(e.windowId)))}))}},{key:"reconnect",value:function(){return dO(this,null,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r=setTimeout((function(){e(!1)}),t.reconnectTimeout),n=new MessageChannel;t.runtimeWindow.addEventListener("message",(function(o){OO.hasBridgeReconnectMessage(o)&&OO.ofMessage(o.data).isRequestReconnectAckFrom(t.windowId)&&(clearTimeout(r),t.messagePort=n.port1,t.subscribeMessageEvent(),e(!0))}),{once:!0}),t.oppositeWindow.postMessage(OO.REQUEST_RECONNECT(t.windowId,n.port2))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"subscribeMessageEvent",value:function(){var e=this;this.messagePort.addEventListener("message",(function(t){return dO(e,null,regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.inConnectMessageProcessor.ofMessageEvent(t),this.publishDebugInfo({step:"receive",body:r,timestamp:new Date}),r.handleReceive(this.context);case 2:case"end":return e.stop()}}),e,this)})))})),this.messagePort.start()}},{key:"sendMessage",value:function(e){this.publishDebugInfo({step:"send",body:e,timestamp:new Date}),this.messagePort.postMessage(e)}},{key:"publishError",value:function(e){this.errorHandlers.forEach((function(t){return t(e)}))}},{key:"sendGuaranteeDeliveryMessage",value:function(e){this.guaranteeDeliveryMessageQueue.publish(e)}},{key:"publishDebugInfo",value:function(e){this.debuggerQueue.publish(e)}},{key:"triggerEventSubscribers",value:function(e,t){var r=this.eventSubscriberMap.get(e);null==r||r.forEach((function(e){return e(t)}))}},{key:"triggerRequestSubscribers",value:function(e,t,r,n){this.receivedRequestBroker.publish(e,{payload:t,onHandleSuccess:r,onHandleFail:n})}},{key:"startHandleRequestTask",value:function(e){return this.waitHandleRequestTaskHolder.start(e)}},{key:"resolveHandleRequestTask",value:function(e){var t=e.taskId,r=e.result;return this.waitHandleRequestTaskHolder.resolve(t,r)}},{key:"rejectHandleRequestTask",value:function(e){var t=e.taskId,r=e.error;return this.waitHandleRequestTaskHolder.reject(t,r)}},{key:"startAckTask",value:function(e){return this.waitAckTaskHolder.start(e)}},{key:"resolveAckTask",value:function(e){var t=e.taskId;return this.waitAckTaskHolder.resolve(t)}}],[{key:"of",value:function(t){var r=new fO,n=new e(t.messagePort,t.inConnectMessageProcessor,t.windowId,t.runtimeWindow,t.oppositeWindow,r,t.reconnectTimeout);return new Proxy(n,{get:function(e,t){var n=e[t];return"function"==typeof n?function(e){return new Proxy(e,{apply:function(t,n,o){r.publish({type:"start: ".concat(e.name),body:TO(w(o)),timestamp:new Date});var i=Reflect.apply(t,n,o);return r.publish({type:"end: ".concat(e.name),body:TO(w(o)),timestamp:new Date}),i}})}(n):n}})}}]),e}(),MO=function(){function e(t,r,n){i(this,e),this.type="TOSSPAYMENTS__RECONNECT",this.id=t,this.type=r,this.body=n}return s(e,[{key:"isRequestReconnectFrom",value:function(e){return"TOSSPAYMENTS__REQUEST_RECONNECT"===this.body.step&&this.body.windowId===e&&null!=this.body.messagePort}},{key:"isRequestReconnectAckFrom",value:function(e){return"TOSSPAYMENTS__REQUEST_RECONNECT_ACK"===this.body.step&&this.body.windowId===e}}],[{key:"of",value:function(t){var r=t.step,n=t.windowId,o=t.messagePort;return new e(mO(),"TOSSPAYMENTS__RECONNECT",{step:r,windowId:n,messagePort:o})}},{key:"REQUEST_RECONNECT",value:function(t,r){return e.of({step:"TOSSPAYMENTS__REQUEST_RECONNECT",windowId:t,messagePort:r})}},{key:"REQUEST_RECONNECT_ACK",value:function(t){return e.of({step:"TOSSPAYMENTS__REQUEST_RECONNECT_ACK",windowId:t})}},{key:"ofMessage",value:function(t){return new e(t.id,t.type,t.body)}},{key:"hasBridgeReconnectMessage",value:function(t){var r=t.data;return"TOSSPAYMENTS__RECONNECT"===r.type&&e.STEPS.some((function(e){return e===r.body.step}))}}]),e}();MO.STEPS=["TOSSPAYMENTS__REQUEST_RECONNECT","TOSSPAYMENTS__REQUEST_RECONNECT_ACK"];var OO=MO,DO=function(){function e(t,r,n){i(this,e),this.id=t,this.type=r,this.body=n}return s(e,null,[{key:"ofWindowId",value:function(t){return new e(mO(),"TOSSPAYMENTS__HANDSHAKE",{step:"TOSSPAYMENTS__SYN",windowId:t})}},{key:"is",value:function(e){var t;return"TOSSPAYMENTS__HANDSHAKE"===(null==e?void 0:e.type)&&"TOSSPAYMENTS__SYN"===(null==(t=null==e?void 0:e.body)?void 0:t.step)}}]),e}(),KO=function(){function e(t,r,n){i(this,e),this.id=t,this.type=r,this.body=n}return s(e,[{key:"from",value:function(e){return this.body.windowId===e}}],[{key:"of",value:function(t){return new e(t.id,t.type,t.body)}},{key:"ofWindowId",value:function(t){return new e(mO(),"TOSSPAYMENTS__HANDSHAKE",{step:"TOSSPAYMENTS__SYN_ACK",windowId:t})}},{key:"is",value:function(e){var t;return"TOSSPAYMENTS__HANDSHAKE"===(null==e?void 0:e.type)&&"TOSSPAYMENTS__SYN_ACK"===(null==(t=null==e?void 0:e.body)?void 0:t.step)}}]),e}(),LO=function(){function e(t,r,n){i(this,e),this.id=t,this.type=r,this.body=n}return s(e,[{key:"from",value:function(e){return this.body.windowId===e}}],[{key:"of",value:function(t){return new e(t.id,t.type,t.body)}},{key:"ofWindowIdAndMessagePort",value:function(t){var r=t.windowId;return new e(mO(),"TOSSPAYMENTS__HANDSHAKE",{step:"TOSSPAYMENTS__REQUEST_CONNECT",windowId:r})}},{key:"is",value:function(e){var t;return"TOSSPAYMENTS__HANDSHAKE"===(null==e?void 0:e.type)&&"TOSSPAYMENTS__REQUEST_CONNECT"===(null==(t=null==e?void 0:e.body)?void 0:t.step)}}]),e}(),BO=function(){function e(t,r,n){i(this,e),this.id=t,this.type=r,this.body=n}return s(e,[{key:"send",value:function(e){return dO(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.sendMessage(this);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"handleReceive",value:function(e){e.triggerEventSubscribers(this.body.eventName,this.body.payload)}}],[{key:"of",value:function(t){var r=t.eventName,n=t.payload;return new e(mO(),"TOSSPAYMENTS__BROADCAST",{eventName:r,payload:n})}}]),e}(),_O=function(){function e(t,r,n){i(this,e),this.id=t,this.type=r,this.body=n}return s(e,[{key:"send",value:function(e){return dO(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.sendMessage(this);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"handleReceive",value:function(e){try{e.resolveAckTask({taskId:this.body.source.id})}catch(t){switch(!0){case t instanceof gO:e.publishError(new kO(this));break;case t instanceof SO:e.publishError(new xO(this));break;default:throw t}}}}],[{key:"of",value:function(t){var r=t.source;return new e(mO(),"TOSSPAYMENTS__ACK",{source:r})}}]),e}(),UO=function(){function e(t,r,n){i(this,e),this.id=t,this.type=r,this.body=n}return s(e,[{key:"isRequest",value:function(){return"TOSSPAYMENTS__REQUEST"===this.body.step}},{key:"isHandleSuccessResponse",value:function(){return"TOSSPAYMENTS__HANDLE_SUCCESS_RESPONSE"===this.body.step}},{key:"isHandleFailResponse",value:function(){return"TOSSPAYMENTS__HANDLE_FAIL_RESPONSE"===this.body.step}},{key:"send",value:function(e,t){var r=this,n=e.startHandleRequestTask({id:this.id,body:this,timeout:null==t?void 0:t.timeout});return e.sendGuaranteeDeliveryMessage(this),n.catch((function(t){if(1==t instanceof wO)throw e.publishError(new AO(r)),new AO(r);throw t}))}},{key:"handleReceive",value:function(t){var r=this;if(t.sendMessage(_O.of({source:this})),this.isRequest())t.triggerRequestHandler(this.body.requestName,this.body.payload,(function(n){e.HANDLE_SUCCESS_RESPONSE(r.body.requestName,n,r).send(t)}),(function(n){e.HANDLE_FAIL_RESPONSE(r.body.requestName,n,r).send(t)}));else{if(!this.isHandleSuccessResponse()&&!this.isHandleFailResponse())throw new Error("[BRIDGE]: invalid request/response message step");try{this.isHandleSuccessResponse()?t.resolveHandleRequestTask({taskId:this.body.source.id,result:this.body.payload}):this.isHandleFailResponse()&&t.rejectHandleRequestTask({taskId:this.body.source.id,error:new PO(this)})}catch(e){switch(!0){case e instanceof gO:t.publishError(new bO(this));break;case e instanceof SO:t.publishError(new IO(this));break;default:throw e}}}}}],[{key:"of",value:function(t){var r=t.step,n=t.requestName,o=t.payload,i=t.source;return new e(mO(),"TOSSPAYMENTS__REQUEST_RESPONSE",{step:r,requestName:n,payload:o,source:i})}},{key:"REQUEST",value:function(t,r){return e.of({step:"TOSSPAYMENTS__REQUEST",requestName:t,payload:r})}},{key:"HANDLE_SUCCESS_RESPONSE",value:function(t,r,n){return e.of({step:"TOSSPAYMENTS__HANDLE_SUCCESS_RESPONSE",requestName:t,payload:r,source:n})}},{key:"HANDLE_FAIL_RESPONSE",value:function(t,r,n){return e.of({step:"TOSSPAYMENTS__HANDLE_FAIL_RESPONSE",requestName:t,payload:(o=r,JSON.stringify(new(function(){function e(t){i(this,e),this.error=t}return s(e,[{key:"toJSON",value:function(){var e=[];e.push("message: ".concat(this.error.message));for(var t=0,r=Object.entries(o);t<r.length;t++){var n=g(r[t],2),i=n[0],a=n[1];e.push("".concat(i,": ").concat(JSON.stringify(a)))}return e.push("stack: ".concat(JSON.stringify(this.error.stack))),e.join(", ")}}]),e}())(o))),source:n});var o}}]),e}();UO.STEPS=["TOSSPAYMENTS__REQUEST","TOSSPAYMENTS__HANDLE_SUCCESS_RESPONSE","TOSSPAYMENTS__HANDLE_FAIL_RESPONSE"];var FO=UO,WO=function(){function e(){i(this,e)}return s(e,[{key:"ofMessageEvent",value:function(e){var t=e.data;switch(t.type){case"TOSSPAYMENTS__BROADCAST":return new BO(t.id,"TOSSPAYMENTS__BROADCAST",t.body);case"TOSSPAYMENTS__REQUEST_RESPONSE":return new FO(t.id,"TOSSPAYMENTS__REQUEST_RESPONSE",t.body);case"TOSSPAYMENTS__ACK":return new _O(t.id,"TOSSPAYMENTS__ACK",t.body)}}},{key:"sendBroadcast",value:function(e){var t=e.eventName,r=e.payload,n=e.context;BO.of({eventName:t,payload:r}).send(n)}},{key:"sendRequest",value:function(e){var t=e.requestName,r=e.payload,n=e.context,o=e.timeout;return FO.REQUEST(t,r).send(n,{timeout:o})}}]),e}();function qO(e){return dO(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.targetWindow,n=t.runtimeWindow,o=void 0===n?window:n,i=t.reconnectTimeout,e.abrupt("return",new Promise((function(e){var t=mO(),n=setInterval((function(){r.postMessage(DO.ofWindowId(t),"*")}),100);o.addEventListener("message",(function a(s){var u=s.data;if(KO.is(u)&&KO.of(u).from(t)){clearInterval(n),o.removeEventListener("message",a);var c=new MessageChannel,l=c.port1,d=c.port2;r.postMessage(LO.ofWindowIdAndMessagePort({windowId:t}),"*",[d]),e(NO.of({messagePort:l,inConnectMessageProcessor:new WO,windowId:t,runtimeWindow:o,oppositeWindow:r,reconnectTimeout:i}))}}))})));case 2:case"end":return e.stop()}}),e)})))}var GO=function(){function e(t){i(this,e),this.logger=t}return s(e,[{key:"openBridge",value:function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.targetWindow,n=t.runtimeWindow,o=t.reconnectTimeout,e.next=3,qO({targetWindow:r,runtimeWindow:n,reconnectTimeout:o});case 3:return i=e.sent,e.abrupt("return",(i.subscribeDebugger((function(e){return ax(a,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{null!=e&&this.logger.info(JSON.stringify(e))}catch(e){}case 1:case"end":return t.stop()}}),t,this)})))})),i.subscribeError((function(e){return ax(a,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null==e){t.next=5;break}if(!(e instanceof Error)){t.next=4;break}return t.abrupt("return",void this.logger.error(JSON.stringify(e.message),{stack:null!=(r=null==e?void 0:e.stack)?r:""}));case 4:this.logger.error(JSON.stringify(e));case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))})),i));case 5:case"end":return e.stop()}}),e)})))}}]),e}(),VO=function(){function e(t){i(this,e),this.Bridge=new GO(t)}return s(e,[{key:"getLauncher",value:function(e){var t=e.target;switch(t){case"iframe":return new zM(this.Bridge);case"full-iframe":throw new pT("full-iframe");case"popup":return XM.getInstance(this.Bridge);case"self":throw new pT("self");default:throw new pT(t)}}}]),e}(),YO=function(){function e(t){i(this,e),this.Bridge=new GO(t)}return s(e,[{key:"getLauncher",value:function(e){var t=e.target;switch(t){case"iframe":throw new pT("iframe");case"full-iframe":throw new pT("full-iframe");case"popup":throw new pT("popup");case"self":throw new pT("self");default:return new lO(t,this.Bridge)}}}]),e}(),HO=function(){function e(){i(this,e)}return s(e,[{key:"getLauncher",value:function(e){var t=e.target;switch(t){case"iframe":return new aO;case"full-iframe":return new iO;default:throw new pT(t);case"self":return new sO}}}]),e}(),jO=function(){function e(){i(this,e),this.key="tosspayments/client-key-".concat(Math.random().toString(36).substring(2)),this.storage=new SM}return s(e,[{key:"findCurrentClientKey",value:function(){var e=this.storage.get(this.key);if(null==e)throw new aT;return new SN(e)}},{key:"saveCurrentClientKey",value:function(e){this.storage.set(this.key,e.value)}}]),e}(),zO=function(){function e(t){i(this,e),this.config=t}return s(e,[{key:"getBrandpayServerOrigin",value:function(){return this.config.brandpay.serverOrigin}},{key:"getPaymentWidgetServerOrigin",value:function(){return this.config.paymentWidget.serverOrigin}},{key:"getPaymentGatewayServerOrigin",value:function(){return this.config.paymentGateway.serverOrigin}},{key:"getPaymentGatewaySandboxServerOrigin",value:function(){return this.config.paymentGateway.sandboxServerOrigin}}]),e}(),JO=function(){function e(t){i(this,e),this.domainLoggerTransport=t}return s(e,[{key:"logBrandpayAuthenticate",value:function(e){var t=e.methodId;this.domainLoggerTransport.request(1373476,{servicename:null==t?null:t.startsWith("c")||t.startsWith("m")?"ì¹´ë":"ê³ì¢"})}},{key:"logBrandpayAddPaymentMethodUsecaseSuccess",value:function(){qx().info("add payment method usecase success")}},{key:"logBrandpayRequestPaymentUsecasseSuccess",value:function(e){var t=e.orderId;qx().info("request payment usecase success",{orderId:t})}},{key:"logBrandpayRequestPaymentUsecasseFail",value:function(e){var t=e.orderId,r=e.code;qx().info("request payment usecase fail",{orderId:t,code:r})}},{key:"logWidgetRequestPaymentStart",value:function(e){var t=this.createRequestPaymentLogParams(e);this.domainLoggerTransport.start(1376596,ex($I({},t),{params:{}}))}},{key:"logWidgetRequestPaymentSuccess",value:function(e){var t=this.createRequestPaymentLogParams(e);this.domainLoggerTransport.success(1376596,t)}},{key:"logWidgetRequestPaymentFail",value:function(e){var t=e,r=t.error,n=tx(t,["error"]),o=this.createRequestPaymentLogParams(n),i=this.createRequestPaymentErrorLogError(r);this.domainLoggerTransport.fail(1376596,ex($I({},o),{error:i}))}},{key:"createRequestPaymentErrorLogError",value:function(e){return e instanceof LT?{code:"PROVIDER_STATUS_UNHEALTHY",message:"ê²°ì  ê¸°ê´(ì¹´ëì¬, ìí, êµ­ì¸ì²­ ë±) ì¤ë¥ìëë¤. ë¤ë¥¸ ê²°ì ìë¨ì ì íí´ ì£¼ì¸ì."}:e instanceof OT?{code:"NEED_CARD_PAYMENT_DETAIL",message:"ì¹´ë ê²°ì  ì ë³´ë¥¼ ì íí´ì£¼ì¸ì."}:e instanceof DT?{code:"NEED_REFUND_ACCOUNT_DETAIL",message:"íë¶ê³ì¢ ì ë³´ë¥¼ ëª¨ë ìë ¥í´ì£¼ì¸ì."}:e instanceof BT?{code:"EXCEED_MAX_DUE_DATE",message:"ê°ì ê³ì¢ì ìµë ì í¨ë§ë£ ê¸°ê°ì ì´ê³¼íìµëë¤."}:e instanceof KT?{code:"EXCEED_DEPOSIT_AMOUNT_LIMIT",message:"ê°ìê³ì¢ ìê¸ ì í ê¸ì¡ì ì´ê³¼íì´ì. ë¤ë¥¸ ê²°ì ìë¨ì ì´ì©í´ì£¼ì¸ì."}:e instanceof _T?{code:"CUSTOM_PAYMENT_METHOD_UNABLE_TO_PAY",message:""}:e instanceof Error?{code:"UNKNOWN_ERROR",message:e.message}:{}}},{key:"createRequestPaymentLogParams",value:function(e){var t=e.selectedPaymentMethod,r=e.paymentInfo,n=e.amount,o=e.mid;if(t.id.startsWith("CUSTOM__"))return{paymentMethod:t.id,mid:o,orderId:r.orderId,orderName:r.orderName,amount:n.value,currency:n.currency};switch(t.code){case"BRANDPAY":case"KEYIN":case"TRANSFER":case"BANKPAY":case"OPENBANKING":case"VIRTUAL_ACCOUNT":case"MOBILE_PHONE":case"GAME_GIFT_CERTIFICATE":case"BOOK_GIFT_CERTIFICATE":case"CULTURE_GIFT_CERTIFICATE":return{paymentMethod:t.id,mid:o,orderId:r.orderId,orderName:r.orderName,amount:n.value,currency:n.currency};case"PAYPAL":case"GCASH":case"TOUCHNGO":case"BOOST":case"BPI":case"BILLEASE":case"DANA":case"ALIPAYHK":case"TRUEMONEY":case"RABBIT_LINE_PAY":case"ALIPAY":return{paymentMethod:"FOREIGN_EASY_PAY",mid:o,orderId:r.orderId,orderName:r.orderName,amount:n.value,currency:n.currency,provider:t.code};case"PINPAY":case"TOSSPAY":case"NAVERPAY":case"SAMSUNGPAY":case"APPLEPAY":case"LPAY":case"KAKAOPAY":case"PAYCO":case"SSG":return{paymentMethod:"CARD",mid:o,orderId:r.orderId,orderName:r.orderName,amount:n.value,currency:n.currency,easyPay:t.code};case"CARD":case"SHINHAN":case"HYUNDAI":case"SAMSUNG":case"WOORI":case"KOOKMIN":case"LOTTE":case"NONGHYEOP":case"HANA":case"BC":case"KDBBANK":case"TOSSBANK":case"KAKAOBANK":case"SUHYEOP":case"JEONBUKBANK":case"KBANK":case"POST":case"SAEMAUL":case"CITI":case"SAVINGBANK":case"JEJUBANK":case"GWANGJUBANK":case"SHINHYEOP":case"JCB":case"UNIONPAY":case"MASTER":case"VISA":case"DINERS":case"DISCOVER":case"IBK_BC":case"AMEX":return{paymentMethod:"CARD",mid:o,orderId:r.orderId,orderName:r.orderName,amount:n.value,currency:n.currency,cardCompany:t.id.replace("CARD__","")};case"KBPAY":return{paymentMethod:"CARD",mid:o,orderId:r.orderId,orderName:r.orderName,amount:n.value,currency:n.currency,cardCompany:"KOOKMIN"}}}}]),e}(),QO=function(){function e(){i(this,e),this.key="tosspayments/mid-".concat(Math.random().toString(36).substring(2)),this.storage=new SM}return s(e,[{key:"findCurrentMid",value:function(){var e=this.storage.get(this.key);if(null==e)throw new uT;return new CN(e)}},{key:"saveCurrentMid",value:function(e){this.storage.set(this.key,e.value)}}]),e}(),XO=function(){function e(){i(this,e)}return s(e,[{key:"findCurrentMid",value:function(){return null}},{key:"saveCurrentMid",value:function(e){throw new cT}}]),e}(),ZO=function(){function e(){i(this,e)}return s(e,[{key:"isUsableBiometricAuthModule",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"isUsableOCRModule",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"isBiometricAuthAvailable",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"getAppInfo",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new eT;case 1:case"end":return e.stop()}}),e)})))}},{key:"hasBiometricAuthToken",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})))}},{key:"setBiometricAuthToken",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new eT;case 1:case"end":return e.stop()}}),e)})))}},{key:"getEncryptedBiometricAuthToken",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new eT;case 1:case"end":return e.stop()}}),e)})))}},{key:"removeBiometricAuthToken",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new eT;case 1:case"end":return e.stop()}}),e)})))}},{key:"scanCreditCard",value:function(e){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new eT;case 1:case"end":return e.stop()}}),e)})))}}]),e}(),$O=function(){function e(t){i(this,e),this.deviceManager=t}return s(e,[{key:"create",value:function(){return this.deviceManager.getDevice().isIos()?this.getBrandpayIosNativeSDKFacade():this.deviceManager.getDevice().isAndroid()?this.getBrandpayAndroidNativeFacade():new ZO}}]),e}(),eD=function(e){c(r,e);var t=v(r);function r(e){return i(this,r),t.call(this,e)}return s(r,[{key:"getBrandpayIosNativeSDKFacade",value:function(){return new ZO}},{key:"getBrandpayAndroidNativeFacade",value:function(){return new ZO}}]),r}($O),tD=ix(Px(),1),rD=function(){function e(){i(this,e)}return s(e,[{key:"get",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",nD("GET",e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"post",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",nD("POST",e,t));case 1:case"end":return r.stop()}}),r)})))}},{key:"put",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)})))}},{key:"delete",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)})))}}]),e}();function nD(e,t,n){return new Promise((function(o,i){var a,s,u,c=new XMLHttpRequest;c.open(e,function(e,t){if(null==t)return e;var r=tD.default.parseUrl(e),n=tD.default.stringify($I($I({},r.query),t));return n.length>0?"".concat(r.url,"?").concat(n):r.url}(t,null==n?void 0:n.query),!0),c.withCredentials=null!=(a=null==n?void 0:n.credentials)&&a,null==(null==(s=null==n?void 0:n.headers)?void 0:s["Content-Type"])&&c.setRequestHeader("Content-Type","application/json"),null!=(null==n?void 0:n.timeout)&&(c.timeout=n.timeout),Object.keys(null!=(u=null==n?void 0:n.headers)?u:{}).forEach((function(e){c.setRequestHeader(e,n.headers[e])})),"GET"===e?c.send():c.send(JSON.stringify(null==n?void 0:n.body)),c.addEventListener("error",(function(){i(new iD({code:"REQUEST_ERROR",message:"Request Error"}))})),c.addEventListener("timeout",(function(){i(new iD({code:"REQUEST_TIMEOUT",message:"Request Timeout"}))})),c.addEventListener("load",(function(){if(c.status>=400){if(Dx(c.responseText))return i(new iD({code:"NETWORK_ERROR",message:"Network Error"}));var e=oD(c.responseText);return(null==(t=e)?void 0:t.hasOwnProperty("message"))&&(null==t?void 0:t.hasOwnProperty("code"))?i(new iD(e)):function(e){return"object"==r(e)&&null!=e&&"ERROR"===e.result}(e)?i(new iD(e.error)):i(e)}var t;o(oD(c.response))}))}))}function oD(e){if("string"!=typeof e)return e;try{return JSON.parse(e)}catch(t){return e}}var iD=function(e){c(r,e);var t=v(r);function r(e){var n,o=e.code,a=e.message,s=e.data;return i(this,r),(n=t.call(this,"[".concat(o,"]: ").concat(a))).isTossPaymentsError=!0,n.message=a,n.code=o,n.data=s,n}return s(r)}(f(Error));function aD(e){return!0===(null==e?void 0:e.isTossPaymentsError)}var sD=function(){function e(t,r){i(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.httpClient=new rD}return s(e,[{key:"getIdentity",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.get("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/identities"),{headers:ex($I({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader(e)}),credentials:!0});case 2:return r=t.sent,n=r.result,o=r.newCustomerToken,t.abrupt("return",{newCustomerToken:o,identity:n});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getRegisteredPaymentMethods",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.get("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/methods"),{headers:ex($I({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader(e)}),credentials:!0});case 2:return r=t.sent,n=r.result,o=r.newCustomerToken,t.abrupt("return",{newCustomerToken:o,registeredPaymentMethods:n});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getTemporaryMethods",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.get("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/methods/temporary"),{headers:ex($I({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader(e)}),credentials:!0});case 2:return r=t.sent,n=r.result,o=r.newCustomerToken,t.abrupt("return",{newCustomerToken:o,temporaryPaymentMethods:n});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getProperties",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.get("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/properties"),{headers:ex($I({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader(e)}),credentials:!0});case 2:return r=t.sent,n=r.result,o=r.newCustomerToken,t.abrupt("return",{newCustomerToken:o,properties:n});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"updateProperties",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.post("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/properties"),{headers:ex($I({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader(e.customerToken)}),credentials:!0,body:e.properties});case 2:return r=t.sent,n=r.newCustomerToken,t.abrupt("return",{newCustomerToken:n});case 5:case"end":return t.stop()}}),t,this)})))}},{key:"getAuthorizationHeader",value:function(e){return"Bearer ".concat(e)}},{key:"getDefaultHeaders",value:function(){var e,t,r=this.customerSessionRepository.findCurrentSession();return{"x-tosspayments-global-trace-id":null!=(e=r.getGlobalTraceId())?e:"unknown","x-tosspayments-referrer":null!=(t=r.getWindow().getHref())?t:"unknown"}}}]),e}(),uD=function(){function e(t,r,n,o){i(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.clientKeyRepository=n,this.midRepository=o,this.httpClient=new rD}return s(e,[{key:"getMerchantIntegration",value:function(){var e,t=null==(e=this.midRepository.findCurrentMid())?void 0:e.value;return this.httpClient.get("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/merchant/integration"),ex($I({headers:ex($I({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader()})},null!=t?{"tosspayments-mid":t}:{}),{credentials:!0}))}},{key:"validatePaymentRequest",value:function(e){var t,r=null==(t=this.midRepository.findCurrentMid())?void 0:t.value;return this.httpClient.post("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/payments/validate"),ex($I({headers:ex($I({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader()}),body:e},null!=r?{"tosspayments-mid":r}:{}),{credentials:!0}))}},{key:"getCustomerAuthorizationStatus",value:function(){var e,t=this.customerSessionRepository.findCurrentSession().getCustomerKey().value,r=null==(e=this.midRepository.findCurrentMid())?void 0:e.value;return this.httpClient.get("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/authorizations/agree"),{query:{customerKey:t},headers:$I(ex($I({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader()}),null!=r?{"tosspayments-mid":r}:{}),credentials:!0})}},{key:"createAuthSession",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.customerSessionRepository.findCurrentSession(),n=r.getRedirectURL(),o=r.getCustomerKey().value,i=null==(t=this.midRepository.findCurrentMid())?void 0:t.value,e.next=3,this.httpClient.post("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/authorizations"),{body:{customerKey:o,redirectUrl:n},headers:$I(ex($I({},this.getDefaultHeaders()),{Authorization:this.getAuthorizationHeader()}),null!=i?{"tosspayments-mid":i}:{})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"requestRedirectUrl",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Date.now(),t.next=3,this.httpClient.get(e,{credentials:!0});case 3:return t.t0=t.sent,t.t1=Date.now()-r,t.abrupt("return",{result:t.t0,elapsedTimeMs:t.t1});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"fetchCustomerTokenV2",value:function(e){var t,r=e.authorizationElapsedTime,n=e.customerAuthCode,o=this.customerSessionRepository.findCurrentSession().getCustomerKey().value,i=null==(t=this.midRepository.findCurrentMid())?void 0:t.value;return this.httpClient.post("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v2/brandpay/authorizations/customer-token"),{query:{atms:String(r)},body:{customerKey:o,customerAuthCode:n},headers:$I(ex($I({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader()}),null!=i?{"tosspayments-mid":i}:{})})}},{key:"getAuthorizationHeader",value:function(){var e=this.clientKeyRepository.findCurrentClientKey().value;return"Basic ".concat(window.btoa("".concat(e,":")))}},{key:"getDefaultHeaders",value:function(){var e,t,r=this.customerSessionRepository.findCurrentSession();return{"x-tosspayments-global-trace-id":null!=(e=r.getGlobalTraceId())?e:"unknown","x-tosspayments-referrer":null!=(t=r.getWindow().getHref())?t:"unknown"}}}]),e}(),cD=function(){function e(){i(this,e),this.httpClient=new rD}return s(e,[{key:"getV1WidgetGroupsKeys",value:function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.origin,n=t.widgetKey,o=t.variantKey,i=t.globalTraceId,a=t.referrer,e.next=3,this.httpClient.get("".concat(r,"/v1/payment-widget/widget-groups/keys"),{headers:{"x-tosspayments-global-trace-id":null!=i?i:"unknown","x-tosspayments-referrer":null!=a?a:"unknown",Authorization:"Basic ".concat(window.btoa("".concat(n,":")))},query:{variantKey:o}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getV1WidgetBrandpayConfig",value:function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.origin,n=t.widgetKey,o=t.variantKey,i=t.globalTraceId,a=t.referrer,e.next=3,this.httpClient.get("".concat(r,"/v1/payment-widget/brandpay/config"),{headers:{"x-tosspayments-global-trace-id":null!=i?i:"unknown","x-tosspayments-referrer":null!=a?a:"unknown",Authorization:"Basic ".concat(window.btoa("".concat(n,":")))},query:{variantKey:o}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}}]),e}(),lD=function(){function e(){i(this,e),this.httpClient=new rD}return s(e,[{key:"postV1PxPaymentParameters",value:function(e){var t,r=e.origin,n=e.clientKey,o=e.isMobile,i=e.isPromise,a=e.globalTraceId,s=e.paymentParameter;return this.httpClient.post("".concat(r,"/payment-gateway-window/open/pg-window/v1/px-payment-parameters").concat(Nx(ex($I({},null!=s.mId?{"tosspayments-mid":s.mId}:{}),{Authorization:"Basic ".concat(btoa("".concat(n,":")))}))),{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:(t=ex($I({clientKey:n,isMobile:o,isPromise:i},null!=a?{tossGlobalTraceId:a}:{}),{paymentParameter:JSON.stringify(s)}),Object.keys(t).filter((function(e){return void 0!==t[e]})).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&")),timeout:6e4})}},{key:"getV3BillingRoute",value:function(e){var t=e.origin,r=e.clientKey,n=e.isMobile,o=e.globalTraceId,i=e.billingParameter;return this.httpClient.get("".concat(t,"/payment-gateway-window/open/pg-window/v3/billing/route").concat(Nx(ex($I({isMobile:n},null!=o?{tossGlobalTraceId:o}:{}),{billingParameter:JSON.stringify(i),Authorization:"Basic ".concat(btoa("".concat(r,":")))}))),{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},timeout:6e4})}}]),e}(),dD=function(){function e(t,r){i(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.brandpayServer=new sD(t,r)}return s(e,[{key:"getIdentity",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.brandpayServer.getIdentity(e);case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),r="REQUIRED_VERIFICATION",n="REQUIRED_PLCC_VERIFICATION",o="REQUIRED_OPENPAY_MIGRATION_VERIFICATION",!aD(t.t0)||![r,n,o].includes(t.t0.code)){t.next=11;break}throw new $x;case 11:throw new kT(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"getRegisteredPaymentMethods",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.brandpayServer.getRegisteredPaymentMethods(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new kT(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"getTemporaryMethods",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.brandpayServer.getTemporaryMethods(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new kT(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"getProperties",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.brandpayServer.getProperties(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new kT(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"updateProperties",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.brandpayServer.updateProperties(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),new kT(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}}]),e}(),hD=function(){function e(t,r,n,o){i(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.clientKeyRepository=n,this.midRepository=o,this.brandpayServer=new uD(t,r,n,o)}return s(e,[{key:"authenticateCustomerToken",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._authenticateCustomerTokenV2();case 3:case 11:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!aD(e.t0)||!["FORBIDDEN_CONSECUTIVE_REQUEST","NOT_FOUND_CUSTOMER_SESSION"].includes(e.t0.code)){e.next=12;break}return e.next=11,this._authenticateCustomerTokenV2();case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"_authenticateCustomerTokenV2",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s,u,c,l,d,h,m,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=150,r=null,n=0,o=null,i=null,e.next=3,this.brandpayServer.createAuthSession();case 3:return a=e.sent,i=a.customerAuthCode,s=qx(),e.prev=6,e.next=9,this.brandpayServer.requestRedirectUrl(a.authorizationUrl);case 9:u=e.sent,o=u.elapsedTimeMs,s.info("Redirect url success"),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(6),c=function(e){try{return JSON.stringify(e)}catch(e){return"Fail to parse"}},s.error("Redirect url failed",{message:c(null==e.t0?void 0:e.t0.message),stack:c(null==e.t0?void 0:e.t0.stack),rawError:c(e.t0)}),e.t0;case 17:if(null!=r){e.next=41;break}return l=0===n,e.next=21,Promise.all([this.brandpayServer.fetchCustomerTokenV2({authorizationElapsedTime:o,customerAuthCode:i}),Ix(l?0:t)]);case 21:d=e.sent,h=g(d,1),m=h[0],e.t1=m.status,e.next="INVALID"===e.t1?27:"PENDING"===e.t1?29:"APPROVED"===e.t1?36:37;break;case 27:return t=1e3,e.abrupt("continue",39);case 29:if(!l){e.next=34;break}return e.next=32,this.brandpayServer.createAuthSession();case 32:f=e.sent,i=f.customerAuthCode,o=null,this.brandpayServer.requestRedirectUrl(f.authorizationUrl).then((function(e){o=e.elapsedTimeMs}));case 34:return t=150,n++,e.abrupt("break",37);case 36:r=m.customerToken;case 37:if(!(n>=300)){e.next=39;break}throw new Yx;case 39:e.next=17;break;case 41:return e.abrupt("return",r);case 42:case"end":return e.stop()}}),e,this,[[6,13]])})))}},{key:"isTermsAgreed",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.brandpayServer.getCustomerAuthorizationStatus();case 3:return e.abrupt("return",e.sent.isAgree);case 6:throw e.prev=6,e.t0=e.catch(0),new kT(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"getMerchantIntegration",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.brandpayServer.getMerchantIntegration();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),new kT(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"validatePaymentRequest",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(r=e).amount,o=tx(r,["amount"]),t.prev=1,t.next=4,this.brandpayServer.validatePaymentRequest($I({amount:n.value},o));case 4:t.next=12;break;case 6:if(t.prev=6,t.t0=t.catch(1),i=["INVALID_REQUEST","INVALID_ORDER_ID","INVALID_ORDER_NAME","UNAUTHORIZED_KEY","INVALID_METADATA"],!aD(t.t0)||!i.includes(t.t0.code)){t.next=11;break}throw"INVALID_METADATA"===t.t0.code?new CT:new ET({code:t.t0.code,message:t.t0.message});case 11:throw new kT(t.t0);case 12:case"end":return t.stop()}}),t,this,[[1,6]])})))}}]),e}(),mD=function(){function e(t,r){i(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.widgetServerAPI=new cD}return s(e,[{key:"fetchMidPackage",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=this.customerSessionRepository.findCurrentSession(),r.next=4,this.widgetServerAPI.getV1WidgetGroupsKeys({origin:this.compileConfigRepository.getPaymentWidgetServerOrigin(),widgetKey:e.value,variantKey:t,globalTraceId:n.getGlobalTraceId(),referrer:n.getWindow().getHref()});case 4:return o=r.sent.data,r.abrupt("return",{getNormalMid:function(){return null!=o.normal?new CN(o.normal.mid):null},getKeyinMid:function(){return null!=o.keyin?new CN(o.keyin.mid):null},getInternationalMid:function(){return null!=o.international?new CN(o.international.mid):null},getBrandpayMid:function(){return null!=o.brandpay?new CN(o.brandpay.mid):null}});case 8:if(r.prev=8,r.t0=r.catch(0),!aD(r.t0)||!["4015","4009"].includes(r.t0.code)){r.next=12;break}throw new FT;case 12:throw new kT(r.t0);case 13:case"end":return r.stop()}}),r,this,[[0,8]])})))}}]),e}(),fD=function(){function e(t,r,n){i(this,e),this.compileConfigRepository=t,this.runtimeConfigRepository=r,this.customerSessionRepository=n,this.pgWindowServerAPI=new lD}return s(e,[{key:"validatePaymentRequest",value:function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,u,c,l,d,h,m,f,p,y,v,g,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.clientKey,n=t.isMobile,o=t.isPromise,i=t.isWidgetSession,a=t.method,s=t.request,e.prev=1,u=this.resolvePgWindowServerUrl(r.value),c=this.customerSessionRepository.findCurrentSession(),l=this.separateServerSpecificFields(a,s),d=l.amount,h=l.sandbox,m=l.isCulturalExpenses,f=l.selectableCardTypes,p=tx(l,["amount","sandbox","isCulturalExpenses","selectableCardTypes"]),y=$I($I($I($I(ex($I({},p),{amount:d.value,currency:d.currency,methodType:"ALL"===a?"":a}),null!=f?{selectableCardTypes:f}:{}),i?{requesterService:"WIDGET"}:{}),null!=(null==h?void 0:h.paymentResult)?{_skipAuth:"SUCCESS"===h.paymentResult?"FORCE_SUCCESS":"FORCE_FAIL"}:{}),null!=m?{cultureExpense:m}:{}),e.next=13,this.pgWindowServerAPI.postV1PxPaymentParameters({origin:u,clientKey:r.value,isMobile:n,isPromise:o,globalTraceId:c.getGlobalTraceId(),paymentParameter:y});case 13:return v=e.sent,g=v.data,e.abrupt("return",{paymentToken:g.token});case 18:if(e.prev=18,e.t0=e.catch(1),!vD(e.t0)||!pD.includes(e.t0.code)){e.next=26;break}if("INVALID_METADATA"!==e.t0.code){e.next=23;break}throw new CT;case 23:if("BELOW_ZERO_AMOUNT"!==e.t0.code){e.next=25;break}throw new oT;case 25:throw new ET({code:e.t0.code,message:e.t0.message});case 26:try{w=function(e){try{return JSON.stringify(e)}catch(e){return"Fail to parse"}},qx().info("Uncaught Payment Gateway Error",{message:w(null==e.t0?void 0:e.t0.message),stack:w(null==e.t0?void 0:e.t0.stack),rawError:w(e.t0)})}catch(e){}throw new kT(e.t0);case 28:case"end":return e.stop()}}),e,this,[[1,18]])})))}},{key:"isValidBillingAuthenticationRequest",value:function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.clientKey,n=t.customerKey,o=t.isMobile,i=t.request,e.prev=1,a=this.resolvePgWindowServerUrl(r.value),s=this.customerSessionRepository.findCurrentSession(),e.next=5,this.pgWindowServerAPI.getV3BillingRoute({origin:a,clientKey:r.value,isMobile:o,globalTraceId:s.getGlobalTraceId(),billingParameter:{customerKey:n.value,successUrl:i.successUrl,failUrl:i.failUrl,customerName:i.customerName,customerEmail:i.customerEmail,windowTarget:i.windowTarget,payMethod:i.method,selectableCardTypes:i.selectableCardTypes}});case 5:return e.abrupt("return",{isValid:!0});case 8:if(e.prev=8,e.t0=e.catch(1),!vD(e.t0)||!yD.includes(e.t0.code)){e.next=12;break}return e.abrupt("return",{isValid:!1});case 12:throw new kT(e.t0);case 13:case"end":return e.stop()}}),e,this,[[1,8]])})))}},{key:"resolvePgWindowServerUrl",value:function(e){var t,r,n=null==(r=null==(t=this.runtimeConfigRepository.findCurrentRuntimeConfig())?void 0:t.server)?void 0:r.baseUrl;return null!=n?n:new SN(e).isTestKey()?this.compileConfigRepository.getPaymentGatewaySandboxServerOrigin():this.compileConfigRepository.getPaymentGatewayServerOrigin()}},{key:"separateServerSpecificFields",value:function(e,t){var r,n,o,i=$I({},t);(function(e,t){return"CARD"===e})(e)&&"keyin"in i&&(o=null==(r=i.keyin)?void 0:r.selectableCardTypes,i=function(e){var t=e;return t.keyin,tx(t,["keyin"])}(i)),(function(e,t){return"TRANSFER"===e}(e)||function(e,t){return"VIRTUAL_ACCOUNT"===e}(e))&&"isCulturalExpenses"in i&&(n=i.isCulturalExpenses,i=function(e){var t=e;return t.isCulturalExpenses,tx(t,["isCulturalExpenses"])}(i));var a=i,s=a.amount,u=a.sandbox,c=tx(a,["amount","sandbox"]);return $I({amount:s,sandbox:u,isCulturalExpenses:n,selectableCardTypes:o},c)}}]),e}(),pD=["INVALID_REQUEST","INVALID_SUCCESS_URL","INCORRECT_SUCCESS_URL_FORMAT","INCORRECT_FAIL_URL_FORMAT","EXCEED_MAX_DUE_DATE","INVALID_VALID_HOURS_WITH_DUE_DATE_AND_SINGLE","EXCEED_MAX_VALID_HOURS","INVALID_URL","VIRTUAL_ACCOUNT_CALLBACK_URL_DEPRECATED","INVALID_BANK","INVALID_ACCOUNT_NUMBER","INVALID_CUSTOMER_KEY","INVALID_ORDER_ID","INVALID_PHONE","INVALID_ORDER_NAME","INVALID_EASY_PAY","BELOW_ZERO_AMOUNT","INVALID_CARD_INSTALLMENT_PLANS_WITH_MAX_AND_SINGLE","INVALID_FLOW_MODE_PARAMETERS","INVALID_MINOR_UNIT_FOR_CURRENCY","INVALID_METADATA"],yD=["INCORRECT_SUCCESS_URL_FORMAT","INCORRECT_FAIL_URL_FORMAT","INVALID_CUSTOMER_KEY","INVALID_REQUEST"];function vD(e){return!0===(null==e?void 0:e.isTossPaymentsError)}var gD=function(){function e(){i(this,e),this.currentSessionStorageKey="@tosspayments/payment-gateway-current-session",this.memoryStorage=new SM}return s(e,[{key:"saveCurrentSession",value:function(e){this.memoryStorage.set(this.currentSessionStorageKey,e)}},{key:"findCurrentSession",value:function(){var e=this.memoryStorage.get(this.currentSessionStorageKey);if(null==e)throw new lT;return e}}]),e}(),wD=function(){function e(t,r,n,o,a,s,u,c){i(this,e),this.id=t,this.kftcId=r,this.name=n,this.label=o,this.engLabel=a,this.iconName=s,this.fillIconName=u,this.contact=c}return s(e,[{key:"getName",value:function(){return this.name}},{key:"getLabel",value:function(){return this.label}}],[{key:"of",value:function(t){return new e(t.id,t.kftcId,t.name,t.label,t.engLabel,t.iconName,t.fillIconName,t.contact)}}]),e}(),SD=(new wD("39","039","ê²½ë¨ìí","ê²½ë¨","KYONGNAMBANK","icn-bank-bnk-2","icn-bank-fill-bnk","1600-8585"),new wD("34","034","ê´ì£¼ìí","ê´ì£¼","GWANGJUBANK","icn-bank-gwangju","icn-bank-fill-gwangju","1588-3388"),new wD("S8","261","êµë³´ì¦ê¶","êµë³´ì¦ê¶","KYOBO_SECURITIES","icn-bank-kyobo","icn-bank-fill-kyobo","1544-0900"),new wD("12","012","ë¨ìëí","ë¨ìëí","LOCALNONGHYEOP","icn-bank-nh","icn-bank-fill-nh","1661-2100"),new wD("SE","267","ëì ì¦ê¶","ëì ì¦ê¶","DAISHIN_SECURITIES","icn-bank-ds","icn-bank-fill-ds","1588-4488"),new wD("SK","268","ë©ë¦¬ì¸ ì¦ê¶","ë©ë¦¬ì¸ ì¦ê¶","MERITZ_SECURITIES","icn-bank-meritz","icn-bank-fill-meritz","1588-3400"),new wD("S1","238","ë¯¸ëììì¦ê¶","ë¯¸ëììì¦ê¶","MIRAEASSET_SECURITIES","icn-bank-miraeasset","icn-bank-fill-miraeasset","1588-6800"),new wD("S5","238","ë¯¸ëììì¦ê¶","ë¯¸ëììì¦ê¶","MIRAE_ASSET_SECURITIES","icn-bank-miraeasset","icn-bank-fill-miraeasset","1588-6800"),new wD("SM","290","ë¶êµ­ì¦ê¶","ë¶êµ­","BOOKOOK_SECURITIES","icn-bank-bookook","icn-bank-fill-bookook","1588-7744"),new wD("32","032","ë¶ì°ìí","ë¶ì°","BUSANBANK","icn-bank-bnk","icn-bank-fill-bnk","1588-6200"),new wD("S3","240","ì¼ì±ì¦ê¶","ì¼ì±ì¦ê¶","SAMSUNG_SECURITIES","icn-bank-samsung","icn-bank-fill-samsungcard","1588-2323"),new wD("45","045","ìë§ìê¸ê³ ","ìë§ì","SAEMAUL","icn-bank-mg","icn-bank-fill-mg","1599-9000"),new wD("64","064","ì°ë¦¼ì¡°í©","ì°ë¦¼","SANLIM","icn-bank-sj","icn-bank-fill-sj","1544-4200"),new wD("SN","291","ì ìì¦ê¶","ì ìì¦ê¶","SHINYOUNG_SECURITIES","icn-bank-shinyoung","icn-bank-fill-shinyoung","1588-8588"),new wD("S2","278","ì íê¸ìµí¬ì","ì íê¸ìµí¬ì","SHINHAN_INVESTMENT","icn-bank-shinhan","icn-bank-fill-shinyoung","1588-0365"),new wD("88","088","ì íìí","ì í","SHINHAN","icn-bank-shinhan","icn-bank-fill-shinhan","1599-8000"),new wD("48","048","ì í","ì í","SHINHYEOP","icn-bank-cu","icn-bank-fill-cu","1566-6000"),new wD("27","027","ì¨í°ìí","ì¨í°","CITI","icn-bank-citi","icn-bank-fill-citi","1588-7000"),new wD("20","020","ì°ë¦¬ìí","ì°ë¦¬","WOORI","icn-bank-woori","icn-bank-fill-woori","1588-5000"),new wD("71","071","ì°ì²´êµ­ìê¸ë³´í","ì°ì²´êµ­","POST","icn-bank-postoffice","icn-bank-fill-postoffice","1599-1900"),new wD("S0","209","ì ìíì¦ê¶","ì ìíì¦ê¶","YUANTA_SECURITES","icn-bank-yuanta","icn-bank-fill-yuanta","1588-2600"),new wD("SJ","280","ì ì§í¬ìì¦ê¶","ì ì§í¬ìì¦ê¶","EUGENE_INVESTMENT_AND_SECURITIES","icn-bank-eugene","icn-bank-fill-eugene","1588-6300"),new wD("50","050","ì ì¶ìíì¤ìí","ì ì¶","SAVINGBANK","icn-bank-sb","icn-bank-fill-sb","02-3978-600"),new wD("37","037","ì ë¶ìí","ì ë¶","JEONBUKBANK","icn-bank-jb","icn-bank-fill-jb","1588-4477"),new wD("35","035","ì ì£¼ìí","ì ì£¼","JEJUBANK","icn-bank-jeju","icn-bank-fill-jeju","1588-0079"),new wD("90","090","ì¹´ì¹´ì¤ë±í¬","ì¹´ì¹´ì¤","KAKAOBANK","icn-bank-kakao","icn-bank-fill-kakao","1599-3333"),new wD("SQ","288","ì¹´ì¹´ì¤íì´ì¦ê¶","ì¹´ì¹´ì¤íì´ì¦ê¶","KAKAOPAY_SECURITIES","icn-bank-kakaopay","icn-bank-fill-kakaopay","1600-8515"),new wD("89","089","ì¼ì´ë±í¬","ì¼ì´","KBANK","icn-bank-kbank","icn-bank-fill-kbank","1522-1000"),new wD("92","092","í ì¤ë±í¬","í ì¤","TOSSBANK","icn-bank-toss","icn-bank-fill-toss","1661-7654"),new wD("ST","271","í ì¤ì¦ê¶","í ì¤ì¦ê¶","TOSS_SECURITIES","icn-bank-toss","icn-bank-fill-toss","1599-7987"),new wD("SR","294","íëì¨ë¼ì¸ì½ë¦¬ì","íëì¨ë¼ì¸ì½ë¦¬ì","KOREA_FOSS_SECURITIES","icn-bank-fokorea","icn-bank-fill-fokorea","1644-1744"),new wD("SH","270","íëê¸ìµí¬ì","íëê¸ìµí¬ì","HANA_INVESTMENT_AND_SECURITIES","icn-bank-hanasavings","icn-bank-fill-hana","1588-3111"),new wD("81","081","íëìí","íë","HANA","icn-bank-hana","icn-bank-fill-hana","1588-1111"),new wD("S9","262","íì´í¬ìì¦ê¶","íì´í¬ìì¦ê¶","HI_INVESTMENT_AND_SECURITIES","icn-bank-hi","icn-bank-fill-hi","1588-7171"),new wD("S6","243","íêµ­í¬ìì¦ê¶","íêµ­í¬ìì¦ê¶","KOREA_INVESTMENT_AND_SECURITIES","icn-bank-koreainvestment","icn-bank-fill-koreainvestment","1544-5000"),new wD("SG","269","ííí¬ìì¦ê¶","ííí¬ìì¦ê¶","HANHWA_INVESTMENT_AND_SECURITIES","icn-bank-hanhwa","icn-bank-fill-hanhwa","080-851-8282"),new wD("SA","263","íëì°¨ì¦ê¶","íëì°¨ì¦ê¶","HYUNDAI_MOTOR_SECURITIES","icn-bank-hyundaicar","icn-bank-fill-hyundaicard","1588-6655"),new wD("54","054","íì½©ìíì´ìí","-","HSBC","icn-bank-hsbc","icn-bank-fill-hsbc","1544-3311"),new wD("SI","279","DBê¸ìµí¬ì","DBê¸ìµí¬ì","DB_INVESTMENT_AND_SECURITIES","icn-bank-db","icn-bank-fill-db","1588-4200"),new wD("31","031","DGBëêµ¬ìí","ëêµ¬","DAEGUBANK","icn-bank-dgb","icn-bank-fill-dgbcapital","1566-5050"),new wD("03","003","IBKê¸°ììí","ê¸°ì","IBK","icn-bank-ibk","icn-bank-fill-ibkcapital","1588-2588"),new wD("06","004","KBêµ­ë¯¼ìí","êµ­ë¯¼","KOOKMIN","icn-bank-kb","icn-bank-fill-kb","1588-9999"),new wD("S4","218","KBì¦ê¶","KBì¦ê¶","KB_SECURITIES","icn-bank-kb","icn-bank-fill-kb","1588-6611"),new wD("02","002","KDBì°ììí","ì°ì","KDBBANK","icn-bank-kdb","icn-bank-fill-kdb","1588-1500"),new wD("SP","227","KTBí¬ìì¦ê¶","KTBí¬ìì¦ê¶","DAOL_INVESTMENT_AND_SECURITIES","icn-bank-ktb","icn-bank-fill-ktb","1588-3100"),new wD("SO","292","LIGí¬ìì¦ê¶","LIGí¬ì","LIG_INVESTMENT_AND_SECURITIES","icn-bank-LIGinvest","icn-bank-LIGinvest-fill","1544-7600"),new wD("11","011","NHëíìí","ëí","NONGHYEOP","icn-bank-nh","icn-bank-fill-nh","1661-3000"),new wD("SL","247","NHí¬ìì¦ê¶","NHí¬ìì¦ê¶","NH_INVESTMENT_AND_SECURITIES","icn-bank-nh","icn-bank-fill-nh","1544-0000"),new wD("103","103","SBIì ì¶ìí","SBI","SBI","icn-bank-sbi","icn-bank-fill-sbi","1566-2210"),new wD("23","023","SCì ì¼ìí","SCì ì¼","SC","icn-bank-sc","icn-bank-fill-sc","1588-1599"),new wD("07","007","Shìíìí","ìí","SUHYEOP","icn-bank-sh","icn-bank-fill-sh","1588-1515"),new wD("SD","266","SKì¦ê¶","SKì¦ê¶","SK_SECURITIES","icn-bank-sk","icn-bank-fill-sk","1588-8245"),new wD("SB","264","í¤ìì¦ê¶","í¤ìì¦ê¶","KIWOOM","icn-bank-kium","icn-bank-fill-kium","1544-9000"),function(){function e(t,r,n,o,a){i(this,e),this.id=t,this.name=r,this.label=n,this.engLabel=o,this.iconName=a}return s(e,[{key:"getName",value:function(){return this.name}},{key:"getLabel",value:function(){return this.label}}],[{key:"of",value:function(t){return new e(t.id,t.name,t.label,t.engLabel,t.iconName)}}]),e}()),RD=new SD("TOSSPAY","í ì¤íì´","í ì¤íì´","TOSSPAY","icon-bank-horizontal-tosspay"),bD=new SD("NAVERPAY","ë¤ì´ë²íì´","ë¤ì´ë²íì´","NAVERPAY","icon-bank-payments-horizontal-naverpay"),PD=new SD("SAMSUNGPAY","ì¼ì±íì´","ì¼ì±íì´","SAMSUNGPAY","icon-bank-payments-horizontal-samsungpay"),ED=new SD("LPAY","ìíì´","ìíì´","LPAY","icon-bank-payments-horizontal-lpay"),CD=new SD("KAKAOPAY","ì¹´ì¹´ì¤íì´","ì¹´ì¹´ì¤íì´","KAKAOPAY","icon-bank-payments-horizontal-kakaopay"),kD=new SD("PAYCO","íì´ì½","íì´ì½","PAYCO","icon-bank-payments-horizontal-payco"),AD=new SD("SSG","SSGíì´","SSGíì´","SSG","icon-bank-payments-horizontal-ssgpay"),ID=new SD("APPLEPAY","ì ííì´","Apple Pay","APPLEPAY","icon-bank-payments-horizontal-applepay"),xD=new SD("PAYPAL","PayPal","PayPal","PAYPAL","icon-bank-payments-horizontal-paypal"),TD=new SD("PINPAY","PIN Pay","íë PIN Pay","PINPAY","icon-bank-payments-horizontal-pinpay2"),ND=function(){function e(t,r,n,o,a){i(this,e),this.id=t,this.name=r,this.label=n,this.engLabel=o,this.iconName=a}return s(e,[{key:"getName",value:function(){return this.name}},{key:"getLabel",value:function(){return this.label}},{key:"getEngLabel",value:function(){return this.engLabel}}],[{key:"of",value:function(t){return new e(t.id,t.name,t.label,t.engLabel,t.iconName)}}]),e}(),MD=(new ND("46","ê´ì£¼ìí","ê´ì£¼","GWANGJUBANK","icon-bank-horizontal-gjb"),new ND("71","ë¡¯ë°ì¹´ë","ë¡¯ë°","LOTTE","icon-bank-horizontal-lottecard"),new ND("30","KDBì°ììí","ì°ì","KDBBANK","icon-bank-horizontal-kdbcapital"),new ND("31","ë¹ì¨ì¹´ë","ë¹ì¨","BC","icon-bank-horizontal-bccard"),new ND("51","ì¼ì±ì¹´ë","ì¼ì±","SAMSUNG","icon-bank-horizontal-samsungcard"),new ND("38","ìë§ìê¸ê³ ","ìë§ì","SAEMAUL","icon-bank-horizontal-mgbank"),new ND("41","ì íì¹´ë","ì í","SHINHAN","icon-bank-horizontal-shinhancard"),new ND("62","ì í","ì í","SHINHYEOP","icon-bank-horizontal-cu"),new ND("36","ì¨í°ì¹´ë","ì¨í°","CITI","icon-bank-horizontal-citibank"),new ND("33","ì°ë¦¬ì¹´ë","ì°ë¦¬","WOORI","icon-bank-horizontal-wooricard"),new ND("W1","ì°ë¦¬ì¹´ë","ì°ë¦¬","WOORI","icon-bank-horizontal-wooricard"),new ND("37","ì°ì²´êµ­ìê¸ë³´í","ì°ì²´êµ­","POST","icon-bank-horizontal-postoffice"),new ND("39","ì ì¶ìíì¤ìí","ì ì¶","SAVINGBANK","icon-bank-horizontal-sb"),new ND("35","ì ë¶ìí","ì ë¶","JEONBUKBANK","icon-bank-horizontal-jbb"),new ND("42","ì ì£¼ìí","ì ì£¼","JEJUBANK","icon-bank-horizontal-jejubank"),new ND("15","ì¹´ì¹´ì¤ë±í¬","ì¹´ì¹´ì¤ë±í¬","KAKAOBANK","icon-bank-horizontal-kakaobank"),new ND("3A","ì¼ì´ë±í¬","ì¼ì´ë±í¬","KBANK","icon-bank-horizontal-kbank"),new ND("24","í ì¤ë±í¬","í ì¤ë±í¬","TOSSBANK","icon-bank-horizontal-tossbank"),new ND("21","íëì¹´ë","íë","HANA","icon-bank-horizontal-hanacard"),new ND("61","íëì¹´ë","íë","HYUNDAI","icon-bank-horizontal-hyundaicard"),new ND("11","KBêµ­ë¯¼ì¹´ë","êµ­ë¯¼","KOOKMIN","icon-bank-horizontal-kb"),new ND("91","NHëíì¹´ë","ëí","NONGHYEOP","icon-bank-horizontal-nhbank"),new ND("34","Shìíìí","ìí","SUHYEOP","icon-bank-horizontal-sh"),new ND("6D","ë¤ì´ëì¤ í´ë½","ë¤ì´ëì¤","DINERS","icon-bank-horizontal-diners"),new ND("6I","ëì¤ì»¤ë²","ëì¤ì»¤ë²","DISCOVER","icon-bank-horizontal-discover"),new ND("4M","ë§ì¤í°ì¹´ë","ë§ì¤í°","MASTER","icon-bank-horizontal-master"),new ND("3C","ì ëì¨íì´","ì ëì¨íì´","UNIONPAY","icon-bank-horizontal-unionpay"),new ND("4J","JCB","JCB","JCB","icon-bank-horizontal-jcb"),new ND("4V","VISA","ë¹ì","VISA","icon-bank-horizontal-visa"),new ND("3K","ê¸°ìë¹ì¨","ê¸°ì","IBK_BC","icon-bank-horizontal-ibk"),new ND("7A","ìë©ë¦¬ì¹¸ ìµì¤íë ì¤F","AMEX","AMEX","icn-bank-amex"),new ND("KBS","KBì¦ê¶","KBì¦ê¶","KBSEC","icon-bank-horizontal-kbsec"),new ND("PCP","íì´ì½í¬ì¸í¸","íì´ì½í¬ì¸í¸","PAYCOPOINT","icon-bank-horizontal-payco"),new ND("NIC","ëì´ì¤íì´ë¨¼ì¸ ","ëì´ì¤","NICE","icon-bank-horizontal-NICE"),new ND("KON","ì½ë","ì½ë","KONA","icon-bank-horizontal-kona"),function(){function e(){i(this,e)}return s(e,[{key:"findByDigitalWalletProviderId",value:function(e){return function(e){switch(e){case"TOSSPAY":return RD;case"NAVERPAY":return bD;case"SAMSUNGPAY":return PD;case"LPAY":return ED;case"KAKAOPAY":return CD;case"PAYCO":return kD;case"SSG":return AD;case"APPLEPAY":return ID;case"PAYPAL":return xD;case"PINPAY":return TD}}(e)}}]),e}()),OD=function(){function e(){i(this,e),this.currentSessionStorageKey="@tosspayments/payment-widget-current-session",this.previousLocalStorageKey="@tosspayments/payment-widget-previous-payment-method-id",this.memoryStorage=new SM,this.localStorage=new RM}return s(e,[{key:"findPreviousPaymentMethodId",value:function(){try{var e=this.localStorage.get(this.previousLocalStorageKey);return null!=e?e:null}catch(e){return null}}},{key:"savePreviousPaymentMethodId",value:function(e){this.localStorage.set(this.previousLocalStorageKey,e)}},{key:"findCurrentSession",value:function(){var e=this.memoryStorage.get(this.currentSessionStorageKey);if(null==e)throw new lT;return e}},{key:"saveCurrentSession",value:function(e){this.memoryStorage.set(this.currentSessionStorageKey,e)}}]),e}(),DD=function(){function e(){i(this,e),this.key="@tosspayments/widget-synchronized-payment-request-".concat(Math.random().toString(36).substring(2)),this.brandpayKey="@tosspayments/widget-synchronized-brandpay-payment-request-".concat(Math.random().toString(36).substring(2)),this.storage=new SM}return s(e,[{key:"findCurrentPaymentRequest",value:function(){var e=this.storage.get(this.key);if(null==e)throw new Error("SynchronizedPaymentRequest is not found");return e}},{key:"saveCurrentPaymentRequest",value:function(e){this.storage.set(this.key,e)}},{key:"findCurrentBrandpayPaymentRequest",value:function(){var e=this.storage.get(this.brandpayKey);if(null==e)throw new Error("SynchronizedBrandpayPaymentRequest is not found");return e}},{key:"saveCurrentBrandpayPaymentRequest",value:function(e){this.storage.set(this.brandpayKey,e)}}]),e}(),KD=function(){function e(){i(this,e)}return s(e,[{key:"getLiveProductStage",value:function(){return"live"}},{key:"getPretestProductStage",value:function(){return"sandbox"}}]),e}(),LD=function(){function e(t){i(this,e),this.runtimeConfigRepository=t}return s(e,[{key:"getLiveProductStage",value:function(){var e=this.getRuntimeConfigProductStage();return null!=e?e:"live"}},{key:"getPretestProductStage",value:function(){var e=this.getRuntimeConfigProductStage();return null!=e?e:"sandbox"}},{key:"getRuntimeConfigProductStage",value:function(){var e,t,r;return null!=(r=null==(t=null==(e=this.runtimeConfigRepository.findCurrentRuntimeConfig())?void 0:e.client)?void 0:t.productStage)?r:null}}]),e}(),BD=function(){function e(){i(this,e),this.key="tosspayments/payment-gateway-runtime-config-".concat(Math.random().toString(36).substring(2)),this.storage=new SM}return s(e,[{key:"findCurrentRuntimeConfig",value:function(){return this.storage.get(this.key)}},{key:"saveCurrentRuntimeConfig",value:function(e){this.storage.set(this.key,e)}}]),e}(),_D=function(){function e(){i(this,e),this.globalTraceIdStorageKey="@tosspayments/global-trace-id",this.merchantBrowserIdStorageKey="@tosspayments/merchant-browser-id",this.sessionIdStorageKey="@tosspayments/session-id",this.singletonMemoryStorage=PM,this.localStorage=new RM,this.sessionStorage=new bM}return s(e,[{key:"saveGlobalTraceId",value:function(e){this.singletonMemoryStorage.set(this.globalTraceIdStorageKey,e)}},{key:"findGlobalTraceId",value:function(){var e=this.singletonMemoryStorage.get(this.globalTraceIdStorageKey);if(null!=e)return e;var t=function(){var e=new Date,t="".concat(e.getFullYear()).substring(2,4),r="".concat(e.getMonth()+1).padStart(2,"0"),n="".concat(e.getDate()).padStart(2,"0"),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:21;return function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,n="",o=r;o--;)n+=e[Math.random()*e.length|0];return n}}("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",32);return"".concat("a").concat(t).concat(r).concat(n).concat(o())}();return this.singletonMemoryStorage.set(this.globalTraceIdStorageKey,t),t}},{key:"findMerchantBrowserId",value:function(){try{var e=this.localStorage.get(this.merchantBrowserIdStorageKey);if(null!=e)return e;var t=UD();return this.localStorage.set(this.merchantBrowserIdStorageKey,t),t}catch(e){return"LOCAL_STORAGE_NOT_ACCESSIBLE"}}},{key:"findSessionId",value:function(){try{var e=this.sessionStorage.get(this.sessionIdStorageKey);if(null!=e)return e;var t=UD();return this.sessionStorage.set(this.sessionIdStorageKey,t),t}catch(e){return"SESSION_STORAGE_NOT_ACCESSIBLE"}}}]),e}();function UD(){return Math.random().toString(36).substring(2)}var FD=function(){function e(t,r,n){i(this,e),this.debugLoggerTransport=t,this.domainLoggerTransport=r,this.compileConfig=n;var o=new aN(new iM),a=new CM,s=new aM,u=new iM,c=new zO(this.compileConfig),l=new _D,d=new TM,h=new MD,m=new KD,f=new EN(l,a,s),p=new JO(this.domainLoggerTransport),y=new eD(s),v=new BD,g=new LD(v),w=new gD,S=new jO,R=new HO,b=new fD(c,v,w),P=new _N(v),E=new FN(w,S,f,l),C=new UN(o,w,b,R,g,d,S),k=new qN(o,w,b,R,g,d,S),A=new NM,I=new jO,x=new VO(this.debugLoggerTransport),T=new dD(c,A),N=new YT(T,A,u),M=new hD(c,A,I,new XO),O=new ZT(N,M,A,x,m,I,y.create(),new XO),D=new gN(o,O,x,A,m,I,d,p,y.create(),M),K=new dN(o,O,x,A,m,I,y.create(),new XO),L=new fN(o,O,x,A,m,I,y.create(),new XO),B=new pN(o,O,x,A,m,I,y.create(),new XO),_=new wN(A,I,f,l),U=new mN(o,O,x,A,M,m,I,y.create(),new XO),F=new yN(o,A,N,M),W=new vN(o,O,x,A,m,I,new XO),q=new jO,G=new NM,V=new QO,Y=new VO(this.debugLoggerTransport),H=new sD(c,G),j=new YT(H,G,u),z=new hD(c,G,q,V),J=new ZT(j,z,G,Y,m,q,y.create(),V),Q=new gN(new aN(new iM),J,Y,G,m,q,d,p,y.create(),z),X=new pN(new aN(new iM),J,Y,G,m,q,y.create(),V),Z=new hN(new aN(new iM),J,Y,G,m,q,y.create(),V),$=new dN(new aN(new iM),J,Y,G,m,q,y.create(),V),ee=new gD,te=new QO,re=new HO,ne=new fD(c,v,ee),oe=new qN(new aN(new iM),ee,ne,re,g,d,q),ie=new gD,ae=new QO,se=new HO,ue=new fD(c,v,ie),ce=new qN(new aN(new iM),ie,ue,se,g,d,q),le=new gD,de=new QO,he=new HO,me=new fD(c,v,le),fe=new qN(new aN(new iM),le,me,he,g,d,q),pe=new OD,ye=new mD(c,pe),ve=new rM(q,de,te,ae,V,ye),ge=new YO(this.debugLoggerTransport),we=new ZN(pe,q,f,l,G,ee,ie,le),Se=new $N(o),Re=new QN(o,ge,pe,m,q,ve,J,G,X,Z,$,V),be=new tM,Pe=new eM(o,pe,q,be.setRequestBrandpayPaymentUseCase(Q).setRequestKeyinPaymentGatewayUseCase(oe).setRequestInternationalPaymentGatewayUseCase(ce).setRequestNormalPaymentGatewayUseCase(fe).build(),ye,p),Ee=new zN(o,ge,pe,m,q);this.dependencyImplements={DomainLogger:p,TaskScheduler:o,WindowManager:a,DeviceManager:s,AsyncSemaMutex:u,CompileConfigRepository:c,CustomerSessionFactory:f,UrlValidator:d,TracingIdRepository:l,ProductStageRepository:m,WidgetRequestPaymentUseCaseBuilder:be,PaymentMethodIssuer:h,PaymentGatewayRuntimeConfigRepository:v,PaymentGatewayProductStageRepository:g,PaymentGatewaySessionRepository:w,PaymentGatewayClientKeyRepository:S,PaymentGatewayCheckoutProductLauncherFactory:R,PaymentGatewayServerAPI:b,PaymentGatewayStartRuntimeConfigurationService:P,PaymentGatewayStartCustomerSessionService:E,PaymentGatewayRequestBillingAuthService:C,PaymentGatewayRequestPaymentService:k,BrandpayCustomerSessionRepository:A,BrandpayClientKeyRepository:I,BrandpayCheckoutProductLauncherFactory:x,BrandpayAuthenticatedServerAPI:T,BrandpayAuthenticatedAPIService:N,BrandpayPublicServerAPI:M,BrandpayCustomerAuthService:O,BrandpayRequestPaymentService:D,BrandpayAddPaymentMethodService:K,BrandpayChangePasswordService:L,BrandpayChangeSettingsService:B,BrandpayStartCustomerSessionService:_,BrandpayChangeOneTouchPaySettingsService:U,BrandpayGetIsOneTouchPayEnabledService:F,BrandpayRequestBillingAuthService:W,PaymentWidgetBrandpayCheckoutProductLauncherFactory:Y,PaymentWidgetBrandpayCustomerSessionRepository:G,PaymentWidgetBrandpayPublicServerAPI:z,PaymentWidgetBrandpayCustomerAuthService:J,PaymentWidgetService:ye,PaymentWidgetCustomerSessionRepository:pe,PaymentWidgetClientKeyRepository:q,PaymentWidgetCheckoutProductLauncherFactory:ge,PaymentWidgetStartCustomerSessionService:we,PaymentWidgetUpdateAmountService:Se,PaymentWidgetRenderPaymentMethods:Re,PaymentWidgetRequestPaymentService:Pe,PaymentWidgetRenderAgreementService:Ee,WidgetBrandpayRequestPaymentService:Q,WidgetKeyinPaymentGatewayRequestPaymentService:oe,WidgetInternationalPaymentGatewayRequestPaymentService:ce,WidgetNormalPaymentGatewayRequestPaymentService:fe}}return s(e,[{key:"getDependency",value:function(e){var t=this.dependencyImplements[e];if(null==t)throw new Error("".concat(e," ìì¡´ì±ì´ ì¡´ì¬íì§ ììµëë¤."));return t}}]),e}(),WD=function(){function e(){i(this,e)}return s(e,[{key:"create",value:function(e){Wx(e.debugLoggerTransport);var t=new FD(e.debugLoggerTransport,e.domainLoggerTransport,e.compileConfig),r=this.configDependency(t,e.compileConfig);return this.createSDKInstance(e,this.wrapDebugLogger(e,r))}},{key:"wrapDebugLogger",value:function(e,t){if(!0!==e.activeDebugLog)return t;for(var r=qx(),n={},o=0,i=Object.entries(t);o<i.length;o++){var a=g(i[o],2),s=a[0],u=a[1];n[s]=r.wrapDomainModels(s,u)}return n}}]),e}(),qD=function(){function e(t,r){i(this,e),this.constructorParams=t,this.dependencyConfigurations=r}return s(e,[{key:"brandpay",value:function(e){var t=qx(),r=this.createBrandpaySDKInstance(e);return t.wrapSDKInstance("BrandpaySDK",r)}},{key:"widgets",value:function(e){var t=qx(),r=this.createWidgetsSDKInstance(e);return t.wrapSDKInstance("WidgetsSDK",r)}},{key:"payment",value:function(e){var t=qx(),r=this.createPaymentGatewaySDKInstance(e);return t.wrapSDKInstance("PaymentSDK",r)}}]),e}();nx({},{AmountContract:function(){return GD},ClientKeyContract:function(){return VD},MidContract:function(){return YD}});var GD=s((function e(){i(this,e)})),VD=s((function e(){i(this,e)})),YD=s((function e(){i(this,e)})),HD=Object.defineProperty,jD=function(e,t){for(var r in t)HD(e,r,{get:t[r],enumerable:!0})};jD({},{Errors:function(){return JD},Models:function(){return zD}});var zD={},JD={};jD(JD,{AgreementWidgetAlreadyRenderedError:function(){return XD},BelowZeroAmountError:function(){return ZD},CustomPaymentMethodUnableToPayError:function(){return $D},ExceedDepositAmountLimitError:function(){return eK},ExceedMaxDueDateError:function(){return tK},IncorrectFailUrlFormatError:function(){return rK},IncorrectPendingUrlFormatError:function(){return nK},IncorrectSuccessUrlFormatError:function(){return oK},InsecureKeyUsageError:function(){return iK},InvalidAmountCurrencyError:function(){return aK},InvalidAmountValueError:function(){return sK},InvalidCallbackParameterError:function(){return uK},InvalidClientKeyError:function(){return cK},InvalidCustomerKeyError:function(){return lK},InvalidEventParameterError:function(){return dK},InvalidMetadataError:function(){return hK},InvalidMethodTransactionError:function(){return mK},InvalidParametersError:function(){return fK},InvalidSelectorError:function(){return pK},InvalidVariantKeyError:function(){return yK},NeedAgreementWithRequiredTermsError:function(){return vK},NeedCardPaymentDetailError:function(){return gK},NeedRefundAccountDetailError:function(){return wK},NotSelectedPaymentMethodError:function(){return SK},NotSetupAmountError:function(){return RK},NotSupportedAPIIndividualKeyError:function(){return bK},NotSupportedPromiseError:function(){return PK},PaymentMethodsWidgetAlreadyRenderedError:function(){return EK},PaymentRequestFailError:function(){return CK},ProviderStatusUnhealthyError:function(){return kK},UnknownError:function(){return AK},UnsupportedTestPhasePaymentMethodError:function(){return IK},UserCancelError:function(){return xK},V1MethodNotSupportedError:function(){return TK}});var QD=function(e){c(r,e);var t=v(r);function r(e,n){var o;return i(this,r),(o=t.call(this,e)).code=n.code,o}return s(r)}(f(Error)),XD=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íëì ì½ê´ ìì ¯ë§ì ì¬ì©í  ì ìì´ì.",{code:"AGREEMENT_WIDGET_ALREADY_RENDERED"})}return s(r)}(QD),ZD=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê¸ì¡ì 0ë³´ë¤ ì»¤ì¼ í©ëë¤.",{code:"BELOW_ZERO_AMOUNT"})}return s(r)}(QD),$D=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì»¤ì¤í ê²°ì ìë¨ì¼ë¡ ê²°ì í  ì ììµëë¤.",{code:"CUSTOM_PAYMENT_METHOD_UNABLE_TO_PAY"})}return s(r)}(QD),eK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê°ìê³ì¢ ìê¸ ì í ê¸ì¡ì ì´ê³¼íì´ì. ë¤ë¥¸ ê²°ì ìë¨ì ì´ì©í´ì£¼ì¸ì.",{code:"EXCEED_DEPOSIT_AMOUNT_LIMIT"})}return s(r)}(QD),tK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê°ì ê³ì¢ì ìµë ì í¨ë§ë£ ê¸°ê°ì ì´ê³¼íìµëë¤.",{code:"EXCEED_MAX_DUE_DATE"})}return s(r)}(QD),rK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë failUrl ìëë¤.",{code:"INCORRECT_FAIL_URL_FORMAT"})}return s(r)}(QD),nK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë pendingUrl ìëë¤.",{code:"INCORRECT_PENDING_URL_FORMAT"})}return s(r)}(QD),oK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë successUrl ìëë¤.",{code:"INCORRECT_SUCCESS_URL_FORMAT"})}return s(r)}(QD),iK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"test_gsk, live_gskë¡ ììíë ìí¬ë¦¿ í¤ë í´ë¼ì´ì¸í¸ ì½ëì ë¸ì¶ëë©´ ì ë©ëë¤. êµ¬ë§¤ìë¥¼ ìë³íë customerKey ê°ì ì¬ì©í´ì£¼ì¸ì.",{code:"INSECURE_KEY_USAGE"})}return s(r)}(QD),aK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë íµí ê°ìëë¤.",{code:"INVALID_AMOUNT_CURRENCY"})}return s(r)}(QD),sK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ê¸ì¡ì´ ì¬ë°ë¥´ì§ ììµëë¤.",{code:"INVALID_AMOUNT_VALUE"})}return s(r)}(QD),uK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì½ë°± í¨ìê° ì¬ë°ë¥´ì§ ììµëë¤.",{code:"INVALID_PARAMETER"})}return s(r)}(QD),cK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ClientKey ííê° ì¬ë°ë¥´ì§ ììµëë¤.",{code:"INVALID_CLIENT_KEY"})}return s(r)}(QD),lK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê³ ê°í¤ë ìë¬¸ ëìë¬¸ì, ì«ì, í¹ìë¬¸ì -, _, =, ., @ë¡ 2ì ì´ì 50ì ì´íì¬ì¼ í©ëë¤.",{code:"INVALID_CUSTOMER_KEY"})}return s(r)}(QD),dK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íì©íì§ ìë ì´ë²¤í¸ìëë¤.",{code:"INVALID_PARAMETER"})}return s(r)}(QD),hK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì¬ë°ë¥´ì§ ìì metadata íììëë¤.",{code:"INVALID_METADATA"})}return s(r)}(QD),mK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì´ë¯¸ ë¤ë¥¸ ìì²­ì ìííê³  ìì´ì.",{code:"INVALID_METHOD_TRANSACTION"})}return s(r)}(QD),fK=function(e){c(r,e);var t=v(r);function r(e){return i(this,r),t.call(this,e,{code:"INVALID_PARAMETERS"})}return s(r)}(QD),pK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"selectorì í´ë¹íë HTML ììë¥¼ ì°¾ì ì ììµëë¤. selector ê°ì ë¤ì íì¸í´ì£¼ì¸ì.",{code:"INVALID_SELECTOR"})}return s(r)}(QD),yK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"variantKey ì í´ë¹íë ìì ¯ì ì°¾ì ì ììµëë¤. variantKey ê°ì ë¤ì íì¸í´ì£¼ì¸ì.",{code:"INVALID_VARIANT_KEY"})}return s(r)}(QD),vK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íì ì½ê´ì ëìí´ì£¼ì¸ì.",{code:"NEED_AGREEMENT_WITH_REQUIRED_TERMS"})}return s(r)}(QD),gK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì¹´ë ê²°ì  ì ë³´ë¥¼ ì íí´ì£¼ì¸ì.",{code:"NEED_CARD_PAYMENT_DETAIL"})}return s(r)}(QD),wK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íë¶ê³ì¢ ì ë³´ë¥¼ ëª¨ë ìë ¥í´ì£¼ì¸ì.",{code:"NEED_REFUND_ACCOUNT_DETAIL"})}return s(r)}(QD),SK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ìë¨ì´ ìì§ ì íëì§ ììì´ì. ê²°ì ìë¨ì ì íí´ ì£¼ì¸ì.",{code:"NOT_SELECTED_PAYMENT_METHOD"})}return s(r)}(QD),RK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ê¸ì¡ì´ ì¤ì ëì§ ìììµëë¤. setAmountë¥¼ í¸ì¶í´ì£¼ì¸ì.",{code:"NOT_SETUP_AMOUNT"})}return s(r)}(QD),bK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ìì ¯ ì°ë í¤ì í´ë¼ì´ì¸í¸ í¤ë¡ SDKë¥¼ ì°ëí´ì£¼ì¸ì. API ê°ë³ ì°ë í¤ë ì§ìíì§ ììµëë¤.",{code:"NOT_SUPPORTED_API_INDIVIDUAL_KEY"})}return s(r)}(QD),PK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"Promise ë°©ìì ì§ìíì§ ììµëë¤. successUrl, failUrlì ì¬ì©í´ì£¼ì¸ì.",{code:"NOT_SUPPORTED_PROMISE"})}return s(r)}(QD),EK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íëì ê²°ì ìë¨ ìì ¯ë§ì ì¬ì©í  ì ìì´ì.",{code:"PAYMENT_METHODS_WIDGET_ALREADY_RENDERED"})}return s(r)}(QD),CK=function(e){c(r,e);var t=v(r);function r(e,n){var o,a=n.orderId,s=n.code;return i(this,r),(o=t.call(this,e,{code:s})).orderId=a,o}return s(r)}(QD),kK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì  ê¸°ê´(ì¹´ëì¬, ìí, êµ­ì¸ì²­ ë±) ì¤ë¥ìëë¤. ë¤ë¥¸ ê²°ì ìë¨ì ì íí´ ì£¼ì¸ì.",{code:"PROVIDER_STATUS_UNHEALTHY"})}return s(r)}(QD),AK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì ì ìë ìë¬ê° ë°ìíìµëë¤.",{code:"UNKNOWN"})}return s(r)}(QD),IK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íì¤í¸ íê²½ì ì§ìíì§ ìë ê²°ì ìë¨ìëë¤.",{code:"UNSUPPORTED_TEST_PHASE_PAYMENT_METHOD"})}return s(r)}(QD),xK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì·¨ìëììµëë¤.",{code:"USER_CANCEL"})}return s(r)}(QD),TK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"í´ë¹ API ë v1 ììë§ ì ê³µë©ëë¤.",{code:"V1_METHOD_NOT_SUPPORTED"})}return s(r)}(QD);jD({},{Errors:function(){return MK},Models:function(){return NK}});var NK={},MK={};jD(MK,{BelowZeroAmountError:function(){return OK},IncorrectFailUrlFormatError:function(){return DK},IncorrectSuccessUrlFormatError:function(){return KK},InsecureKeyUsageError:function(){return JK},InvalidAmountValueError:function(){return LK},InvalidClientKeyError:function(){return BK},InvalidCustomerKeyError:function(){return _K},InvalidMetadataError:function(){return UK},InvalidMethodTransactionError:function(){return FK},InvalidParametersError:function(){return WK},NeedAgreementWithTermsError:function(){return qK},NeedMerchantOneTouchSettingError:function(){return GK},NotRegisteredRedirectUrlError:function(){return VK},NotSupportedWidgetKeyError:function(){return QK},PaymentRequestFailError:function(){return YK},UnknownError:function(){return HK},UserCancelError:function(){return jK},V1MethodNotSupportedError:function(){return zK}});var OK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê¸ì¡ì 0ë³´ë¤ ì»¤ì¼ í©ëë¤.",{code:"BELOW_ZERO_AMOUNT"})}return s(r)}(QD),DK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë failUrl ìëë¤.",{code:"INCORRECT_FAIL_URL_FORMAT"})}return s(r)}(QD),KK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë successUrl ìëë¤.",{code:"INCORRECT_SUCCESS_URL_FORMAT"})}return s(r)}(QD),LK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ê¸ì¡ì´ ì¬ë°ë¥´ì§ ììµëë¤.",{code:"INVALID_AMOUNT_VALUE"})}return s(r)}(QD),BK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ClientKey ííê° ì¬ë°ë¥´ì§ ììµëë¤.",{code:"INVALID_CLIENT_KEY"})}return s(r)}(QD),_K=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê³ ê°í¤ë ìë¬¸ ëìë¬¸ì, ì«ì, í¹ìë¬¸ì -, _, =, ., @ë¡ 2ì ì´ì 50ì ì´íì¬ì¼ í©ëë¤.",{code:"INVALID_CUSTOMER_KEY"})}return s(r)}(QD),UK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì¬ë°ë¥´ì§ ìì metadata íììëë¤.",{code:"INVALID_METADATA"})}return s(r)}(QD),FK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì´ë¯¸ ë¤ë¥¸ ìì²­ì ìííê³  ìì´ì.",{code:"INVALID_METHOD_TRANSACTION"})}return s(r)}(QD),WK=function(e){c(r,e);var t=v(r);function r(e){return i(this,r),t.call(this,e,{code:"INVALID_PARAMETERS"})}return s(r)}(QD),qK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì´ì©ì½ê´ ëìê° íìí©ëë¤.",{code:"NEED_AGREEMENT_WITH_TERMS"})}return s(r)}(QD),GK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìí°ì¹ê²°ì  ì¬ì©ì ìí´ìë ê°ë§¹ì  ì¤ì ì´ íìí©ëë¤.",{code:"NEED_MERCHANT_ONE_TOUCH_SETTING"})}return s(r)}(QD),VK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ë¦¬ë¤ì´ë í¸ URLì´ ë±ë¡ëì§ ìììµëë¤. ê°ë°ì ë³´ íì´ì§ìì ë±ë¡í´ì£¼ì¸ì. https://developers.tosspayments.com/my/brandpay",{code:"NOT_REGISTERED_REDIRECT_URL"})}return s(r)}(QD),YK=function(e){c(r,e);var t=v(r);function r(e,n){var o,a=n.orderId,s=n.code;return i(this,r),(o=t.call(this,e,{code:s})).orderId=a,o}return s(r)}(QD),HK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì ì ìë ìë¬ê° ë°ìíìµëë¤.",{code:"UNKNOWN"})}return s(r)}(QD),jK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì·¨ìëììµëë¤.",{code:"USER_CANCEL"})}return s(r)}(QD),zK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"í´ë¹ API ë v1 ììë§ ì ê³µë©ëë¤.",{code:"V1_METHOD_NOT_SUPPORTED"})}return s(r)}(QD),JK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"test_gsk, live_gskë¡ ììíë ìí¬ë¦¿ í¤ë í´ë¼ì´ì¸í¸ ì½ëì ë¸ì¶ëë©´ ì ë©ëë¤. êµ¬ë§¤ìë¥¼ ìë³íë customerKey ê°ì ì¬ì©í´ì£¼ì¸ì.",{code:"INSECURE_KEY_USAGE"})}return s(r)}(QD),QK=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"API ê°ë³ ì°ë í¤ì í´ë¼ì´ì¸í¸ í¤ë¡ SDKë¥¼ ì°ëí´ì£¼ì¸ì. ê²°ì ìì ¯ ì°ë í¤ë ì§ìíì§ ììµëë¤.",{code:"NOT_SUPPORTED_WIDGET_KEY"})}return s(r)}(QD);jD({},{Errors:function(){return ZK},Models:function(){return XK}});var XK={},ZK={};jD(ZK,{BelowZeroAmountError:function(){return $K},IncorrectFailUrlFormatError:function(){return eL},IncorrectPendingUrlFormatError:function(){return tL},IncorrectSuccessUrlFormatError:function(){return rL},InsecureKeyUsageError:function(){return nL},InvalidAmountCurrencyError:function(){return oL},InvalidAmountValueError:function(){return iL},InvalidClientKeyError:function(){return aL},InvalidCustomerKeyError:function(){return sL},InvalidMetadataError:function(){return uL},InvalidMethodTransactionError:function(){return cL},InvalidParametersError:function(){return lL},NotSupportedMethodError:function(){return hL},NotSupportedPromiseError:function(){return mL},NotSupportedWidgetKeyError:function(){return dL},PaymentRequestFailError:function(){return fL},UnknownError:function(){return pL},UserCancelError:function(){return yL},V1MethodNotSupportedError:function(){return vL}});var $K=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê¸ì¡ì 0ë³´ë¤ ì»¤ì¼ í©ëë¤.",{code:"BELOW_ZERO_AMOUNT"})}return s(r)}(QD),eL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë failUrl ìëë¤.",{code:"INCORRECT_FAIL_URL_FORMAT"})}return s(r)}(QD),tL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë pendingUrl ìëë¤.",{code:"INCORRECT_PENDING_URL_FORMAT"})}return s(r)}(QD),rL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë successUrl ìëë¤.",{code:"INCORRECT_SUCCESS_URL_FORMAT"})}return s(r)}(QD),nL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"test_gsk, live_gskë¡ ììíë ìí¬ë¦¿ í¤ë í´ë¼ì´ì¸í¸ ì½ëì ë¸ì¶ëë©´ ì ë©ëë¤. êµ¬ë§¤ìë¥¼ ìë³íë customerKey ê°ì ì¬ì©í´ì£¼ì¸ì.",{code:"INSECURE_KEY_USAGE"})}return s(r)}(QD),oL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë íµí ê°ìëë¤.",{code:"INVALID_AMOUNT_CURRENCY"})}return s(r)}(QD),iL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ê¸ì¡ì´ ì¬ë°ë¥´ì§ ììµëë¤.",{code:"INVALID_AMOUNT_VALUE"})}return s(r)}(QD),aL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ClientKey ííê° ì¬ë°ë¥´ì§ ììµëë¤.",{code:"INVALID_CLIENT_KEY"})}return s(r)}(QD),sL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê³ ê°í¤ë ìë¬¸ ëìë¬¸ì, ì«ì, í¹ìë¬¸ì -, _, =, ., @ë¡ 2ì ì´ì 50ì ì´íì¬ì¼ í©ëë¤.",{code:"INVALID_CUSTOMER_KEY"})}return s(r)}(QD),uL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì¬ë°ë¥´ì§ ìì metadata íììëë¤.",{code:"INVALID_METADATA"})}return s(r)}(QD),cL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì´ë¯¸ ë¤ë¥¸ ìì²­ì ìííê³  ìì´ì.",{code:"INVALID_METHOD_TRANSACTION"})}return s(r)}(QD),lL=function(e){c(r,e);var t=v(r);function r(e){return i(this,r),t.call(this,e,{code:"INVALID_PARAMETERS"})}return s(r)}(QD),dL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"API ê°ë³ ì°ë í¤ì í´ë¼ì´ì¸í¸ í¤ë¡ SDKë¥¼ ì°ëí´ì£¼ì¸ì. ê²°ì ìì ¯ ì°ë í¤ë ì§ìíì§ ììµëë¤.",{code:"NOT_SUPPORTED_WIDGET_KEY"})}return s(r)}(QD),hL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì§ìëì§ ìë ê²°ì ìë¨ìëë¤.",{code:"NOT_SUPPORTED_METHOD"})}return s(r)}(QD),mL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"Promise ë°©ìì ì§ìíì§ ììµëë¤. successUrl, failUrlì ì¬ì©í´ì£¼ì¸ì.",{code:"NOT_SUPPORTED_PROMISE"})}return s(r)}(QD),fL=function(e){c(r,e);var t=v(r);function r(e,n){var o,a=n.orderId,s=n.code;return i(this,r),(o=t.call(this,e,{code:s})).orderId=a,o}return s(r)}(QD),pL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì ì ìë ìë¬ê° ë°ìíìµëë¤.",{code:"UNKNOWN"})}return s(r)}(QD),yL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì·¨ìëììµëë¤.",{code:"USER_CANCEL"})}return s(r)}(QD),vL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"í´ë¹ API ë v1 ììë§ ì ê³µë©ëë¤.",{code:"V1_METHOD_NOT_SUPPORTED"})}return s(r)}(QD),gL=Object.defineProperty,wL=function(e,t){for(var r in t)gL(e,r,{get:t[r],enumerable:!0})},SL={};wL(SL,{Errors:function(){return RL},Models:function(){return oB}});var RL={};wL(RL,{AccountAuthNumberExpiredError:function(){return tB},AgreementWidgetAlreadyRenderedError:function(){return PL},BelowZeroAmountError:function(){return EL},ExceedDepositAmountLimitError:function(){return CL},ExceedMaxDueDateError:function(){return kL},IncorrectFailUrlFormatError:function(){return AL},IncorrectSuccessUrlFormatError:function(){return IL},InsecureKeyUsageError:function(){return ZL},InvalidAmountValueError:function(){return TL},InvalidCallbackParameterError:function(){return NL},InvalidClientKeyError:function(){return ML},InvalidCurrencyError:function(){return xL},InvalidCustomerKeyError:function(){return OL},InvalidEventParameterError:function(){return DL},InvalidMethodTransactionError:function(){return KL},InvalidParametersError:function(){return nB},InvalidSelectorError:function(){return LL},InvalidVariantKeyError:function(){return BL},NeedAgreementWithRequiredTermsError:function(){return _L},NeedCardPaymentDetailError:function(){return UL},NeedRefundAccountDetailError:function(){return FL},NotExistedPaymentMethodError:function(){return WL},NotFoundCustomerSessionError:function(){return qL},NotRenderedPaymentMethodsUIError:function(){return $L},NotSelectedPaymentMethodError:function(){return GL},NotSetupAmountError:function(){return VL},NotSupportedPromiseError:function(){return YL},PaymentMethodNotExistsError:function(){return rB},PaymentMethodsWidgetAlreadyRenderedError:function(){return HL},PaymentRequestFailError:function(){return eB},ProviderStatusUnhealthyError:function(){return jL},RenderPaymentMethodsTimeoutError:function(){return XL},UnknownError:function(){return zL},UnsupportedTestPhasePaymentMethodError:function(){return JL},UserCancelError:function(){return QL}});var bL=function(e){c(r,e);var t=v(r);function r(e,n){var o;i(this,r);var a=n.code;return(o=t.call(this,"[".concat(a,"]: ").concat(e))).isTossPaymentsError=!0,o.message=e,o.code=a,o}return s(r)}(f(Error)),PL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íëì ì½ê´ ìì ¯ë§ì ì¬ì©í  ì ìì´ì.",{code:"AGREEMENT_WIDGET_ALREADY_RENDERED"})}return s(r)}(bL),EL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê¸ì¡ì 0ë³´ë¤ ì»¤ì¼ í©ëë¤.",{code:"BELOW_ZERO_AMOUNT"})}return s(r)}(bL),CL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê°ìê³ì¢ ìê¸ ì í ê¸ì¡ì ì´ê³¼íì´ì. ë¤ë¥¸ ê²°ì ìë¨ì ì´ì©í´ì£¼ì¸ì.",{code:"EXCEED_DEPOSIT_AMOUNT_LIMIT"})}return s(r)}(bL),kL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê°ì ê³ì¢ì ìµë ì í¨ë§ë£ ê¸°ê°ì ì´ê³¼íìµëë¤.",{code:"EXCEED_MAX_DUE_DATE"})}return s(r)}(bL),AL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë failUrl ìëë¤.",{code:"INCORRECT_FAIL_URL_FORMAT"})}return s(r)}(bL),IL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë successUrl ìëë¤.",{code:"INCORRECT_SUCCESS_URL_FORMAT"})}return s(r)}(bL),xL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë íµí ê°ìëë¤.",{code:"INVALID_CURRENCY"})}return s(r)}(bL),TL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ê¸ì¡ì´ ì¬ë°ë¥´ì§ ììµëë¤.",{code:"INVALID_AMOUNT_VALUE"})}return s(r)}(bL),NL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì½ë°± í¨ìê° ì¬ë°ë¥´ì§ ììµëë¤.",{code:"INVALID_PARAMETER"})}return s(r)}(bL),ML=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"clientKey ííê° ì¬ë°ë¥´ì§ ììµëë¤.")}return s(r)}(f(Error)),OL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"CustomerKey: ì¬ì©í  ì ìë íììëë¤. ìë¬¸ ëìë¬¸ì, ì«ì, í¹ìë¬¸ì(`-`,`_`,`=`,`.`,`@`)ë¡ ìµì 2ì ì´ì ìµë 50ì ì´íì¬ì¼ í©ëë¤.")}return s(r)}(f(TypeError)),DL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íì©íì§ ìë ì´ë²¤í¸ìëë¤.",{code:"INVALID_PARAMETER"})}return s(r)}(bL),KL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì´ë¯¸ ë¤ë¥¸ ìì²­ì ìííê³  ìì´ì.",{code:"INVALID_METHOD_TRANSACTION"})}return s(r)}(bL),LL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"selectorì í´ë¹íë HTML ììë¥¼ ì°¾ì ì ììµëë¤. selector ê°ì ë¤ì íì¸í´ì£¼ì¸ì.",{code:"INVALID_SELECTOR"})}return s(r)}(bL),BL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"variantKey ì í´ë¹íë ìì ¯ì ì°¾ì ì ììµëë¤. variantKey ê°ì ë¤ì íì¸í´ì£¼ì¸ì.",{code:"INVALID_VARIANT_KEY"})}return s(r)}(bL),_L=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íì ì½ê´ì ëìí´ì£¼ì¸ì.",{code:"NEED_AGREEMENT_WITH_REQUIRED_TERMS"})}return s(r)}(bL),UL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì¹´ë ê²°ì  ì ë³´ë¥¼ ì íí´ì£¼ì¸ì.",{code:"NEED_CARD_PAYMENT_DETAIL"})}return s(r)}(bL),FL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íë¶ê³ì¢ ì ë³´ë¥¼ ëª¨ë ìë ¥í´ì£¼ì¸ì.",{code:"NEED_REFUND_ACCOUNT_DETAIL"})}return s(r)}(bL),WL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ìë¨ì´ ì¡´ì¬íì§ ììµëë¤. ê²°ì ìë¨ì ë¨¼ì  ë±ë¡í´ì£¼ì¸ì.",{code:"NOT_EXISTED_PAYMENT_METHOD"})}return s(r)}(bL),qL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê³ ê° ì¸ìì ì°¾ì ì ììµëë¤.",{code:"NOT_FOUND_CUSTOMER_SESSION"})}return s(r)}(bL),GL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ìë¨ì´ ìì§ ì íëì§ ììì´ì. ê²°ì ìë¨ì ì íí´ ì£¼ì¸ì.",{code:"NOT_SELECTED_PAYMENT_METHOD"})}return s(r)}(bL),VL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ê¸ì¡ì´ ì¤ì ëì§ ìììµëë¤. updateAmountë¥¼ í¸ì¶í´ì£¼ì¸ì.",{code:"NOT_SETUP_AMOUNT"})}return s(r)}(bL),YL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"Promise ë°©ìì ì§ìíì§ ììµëë¤. successUrl, failUrlì ì¬ì©í´ì£¼ì¸ì.",{code:"NOT_SUPPORTED_PROMISE"})}return s(r)}(bL),HL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íëì ê²°ì ìë¨ ìì ¯ë§ì ì¬ì©í  ì ìì´ì.",{code:"PAYMENT_METHODS_WIDGET_ALREADY_RENDERED"})}return s(r)}(bL),jL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì  ê¸°ê´(ì¹´ëì¬, ìí, êµ­ì¸ì²­ ë±) ì¤ë¥ìëë¤. ë¤ë¥¸ ê²°ì ìë¨ì ì íí´ ì£¼ì¸ì.",{code:"PROVIDER_STATUS_UNHEALTHY"})}return s(r)}(bL),zL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì ì ìë ìë¬ê° ë°ìíìµëë¤.",{code:"UNKNOWN"})}return s(r)}(bL),JL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íì¤í¸ íê²½ì ì§ìíì§ ìë ê²°ì ìë¨ìëë¤.",{code:"UNSUPPORTED_TEST_PHASE_PAYMENT_METHOD"})}return s(r)}(bL),QL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì·¨ìëììµëë¤.",{code:"USER_CANCEL"})}return s(r)}(bL),XL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì  UI ë ëë§ íìììì´ ë°ìíìµëë¤.",{code:"RENDER_PAYMENT_METHODS_TIMEOUT"})}return s(r)}(bL),ZL=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"test_gsk, live_gskë¡ ììíë ìí¬ë¦¿ í¤ë í´ë¼ì´ì¸í¸ ì½ëì ë¸ì¶ëë©´ ì ë©ëë¤. êµ¬ë§¤ìë¥¼ ìë³íë customerKey ê°ì ì¬ì©í´ì£¼ì¸ì.",{code:"INSECURE_KEY_USAGE"})}return s(r)}(bL),$L=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì  UIê° ìì§ ë ëë§ëì§ ìììµëë¤. ê²°ì  UIê° ìì í ë ëë§ ë íì ë¤ì ìëí´ì£¼ì¸ì.",{code:"NOT_RENDERED_PAYMENT_METHODS_UI"})}return s(r)}(bL),eB=function(e){c(r,e);var t=v(r);function r(e,n){var o,a=n.orderId,s=n.code;return i(this,r),(o=t.call(this,e,{code:s})).orderId=a,o}return s(r)}(bL),tB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì¸ì¦ë²í¸ì ì í¨ìê°ì´ ì§ë¬ìµëë¤. ë¤ì ìëí´ì£¼ì¸ì.",{code:"EXCEED_MAX_AUTH_DUE"})}return s(r)}(bL),rB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ìë¨ì´ ì¡´ì¬íì§ ììµëë¤.",{code:"NOT_FOUND_METHOD"})}return s(r)}(bL),nB=function(e){c(r,e);var t=v(r);function r(e){return i(this,r),t.call(this,e,{code:"INVALID_PARAMETER"})}return s(r)}(bL),oB={},iB={};wL(iB,{Errors:function(){return aB},Models:function(){return MB}});var aB={};wL(aB,{AccountAuthNumberExpiredError:function(){return sB},AuthRequestFailError:function(){return uB},AuthRequestMaximumCallExceededError:function(){return cB},BelowZeroAmountError:function(){return lB},IncorrectFailUrlFormatError:function(){return dB},IncorrectSuccessUrlFormatError:function(){return hB},InvalidAmountValueError:function(){return mB},InvalidClientKeyError:function(){return fB},InvalidCustomerKeyError:function(){return pB},InvalidMetadataError:function(){return yB},InvalidMethodTransactionError:function(){return vB},InvalidPaymentMethodTypeError:function(){return gB},InvalidPaymentRequestError:function(){return wB},InvalidTermScopeError:function(){return SB},NeedAgreementWithTermsError:function(){return RB},NeedAllowPopupError:function(){return bB},NeedMerchantOneTouchSettingError:function(){return PB},NotExistedPaymentMethodError:function(){return EB},NotFoundCustomerSessionError:function(){return CB},NotRegisteredRedirectUrlError:function(){return kB},NotSupportedEnvironment:function(){return AB},PaymentMethodNotExistsError:function(){return IB},PaymentRequestFailError:function(){return xB},UnknownError:function(){return TB},UserCancelError:function(){return NB}});var sB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì¸ì¦ë²í¸ì ì í¨ìê°ì´ ì§ë¬ìµëë¤. ë¤ì ìëí´ì£¼ì¸ì.",{code:"EXCEED_MAX_AUTH_DUE"})}return s(r)}(bL),uB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"í í°ì íëíëë° ì¤í¨íìµëë¤.",{code:"AUTH_REQUEST_FAILED"})}return s(r)}(bL),cB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìµë ìì²­íìë¥¼ ì´ê³¼íìµëë¤.",{code:"AUTH_REQUEST_MAXIMUM_CALL_EXCEEDED"})}return s(r)}(bL),lB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê¸ì¡ì 0ë³´ë¤ ì»¤ì¼ í©ëë¤.",{code:"BELOW_ZERO_AMOUNT"})}return s(r)}(bL),dB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë failUrl ìëë¤.",{code:"INCORRECT_FAIL_URL_FORMAT"})}return s(r)}(bL),hB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë successUrl ìëë¤.",{code:"INCORRECT_SUCCESS_URL_FORMAT"})}return s(r)}(bL),mB=function(e){c(r,e);var t=v(r);function r(e){return i(this,r),t.call(this,"ê²°ì  ê¸ì¡ì´ ì¬ë°ë¥´ì§ ììµëë¤. (amount: ".concat(e,")"),{code:"INVALID_AMOUNT"})}return s(r)}(bL),fB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì¸ì¦ëì§ ìì ìí¬ë¦¿ í¤ í¹ì í´ë¼ì´ì¸í¸ í¤ ìëë¤.",{code:"UNAUTHORIZED_KEY"})}return s(r)}(bL),pB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê³ ê°í¤ë ìë¬¸ ëìë¬¸ì, ì«ì, í¹ìë¬¸ì -, _, =, ., @ë¡ 2ì ì´ì 255ì ì´íì¬ì¼ í©ëë¤.",{code:"INVALID_CUSTOMER_KEY"})}return s(r)}(bL),yB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì¬ë°ë¥´ì§ ìì metadata íììëë¤.",{code:"INVALID_METADATA"})}return s(r)}(bL),vB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì´ë¯¸ ë¤ë¥¸ ìì²­ì ìííê³  ìì´ì.",{code:"INVALID_METHOD_TRANSACTION"})}return s(r)}(bL),gB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë ê²°ì ìë¨ íììëë¤.",{code:"INVALID_PAYMENT_METHOD_TYPE"})}return s(r)}(bL),wB=function(e){c(r,e);var t=v(r);function r(e,n){return i(this,r),t.call(this,e,{code:n})}return s(r)}(bL),SB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì í¨íì§ ìì ì½ê´ì´ ì¬ì©ëììµëë¤.",{code:"INVALID_TERM_SCOPE"})}return s(r)}(bL),RB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì´ì©ì½ê´ ëìê° íìí©ëë¤.",{code:"NEED_AGREEMENT_WITH_TERMS"})}return s(r)}(bL),bB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"íìì°½ì íì©í´ì£¼ì¸ì",{code:"NEED_ALLOW_POPUP"})}return s(r)}(bL),PB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìí°ì¹ê²°ì  ì¬ì©ì ìí´ìë ê°ë§¹ì  ì¤ì ì´ íìí©ëë¤.",{code:"NEED_MERCHANT_ONE_TOUCH_SETTING"})}return s(r)}(bL),EB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ìë¨ì´ ì¡´ì¬íì§ ììµëë¤. ê²°ì ìë¨ì ë¨¼ì  ë±ë¡í´ì£¼ì¸ì.",{code:"NOT_EXISTED_PAYMENT_METHOD"})}return s(r)}(bL),CB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê³ ê° ì¸ìì ì°¾ì ì ììµëë¤.",{code:"NOT_FOUND_CUSTOMER_SESSION"})}return s(r)}(bL),kB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ë¦¬ë¤ì´ë í¸ URLì´ ë±ë¡ëì§ ìììµëë¤. ê°ë°ì ë³´ íì´ì§ìì ë±ë¡í´ì£¼ì¸ì.",{code:"NOT_REGISTERED_REDIRECT_URL"})}return s(r)}(bL),AB=function(e){c(r,e);var t=v(r);function r(e){return i(this,r),t.call(this,null!=e?e:"ì´ì©í  ì ìë íê²½ìëë¤.",{code:"NOT_SUPPORTED_ENVIRONMENT"})}return s(r)}(bL),IB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ìë¨ì´ ì¡´ì¬íì§ ììµëë¤.",{code:"NOT_FOUND_METHOD"})}return s(r)}(bL),xB=function(e){c(r,e);var t=v(r);function r(e,n,o){var a;return i(this,r),(a=t.call(this,e)).code=n,a.orderId=o,a}return s(r)}(f(Error)),TB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì ì ìë ìë¬ê° ë°ìíìµëë¤.",{code:"UNKNOWN"})}return s(r)}(bL),NB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì·¨ìëììµëë¤",{code:"USER_CANCEL"})}return s(r)}(bL),MB={},OB={};wL(OB,{Errors:function(){return DB},Models:function(){return QB}});var DB={};wL(DB,{BelowZeroAmountError:function(){return KB},IncorrectFailUrlFormatError:function(){return LB},IncorrectSuccessUrlFormatError:function(){return BB},InvalidAmountCurrencyError:function(){return _B},InvalidAmountValueError:function(){return UB},InvalidClientKeyError:function(){return FB},InvalidCustomerKeyError:function(){return WB},InvalidMethodTransactionError:function(){return qB},InvalidParametersError:function(){return GB},InvalidPaymentMethodCodeError:function(){return VB},NetworkError:function(){return JB},NotSupportedMethodError:function(){return YB},PaymentRequestFailError:function(){return HB},UnknownError:function(){return jB},UserCancelError:function(){return zB}});var KB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê¸ì¡ì 0ë³´ë¤ ì»¤ì¼ í©ëë¤.",{code:"BELOW_ZERO_AMOUNT"})}return s(r)}(bL),LB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë failUrl ìëë¤.",{code:"INCORRECT_FAIL_URL_FORMAT"})}return s(r)}(bL),BB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë successUrl ìëë¤.",{code:"INCORRECT_SUCCESS_URL_FORMAT"})}return s(r)}(bL),_B=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë íµí ê°ìëë¤.",{code:"INVALID_AMOUNT_CURRENCY"})}return s(r)}(bL),UB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê²°ì ê¸ì¡ì´ ì¬ë°ë¥´ì§ ììµëë¤.",{code:"INVALID_AMOUNT_VALUE"})}return s(r)}(bL),FB=function(e){c(r,e);var t=v(r);function r(e){return i(this,r),t.call(this,"ë³ê²½ë í´ë¼ì´ì¸í¸í¤ ì ì±ì´ ë°ìëì§ ìììµëë¤. í ì¤íì´ë¨¼ì¸ ì ë¬¸ìí´ì£¼ì¸ì. clientKey: ".concat(e),{code:"INVALID_CLIENT_KEY"})}return s(r)}(bL),WB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ê³ ê°í¤ë ìë¬¸ ëìë¬¸ì, ì«ì, í¹ìë¬¸ì -, _, =, ., @ë¡ 2ì ì´ì 255ì ì´íì¬ì¼ í©ëë¤.",{code:"INVALID_CUSTOMER_KEY"})}return s(r)}(bL),qB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì´ë¯¸ ë¤ë¥¸ ìì²­ì ìííê³  ìì´ì.",{code:"INVALID_METHOD_TRANSACTION"})}return s(r)}(bL),GB=function(e){c(r,e);var t=v(r);function r(e){return i(this,r),t.call(this,e,{code:"INVALID_PARAMETER"})}return s(r)}(bL),VB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ìëª»ë ê²°ì ìë¨ ì½ëìëë¤.",{code:"INVALID_PAYMENT_METHOD_CODE"})}return s(r)}(bL),YB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì§ìëì§ ìë ê²°ì ìë¨ìëë¤.",{code:"NOT_SUPPORTED_METHOD"})}return s(r)}(bL),HB=function(e){c(r,e);var t=v(r);function r(e,n){var o,a=n.orderId,s=n.code;return i(this,r),(o=t.call(this,e,{code:s})).orderId=a,o}return s(r)}(bL),jB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì ì ìë ìë¬ê° ë°ìíìµëë¤.",{code:"UNKNOWN"})}return s(r)}(bL),zB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ì·¨ìëììµëë¤.",{code:"USER_CANCEL"})}return s(r)}(bL),JB=function(e){c(r,e);var t=v(r);function r(){return i(this,r),t.call(this,"ë¤í¸ìí¬ ì¤ë¥ê° ë°ìíìµëë¤.",{code:"NETWORK_ERROR"})}return s(r)}(bL),QB={},XB=Object.defineProperty,ZB=Object.defineProperties,$B=Object.getOwnPropertyDescriptors,e_=Object.getOwnPropertySymbols,t_=Object.prototype.hasOwnProperty,r_=Object.prototype.propertyIsEnumerable,n_=function(e,t,r){return t in e?XB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},o_=function(e,t){for(var r in t||(t={}))t_.call(t,r)&&n_(e,r,t[r]);if(e_){var n,o=b(e_(t));try{for(o.s();!(n=o.n()).done;){r=n.value;r_.call(t,r)&&n_(e,r,t[r])}}catch(e){o.e(e)}finally{o.f()}}return e},i_=function(e,t){return ZB(e,$B(t))},a_=function(e,t,r){return new Promise((function(n,o){var i=function(e){try{s(r.next(e))}catch(e){o(e)}},a=function(e){try{s(r.throw(e))}catch(e){o(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,a)};s((r=r.apply(e,t)).next())}))};function s_(e){return function(t){return(null==t?void 0:t.toLowerCase())===e}}var u_=s_("sandbox"),c_=s_("staging"),l_=s_("dev"),d_=s_("test"),h_=s_("local");function m_(e){return"string"==typeof e?e:"number"==typeof e?"".concat(e):JSON.stringify(e)}var f_=function(){function e(t,r){i(this,e),this.phase=t,this.internal=r}return s(e,[{key:"requestLog",value:function(e){return a_(this,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(this.internal?function(e){return l_(e)?"https://log.dev.rnd-tosspayments.bz":c_(e)?"https://log.staging.tosspayments.bz":u_(e)?"https://log.sandbox.tosspayments.bz":"https://log.live.tosspayments.bz"}(this.phase):function(e){return l_(e)?"https://log-dev.tosspayments.com":c_(e)?"https://log-staging.tosspayments.com":u_(e)?"https://log-sandbox.tosspayments.com":"https://log.tosspayments.com"}(this.phase),"/v1/log"),{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"log=".concat(p_(JSON.stringify((r=e,Object.keys(r).reduce((function(e,t){return i_(o_({},e),u({},t,m_(r[t])))}),{})))))});case 2:case"end":return t.stop()}}),t,this)})))}}]),e}();function p_(e){try{return encodeURIComponent(e)}catch(e){return"encode fail"}}var y_=function(){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.options={debug:null!=(t=r.debug)&&t}}return s(e,[{key:"init",value:function(e){}},{key:"updateContext",value:function(e){}},{key:"log",value:function(e){return this.options.debug&&console.log("[HappyLogger:DebugMode] ",e),Promise.resolve()}},{key:"info",value:function(e){return this.log(e)}},{key:"error",value:function(e){return this.log(e)}},{key:"warn",value:function(e){return this.log(e)}}]),e}(),v_=function(){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,e),this.logClient=t,this.deviceNameParser=r,this.context={},this.options={debug:null!=(n=o.debug)&&n}}return s(e,[{key:"init",value:function(e){this.context=e,null!=this.context&&null==this.context.deviceName&&(this.context.deviceName=this.deviceNameParser.parse())}},{key:"updateContext",value:function(e){this.context=o_(o_({},this.context),e)}},{key:"log",value:function(e){return a_(this,null,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=i_(o_(o_({},this.context),e),{eventTimestamp:g_(null!=(r=e.eventTimeStamp)?r:Date.now())}),this.options.debug&&console.log("[HappyLogger:DebugMode] ",n),t.next=5,this.logClient.requestLog(n);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.options.debug&&console.log("[HappyLogger:DebugMode] fail to send log",t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})))}},{key:"info",value:function(e){return a_(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.log(o_({level:"info"},e)));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"error",value:function(e){return a_(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.log(o_({level:"error"},e)));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"warn",value:function(e){return a_(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.log(o_({level:"warn"},e)));case 1:case"end":return t.stop()}}),t,this)})))}}]),e}();function g_(e){var t=6e4*(new Date).getTimezoneOffset(),r=e instanceof Date?e.getTime():e;return new Date(r-t).toISOString().slice(0,-1)}var w_=function(){function e(){i(this,e)}return s(e,[{key:"parse",value:function(){return"node"}}]),e}(),S_="PCChrome",R_="PCSafari",b_="MobileChrome",P_="MobileSafari",E_="AndroidWebView",C_="iOSWebView",k_="unknown";function A_(e,t){var r=e.match(t);return r?r[1]:k_}function I_(e){return A_(e,/chrome\/(\d+)/)}function x_(e){return A_(e,/version\/(\d+)/)}var T_=function(){function e(){i(this,e)}return s(e,[{key:"parse",value:function(){var e,t;try{var r=null==(e=null==window?void 0:window.navigator)?void 0:e.userAgent;if(null==r)return"".concat(k_," - emptyUserAgent");var n=function(e){var t=e.userAgentString.toLowerCase(),r=k_,n=k_;return/mobile/i.test(t)?/android/i.test(t)?t.includes(" wv")?(r=E_,n=I_(t)):t.includes("chrome")&&(r=b_,n=I_(t)):/iphone|ipad|ipod/i.test(t)&&(e.isSafariWebview?(r=C_,n=x_(t)):t.includes("crios")?(r=b_,n=function(e){return A_(e,/crios\/(\d+)/)}(t)):t.includes("safari")&&(r=P_,n=x_(t))):t.includes("chrome")?(r=S_,n=I_(t)):t.includes("safari")&&!t.includes("chrome")&&(r=R_,n=x_(t)),{type:r,version:n}}({userAgentString:r,isSafariWebview:null!=(null==(t=window.webkit)?void 0:t.messageHandlers)}),o=n.type,i=n.version;return"".concat(o," - ").concat(i)}catch(e){return"".concat(k_," - ").concat(null==e?void 0:e.message)}}}]),e}();var N_=function(){function e(t,r){var n=this;i(this,e),this.logger=t,this.flushInterval=r,this.infoLogQueue=[],this.performanceTracker=new O_,setInterval((function(){n.flush()}),this.flushInterval)}return s(e,[{key:"startTransaction",value:function(e,t,r,n){var o=null!=r?r:{},i=o.tag,a=tx(o,["tag"]);this.performanceTracker.start(e),this.logger.info({message:t,tag:i,context:null!=r?M_(a):void 0,transaction:e,eventTimeStamp:n}).catch(xx)}},{key:"successTransaction",value:function(e,t,r){var n=null!=r?r:{},o=n.tag,i=tx(n,["tag"]);this.logger.info({message:t,tag:o,context:null!=r?M_(i):void 0,transaction:e}).catch(xx)}},{key:"failureTransaction",value:function(e,t,r){var n=null!=r?r:{},o=n.tag,i=tx(n,["tag"]);this.logger.error({message:t,tag:o,context:null!=r?M_(i):void 0,transaction:e}).catch(xx)}},{key:"endTransaction",value:function(e,t,r,n){var o=null!=r?r:{},i=o.tag,a=tx(o,["tag"]),s=this.performanceTracker.end(e);this.logger.info({message:t,tag:i,context:null!=r?M_(a):void 0,transaction:e,processingTime:s,eventTimeStamp:n}).catch(xx),this.flush()}},{key:"error",value:function(e,t){var r=null!=t?t:{},n=r.tag,o=tx(r,["tag"]);this.logger.error({message:e,tag:n,context:null!=t?M_(o):void 0}).catch(xx),this.flush()}},{key:"info",value:function(e,t){this.infoLogQueue.push("".concat(function(){var e=function(e){return e.toString().padStart(2,"0")},t=new Date,r=t.getFullYear().toString().slice(-2),n=e(t.getMonth()+1),o=e(t.getDate()),i=e(t.getHours()),a=e(t.getMinutes()),s=e(t.getSeconds());return"".concat(r,"-").concat(n,"-").concat(o,"T").concat(i,":").concat(a,":").concat(s)}(),": ").concat(e,": ").concat(M_(t)))}},{key:"flush",value:function(){if(0!==this.infoLogQueue.length){var e=this.infoLogQueue.join("|||");this.infoLogQueue=[],this.logger.info({message:e}).catch(xx)}}}],[{key:"of",value:function(t){var r;return new e(t.logger,null!=(r=t.flushInterval)?r:5e3)}}]),e}();function M_(e){try{return JSON.stringify(e)}catch(e){return"Fail to serialize"}}var O_=function(){function e(){i(this,e),this.transactionStartRecord=new Map}return s(e,[{key:"start",value:function(e){this.transactionStartRecord.set(e,new Date)}},{key:"end",value:function(e){var t=this.transactionStartRecord.get(e);return null==t?0:Date.now()-t.getTime()}}]),e}(),D_=function(){function e(t,r,n,o,a){i(this,e),this.stage=t,this.version=r,this.uri=n,this.sdkName=o,this.gtid=a,this.happyLoggerInstance=function(e){var t=e.phase,r=e.debug,n=e.internal,o=void 0!==n&&n;if(d_(t)||h_(t))return new y_({debug:r});try{return new v_(new f_(t,o),null==window?new w_:new T_,{debug:r})}catch(t){return new y_({debug:r})}}({phase:this.stage}),this.happyLoggerInstance.init({service:"".concat(this.sdkName,"-js-sdk"),deployVersion:this.version,uri:this.uri,globalTraceId:this.gtid}),this.sendStrategy=N_.of({logger:this.happyLoggerInstance})}return s(e,[{key:"startTransaction",value:function(e,t,r,n){this.sendStrategy.startTransaction(e,t,r,n)}},{key:"successTransaction",value:function(e,t,r){this.sendStrategy.successTransaction(e,t,r)}},{key:"failureTransaction",value:function(e,t,r){this.sendStrategy.failureTransaction(e,t,r)}},{key:"endTransaction",value:function(e,t,r,n){this.sendStrategy.endTransaction(e,t,r,n)}},{key:"info",value:function(e,t){this.sendStrategy.info(e,t)}},{key:"error",value:function(e,t){this.sendStrategy.error(e,t)}},{key:"setClientKey",value:function(e){this.happyLoggerInstance.updateContext({clientKey:e})}},{key:"setTraceId",value:function(e){this.happyLoggerInstance.updateContext({traceId:e})}},{key:"setGlobalTraceId",value:function(e){this.happyLoggerInstance.updateContext({globalTraceId:e})}},{key:"setCustomerKey",value:function(e){this.happyLoggerInstance.updateContext({customerKey:e})}},{key:"setOrderId",value:function(e){this.happyLoggerInstance.updateContext({orderId:e})}}]),e}(),K_=function(){function e(){i(this,e)}return s(e,[{key:"startTransaction",value:function(e,t,r){}},{key:"successTransaction",value:function(e,t,r){}},{key:"failureTransaction",value:function(e,t,r){}},{key:"endTransaction",value:function(e,t,r){}},{key:"info",value:function(e,t){}},{key:"error",value:function(e,t){}},{key:"setClientKey",value:function(e){}},{key:"setTraceId",value:function(e){}},{key:"setGlobalTraceId",value:function(e){}},{key:"setCustomerKey",value:function(e){}},{key:"setOrderId",value:function(e){}}]),e}(),L_=function(){function e(t,r,n,o,a){i(this,e),this.stage=t,this.version=r,this.uri=n,this.sdkName=o,this.context={},this.setGlobalTraceId(a)}return s(e,[{key:"startTransaction",value:function(e,t,r){this.printLog("START TRANSACTION","".concat(e," - ").concat(t),r)}},{key:"successTransaction",value:function(e,t,r){this.printLog("SUCCESS TRANSACTION","".concat(e," - ").concat(t),r)}},{key:"failureTransaction",value:function(e,t,r){this.printLog("FAILURE TRANSACTION","".concat(e," - ").concat(t),r)}},{key:"endTransaction",value:function(e,t,r){this.printLog("END TRANSACTION","".concat(e," - ").concat(t),r)}},{key:"info",value:function(e,t){this.printLog("INFO LOG",e,t)}},{key:"error",value:function(e,t){this.printLog("ERROR LOG",e,t)}},{key:"setClientKey",value:function(e){this.context.clientKey=e}},{key:"setTraceId",value:function(e){this.context.traceId=e}},{key:"setGlobalTraceId",value:function(e){this.context.globalTraceId=e}},{key:"setCustomerKey",value:function(e){this.context.customerKey=e}},{key:"setOrderId",value:function(e){this.context.orderId=e}},{key:"printLog",value:function(e,t,r){var n=t.length>60?"".concat(t.substring(0,60),"..."):t;console.groupCollapsed("%c[LOG: ".concat(e,"]%c: ").concat(n),"color: white; font-weight: normal; background-color: #47556c; padding: 2px;","color: white; font-weight: normal; background-color: #64ad0d; padding: 2px;");try{var o=JSON.parse(t);console.log("%c".concat(JSON.stringify(o,null,2)),"color: #64ad0d; font-weight: normal;")}catch(e){console.table(t)}console.table(r),console.table({stage:this.stage,version:this.version,uri:this.uri,sdkName:this.sdkName}),console.table(this.context),console.groupEnd()}}]),e}();nx({},{AmountContract:function(){return B_}});var B_=s((function e(){i(this,e)})),__={};nx(__,{AccountAuthNumberExpiredError:function(){return Y_},BiometricAuthCanceledError:function(){return F_},BiometricAuthFailedError:function(){return W_},CameraPermissionRequiredError:function(){return q_},ExceedDepositAmountLimitError:function(){return PU},ExceedMaxDueDateError:function(){return bU},HyundaiDepartmentStoreAPIService:function(){return hU},InvalidAmountValueError:function(){return gU},InvalidClientKeyError:function(){return GU},InvalidTermScopeError:function(){return U_},InvalidVariantKeyError:function(){return vU},InvalidWidgetClientKeyError:function(){return yU},NeedCardPaymentDetailError:function(){return SU},NeedRefundAccountDetailError:function(){return RU},NetworkError:function(){return VU},NotRenderedPaymentMethodsUI:function(){return mU},NotSelectedPaymentMethod:function(){return fU},OCRFailedError:function(){return G_},PaymentMethodNotExistsError:function(){return V_},PaymentParameter:function(){return YU},ProviderStatusUnhealthyError:function(){return wU},TaskCanceledError:function(){return EU},V1AdapterBrandpayAddHyundaiDepartmentStoreCardService:function(){return cU},V1AdapterBrandpayAddPaymentMethodService:function(){return H_},V1AdapterBrandpayAuthenticateService:function(){return j_},V1AdapterBrandpayChangeBiometricAuthSettingsService:function(){return z_},V1AdapterBrandpayChangeCashReceiptService:function(){return sU},V1AdapterBrandpayChangeOneTouchPayService:function(){return J_},V1AdapterBrandpayChangeSettingsService:function(){return Q_},V1AdapterBrandpayCustomerAuthService:function(){return dU},V1AdapterBrandpayGetIsBiometricAuthEnabledService:function(){return oU},V1AdapterBrandpayGetIsOneTouchPayEnabledService:function(){return X_},V1AdapterBrandpayGetPaymentMethodsService:function(){return Z_},V1AdapterBrandpayRemoveHyundaiDepartmentStoreCardService:function(){return lU},V1AdapterBrandpayRequestManualAgreementService:function(){return $_},V1AdapterBrandpayRequestPasswordAuthService:function(){return uU},V1AdapterBrandpayRequestPaymentAuthService:function(){return nU},V1AdapterBrandpayRequestPaymentService:function(){return rU},V1AdapterBrandpaySetupPasswordService:function(){return eU},V1AdapterBrandpayStartCustomerSessionService:function(){return aU},V1AdapterBrandpayToggleBiometricAuthService:function(){return iU},V1AdapterBrandpayToggleOneTouchPayService:function(){return tU},V1AdapterClientKey:function(){return UU},V1AdapterCustomerKey:function(){return WU},V1AdapterDomesticAmount:function(){return xU},V1AdapterOverseasAmount:function(){return TU},V1AdapterPaymentGatewayCancelPaymentService:function(){return iF},V1AdapterPaymentGatewayRequestBillingAuthenticationService:function(){return aF},V1AdapterPaymentGatewayRequestPaymentService:function(){return oF},V1AdapterPaymentGatewayStartCustomerSessionService:function(){return nF},V1AdapterPaymentWidgetRenderAgreementService:function(){return CU},V1AdapterPaymentWidgetRenderPaymentMethodsService:function(){return AU},V1AdapterPaymentWidgetRequestPaymentService:function(){return NU},V1AdapterPaymentWidgetStartCustomerSessionService:function(){return DU},V1AdapterPaymentWidgetUpdateAmountService:function(){return OU},V1AdapterWidgetBrandpayConfigResolver:function(){return _U},V1AdapterWidgetCustomerKey:function(){return qU},V1AdapterWidgetMidResolver:function(){return LU},V1AdapterWidgetRequestPaymentForNativeSDKService:function(){return KU},WidgetCheckout:function(){return sF},WidgetProductRenderFailError:function(){return pU},WidgetRequestPaymentUseCaseBuilder:function(){return MU}});var U_=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"term scopeê° ì í¨íì§ ììµëë¤.")).name="InvalidTermScopeError",e}return s(r)}(f(Error)),F_=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"NativeBridgeì íµì  ì¤ ìë¬ê° ë°ìíìµëë¤.")).name="BiometricAuthCanceledError",n}return s(r)}(f(Error)),W_=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"NativeBridgeì íµì  ì¤ ìë¬ê° ë°ìíìµëë¤.")).name="BiometricAuthFailedError",n}return s(r)}(f(Error)),q_=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"ì¹´ë ì¤ìº ì¤íì ìí´ì ì¹´ë©ë¼ ê¶íì´ íìí©ëë¤.")).name="CameraPermissionRequiredError",n}return s(r)}(f(Error)),G_=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"NativeBridgeì íµì  ì¤ ìë¬ê° ë°ìíìµëë¤.")).name="OCRFailedError",n}return s(r)}(f(Error)),V_=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"ê²°ì ìë¨ì´ ì¡´ì¬íì§ ììµëë¤.")).name="PaymentMethodNotExists",n}return s(r)}(f(Error)),Y_=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this,null!=e?e:"ì¸ì¦ë²í¸ì ì í¨ìê°ì´ ì§ë¬ìµëë¤. ë¤ì ìëí´ì£¼ì¸ì.")).name="AccountAuthNumberExpired",n}return s(r)}(f(Error)),H_=function(){function e(t,r,n,o,a,s,u,c,l,d,h,m){i(this,e),this.customerAuthService=t,this.brandpayAuthenticatedAPIService=r,this.checkoutProductLauncherFactory=n,this.customerSessionRepository=o,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.domainLogService=u,this.externalBrandpayNativeSDKFacade=c,this.ocrLicenseRepository=l,this.customContextRepository=d,this.brandpayMidRepository=h,this.eventPublisher=m}return s(e,[{key:"execute",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u,c,l,d,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Gx.Task(null),t.prev=1,t.prev=2,t.next=5,this.customerAuthService.authenticateCustomer();case 5:t.next=25;break;case 7:if(t.prev=7,t.t0=t.catch(2),o=!1,!(t.t0 instanceof Gx.LockedUserError)){t.next=15;break}return t.next=13,this.customerAuthService.registerCustomer({methodType:e.methodType,resume:e.resume,keepProductAfterRegister:!0,withBillingTerms:e.withBillingTerms,onPaymentMethodRegister:function(){o=!0}});case 13:t.next=19;break;case 15:if(t.t0 instanceof Gx.NonRegisteredUserError){t.next=17;break}throw t.t0;case 17:return t.next=19,this.customerAuthService.registerCustomer({methodType:e.methodType,resume:e.resume,keepProductAfterRegister:!1,onPaymentMethodRegister:function(){o=!0},withBillingTerms:e.withBillingTerms});case 19:if(null==(r=e.onRegister)||r.call(e),!o){t.next=25;break}return this.domainLogService.logBrandpayAddPaymentMethodUsecaseSuccess(),t.next=23,this.brandpayAuthenticatedAPIService.getRegisteredPaymentMethods();case 23:return i=t.sent,t.abrupt("return",(this.eventPublisher.publishBrandpayPaymentMethodUpdated(i),n.finish(i),n.wait()));case 25:return a=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),s=this.productStageRepository.getLiveProductStage(),u={process:"PENDING"},c={process:"PENDING"},l=!1,d=new Gx.ProductBuilder(s).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/add-payment-method",staging:"https://connect-staging.tosspayments.com/v2/m/entry/add-payment-method",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/add-payment-method"},parameter:{setClientKey:function(){return Promise.resolve(h.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var e,t,r=null!=(t=null==(e=h.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomerKey:function(){return Promise.resolve(h.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(h.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setSessionId:function(){return Promise.resolve(h.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(h.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(h.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(h.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(h.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(h.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(h.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setRegisterablePaymentMethodTarget:function(){return Promise.resolve(e.methodType)},setCustomStyle:function(){return Promise.resolve(h.customerSessionRepository.findCurrentSession().getCustomStyle())},setCustomContext:function(){var e=h.customContextRepository.findCustomContext();return Promise.resolve({plugin:"samsung_electronics"===e?e:null})},setAppInfo:function(){return h.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return h.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return h.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(u)},setHardwareFeatureSupport:function(){return Promise.all([h.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule(),h.externalBrandpayNativeSDKFacade.isUsableOCRModule()]).then((function(e){var t=g(e,2);return{biometricAuth:{available:t[0]},ocr:{available:t[1]}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsCreditCardScanAvailable:function(){return h.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))},setScanCreditCardEventProcess:function(){return Promise.resolve(c)},setWithBillingTerms:function(){return Promise.resolve(e.withBillingTerms)}},event:{onCloseRequest:function(){return ax(h,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.isProcessing()){e.next=13;break}return n.processing(),e.next=4,a.shutdown();case 4:if(!l){e.next=12;break}return this.domainLogService.logBrandpayAddPaymentMethodUsecaseSuccess(),e.next=8,this.brandpayAuthenticatedAPIService.getRegisteredPaymentMethods();case 8:t=e.sent,n.finish(t),e.next=13;break;case 12:n.cancel(new Gx.UserCancelError);case 13:case"end":return e.stop()}}),e,this)})))},onPaymentMethodRegister:function(){return h.brandpayAuthenticatedAPIService.getRegisteredPaymentMethods().then((function(e){h.eventPublisher.publishBrandpayPaymentMethodUpdated(e)})),l=!0,Promise.resolve()},onBiometricAuthTokenRegister:function(e){return ax(h,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:u={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),u=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return h.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()},onCreditCardScan:function(){return ax(h,null,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={process:"PENDING"},e.prev=1,e.next=4,this.externalBrandpayNativeSDKFacade.scanCreditCard({ocrLicense:this.ocrLicenseRepository.findCurrentOcrLicense()});case 4:r=e.sent,c={process:"SUCCESS",value:r},e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),!(e.t0 instanceof q_)){e.next=12;break}return e.abrupt("return",void(c={process:"FAIL",code:"CAMERA_PERMISSION_REQUIRED",message:e.t0.message}));case 12:c={process:"FAIL",code:"FAILED",message:null!=(t=null==e.t0?void 0:e.t0.message)?t:"ì ì ìë ìë¬"};case 13:case"end":return e.stop()}}),e,this,[[1,8]])})))}}}).build(),t.next=30,a.launch(d);case 30:return t.next=32,n.wait();case 32:return t.abrupt("return",t.sent);case 35:t.prev=35,t.t1=t.catch(1),n.cancel(t.t1);case 38:return t.abrupt("return",n.wait());case 39:case"end":return t.stop()}}),t,this,[[1,35],[2,7]])})))}}]),e}(),j_=function(){function e(t){i(this,e),this.customerAuthService=t}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.customerAuthService.authenticateCustomer();case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0 instanceof Gx.NonRegisteredUserError||e.t0 instanceof Gx.LockedUserError){e.next=9;break}throw e.t0;case 9:return e.next=11,this.customerAuthService.registerCustomer();case 11:case"end":return e.stop()}}),e,this,[[0,5]])})))}}]),e}(),z_=function(){function e(t,r,n,o,a,s,u){i(this,e),this.brandpayCustomerSessionRepository=t,this.customerAuthService=r,this.productStageRepository=n,this.checkoutProductLauncherFactory=o,this.externalBrandpayNativeSDKFacade=a,this.brandpayClientKeyRepository=s,this.brandpayMidRepository=u}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Gx.Task(null),e.prev=1,e.t0=Cx,e.next=5,this.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule();case 5:return e.t1=e.sent,e.t2=new Gx.NotSupportedEnvironment,(0,e.t0)(e.t1,e.t2),e.prev=8,e.next=11,this.customerAuthService.authenticateCustomer();case 11:e.next=19;break;case 13:if(e.prev=13,e.t3=e.catch(8),e.t3 instanceof Gx.NonRegisteredUserError||e.t3 instanceof Gx.LockedUserError){e.next=17;break}throw e.t3;case 17:return e.next=19,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 19:return r={process:"PENDING"},n={process:"PENDING"},o=this.checkoutProductLauncherFactory.getLauncher({target:this.brandpayCustomerSessionRepository.findCurrentSession().getWindowTarget()}),i=this.productStageRepository.getLiveProductStage(),a=new Gx.ProductBuilder(i).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-biometric-auth-settings",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-biometric-auth-settings",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/change-biometric-auth-settings"},parameter:{setClientKey:function(){return Promise.resolve(s.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var e,t,r=null!=(t=null==(e=s.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomerKey:function(){return Promise.resolve(s.brandpayCustomerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(s.brandpayCustomerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setGlobalTraceId:function(){return Promise.resolve(s.brandpayCustomerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(s.brandpayCustomerSessionRepository.findCurrentSession().getInitiator())},setMerchantBrowserId:function(){return Promise.resolve(s.brandpayCustomerSessionRepository.findCurrentSession().getMerchantBrowserId())},setSafeArea:function(){return Promise.resolve(s.brandpayCustomerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setSessionId:function(){return Promise.resolve(s.brandpayCustomerSessionRepository.findCurrentSession().getSessionId())},setViewPort:function(){return Promise.resolve(s.brandpayCustomerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(s.brandpayCustomerSessionRepository.findCurrentSession().getWindow().getOrigin())},setCustomStyle:function(){return Promise.resolve(s.brandpayCustomerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return s.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return s.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return s.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(r)},setHardwareFeatureSupport:function(){return Promise.all([s.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:g(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setUnregisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(n)}},event:{onCloseRequest:function(){return ax(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.shutdown();case 2:t.cancel(new Gx.UserCancelError);case 3:case"end":return e.stop()}}),e)})))},onBiometricAuthTokenRegister:function(e){return ax(s,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:r={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return ax(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={process:"PENDING"},e.prev=1,e.next=4,this.externalBrandpayNativeSDKFacade.removeBiometricAuthToken();case 4:n={process:"SUCCESS"},e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n={process:"FAIL",code:"FAILED",message:e.t0.message};case 10:case"end":return e.stop()}}),e,this,[[1,7]])})))}}}).build(),e.next=23,o.launch(a);case 23:return e.abrupt("return",t.wait());case 26:e.prev=26,e.t4=e.catch(1),t.cancel(e.t4);case 29:return e.abrupt("return",t.wait());case 30:case"end":return e.stop()}}),e,this,[[1,26],[8,13]])})))}}]),e}(),J_=function(){function e(t,r,n,o,a,s,u,c){i(this,e),this.customerAuthService=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.brandpayPublicServerAPI=o,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.externalBrandpayNativeSDKFacade=u,this.brandpayMidRepository=c}return s(e,[{key:"execute",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Gx.Task(null),t.prev=1,t.next=4,this.brandpayPublicServerAPI.getMerchantIntegration();case 4:return n=t.sent,Cx(!0===n.useMerchantOneTouch,new Gx.NeedMerchantOneTouchSettingError),t.prev=7,t.next=10,this.customerAuthService.authenticateCustomer();case 10:t.next=18;break;case 12:if(t.prev=12,t.t0=t.catch(7),t.t0 instanceof Gx.NonRegisteredUserError||t.t0 instanceof Gx.LockedUserError){t.next=16;break}throw t.t0;case 16:return t.next=18,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 18:return o=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),i=this.productStageRepository.getLiveProductStage(),a={process:"PENDING"},s=new Gx.ProductBuilder(i).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-one-touch-pay-settings",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-one-touch-pay-settings",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/change-one-touch-pay-settings"},parameter:{setClientKey:function(){return Promise.resolve(u.brandpayClientKeyRepository.findCurrentClientKey().value)},setCustomerKey:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(u.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setSessionId:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setMid:function(){var e,t,r=null!=(t=null==(e=u.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomStyle:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return u.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return u.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return u.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(a)},setHardwareFeatureSupport:function(){return Promise.all([u.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:g(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setOneTouchPayLabel:function(){var t;return Promise.resolve(null!=(t=null==e?void 0:e.oneTouchPayLabel)?t:"ìí°ì¹ê²°ì ")}},event:{onCloseRequest:function(){return ax(u,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.shutdown();case 2:r.cancel(new Gx.UserCancelError);case 3:case"end":return e.stop()}}),e)})))},onBiometricAuthTokenRegister:function(e){return ax(u,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:a={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return u.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()}}}).build(),t.next=23,o.launch(s);case 23:return t.next=25,r.wait();case 25:return t.abrupt("return",t.sent);case 28:t.prev=28,t.t1=t.catch(1),r.cancel(t.t1);case 31:return t.abrupt("return",r.wait());case 32:case"end":return t.stop()}}),t,this,[[1,28],[7,12]])})))}}]),e}(),Q_=function(){function e(t,r,n,o,a,s,u,c,l,d,h){i(this,e),this.customerAuthService=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.productStageRepository=o,this.brandpayClientKeyRepository=a,this.externalBrandpayNativeSDKFacade=s,this.ocrLicenseRepository=u,this.customContextRepository=c,this.brandpayMidRepository=l,this.brandpayAuthenticatedAPIService=d,this.eventPublisher=h}return s(e,[{key:"execute",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Gx.Task(null),t.prev=1,t.prev=2,t.next=5,this.customerAuthService.authenticateCustomer();case 5:t.next=13;break;case 7:if(t.prev=7,t.t0=t.catch(2),t.t0 instanceof Gx.NonRegisteredUserError||t.t0 instanceof Gx.LockedUserError){t.next=11;break}throw t.t0;case 11:return t.next=13,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0,onPaymentMethodRegister:function(){c.brandpayAuthenticatedAPIService.getRegisteredPaymentMethods().then((function(e){c.eventPublisher.publishBrandpayPaymentMethodUpdated(e)}))}});case 13:return n=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),o=this.productStageRepository.getLiveProductStage(),i={process:"PENDING"},a={process:"PENDING"},s={process:"PENDING"},u=new Gx.ProductBuilder(o).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-settings",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-settings",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/change-settings"},parameter:{setClientKey:function(){return Promise.resolve(c.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var e,t,r=null!=(t=null==(e=c.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomerKey:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(c.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setGlobalTraceId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getInitiator())},setMerchantBrowserId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setSafeArea:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setSessionId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getSessionId())},setViewPort:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setOneTouchPayLabel:function(){var t;return Promise.resolve(null!=(t=null==e?void 0:e.oneTouchPayLabel)?t:"ìí°ì¹ê²°ì ")},setCustomStyle:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomStyle())},setCustomContext:function(){var e=c.customContextRepository.findCustomContext();return Promise.resolve({plugin:"samsung_electronics"===e?e:null})},setAppInfo:function(){return c.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return c.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return c.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(i)},setHardwareFeatureSupport:function(){return Promise.all([c.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule(),c.externalBrandpayNativeSDKFacade.isUsableOCRModule()]).then((function(e){var t=g(e,2);return{biometricAuth:{available:t[0]},ocr:{available:t[1]}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsCreditCardScanAvailable:function(){return c.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))},setScanCreditCardEventProcess:function(){return Promise.resolve(a)},setUnregisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(s)}},event:{onCloseRequest:function(){return ax(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.shutdown();case 2:r.cancel(new Gx.UserCancelError);case 3:case"end":return e.stop()}}),e)})))},onCustomerUnregister:function(){var t;return c.eventPublisher.publishBrandpayCustomerUpdated(),null==(t=null==e?void 0:e.onCustomerUnregister)||t.call(e),Promise.resolve()},onPaymentMethodRegister:function(){var t;return c.brandpayAuthenticatedAPIService.getRegisteredPaymentMethods().then((function(e){c.eventPublisher.publishBrandpayPaymentMethodUpdated(e)})),null==(t=null==e?void 0:e.onPaymentMethodRegister)||t.call(e),Promise.resolve()},onPaymentMethodUnregister:function(){var t;return c.brandpayAuthenticatedAPIService.getRegisteredPaymentMethods().then((function(e){c.eventPublisher.publishBrandpayPaymentMethodUpdated(e)})),null==(t=null==e?void 0:e.onPaymentMethodUnregister)||t.call(e),Promise.resolve()},onBiometricAuthTokenRegister:function(e){return ax(c,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:i={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),i=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return ax(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={process:"PENDING"},e.prev=1,e.next=4,this.externalBrandpayNativeSDKFacade.removeBiometricAuthToken();case 4:s={process:"SUCCESS"},e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),s={process:"FAIL",code:"FAILED",message:e.t0.message};case 10:case"end":return e.stop()}}),e,this,[[1,7]])})))},onCreditCardScan:function(){return ax(c,null,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={process:"PENDING"},e.prev=1,e.next=4,this.externalBrandpayNativeSDKFacade.scanCreditCard({ocrLicense:this.ocrLicenseRepository.findCurrentOcrLicense()});case 4:r=e.sent,a={process:"SUCCESS",value:r},e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),!(e.t0 instanceof q_)){e.next=12;break}return e.abrupt("return",void(a={process:"FAIL",code:"CAMERA_PERMISSION_REQUIRED",message:e.t0.message}));case 12:a={process:"FAIL",code:"FAILED",message:null!=(t=null==e.t0?void 0:e.t0.message)?t:"ì ì ìë ìë¬"};case 13:case"end":return e.stop()}}),e,this,[[1,8]])})))}}}).build(),t.next=18,n.launch(u);case 18:return t.next=20,r.wait();case 20:return t.abrupt("return",t.sent);case 23:t.prev=23,t.t1=t.catch(1),r.cancel(t.t1);case 26:return t.abrupt("return",r.wait());case 27:case"end":return t.stop()}}),t,this,[[1,23],[2,7]])})))}}]),e}(),X_=function(){function e(t,r,n){i(this,e),this.brandpayCustomerSessionRepository=t,this.brandpayAuthenticatedAPIService=r,this.brandpayPublicServerAPI=n}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Gx.Task(null),e.prev=1,e.t0=Cx,e.t1=!0,e.next=6,this.brandpayPublicServerAPI.isTermsAgreed();case 6:return e.t2=e.sent,e.t3=e.t1===e.t2,e.t4=new Gx.NeedAgreementWithTermsError,(0,e.t0)(e.t3,e.t4),e.next=12,this.brandpayPublicServerAPI.authenticateCustomerToken();case 12:return r=e.sent,this.brandpayCustomerSessionRepository.saveCurrentToken(r),e.next=16,this.brandpayAuthenticatedAPIService.getProperties();case 16:return n=e.sent,o=n.useMerchantOneTouch,i=n.useCustomerOneTouch,Cx(!0===o,new Gx.NeedMerchantOneTouchSettingError),t.finish(i),e.next=23,t.wait();case 23:return e.abrupt("return",e.sent);case 26:e.prev=26,e.t5=e.catch(1),t.cancel(e.t5);case 29:return e.abrupt("return",t.wait());case 30:case"end":return e.stop()}}),e,this,[[1,26]])})))}}]),e}(),Z_=function(){function e(t,r,n){i(this,e),this.brandpayCustomerSessionRepository=t,this.brandpayAuthenticatedAPIService=r,this.brandpayPublicServerAPI=n}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Gx.Task(null),e.prev=1,e.t0=Cx,e.t1=!0,e.next=6,this.brandpayPublicServerAPI.isTermsAgreed();case 6:return e.t2=e.sent,e.t3=e.t1===e.t2,e.t4=new Gx.NeedAgreementWithTermsError,(0,e.t0)(e.t3,e.t4),e.next=12,this.brandpayPublicServerAPI.authenticateCustomerToken();case 12:return r=e.sent,this.brandpayCustomerSessionRepository.saveCurrentToken(r),e.next=16,this.brandpayAuthenticatedAPIService.getRegisteredPaymentMethods();case 16:return n=e.sent,t.finish(n),e.next=20,t.wait();case 20:return e.abrupt("return",e.sent);case 23:e.prev=23,e.t5=e.catch(1),t.cancel(e.t5);case 26:return e.abrupt("return",t.wait());case 27:case"end":return e.stop()}}),e,this,[[1,23]])})))}}]),e}(),$_=function(){function e(t,r,n,o,a){i(this,e),this.checkoutProductLauncherFactory=t,this.customerSessionRepository=r,this.productStateRepository=n,this.brandpayClientKeyRepository=o,this.brandpayMidRepository=a}return s(e,[{key:"isValidAgreementTypes",value:function(e){var t=["íìê°ì","ì¹´ë","ê³ì¢","ë¹ë§"];return!!e.every((function(e){return t.some((function(t){return t===e}))}))&&!(e.filter((function(e){return"íìê°ì"!==e})).length>1)}},{key:"execute",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Gx.Task(null),t.prev=1,n=Array.isArray(e)?e:[e],Cx(this.isValidAgreementTypes(n),new U_),o=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),i=this.productStateRepository.getLiveProductStage(),a=new Gx.ProductBuilder(i).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/manual-agreement",staging:"https://connect-staging.tosspayments.com/v2/m/entry/manual-agreement",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/manual-agreement"},parameter:{setClientKey:function(){return Promise.resolve(s.brandpayClientKeyRepository.findCurrentClientKey().value)},setCustomerKey:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(s.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setSessionId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setMid:function(){var e,t,r=null!=(t=null==(e=s.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomStyle:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomStyle())},setAgreementTypes:function(){return Promise.resolve(n)}},event:{onCloseRequest:function(){return ax(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.isProcessing(),e.t0){e.next=6;break}return r.processing(),e.next=5,o.shutdown();case 5:r.cancel(new Gx.UserCancelError);case 6:case"end":return e.stop()}}),e)})))},onAgreementAgree:function(){return ax(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.isProcessing(),e.t0){e.next=6;break}return r.processing(),e.next=5,o.shutdown();case 5:r.finish(void 0);case 6:case"end":return e.stop()}}),e)})))}}}).build(),t.next=7,o.launch(a);case 7:return t.next=9,r.wait();case 9:return t.abrupt("return",t.sent);case 12:t.prev=12,t.t0=t.catch(1),r.cancel(t.t0);case 15:return t.abrupt("return",r.wait());case 16:case"end":return t.stop()}}),t,this,[[1,12]])})))}}]),e}(),eU=function(){function e(t,r,n,o,a,s,u){i(this,e),this.customerAuthService=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.productStageRepository=o,this.brandpayClientKeyRepository=a,this.externalBrandpayNativeSDKFacade=s,this.brandpayMidRepository=u}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Gx.Task(null),e.prev=1,e.prev=2,e.next=5,this.customerAuthService.authenticateCustomer();case 5:e.next=13;break;case 7:if(e.prev=7,e.t0=e.catch(2),e.t0 instanceof Gx.NonRegisteredUserError||e.t0 instanceof Gx.LockedUserError){e.next=11;break}throw e.t0;case 11:return e.next=13,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 13:return r=this.customerSessionRepository.findCurrentSession(),n=this.checkoutProductLauncherFactory.getLauncher({target:r.getWindowTarget()}),o=this.productStageRepository.getLiveProductStage(),i={process:"PENDING"},a=new Gx.ProductBuilder(o).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-password",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-password",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/change-password"},parameter:{setClientKey:function(){return Promise.resolve(s.brandpayClientKeyRepository.findCurrentClientKey().value)},setCustomerKey:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(s.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setOrigin:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setSessionId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setMid:function(){var e,t,r=null!=(t=null==(e=s.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomStyle:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return s.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return s.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return s.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(i)},setHardwareFeatureSupport:function(){return Promise.all([s.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:g(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))}},event:{onCloseRequest:function(){return ax(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.shutdown();case 2:t.cancel(new Gx.UserCancelError);case 3:case"end":return e.stop()}}),e)})))},onPasswordChange:function(){return ax(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.shutdown();case 2:t.finish(void 0);case 3:case"end":return e.stop()}}),e)})))},onBiometricAuthTokenRegister:function(e){return ax(s,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:i={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),i=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return s.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()}}}).build(),e.next=18,n.launch(a);case 18:return e.next=20,t.wait();case 20:return e.abrupt("return",e.sent);case 23:e.prev=23,e.t1=e.catch(1),t.cancel(e.t1);case 26:return e.abrupt("return",t.wait());case 27:case"end":return e.stop()}}),e,this,[[1,23],[2,7]])})))}}]),e}(),tU=function(){function e(t,r,n,o,a,s,u,c,l){i(this,e),this.customerAuthService=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.brandpayPublicServerAPI=o,this.brandpayAuthenticatedAPIService=a,this.productStageRepository=s,this.brandpayClientKeyRepository=u,this.externalBrandpayNativeSDKFacade=c,this.brandpayMidRepository=l}return s(e,[{key:"execute",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Gx.Task(null),t.prev=1,t.next=4,this.brandpayPublicServerAPI.getMerchantIntegration();case 4:return n=t.sent,Cx(!0===n.useMerchantOneTouch,new Gx.NeedMerchantOneTouchSettingError),t.prev=7,t.next=10,this.customerAuthService.authenticateCustomer();case 10:t.next=18;break;case 12:if(t.prev=12,t.t0=t.catch(7),t.t0 instanceof Gx.NonRegisteredUserError||t.t0 instanceof Gx.LockedUserError){t.next=16;break}throw t.t0;case 16:return t.next=18,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 18:return t.next=20,this.brandpayAuthenticatedAPIService.getProperties();case 20:if(o=t.sent,!o.useCustomerOneTouch){t.next=27;break}return t.next=25,this.brandpayAuthenticatedAPIService.updateProperties({useCustomerOneTouch:!1});case 25:return r.finish({isEnabled:!1}),t.abrupt("return",r.wait());case 27:return i=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),a=this.productStageRepository.getLiveProductStage(),s={process:"PENDING"},u=new Gx.ProductBuilder(a).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/toggle-one-touch-pay-settings",staging:"https://connect-staging.tosspayments.com/v2/m/entry/toggle-one-touch-pay-settings",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/toggle-one-touch-pay-settings"},parameter:{setClientKey:function(){return Promise.resolve(c.brandpayClientKeyRepository.findCurrentClientKey().value)},setCustomerKey:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(c.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setGlobalTraceId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getInitiator())},setMerchantBrowserId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setSafeArea:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setSessionId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getSessionId())},setViewPort:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setMid:function(){var e,t,r=null!=(t=null==(e=c.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setOneTouchPayLabel:function(){var t;return Promise.resolve(null!=(t=null==e?void 0:e.oneTouchPayLabel)?t:"ìí°ì¹ê²°ì ")},setCustomStyle:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return c.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return c.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return c.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(s)},setHardwareFeatureSupport:function(){return Promise.all([c.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:g(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))}},event:{onOneTouchPayChange:function(e){return ax(c,[e],regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.isEnabled,e.t0=r.isProcessing(),e.t0){e.next=7;break}return r.processing(),e.next=6,i.shutdown();case 6:r.finish({isEnabled:n});case 7:case"end":return e.stop()}}),e)})))},onCloseRequest:function(){return ax(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.isProcessing(),e.t0){e.next=6;break}return r.processing(),e.next=5,i.shutdown();case 5:r.cancel(new Gx.UserCancelError);case 6:case"end":return e.stop()}}),e)})))},onBiometricAuthTokenRegister:function(e){return ax(c,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:s={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),s=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return c.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()}}}).build(),t.next=32,i.launch(u);case 32:return t.next=34,r.wait();case 34:return t.abrupt("return",t.sent);case 37:t.prev=37,t.t1=t.catch(1),r.cancel(t.t1);case 40:return t.abrupt("return",r.wait());case 41:case"end":return t.stop()}}),t,this,[[1,37],[7,12]])})))}}]),e}(),rU=function(){function e(t,r,n,o,a,s,u,c,l,d,h){i(this,e),this.customerAuthService=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.productStageRepository=o,this.brandpayClientKeyRepository=a,this.domainLogService=s,this.externalBrandpayNativeSDKFacade=u,this.brandpayPublicServerAPI=c,this.ocrLicenseRepository=l,this.customContextRepository=d,this.brandpayMidRepository=h}return s(e,[{key:"execute",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=new Gx.Task(null),t.prev=1,Cx(!Number.isNaN(e.amount.value),new Gx.InvalidAmountValueError),!(e.amount.value<=0)){t.next=4;break}throw new Gx.BelowZeroAmountError;case 4:return t.next=6,this.brandpayPublicServerAPI.validatePaymentRequest(e);case 6:return t.prev=6,t.next=9,this.customerAuthService.authenticateCustomer();case 9:this.domainLogService.logBrandpayAuthenticate({methodId:e.methodId}),t.next=18;break;case 12:if(t.prev=12,t.t0=t.catch(6),t.t0 instanceof Gx.NonRegisteredUserError||t.t0 instanceof Gx.LockedUserError){t.next=16;break}throw t.t0;case 16:return t.next=18,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 18:return n=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),o=this.productStageRepository.getLiveProductStage(),i={process:"PENDING"},a={process:"PENDING"},s={process:"PENDING"},u=new Gx.ProductBuilder(o).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/request-payment",staging:"https://connect-staging.tosspayments.com/v2/m/entry/request-payment",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/request-payment"},parameter:{setClientKey:function(){return Promise.resolve(c.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var t,r,n,o=null!=(n=null!=(r=e.mid)?r:null==(t=c.brandpayMidRepository.findCurrentMid())?void 0:t.value)?n:null;return Promise.resolve(o)},setCustomerKey:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(c.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setSessionId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setPaymentInfo:function(){return Promise.resolve(ex($I({},e),{amount:e.amount.value}))},setCustomContext:function(){var e=c.customContextRepository.findCustomContext();return Promise.resolve({plugin:"oliveyoung"===e||"cafe24"===e?e:null})},setCustomStyle:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return c.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return c.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return c.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(i)},setEncryptBiometricAuthTokenEventProcess:function(){return Promise.resolve(a)},setHardwareFeatureSupport:function(){return Promise.all([c.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:g(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsCreditCardScanAvailable:function(){return c.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))},setScanCreditCardEventProcess:function(){return Promise.resolve(s)}},event:{onCloseRequest:function(){return ax(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.isProcessing(),e.t0){e.next=6;break}return r.processing(),e.next=5,n.shutdown();case 5:r.cancel(new Gx.UserCancelError);case 6:case"end":return e.stop()}}),e)})))},onPaymentSuccess:function(t){return ax(c,null,regeneratorRuntime.mark((function o(){var i,a,s,u;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=(i=t).amount,s=tx(i,["amount"]),r.isProcessing()){o.next=10;break}return r.processing(),this.domainLogService.logBrandpayRequestPaymentUsecasseSuccess({orderId:s.orderId}),o.next=6,n.shutdown();case 6:if(u=Gx.DomesticAmount.of({value:a}),!("successUrl"in e)||null==e.successUrl){o.next=9;break}return o.abrupt("return",void this.customerSessionRepository.findCurrentSession().getWindow().moveTo(e.successUrl,{query:ex($I({},s),{amount:u.value})}));case 9:r.finish(ex($I({},s),{amount:u}));case 10:case"end":return o.stop()}}),o,this)})))},onPaymentFail:function(t){return ax(c,null,regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(r.isProcessing()){o.next=8;break}return r.processing(),this.domainLogService.logBrandpayRequestPaymentUsecasseFail({orderId:t.orderId,code:t.code}),o.next=5,n.shutdown();case 5:if(!("failUrl"in e)||null==e.failUrl){o.next=7;break}return o.abrupt("return",void this.customerSessionRepository.findCurrentSession().getWindow().moveTo(e.failUrl,{query:t}));case 7:r.cancel(new Gx.PaymentRequestFailError(t));case 8:case"end":return o.stop()}}),o,this)})))},onBiometricAuthTokenRegister:function(e){return ax(c,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:i={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),i=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return c.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()},onBiometricAuthTokenEncrypt:function(e){return ax(c,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.getEncryptedBiometricAuthToken(e);case 4:r=t.sent,a={process:"SUCCESS",value:r},t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 11:case"end":return t.stop()}}),t,this,[[1,8]])})))},onCreditCardScan:function(){return ax(c,null,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={process:"PENDING"},e.prev=1,e.next=4,this.externalBrandpayNativeSDKFacade.scanCreditCard({ocrLicense:this.ocrLicenseRepository.findCurrentOcrLicense()});case 4:r=e.sent,s={process:"SUCCESS",value:r},e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),!(e.t0 instanceof q_)){e.next=12;break}return e.abrupt("return",void(s={process:"FAIL",code:"CAMERA_PERMISSION_REQUIRED",message:e.t0.message}));case 12:s={process:"FAIL",code:"FAILED",message:null!=(t=null==e.t0?void 0:e.t0.message)?t:"ì ì ìë ìë¬"};case 13:case"end":return e.stop()}}),e,this,[[1,8]])})))},onPaymentMethodNotExists:function(){return r.cancel(new V_),Promise.resolve()},onAccountAuthNumberExpired:function(){return r.cancel(new Y_),Promise.resolve()}}}).build(),t.next=23,n.launch(u);case 23:return t.abrupt("return",r.wait());case 26:t.prev=26,t.t1=t.catch(1),r.cancel(t.t1);case 29:return t.abrupt("return",r.wait());case 30:case"end":return t.stop()}}),t,this,[[1,26],[6,12]])})))}}]),e}(),nU=function(){function e(t,r,n,o,a,s,u,c,l){i(this,e),this.customerAuthService=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.productStageRepository=o,this.brandpayClientKeyRepository=a,this.domainLogService=s,this.externalBrandpayNativeSDKFacade=u,this.ocrLicenseRepository=c,this.customContextRepository=l}return s(e,[{key:"execute",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Gx.Task(null),t.prev=1,t.prev=2,t.next=5,this.customerAuthService.authenticateCustomer();case 5:this.domainLogService.logBrandpayAuthenticate({methodId:e.methodId}),t.next=14;break;case 8:if(t.prev=8,t.t0=t.catch(2),t.t0 instanceof Gx.NonRegisteredUserError||t.t0 instanceof Gx.LockedUserError){t.next=12;break}throw t.t0;case 12:return t.next=14,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 14:return n=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),o=this.productStageRepository.getLiveProductStage(),i={process:"PENDING"},a={process:"PENDING"},s={process:"PENDING"},u=new Gx.ProductBuilder(o).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/request-payment-auth",staging:"https://connect-staging.tosspayments.com/v2/m/entry/request-payment-auth",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/request-payment-auth"},parameter:{setClientKey:function(){return Promise.resolve(c.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var t;return Promise.resolve(null!=(t=e.mid)?t:null)},setCustomerKey:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(c.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setSessionId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setPaymentInfo:function(){return Promise.resolve(ex($I({},e),{amount:e.amount.value}))},setCustomStyle:function(){return Promise.resolve(c.customerSessionRepository.findCurrentSession().getCustomStyle())},setCustomContext:function(){var e=c.customContextRepository.findCustomContext();return Promise.resolve({plugin:"oliveyoung"===e||"cafe24"===e?e:null})},setAppInfo:function(){return c.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return c.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return c.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(i)},setEncryptBiometricAuthTokenEventProcess:function(){return Promise.resolve(a)},setHardwareFeatureSupport:function(){return Promise.all([c.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:g(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsCreditCardScanAvailable:function(){return c.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))},setScanCreditCardEventProcess:function(){return Promise.resolve(s)}},event:{onCloseRequest:function(){return ax(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.isProcessing(),e.t0){e.next=6;break}return r.processing(),e.next=5,n.shutdown();case 5:r.cancel(new Gx.UserCancelError);case 6:case"end":return e.stop()}}),e)})))},onPaymentAuthSuccess:function(){return ax(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.isProcessing(),e.t0){e.next=6;break}return r.processing(),e.next=5,n.shutdown();case 5:r.finish();case 6:case"end":return e.stop()}}),e)})))},onBiometricAuthTokenRegister:function(e){return ax(c,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:i={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),i=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return c.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()},onBiometricAuthTokenEncrypt:function(e){return ax(c,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.getEncryptedBiometricAuthToken(e);case 4:r=t.sent,a={process:"SUCCESS",value:r},t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 11:case"end":return t.stop()}}),t,this,[[1,8]])})))},onCreditCardScan:function(){return ax(c,null,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={process:"PENDING"},e.prev=1,e.next=4,this.externalBrandpayNativeSDKFacade.scanCreditCard({ocrLicense:this.ocrLicenseRepository.findCurrentOcrLicense()});case 4:r=e.sent,s={process:"SUCCESS",value:r},e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),!(e.t0 instanceof q_)){e.next=12;break}return e.abrupt("return",void(s={process:"FAIL",code:"CAMERA_PERMISSION_REQUIRED",message:e.t0.message}));case 12:s={process:"FAIL",code:"FAILED",message:null!=(t=null==e.t0?void 0:e.t0.message)?t:"ì ì ìë ìë¬"};case 13:case"end":return e.stop()}}),e,this,[[1,8]])})))},onPaymentMethodNotExists:function(){return ax(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.cancel(new V_);case 1:case"end":return e.stop()}}),e)})))},onAccountAuthNumberExpired:function(){return ax(c,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.cancel(new Y_);case 1:case"end":return e.stop()}}),e)})))}}}).build(),t.next=19,n.launch(u);case 19:return t.abrupt("return",r.wait());case 22:t.prev=22,t.t1=t.catch(1),r.cancel(t.t1);case 25:return t.abrupt("return",r.wait());case 26:case"end":return t.stop()}}),t,this,[[1,22],[2,8]])})))}}]),e}(),oU=function(){function e(t,r,n){i(this,e),this.brandpayCustomerSessionRepository=t,this.brandpayPublicServerAPI=r,this.externalBrandpayNativeSDKFacade=n}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Gx.Task(null),e.prev=1,e.t0=Cx,e.next=5,this.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule();case 5:return e.t1=e.sent,e.t2=new Gx.NotSupportedEnvironment,(0,e.t0)(e.t1,e.t2),e.t3=Cx,e.next=11,this.brandpayPublicServerAPI.isTermsAgreed();case 11:return e.t4=e.sent,e.t5=new Gx.NeedAgreementWithTermsError,(0,e.t3)(e.t4,e.t5),e.next=16,this.brandpayPublicServerAPI.authenticateCustomerToken();case 16:return r=e.sent,this.brandpayCustomerSessionRepository.saveCurrentToken(r),e.next=20,this.externalBrandpayNativeSDKFacade.hasBiometricAuthToken();case 20:n=e.sent,t.finish({isEnabled:n}),e.next=27;break;case 24:e.prev=24,e.t6=e.catch(1),t.cancel(e.t6);case 27:return e.abrupt("return",t.wait());case 28:case"end":return e.stop()}}),e,this,[[1,24]])})))}}]),e}(),iU=function(){function e(t,r,n,o,a,s,u){i(this,e),this.brandpayCustomerSessionRepository=t,this.customerAuthService=r,this.productStageRepository=n,this.checkoutProductLauncherFactory=o,this.externalBrandpayNativeSDKFacade=a,this.brandpayClientKeyRepository=s,this.brandpayMidRepository=u}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Gx.Task(null),e.prev=1,e.t0=Cx,e.next=5,this.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule();case 5:return e.t1=e.sent,e.t2=new Gx.NotSupportedEnvironment,(0,e.t0)(e.t1,e.t2),e.prev=8,e.next=11,this.customerAuthService.authenticateCustomer();case 11:e.next=19;break;case 13:if(e.prev=13,e.t3=e.catch(8),e.t3 instanceof Gx.NonRegisteredUserError||e.t3 instanceof Gx.LockedUserError){e.next=17;break}throw e.t3;case 17:return e.next=19,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 19:return e.next=21,this.externalBrandpayNativeSDKFacade.hasBiometricAuthToken();case 21:if(!e.sent){e.next=27;break}return e.next=24,this.externalBrandpayNativeSDKFacade.removeBiometricAuthToken();case 24:t.finish({isEnabled:!1}),e.next=31;break;case 27:return r={process:"PENDING"},n=this.checkoutProductLauncherFactory.getLauncher({target:this.brandpayCustomerSessionRepository.findCurrentSession().getWindowTarget()}),o=this.productStageRepository.getLiveProductStage(),i=new Gx.ProductBuilder(o).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/toggle-biometric-auth",staging:"https://connect-staging.tosspayments.com/v2/m/entry/toggle-biometric-auth",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/toggle-biometric-auth"},parameter:{setClientKey:function(){return Promise.resolve(a.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var e,t,r=null!=(t=null==(e=a.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomerKey:function(){return Promise.resolve(a.brandpayCustomerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(a.brandpayCustomerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setGlobalTraceId:function(){return Promise.resolve(a.brandpayCustomerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(a.brandpayCustomerSessionRepository.findCurrentSession().getInitiator())},setMerchantBrowserId:function(){return Promise.resolve(a.brandpayCustomerSessionRepository.findCurrentSession().getMerchantBrowserId())},setSafeArea:function(){return Promise.resolve(a.brandpayCustomerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setSessionId:function(){return Promise.resolve(a.brandpayCustomerSessionRepository.findCurrentSession().getSessionId())},setViewPort:function(){return Promise.resolve(a.brandpayCustomerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(a.brandpayCustomerSessionRepository.findCurrentSession().getWindow().getOrigin())},setCustomStyle:function(){return Promise.resolve(a.brandpayCustomerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return a.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return a.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return a.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(r)},setHardwareFeatureSupport:function(){return Promise.all([a.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:g(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))}},event:{onCloseRequest:function(){return ax(a,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.isProcessing(),e.t0){e.next=6;break}return t.processing(),e.next=5,n.shutdown();case 5:t.cancel(new Gx.UserCancelError);case 6:case"end":return e.stop()}}),e)})))},onBiometricAuthTokenRegister:function(e){return ax(a,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:r={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return a.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()},onBiometricAuthChange:function(e){return ax(a,null,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=!t.isProcessing()&&e,!r.t0){r.next=6;break}return t.processing(),r.next=5,n.shutdown();case 5:t.finish({isEnabled:!0});case 6:case"end":return r.stop()}}),r)})))}}}).build(),e.next=31,n.launch(i);case 31:return e.abrupt("return",t.wait());case 34:e.prev=34,e.t4=e.catch(1),t.cancel(e.t4);case 37:return e.abrupt("return",t.wait());case 38:case"end":return e.stop()}}),e,this,[[1,34],[8,13]])})))}}]),e}(),aU=function(){function e(t,r,n,o,a,s,u){i(this,e),this.brandpayCustomerSessionRepository=t,this.brandpayClientKeyRepository=r,this.customerSessionFactory=n,this.ocrLicenseRepository=o,this.customContextRepository=a,this.brandpayMidRepository=s,this.tracingIdRepository=u}return s(e,[{key:"execute",value:function(e){var t,r;this.brandpayClientKeyRepository.saveCurrentClientKey(e.clientKey),this.ocrLicenseRepository.saveOcrLicense(null!=(t=e.ocrLicense)?t:null),this.customContextRepository.saveCustomContext(null!=(r=e.customContext)?r:"brandpay"),null!=e.mid&&this.brandpayMidRepository.saveCurrentMid(new Gx.Mid(e.mid)),null!=e.gtid&&this.tracingIdRepository.saveGlobalTraceId(e.gtid);var n=this.customerSessionFactory.createBrandpayCustomerSession({customerKey:e.customerKey,initiator:null!=e.mid?"payment-widget":"brandpay-only",windowTarget:e.windowTarget,redirectURL:e.redirectURL,customStyle:e.customStyle});return this.brandpayCustomerSessionRepository.saveCurrentSession(n),this.brandpayCustomerSessionRepository.findCurrentSession()}}]),e}(),sU=function(){function e(t,r,n,o,a,s,u){i(this,e),this.customerAuthService=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.productStageRepository=o,this.brandpayClientKeyRepository=a,this.externalBrandpayNativeSDKFacade=s,this.brandpayMidRepository=u}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Gx.Task(null),e.prev=1,e.prev=2,e.next=5,this.customerAuthService.authenticateCustomer();case 5:e.next=13;break;case 7:if(e.prev=7,e.t0=e.catch(2),e.t0 instanceof Gx.NonRegisteredUserError||e.t0 instanceof Gx.LockedUserError){e.next=11;break}throw e.t0;case 11:return e.next=13,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 13:return r=this.customerSessionRepository.findCurrentSession(),n=this.checkoutProductLauncherFactory.getLauncher({target:r.getWindowTarget()}),o=this.productStageRepository.getLiveProductStage(),i={process:"PENDING"},a=new Gx.ProductBuilder(o).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/change-cash-receipt-settings",staging:"https://connect-staging.tosspayments.com/v2/m/entry/change-cash-receipt-settings",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/change-cash-receipt-settings"},parameter:{setClientKey:function(){return Promise.resolve(s.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var e,t,r=null!=(t=null==(e=s.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomerKey:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(s.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setOrigin:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setSessionId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setCustomStyle:function(){return Promise.resolve(s.customerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return s.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return s.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return s.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(i)},setHardwareFeatureSupport:function(){return Promise.all([s.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:g(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))}},event:{onCloseRequest:function(){return ax(s,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.isProcessing(),e.t0){e.next=5;break}return e.next=4,n.shutdown();case 4:t.cancel(new Gx.UserCancelError);case 5:case"end":return e.stop()}}),e)})))},onCashReceiptChange:function(e){return ax(s,[e],regeneratorRuntime.mark((function e(r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.cashReceipt,e.t0=t.isProcessing(),e.t0){e.next=6;break}return e.next=5,n.shutdown();case 5:t.finish(o);case 6:case"end":return e.stop()}}),e)})))},onBiometricAuthTokenRegister:function(e){return ax(s,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:i={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),i=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return s.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()}}}).build(),e.next=18,n.launch(a);case 18:return e.next=20,t.wait();case 20:return e.abrupt("return",e.sent);case 23:e.prev=23,e.t1=e.catch(1),t.cancel(e.t1);case 26:return e.abrupt("return",t.wait());case 27:case"end":return e.stop()}}),e,this,[[1,23],[2,7]])})))}}]),e}(),uU=function(){function e(t,r,n,o,a,s,u){i(this,e),this.customerAuthService=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.productStageRepository=o,this.brandpayClientKeyRepository=a,this.externalBrandpayNativeSDKFacade=s,this.brandpayMidRepository=u}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Gx.Task(null),e.prev=1,e.prev=2,e.next=5,this.customerAuthService.authenticateCustomer();case 5:e.next=13;break;case 7:if(e.prev=7,e.t0=e.catch(2),e.t0 instanceof Gx.NonRegisteredUserError||e.t0 instanceof Gx.LockedUserError){e.next=11;break}throw e.t0;case 11:return e.next=13,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 13:return r=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),n=this.productStageRepository.getLiveProductStage(),o={process:"PENDING"},i=new Gx.ProductBuilder(n).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/request-password-auth",staging:"https://connect-staging.tosspayments.com/v2/m/entry/request-password-auth",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/request-password-auth"},parameter:{setClientKey:function(){return Promise.resolve(a.brandpayClientKeyRepository.findCurrentClientKey().value)},setCustomerKey:function(){return Promise.resolve(a.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){try{return Promise.resolve(a.customerSessionRepository.findCurrentToken())}catch(e){return Promise.resolve(null)}},setSessionId:function(){return Promise.resolve(a.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(a.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(a.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(a.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(a.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(a.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(a.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setMid:function(){var e,t,r=null!=(t=null==(e=a.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomStyle:function(){return Promise.resolve(a.customerSessionRepository.findCurrentSession().getCustomStyle())},setAppInfo:function(){return a.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return a.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return a.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(o)},setHardwareFeatureSupport:function(){return Promise.all([a.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule()]).then((function(e){return{biometricAuth:{available:g(e,1)[0]},ocr:{available:!1}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))}},event:{onCloseRequest:function(){return ax(a,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.isProcessing(),e.t0){e.next=6;break}return t.processing(),e.next=5,r.shutdown();case 5:t.cancel(new Gx.UserCancelError);case 6:case"end":return e.stop()}}),e)})))},onPasswordAuthSuccess:function(){return ax(a,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.isProcessing(),e.t0){e.next=6;break}return t.processing(),e.next=5,r.shutdown();case 5:t.finish();case 6:case"end":return e.stop()}}),e)})))},onBiometricAuthTokenRegister:function(e){return ax(a,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:o={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),o=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return a.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()}}}).build(),e.next=18,r.launch(i);case 18:return e.abrupt("return",t.wait());case 21:e.prev=21,e.t1=e.catch(1),t.cancel(e.t1);case 24:return e.abrupt("return",t.wait());case 25:case"end":return e.stop()}}),e,this,[[1,21],[2,7]])})))}}]),e}(),cU=function(){function e(t,r,n,o){i(this,e),this.customerAuthService=t,this.brandpayAuthenticatedAPIService=r,this.hyundaiDepartmentStoreAPIService=n,this.setupPasswordService=o}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.customerAuthService.authenticateCustomer();case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0 instanceof Gx.NonRegisteredUserError||e.t0 instanceof Gx.LockedUserError){e.next=9;break}throw e.t0;case 9:return e.next=11,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 11:return e.next=13,this.brandpayAuthenticatedAPIService.getIdentity();case 13:if(t=e.sent,r=t.authType,e.t1="PASSWORD"!==r,!e.t1){e.next=19;break}return e.next=19,this.setupPasswordService.execute();case 19:return e.abrupt("return",this.hyundaiDepartmentStoreAPIService.addHyundaiDepartmentStoreCard());case 20:case"end":return e.stop()}}),e,this,[[0,5]])})))}}]),e}(),lU=function(){function e(t,r){i(this,e),this.customerAuthService=t,this.hyundaiDepartmentStoreAPIService=r}return s(e,[{key:"execute",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.customerAuthService.authenticateCustomer();case 3:t.next=11;break;case 5:if(t.prev=5,t.t0=t.catch(0),t.t0 instanceof Gx.NonRegisteredUserError||t.t0 instanceof Gx.LockedUserError){t.next=9;break}throw t.t0;case 9:return t.next=11,this.customerAuthService.registerCustomer({keepProductAfterRegister:!0});case 11:return t.abrupt("return",this.hyundaiDepartmentStoreAPIService.removeHyundaiDepartmentStoreCard(e));case 12:case"end":return t.stop()}}),t,this,[[0,5]])})))}}]),e}(),dU=function(){function e(t,r,n,o,a,s,u,c,l,d){i(this,e),this.brandpayAuthenticatedAPIService=t,this.brandpayPublicServerAPI=r,this.customerSessionRepository=n,this.checkoutProductLauncherFactory=o,this.productStageRepository=a,this.brandpayClientKeyRepository=s,this.externalBrandpayNativeSDKFacade=u,this.ocrLicenseRepository=c,this.customContextRepository=l,this.brandpayMidRepository=d}return s(e,[{key:"authenticateCustomer",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Cx,e.t1=!0,e.next=4,this.brandpayPublicServerAPI.isTermsAgreed();case 4:return e.t2=e.sent,e.t3=e.t1===e.t2,e.t4=new Gx.NonRegisteredUserError,(0,e.t0)(e.t3,e.t4),e.next=10,this.brandpayPublicServerAPI.authenticateCustomerToken();case 10:return t=e.sent,this.customerSessionRepository.saveCurrentToken(t),e.prev=12,e.next=15,this.brandpayAuthenticatedAPIService.getTemporaryMethods();case 15:return r=e.sent,n=r.account,o=r.card,Cx(null==n&&null==o,new Gx.NonRegisteredUserError),e.next=21,this.brandpayAuthenticatedAPIService.getIdentity();case 21:i=e.sent,a=i.isIdentified,s=i.authType,Cx(a,new Gx.NonRegisteredUserError),Cx(null!=s&&"NONE"!==s,new Gx.NonRegisteredUserError),e.next=32;break;case 27:if(e.prev=27,e.t5=e.catch(12),!(e.t5 instanceof Gx.LockedUserError)){e.next=31;break}throw e.t5;case 31:throw new Gx.NonRegisteredUserError;case 32:case"end":return e.stop()}}),e,this,[[12,27]])})))}},{key:"registerCustomer",value:function(){return ax(this,arguments,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s,u=this,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},r=new Gx.Task(null),e.prev=2,n=this.checkoutProductLauncherFactory.getLauncher({target:this.customerSessionRepository.findCurrentSession().getWindowTarget()}),o=this.productStageRepository.getLiveProductStage(),i={process:"PENDING"},a={process:"PENDING"},s=new Gx.ProductBuilder(o).implementSpec({productURL:{dev:"https://connect-dev.tosspayments.com/v2/m/entry/register-customer",staging:"https://connect-staging.tosspayments.com/v2/m/entry/register-customer",sandbox:"",live:"https://connect.tosspayments.com/v2/m/entry/register-customer"},parameter:{setClientKey:function(){return Promise.resolve(u.brandpayClientKeyRepository.findCurrentClientKey().value)},setMid:function(){var e,t,r=null!=(t=null==(e=u.brandpayMidRepository.findCurrentMid())?void 0:e.value)?t:null;return Promise.resolve(r)},setCustomerKey:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getCustomerKey().value)},setCustomerToken:function(){return ax(u,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.brandpayPublicServerAPI.authenticateCustomerToken();case 3:return t=e.sent,e.abrupt("return",(this.customerSessionRepository.saveCurrentToken(t),t));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))},setSessionId:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getSessionId())},setMerchantBrowserId:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getMerchantBrowserId())},setGlobalTraceId:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getGlobalTraceId())},setInitiator:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getInitiator())},setSafeArea:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getWindow().getSafeArea())},setViewPort:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getWindow().getViewPort())},setOrigin:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getWindow().getOrigin())},setRegisterablePaymentMethodTarget:function(){var e;return Promise.resolve(null!=(e=t.methodType)?e:"ë¯¸ì í")},setAddPaymentMethodFunnelResumeOptions:function(){var e;return Promise.resolve({resume:null!=(e=t.resume)&&e})},setCustomStyle:function(){return Promise.resolve(u.customerSessionRepository.findCurrentSession().getCustomStyle())},setCustomContext:function(){var e=u.customContextRepository.findCustomContext();return Promise.resolve({plugin:"samsung_electronics"===e?e:null})},setAppInfo:function(){return u.externalBrandpayNativeSDKFacade.getAppInfo().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegisterable:function(){return u.externalBrandpayNativeSDKFacade.isBiometricAuthAvailable().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsBiometricAuthTokenRegistered:function(){return u.externalBrandpayNativeSDKFacade.hasBiometricAuthToken().catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setRegisterBiometricAuthTokenEventProcess:function(){return Promise.resolve(i)},setHardwareFeatureSupport:function(){return Promise.all([u.externalBrandpayNativeSDKFacade.isUsableBiometricAuthModule(),u.externalBrandpayNativeSDKFacade.isUsableOCRModule()]).then((function(e){var t=g(e,2);return{biometricAuth:{available:t[0]},ocr:{available:t[1]}}})).catch((function(e){throw{code:"FAILED",message:null==e?void 0:e.message}}))},setIsCreditCardScanAvailable:function(){return u.externalBrandpayNativeSDKFacade.isUsableOCRModule().then((function(e){return{value:e}}))},setScanCreditCardEventProcess:function(){return Promise.resolve(a)},setWithBillingTerms:function(){var e;return Promise.resolve(null!=(e=t.withBillingTerms)&&e)}},event:{onCloseRequest:function(){return ax(u,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.isFinished()||r.isProcessing(),e.t0){e.next=6;break}return r.processing(),e.next=5,n.shutdown();case 5:r.cancel(new Gx.UserCancelError);case 6:case"end":return e.stop()}}),e)})))},onCustomerRegister:function(){return ax(u,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.isProcessing(),e.t0){e.next=8;break}if(r.processing(),e.t1=t.keepProductAfterRegister,e.t1){e.next=7;break}return e.next=7,n.shutdown();case 7:r.finish();case 8:case"end":return e.stop()}}),e)})))},onPaymentMethodRegister:function(){var e;return null==(e=t.onPaymentMethodRegister)||e.call(t),Promise.resolve()},onBiometricAuthTokenRegister:function(e){return ax(u,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={process:"PENDING"},t.prev=1,t.next=4,this.externalBrandpayNativeSDKFacade.setBiometricAuthToken(e.biometricToken);case 4:i={process:"SUCCESS"},t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),i=t.t0 instanceof Gx.BiometricAuthCanceledError?{process:"FAIL",code:"CANCELED",message:t.t0.message}:{process:"FAIL",code:"FAILED",message:t.t0.message};case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))},onBiometricAuthTokenUnregister:function(){return u.externalBrandpayNativeSDKFacade.removeBiometricAuthToken()},onCreditCardScan:function(){return ax(u,null,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={process:"PENDING"},e.prev=1,e.next=4,this.externalBrandpayNativeSDKFacade.scanCreditCard({ocrLicense:this.ocrLicenseRepository.findCurrentOcrLicense()});case 4:r=e.sent,a={process:"SUCCESS",value:r},e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),!(e.t0 instanceof q_)){e.next=12;break}return e.abrupt("return",void(a={process:"FAIL",code:"CAMERA_PERMISSION_REQUIRED",message:e.t0.message}));case 12:a={process:"FAIL",code:"FAILED",message:null!=(t=null==e.t0?void 0:e.t0.message)?t:"ì ì ìë ìë¬"};case 13:case"end":return e.stop()}}),e,this,[[1,8]])})))}}}).build(),e.next=8,n.launch(s);case 8:return e.next=10,r.wait();case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(2),r.cancel(e.t0);case 16:return e.abrupt("return",r.wait());case 17:case"end":return e.stop()}}),e,this,[[2,13]])})))}}]),e}(),hU=function(){function e(t,r,n){i(this,e),this.hyundaiDepartmentStoreAPIExternalService=t,this.brandpayCustomerSessionRepository=r,this.mutex=n}return s(e,[{key:"addHyundaiDepartmentStoreCard",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.mutex.acquire();case 3:return t=this.brandpayCustomerSessionRepository.findCurrentToken(),e.next=6,this.hyundaiDepartmentStoreAPIExternalService.addHyundaiDepartmentStoreCard(t);case 6:return r=e.sent,n=r.newCustomerToken,o=r.cardPaymentMethod,e.abrupt("return",(this.brandpayCustomerSessionRepository.saveCurrentToken(n),o));case 10:return e.prev=10,this.mutex.release(),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[0,,10,13]])})))}},{key:"removeHyundaiDepartmentStoreCard",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.mutex.acquire();case 3:return r=this.brandpayCustomerSessionRepository.findCurrentToken(),t.next=6,this.hyundaiDepartmentStoreAPIExternalService.removeHyundaiDepartmentStoreCard({customerToken:r,methodId:e.methodId});case 6:return n=t.sent,o=n.newCustomerToken,i=n.result,t.abrupt("return",(this.brandpayCustomerSessionRepository.saveCurrentToken(o),i));case 10:return t.prev=10,this.mutex.release(),t.finish(10);case 13:case"end":return t.stop()}}),t,this,[[0,,10,13]])})))}}]),e}(),mU=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ê²°ì  UIê° ìì§ ë ëë§ëì§ ìììµëë¤. ê²°ì  UIê° ìì í ë ëë§ ë íì ë¤ì ìëí´ì£¼ì¸ì.")).name="NotRenderedPaymentMethodsUI",e}return s(r)}(f(Error)),fU=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ê²°ì ìë¨ì´ ìì§ ì íëì§ ììì´ì. ê²°ì ìë¨ì ì íí´ ì£¼ì¸ì.")).name="NotSelectedPaymentMethod",e.code="NOT_SELECTED_PAYMENT_METHOD",e}return s(r)}(f(Error)),pU=function(e){c(r,e);var t=v(r);function r(e,n){var o;return i(this,r),(o=t.call(this,null!=n?n:"ìì ¯ ë ëë§ì ì¤í¨íì´ì. ë¤ì ìëí´ ì£¼ì¸ì.")).name="WidgetProductRenderFailError",o.code=null!=e?e:"UNKNOWN_ERROR",o}return s(r)}(f(Error)),yU=function(e){c(r,e);var t=v(r);function r(e,n){var o;return i(this,r),(o=t.call(this,n)).name="InvalidClientKeyError",o.code=e,o}return s(r)}(f(Error)),vU=function(e){c(r,e);var t=v(r);function r(e,n){var o;return i(this,r),(o=t.call(this,n)).name="InvalidVariantKeyError",o.code=e,o}return s(r)}(f(Error)),gU=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ê²°ì ê¸ì¡ì´ ì¬ë°ë¥´ì§ ììµëë¤.")).name="InvalidAmountValueError",e.code="INVALID_AMOUNT_VALUE",e}return s(r)}(f(Error)),wU=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ê²°ì  ê¸°ê´(ì¹´ëì¬, ìí, êµ­ì¸ì²­ ë±) ì¤ë¥ìëë¤. ë¤ë¥¸ ê²°ì ìë¨ì ì íí´ ì£¼ì¸ì.")).name="ProviderStatusUnhealthyError",e.code="PROVIDER_STATUS_UNHEALTHY",e}return s(r)}(f(Error)),SU=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ì¹´ë ê²°ì  ì ë³´ë¥¼ ì íí´ì£¼ì¸ì.")).name="NeedCardPaymentDetailError",e.code="NEED_CARD_PAYMENT_DETAIL",e}return s(r)}(f(Error)),RU=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"íë¶ê³ì¢ ì ë³´ë¥¼ ëª¨ë ìë ¥í´ì£¼ì¸ì.")).name="NeedRefundAccountDetailError",e.code="NEED_REFUND_ACCOUNT_DETAIL",e}return s(r)}(f(Error)),bU=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ê°ì ê³ì¢ì ìµë ì í¨ë§ë£ ê¸°ê°ì ì´ê³¼íìµëë¤.")).name="ExceedMaxDueDateError",e.code="EXCEED_MAX_DUE_DATE",e}return s(r)}(f(Error)),PU=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ê°ìê³ì¢ ìê¸ ì í ê¸ì¡ì ì´ê³¼íì´ì. ë¤ë¥¸ ê²°ì ìë¨ì ì´ì©í´ì£¼ì¸ì.")).name="ExceedDepositAmountLimitError",e.code="EXCEED_DEPOSIT_AMOUNT_LIMIT",e}return s(r)}(f(Error)),EU=function(e){c(r,e);var t=v(r);function r(e){return i(this,r),t.call(this,"".concat(e.getId()," ììì´ ì·¨ìëììµëë¤"),e)}return s(r)}(Gx.TaskError),CU=function(){function e(t,r,n,o){i(this,e),this.checkoutProductLauncherFactory=t,this.customerSessionRepository=r,this.productStageRepository=n,this.externalWidgetNativeSDKFacade=o}return s(e,[{key:"execute",value:function(e){var t=this,r=new Gx.CollectionManager({allowOverwrite:!0}),n=new kU(r),o=this.productStageRepository.getLiveProductStage(),i=new Gx.StandardPaymentWidgetRenderAgreementProductBuilder(o).setClientKeyProvider((function(){return Promise.resolve(e.clientKey.value)})).setCustomerKeyProvider((function(){return Promise.resolve(t.customerSessionRepository.findCurrentSession().getCustomerKey().value)})).setVariantKeyProvider((function(){return Promise.resolve(e.variantKey)})).setMemberTypeProvider((function(){return Promise.resolve(t.customerSessionRepository.findCurrentSession().getMemberType())})).setDeviceTypeProvider((function(){return Promise.resolve(t.customerSessionRepository.findCurrentSession().getDeviceType())})).setSessionId((function(){return Promise.resolve(t.customerSessionRepository.findCurrentSession().getSessionId())})).setMerchantBrowserId((function(){return Promise.resolve(t.customerSessionRepository.findCurrentSession().getMerchantBrowserId())})).setGlobalTraceIdProvider((function(){return Promise.resolve(t.customerSessionRepository.findCurrentSession().getGlobalTraceId())})).onAgreementStatusChange((function(e){var o;return n.setAgreementStatus(e),null==(o=r.get("change"))||o(e),t.externalWidgetNativeSDKFacade.isAvailable()&&t.externalWidgetNativeSDKFacade.agreementStatusUpdate({agreementStatus:e}),Promise.resolve()})).build();return this.checkoutProductLauncherFactory.getLauncher({target:e.selector}).launch(i,{skeleton:{show:!1},onResize:function(e){t.externalWidgetNativeSDKFacade.isAvailable()&&t.externalWidgetNativeSDKFacade.resize(e)}}).then((function(){return ax(t,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.getAgreementStatus();case 3:t=e.sent,n.setAgreementStatus(t),this.externalWidgetNativeSDKFacade.isAvailable()&&(this.externalWidgetNativeSDKFacade.agreementWidgetReady(),this.externalWidgetNativeSDKFacade.agreementStatusUpdate({agreementStatus:t})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof pU&&this.externalWidgetNativeSDKFacade.dispatchError({error:e.t0});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))})),n}}]),e}(),kU=function(){function e(t){i(this,e),this.eventListeners=t,this.agreementStatus={agreedRequiredTerms:!0,agreements:[]}}return s(e,[{key:"setAgreementStatus",value:function(e){this.agreementStatus=e}},{key:"getAgreementStatus",value:function(){return this.agreementStatus}},{key:"on",value:function(e,t){this.eventListeners.set(e,t)}}]),e}(),AU=function(){function e(t,r,n,o,a,s,u,c,l,d,h,m,f,p,y,v){i(this,e),this.taskScheduler=t,this.checkoutProductLauncherFactory=r,this.customerSessionRepository=n,this.productStageRepository=o,this.widgetKeyRepository=a,this.widgetVariantKeyRepository=s,this.widgetMidResolver=u,this.brandpayCustomerAuthService=c,this.brandpayCustomerSessionRepository=l,this.brandpayChangeSettingsUsecase=d,this.brandpayChangeCashReceiptSettingsUsecase=h,this.brandpayAddPaymentMethodUsecase=m,this.brandpayMidRepository=f,this.paymentMethodIssuer=p,this.externalWidgetNativeSDKFacade=y,this.widgetBrandpayConfigResolver=v}return s(e,[{key:"execute",value:function(e){var t=this,r=e.selector,n=e.checkout;this.taskScheduler.cancelEveryTask({reason:"ëì¼í ë©ìë ìì²­ì´ ë¤ì´ììµëë¤"});var o=new Gx.SetAmountServiceTask;this.taskScheduler.start(o);var i=this.widgetMidResolver.resolve({clientKey:e.clientKey,variantKey:e.variantKey}),a=this.customerSessionRepository.findCurrentSession(),s=this.brandpayCustomerSessionRepository.findCurrentSession(),u=new Gx.CollectionManager({allowOverwrite:!0}),c=this.productStageRepository.getLiveProductStage(),l=new Gx.StandardPaymentWidgetRenderPaymentMethodsProductBuilder(c).setClientKeyProvider((function(){return Promise.resolve(t.widgetKeyRepository.findCurrentClientKey().value)})).setVariantKeyProvider((function(){return ax(t,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i;case 2:return e.abrupt("return",this.widgetVariantKeyRepository.findCurrentVariantKey());case 3:case"end":return e.stop()}}),e,this)})))})).setDeviceTypeProvider((function(){return Promise.resolve(a.getDeviceType())})).setCustomerKeyProvider((function(){return Promise.resolve(a.getCustomerKey().value)})).setAmountProvider((function(){var e=n.getAmount();return Promise.resolve({value:e.value,currency:e.currency})})).setPreviousPaymentMethodIdProvider((function(){return Promise.resolve(a.getPreviousPaymentMethodId())})).setGlobalTraceIdProvider((function(){return Promise.resolve(a.getGlobalTraceId())})).setSessionIdProvider((function(){return Promise.resolve(a.getSessionId())})).setMerchantBrowserIdProvider((function(){return Promise.resolve(a.getMerchantBrowserId())})).setOriginProvider((function(){return Promise.resolve(s.getWindow().getOrigin())})).setBrandpayCustomerTokenProvider((function(){return ax(t,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.brandpayCustomerAuthService.authenticateCustomer();case 3:case 15:e.next=19;break;case 5:if(e.prev=5,e.t0=e.catch(0),!(e.t0 instanceof Gx.NonRegisteredUserError)){e.next=17;break}return e.prev=8,e.abrupt("return",this.brandpayCustomerSessionRepository.findCurrentToken());case 12:return e.prev=12,e.t1=e.catch(8),e.abrupt("return",null);case 17:if(e.t0 instanceof Gx.LockedUserError){e.next=19;break}return e.abrupt("return",null);case 19:return e.prev=19,e.abrupt("return",this.brandpayCustomerSessionRepository.findCurrentToken());case 23:return e.prev=23,e.t2=e.catch(19),e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,this,[[0,5],[8,12],[19,23]])})))})).setBrandpayMidProvider((function(){var e,r;try{var n=null!=(r=null==(e=t.brandpayMidRepository.findCurrentMid())?void 0:e.value)?r:null;return Promise.resolve(n)}catch(e){return Promise.resolve(null)}})).onPaymentMethodSelect((function(){return ax(t,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){try{return h.getSelectedPaymentMethod()}catch(e){return null}}(),e.next=3,l.getSelectedPaymentMethod().catch((function(e){return null}));case 3:return o=e.sent,e.next=6,h.setSelectedPaymentMethod(o);case 6:h.setSelectedPaymentMethodLogData(o),i=h.getSelectedPaymentMethod(),"CUSTOM"===(null==n?void 0:n.type)&&n.custom.methodKey!==(null==o?void 0:o.code)&&(null==(t=u.get("customPaymentMethodUnselect"))||t(n.custom.methodKey),this.externalWidgetNativeSDKFacade.isAvailable()&&this.externalWidgetNativeSDKFacade.customPaymentMethodUnselect({methodKey:n.custom.methodKey})),"CUSTOM"===i.type&&(null==(r=u.get("customPaymentMethodSelect"))||r(i.custom.methodKey),this.externalWidgetNativeSDKFacade.isAvailable()&&this.externalWidgetNativeSDKFacade.customPaymentMethodSelect({methodKey:i.custom.methodKey})),this.externalWidgetNativeSDKFacade.isAvailable()&&this.externalWidgetNativeSDKFacade.selectedPaymentMethodChange({selectedPaymentMethod:i});case 9:case"end":return e.stop()}}),e,this)})))})).onBrandpayAddMethodButtonClick((function(e){return ax(t,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.externalWidgetNativeSDKFacade.isAvailable()){t.next=8;break}return t.next=3,this.externalWidgetNativeSDKFacade.brandpayAddPaymentMethod();case 3:return t.next=5,l.updateBrandpayCustomer();case 5:return t.next=7,l.updateBrandpayPaymentMethod();case 7:return t.abrupt("return",void t.sent);case 8:return t.next=10,this.brandpayAddPaymentMethodUsecase.execute({resume:null!=(r=null==e?void 0:e.resume)&&r,withBillingTerms:!1,methodType:"ë¯¸ì í",onRegister:function(){l.updateBrandpayCustomer()}});case 10:return t.next=12,l.updateBrandpayPaymentMethod();case 12:case"end":return t.stop()}}),t,this)})))})).onBrandpayCashReceiptButtonClick((function(){return ax(t,null,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.externalWidgetNativeSDKFacade.isAvailable()){e.next=7;break}return e.next=3,this.externalWidgetNativeSDKFacade.brandpayChangeCashReceiptSettings();case 3:return t=e.sent,e.next=6,l.updateBrandpayCashReceipt({cashReceipt:t});case 6:return e.abrupt("return",void e.sent);case 7:return e.next=9,this.brandpayChangeCashReceiptSettingsUsecase.execute();case 9:return r=e.sent,e.next=12,l.updateBrandpayCashReceipt({cashReceipt:r});case 12:case"end":return e.stop()}}),e,this)})))})).onBrandpaySettingButtonClick((function(){return ax(t,null,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.externalWidgetNativeSDKFacade.isAvailable()){e.next=5;break}return e.next=3,this.externalWidgetNativeSDKFacade.brandpayChangeSettings().finally((function(){return ax(t,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.updateBrandpayCustomer();case 2:return e.next=4,l.updateBrandpayPaymentMethod();case 4:case"end":return e.stop()}}),e)})))}));case 3:e.next=9;break;case 5:return e.next=7,this.brandpayChangeSettingsUsecase.execute({onCustomerUnregister:function(){l.updateBrandpayCustomer()},onPaymentMethodRegister:function(){l.updateBrandpayPaymentMethod()},onPaymentMethodUnregister:function(){l.updateBrandpayPaymentMethod()}});case 7:return e.next=9,l.updateBrandpayPaymentMethod();case 9:case"end":return e.stop()}}),e,this)})))})).build(),d=this.checkoutProductLauncherFactory.getLauncher({target:r}),h=new IU(l,u,this.paymentMethodIssuer,this.customerSessionRepository,this.widgetMidResolver,this.widgetKeyRepository,this.widgetVariantKeyRepository);return i.then((function(){return ax(t,null,regeneratorRuntime.mark((function e(){var t,r,i,a,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Cx(!o.isCanceled(),new EU(o)),e.prev=1,e.t0=null!=(null==(t=this.brandpayMidRepository.findCurrentMid())?void 0:t.value),!e.t0){e.next=6;break}return e.next=6,this.widgetBrandpayConfigResolver.resolve();case 6:e.next=13;break;case 8:return e.prev=8,e.t1=e.catch(1),e.next=13,this.widgetBrandpayConfigResolver.resolve();case 13:return Cx(!o.isCanceled(),new EU(o)),i=d.launch(l,{skeleton:{show:!0},fallback:{show:!0},onResize:function(e){s.externalWidgetNativeSDKFacade.isAvailable()&&s.externalWidgetNativeSDKFacade.resize(e)}}),n.addSubscriber(h),e.next=18,i;case 18:return Cx(!o.isCanceled(),new EU(o)),e.next=21,l.getSelectedPaymentMethod().catch((function(e){return null}));case 21:return a=e.sent,e.next=24,h.setSelectedPaymentMethod(a);case 24:h.setSelectedPaymentMethodLogData(a),h.setIsReady(),null==(r=u.get("ready"))||r(),Cx(!o.isCanceled(),new EU(o)),this.externalWidgetNativeSDKFacade.isAvailable()&&(this.externalWidgetNativeSDKFacade.selectedPaymentMethodChange({selectedPaymentMethod:h.getSelectedPaymentMethod()}),this.externalWidgetNativeSDKFacade.paymentMethodWidgetReady()),o.finish(void 0);case 30:case"end":return e.stop()}}),e,this,[[1,8]])})))})).catch((function(e){var r;e instanceof EU||(e instanceof pU&&h.setRenderFailed(),t.externalWidgetNativeSDKFacade.isAvailable()&&(e instanceof pU||e instanceof vU||e instanceof yU||e instanceof Gx.UnknownError)&&t.externalWidgetNativeSDKFacade.dispatchError({error:e}),null==(r=u.get("internalError"))||r(e),d.shutdown())})),h}}]),e}(),IU=function(){function e(t,r,n,o,a,s,u){i(this,e),this.product=t,this.eventListeners=r,this.paymentMethodIssuer=n,this.customerSessionRepository=o,this.widgetMidResolver=a,this.widgetKeyRepository=s,this.widgetVariantKeyRepository=u,this.isReady=!1,this.renderFailed=!1,this.selectedPaymentMethod=null,this.paymentMethodLogData=null}return s(e,[{key:"setIsReady",value:function(){this.isReady=!0}},{key:"setRenderFailed",value:function(){this.renderFailed=!0}},{key:"setSelectedPaymentMethod",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=e){t.next=2;break}return t.abrupt("return",void(this.selectedPaymentMethod=null));case 2:t.t0=e.id,t.next="KEYIN"===t.t0?5:"TRANSFER"===t.t0?6:7;break;case 5:return t.abrupt("return",void(this.selectedPaymentMethod={type:"KEYIN",normal:{method:"CARD"}}));case 6:return t.abrupt("return",void(this.selectedPaymentMethod={type:"NORMAL",normal:{method:"TRANSFER",transfer:{provider:"UNKNOWN"}}}));case 7:if(!e.id.startsWith("CUSTOM__")){t.next=9;break}return t.abrupt("return",void(this.selectedPaymentMethod={type:"CUSTOM",custom:{methodKey:e.code}}));case 9:if(!e.id.startsWith("TRANSFER__")){t.next=11;break}return t.abrupt("return",void(this.selectedPaymentMethod={type:"NORMAL",normal:{method:"TRANSFER",transfer:{provider:"BRANDPAY"===e.code?"BANKPAY":"TOSS_PAYMENTS"}}}));case 11:if("BRANDPAY"!==e.code){t.next=13;break}return t.abrupt("return",void(this.selectedPaymentMethod={type:"BRANDPAY",brandpay:{methodId:e.methodId}}));case 13:null==(r=this.paymentMethodIssuer.findByDigitalWalletProviderId(e.code))?e.id.startsWith("CARD__")?this.selectedPaymentMethod={type:"NORMAL",normal:{method:"CARD"}}:this.selectedPaymentMethod={type:"NORMAL",normal:{method:e.code}}:this.selectedPaymentMethod={type:"NORMAL",normal:{method:"DIGITAL_WALLET",easyPay:{provider:r.name}}};case 15:case"end":return t.stop()}}),t,this)})))}},{key:"getSelectedPaymentMethod",value:function(){return Cx(this.isReady,new mU),Cx(null!=this.selectedPaymentMethod,new fU),this.selectedPaymentMethod}},{key:"on",value:function(e,t){Cx("function"==typeof t,new Gx.InvalidCallbackParameterError(e)),this.eventListeners.set(e,t)}},{key:"dispatch",value:function(e,t){var r;null==(r=this.eventListeners.get(e))||r(t.paymentMethodId)}},{key:"subscribeAmount",value:function(e){this.product.setAmount({value:e.value,currency:e.currency})}},{key:"validatePaymentRequest",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.product.validatePaymentRequest();case 2:if((t=e.sent).isValid){e.next=14;break}e.t0=(this.product.focus(),t.errorCode),e.next="PROVIDER_STATUS_UNHEALTHY"===e.t0?7:"NEED_CARD_PAYMENT_DETAIL"===e.t0?8:"NEED_REFUND_ACCOUNT_DETAIL"===e.t0?9:"EXCEED_MAX_DUE_DATE"===e.t0?10:"EXCEED_DEPOSIT_AMOUNT_LIMIT"===e.t0?11:"CUSTOM_PAYMENT_METHOD_UNABLE_TO_PAY"===e.t0?12:13;break;case 7:throw new Gx.ProviderStatusUnhealthyError;case 8:throw new Gx.NeedCardPaymentDetailError;case 9:throw new Gx.NeedRefundAccountDetailError;case 10:throw new Gx.ExceedMaxDueDateError;case 11:throw new Gx.ExceedDepositAmountLimitError;case 12:throw new Gx.CustomPaymentMethodUnableToPayError;case 13:throw new Gx.UnknownError("ì ì ìë ìë¬ê° ë°ìíìµëë¤");case 14:case"end":return e.stop()}}),e,this)})))}},{key:"getSelectedPaymentInfo",value:function(){return this.product.getSelectedPaymentInfo()}},{key:"hasRenderFailed",value:function(){return this.renderFailed}},{key:"getMidBySelectedPaymentMethod",value:function(){var e=this.getSelectedPaymentMethod();return this.widgetMidResolver.findCurrentMid(e)}},{key:"savePreviousPaymentMethod",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.product.getSelectedPaymentMethod();case 2:return t=e.sent,e.abrupt("return",this.customerSessionRepository.savePreviousPaymentMethodId(t.id));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getWidgetKeyData",value:function(){var e=this;return{getWidgetClientKey:function(){try{return e.widgetKeyRepository.findCurrentClientKey()}catch(e){return null}},getWidgetVariantKey:function(){try{return e.widgetVariantKeyRepository.findCurrentVariantKey()}catch(e){return null}},getMid:function(){try{return e.getMidBySelectedPaymentMethod()}catch(e){return null}}}}},{key:"setSelectedPaymentMethodLogData",value:function(e){if(null!=e)if(e.id.startsWith("CUSTOM__"))this.paymentMethodLogData={paymentMethod:e.id};else switch(e.code){case"BRANDPAY":case"KEYIN":case"TRANSFER":case"BANKPAY":case"OPENBANKING":case"VIRTUAL_ACCOUNT":case"MOBILE_PHONE":case"GAME_GIFT_CERTIFICATE":case"BOOK_GIFT_CERTIFICATE":case"CULTURE_GIFT_CERTIFICATE":return void(this.paymentMethodLogData={paymentMethod:e.id});case"PAYPAL":case"GCASH":case"TOUCHNGO":case"BOOST":case"BPI":case"BILLEASE":case"DANA":case"ALIPAYHK":case"TRUEMONEY":case"RABBIT_LINE_PAY":case"ALIPAY":return void(this.paymentMethodLogData={paymentMethod:"FOREIGN_EASY_PAY",provider:e.code});case"PINPAY":case"TOSSPAY":case"NAVERPAY":case"SAMSUNGPAY":case"APPLEPAY":case"LPAY":case"KAKAOPAY":case"PAYCO":case"SSG":return void(this.paymentMethodLogData={paymentMethod:"CARD",easyPay:e.code});case"CARD":case"SHINHAN":case"HYUNDAI":case"SAMSUNG":case"WOORI":case"KOOKMIN":case"LOTTE":case"NONGHYEOP":case"HANA":case"BC":case"KDBBANK":case"TOSSBANK":case"KAKAOBANK":case"SUHYEOP":case"JEONBUKBANK":case"KBANK":case"POST":case"SAEMAUL":case"CITI":case"SAVINGBANK":case"JEJUBANK":case"GWANGJUBANK":case"SHINHYEOP":case"JCB":case"UNIONPAY":case"MASTER":case"VISA":case"DINERS":case"DISCOVER":case"IBK_BC":case"AMEX":return void(this.paymentMethodLogData={paymentMethod:"CARD",cardCompany:e.id.replace("CARD__","")});case"KBPAY":return void(this.paymentMethodLogData={paymentMethod:"CARD",cardCompany:"KOOKMIN"})}else this.paymentMethodLogData=null}},{key:"getSelectedPaymentMethodLogData",value:function(){return this.paymentMethodLogData}}]),e}(),xU=function(){function e(t){i(this,e),this.value=t,this.currency="KRW",this.country="KR"}return s(e,[{key:"equals",value:function(e){return this.value===e.value}}],[{key:"of",value:function(t){return new e(t.value)}},{key:"isDomestic",value:function(e){return"KRW"===e.currency}}]),e}(),TU=function(){function e(t,r,n){i(this,e),this.value=t,this.currency=r,this.country=n,Cx(["USD","JPY"].includes(r),new Gx.InvalidAmountCurrencyError)}return s(e,[{key:"equals",value:function(e){return this.value===e.value&&this.currency===e.currency&&this.country===e.country}},{key:"isUSDCurrency",value:function(){return"USD"===this.currency}},{key:"isJPYCurrency",value:function(){return"JPY"===this.currency}}],[{key:"of",value:function(t){return new e(t.value,t.currency,t.country)}}]),e}(),NU=function(){function e(t,r,n){i(this,e),this.customerSessionRepository=t,this.widgetClientKeyRepository=r,this.widgetRequestPaymentUseCases=n}return s(e,[{key:"execute",value:function(e,t,r){return ax(this,null,regeneratorRuntime.mark((function n(){var o,i,a,s,u,c,l,d,h,m,f,p,y,v,g,w,S,R,b,P,E,C,k,A,I,x,T,N;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==r.agreementWidget||!1!==r.agreementWidget.getAgreementStatus().agreedRequiredTerms){n.next=2;break}throw new Gx.NeedAgreementWithRequiredTermsError;case 2:if("CUSTOM"!==(i=r.paymentMethodsWidget.getSelectedPaymentMethod()).type){n.next=5;break}return n.abrupt("return",void r.paymentMethodsWidget.dispatch("customRequest",{paymentMethodId:i.custom.methodKey}));case 5:if(a="BRANDPAY"===i.type?"BRANDPAY":"KEYIN"===i.type?"KEYIN":"NORMAL",n.t0="NORMAL"===a,!n.t0){n.next=10;break}return n.next=10,r.paymentMethodsWidget.validatePaymentRequest();case 10:return n.next=12,r.paymentMethodsWidget.savePreviousPaymentMethod();case 12:return s=this.widgetClientKeyRepository.findCurrentClientKey(),n.next=15,r.paymentMethodsWidget.getSelectedPaymentInfo();case 15:if(u=n.sent,!s.isTestKey()||!this.isNotSupportedPaymentMethodInTestPhase(u)){n.next=18;break}throw new Gx.UnsupportedTestPhasePaymentMethodError;case 18:if(c=r.paymentMethodsWidget.getMidBySelectedPaymentMethod().value,l=this.customerSessionRepository.findCurrentSession(),d="successUrl"in e?ex($I({},e),{successUrl:this.appendParams(e.successUrl,{paymentType:a})}):e,h=d.pendingUrl,m=tx(d,["pendingUrl"]),"BRANDPAY"!==u.code){n.next=27;break}return f=ex($I({},m),{amount:t,mid:c,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),methodId:u.params.methodId,cardInstallmentPlan:u.params.installmentPlan,discountCode:u.params.discountCode,useCardPoint:u.params.useCardPoint,cashReceipt:u.params.cashReceipt}),n.next=23,this.widgetRequestPaymentUseCases.getBrandpay().execute(f);case 23:if(null!=(o=n.sent)){n.next=26;break}return n.abrupt("return");case 26:return n.abrupt("return",{paymentType:"BRANDPAY",paymentKey:o.paymentKey,orderId:o.orderId,methodId:o.methodId,amount:xU.isDomestic({value:o.amount.value,currency:o.amount.currency})?xU.of({value:o.amount.value}):TU.of({value:o.amount.value,currency:o.amount.currency,country:t.country})});case 27:n.t1=u.code,n.next="KEYIN"===n.t1?30:"PAYPAL"===n.t1?35:"GCASH"===n.t1||"TOUCHNGO"===n.t1||"BOOST"===n.t1||"BPI"===n.t1||"BILLEASE"===n.t1||"DANA"===n.t1||"ALIPAYHK"===n.t1||"TRUEMONEY"===n.t1||"RABBIT_LINE_PAY"===n.t1||"ALIPAY"===n.t1?40:"TRANSFER"===n.t1||"BANKPAY"===n.t1||"OPENBANKING"===n.t1?45:"VIRTUAL_ACCOUNT"===n.t1?50:"MOBILE_PHONE"===n.t1?55:"CULTURE_GIFT_CERTIFICATE"===n.t1||"GAME_GIFT_CERTIFICATE"===n.t1||"BOOK_GIFT_CERTIFICATE"===n.t1?60:"PINPAY"===n.t1?65:"TOSSPAY"===n.t1||"NAVERPAY"===n.t1||"SAMSUNGPAY"===n.t1||"APPLEPAY"===n.t1||"LPAY"===n.t1||"KAKAOPAY"===n.t1||"PAYCO"===n.t1||"SSG"===n.t1?70:"SHINHAN"===n.t1||"HYUNDAI"===n.t1||"SAMSUNG"===n.t1||"WOORI"===n.t1||"KOOKMIN"===n.t1||"LOTTE"===n.t1||"NONGHYEOP"===n.t1||"HANA"===n.t1||"BC"===n.t1||"KDBBANK"===n.t1||"TOSSBANK"===n.t1||"KAKAOBANK"===n.t1||"SUHYEOP"===n.t1||"JEONBUKBANK"===n.t1||"KBANK"===n.t1||"POST"===n.t1||"SAEMAUL"===n.t1||"CITI"===n.t1||"SAVINGBANK"===n.t1||"JEJUBANK"===n.t1||"GWANGJUBANK"===n.t1||"SHINHYEOP"===n.t1||"JCB"===n.t1||"UNIONPAY"===n.t1||"MASTER"===n.t1||"VISA"===n.t1||"DINERS"===n.t1||"DISCOVER"===n.t1||"IBK_BC"===n.t1||"AMEX"===n.t1?75:"KBPAY"===n.t1?80:85;break;case 30:return p=ex($I({},m),{amount:t.value,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:c,requesterService:"WIDGET"}),n.next=33,this.widgetRequestPaymentUseCases.getKeyin().execute("CARD",p);case 33:case 38:case 43:case 48:case 53:case 58:case 63:case 68:case 73:case 78:case 83:return o=n.sent,n.abrupt("break",85);case 35:return y=ex($I({},m),{amount:t.value,currency:t.currency,country:t.country,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:c,provider:u.code,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,requesterService:"WIDGET"}),n.next=38,this.widgetRequestPaymentUseCases.getInternational().execute("FOREIGN_EASY_PAY",y);case 40:return v=ex($I({},m),{amount:t.value,currency:t.currency,country:t.country,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:c,provider:u.code,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,pendingUrl:h,requesterService:"WIDGET"}),n.next=43,this.widgetRequestPaymentUseCases.getInternational().execute("FOREIGN_EASY_PAY",v);case 45:return g={BANKPAY:"BANKPAY",OPENBANKING:"OPENBANKING",TRANSFER:void 0}[u.code],w=ex($I({},m),{amount:t.value,currency:t.currency,country:t.country,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:c,requesterService:"WIDGET",customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,_transferProvider:g}),n.next=48,this.widgetRequestPaymentUseCases.getNormal().execute("TRANSFER",w);case 50:return S=u.params,R=S.depositDeadline,b=S.refundAccount,P=S.customerEmail,E=ex($I({},m),{amount:t.value,currency:t.currency,country:t.country,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:P}),mId:c,requesterService:"WIDGET",dueDate:kx(R),refundReceiveAccount:null!=b?{bankCode:b.bankId,accountNumber:b.accountNumber,holderName:b.holderName}:void 0,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=53,this.widgetRequestPaymentUseCases.getNormal().execute("VIRTUAL_ACCOUNT",E);case 55:return C=ex($I({},m),{amount:t.value,currency:t.currency,country:t.country,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:c,requesterService:"WIDGET",customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=58,this.widgetRequestPaymentUseCases.getNormal().execute("MOBILE_PHONE",C);case 60:return k=ex($I({},m),{amount:t.value,currency:t.currency,country:t.country,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:c,requesterService:"WIDGET",customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=63,this.widgetRequestPaymentUseCases.getNormal().execute(u.code,k);case 65:return A=ex($I({},m),{amount:t.value,currency:t.currency,country:t.country,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:c,cardInstallmentPlan:u.params.installmentPlan,flowMode:"DIRECT",requesterService:"WIDGET",easyPay:"PINPAY",customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,paymentMethodOptions:{pinpay:{pinpayCustomerKey:l.getCustomerKey().value}}}),n.next=68,this.widgetRequestPaymentUseCases.getNormal().execute("CARD",A);case 70:return I=ex($I({},m),{amount:t.value,currency:t.currency,country:t.country,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:c,cardInstallmentPlan:u.params.installmentPlan,flowMode:"DIRECT",easyPay:u.code,requesterService:"WIDGET",customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value}),n.next=73,this.widgetRequestPaymentUseCases.getNormal().execute("CARD",I);case 75:return x=ex($I({},m),{amount:t.value,currency:t.currency,country:t.country,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:c,requesterService:"WIDGET",cardInstallmentPlan:u.params.installmentPlan,useInternationalCardOnly:!!this.isForeignCardCompanyCode(u.code)||e.useInternationalCardOnly,useAppCardOnly:u.params.useAppCardOnly,useCardPoint:u.params.useCardPoint,freeInstallmentPlans:u.params.freeInstallmentPlans,flowMode:this.isForeignCardCompanyCode(u.code)?"DEFAULT":"DIRECT",cardCompany:u.code,customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,discountCode:u.params.discountCode}),n.next=78,this.widgetRequestPaymentUseCases.getNormal().execute("CARD",x);case 80:return T=ex($I({},m),{amount:t.value,currency:t.currency,country:t.country,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:u.params.customerEmail}),mId:c,requesterService:"WIDGET",cardInstallmentPlan:u.params.installmentPlan,useInternationalCardOnly:e.useInternationalCardOnly,useAppCardOnly:!0,useCardPoint:u.params.useCardPoint,freeInstallmentPlans:u.params.freeInstallmentPlans,flowMode:"DIRECT",cardCompany:"KOOKMIN",customerKey:l.getCustomerKey().value,customerId:l.getCustomerKey().value,discountCode:u.params.discountCode}),n.next=83,this.widgetRequestPaymentUseCases.getNormal().execute("CARD",T);case 85:if(null!=o){n.next=87;break}return n.abrupt("return");case 87:return N=xU.isDomestic({value:o.amount,currency:t.currency})?xU.of({value:o.amount}):TU.of({value:o.amount,currency:t.currency,country:t.country}),n.abrupt("return",{paymentType:a,paymentKey:o.paymentKey,orderId:o.orderId,amount:N});case 89:case"end":return n.stop()}}),n,this)})))}},{key:"decideCustomerEmail",value:function(e){var t=e.customerEmailFromWidget,r=e.customerEmailFromMerchant;return Dx(t)?r:t}},{key:"isNotSupportedPaymentMethodInTestPhase",value:function(e){return!!this.isDigitalWalletProviderCode(e.code)&&["PAYCO"].includes(e.code)}},{key:"isDigitalWalletProviderCode",value:function(e){return["TOSSPAY","NAVERPAY","SAMSUNGPAY","APPLEPAY","LPAY","KAKAOPAY","PINPAY","PAYCO","SSG"].includes(e)}},{key:"isForeignCardCompanyCode",value:function(e){return["JCB","UNIONPAY","MASTER","VISA","DINERS","DISCOVER","AMEX"].includes(e)}},{key:"appendParams",value:function(e,t){var r=new URL(e),n=new URLSearchParams(r.search);return Object.entries(t).forEach((function(e){var t=g(e,2),r=t[0],o=t[1];n.append(r,o)})),r.search=n.toString(),r.href}}]),e}(),MU=function(){function e(){i(this,e),this.requestBrandpayPaymentUseCase=null,this.requestKeyinPaymentGatewayUseCase=null,this.requestInternationalPaymentGatewayUseCase=null,this.requestNormalPaymentGatewayUseCase=null}return s(e,[{key:"setRequestBrandpayPaymentUseCase",value:function(e){return this.requestBrandpayPaymentUseCase=e,this}},{key:"setRequestKeyinPaymentGatewayUseCase",value:function(e){return this.requestKeyinPaymentGatewayUseCase=e,this}},{key:"setRequestInternationalPaymentGatewayUseCase",value:function(e){return this.requestInternationalPaymentGatewayUseCase=e,this}},{key:"setRequestNormalPaymentGatewayUseCase",value:function(e){return this.requestNormalPaymentGatewayUseCase=e,this}},{key:"build",value:function(){var e=this;return Cx(null!=this.requestBrandpayPaymentUseCase,"ë¸ëëíì´ ê²°ì  ì ì¤ì¼ì´ì¤ê° ì¤ì ëì§ ìììµëë¤."),Cx(null!=this.requestKeyinPaymentGatewayUseCase,"í¤ì¸ ê²°ì  ì ì¤ì¼ì´ì¤ê° ì¤ì ëì§ ìììµëë¤."),Cx(null!=this.requestInternationalPaymentGatewayUseCase,"í´ì¸ ê°í¸ ê²°ì  ì ì¤ì¼ì´ì¤ê° ì¤ì ëì§ ìììµëë¤."),Cx(null!=this.requestNormalPaymentGatewayUseCase,"ì¼ë° ê²°ì  ì ì¤ì¼ì´ì¤ê° ì¤ì ëì§ ìììµëë¤."),{getBrandpay:function(){return e.requestBrandpayPaymentUseCase},getKeyin:function(){return e.requestKeyinPaymentGatewayUseCase},getInternational:function(){return e.requestInternationalPaymentGatewayUseCase},getNormal:function(){return e.requestNormalPaymentGatewayUseCase}}}}]),e}(),OU=function(){function e(){i(this,e)}return s(e,[{key:"execute",value:function(e,t){e.setAmount(t)}}]),e}(),DU=function(){function e(t,r,n,o,a,s,u,c){i(this,e),this.paymentWidgetCustomerSessionRepository=t,this.clientKeyRepository=r,this.customerSessionFactory=n,this.tracingIdRepository=o,this.widgetBrandpayCustomerSessionRepository=a,this.widgetKeyinPaymentGatewaySessionRepository=s,this.widgetInternationalPaymentGatewaySessionRepository=u,this.widgetNormalPaymentGatewaySessionRepository=c}return s(e,[{key:"execute",value:function(e){var t;this.clientKeyRepository.saveCurrentClientKey(e.clientKey),null!=e.gtid&&this.tracingIdRepository.saveGlobalTraceId(e.gtid);var r=this.paymentWidgetCustomerSessionRepository.findPreviousPaymentMethodId(),n=this.customerSessionFactory.createPaymentWidgetCustomerSession({customerKey:e.customerKey,previousPaymentMethodId:r});return this.paymentWidgetCustomerSessionRepository.saveCurrentSession(n),this.widgetBrandpayCustomerSessionRepository.saveCurrentSession(this.customerSessionFactory.createBrandpayCustomerSession({customerKey:e.customerKey,initiator:"payment-widget",redirectURL:null==(t=e.brandpay)?void 0:t.redirectUrl})),this.widgetKeyinPaymentGatewaySessionRepository.saveCurrentSession(this.customerSessionFactory.createPaymentGatewayCustomerSession({customerKey:e.customerKey,isWidgetSession:!0})),this.widgetInternationalPaymentGatewaySessionRepository.saveCurrentSession(this.customerSessionFactory.createPaymentGatewayCustomerSession({customerKey:e.customerKey,isWidgetSession:!0})),this.widgetNormalPaymentGatewaySessionRepository.saveCurrentSession(this.customerSessionFactory.createPaymentGatewayCustomerSession({customerKey:e.customerKey,isWidgetSession:!0})),this.paymentWidgetCustomerSessionRepository.findCurrentSession()}}]),e}(),KU=function(){function e(t,r){i(this,e),this.nativeSDKFacade=t,this.customerSessionRepository=r}return s(e,[{key:"execute",value:function(e,t,r){return ax(this,null,regeneratorRuntime.mark((function n(){var o,i,a,s,u,c,l,d,h,m,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=t&&null!=r.paymentMethodsWidget){n.next=2;break}return n.abrupt("return",void this.nativeSDKFacade.dispatchError({error:new fU,orderId:e.orderId}));case 2:if(this.isAmountValid(t.value)){n.next=4;break}return n.abrupt("return",void this.nativeSDKFacade.dispatchError({error:new gU,orderId:e.orderId}));case 4:n.prev=4,o=r.paymentMethodsWidget.getSelectedPaymentMethod(),n.next=11;break;case 8:return n.prev=8,n.t0=n.catch(4),n.abrupt("return",void this.nativeSDKFacade.dispatchError({error:new fU,orderId:e.orderId}));case 11:return n.prev=11,n.next=14,r.paymentMethodsWidget.validatePaymentRequest();case 14:n.next=20;break;case 16:if(n.prev=16,n.t1=n.catch(11),n.t1 instanceof Gx.CustomPaymentMethodUnableToPayError){n.next=20;break}return n.abrupt("return",n.t1 instanceof Gx.ProviderStatusUnhealthyError?void this.nativeSDKFacade.dispatchError({error:new wU,orderId:e.orderId}):n.t1 instanceof Gx.NeedCardPaymentDetailError?void this.nativeSDKFacade.dispatchError({error:new SU,orderId:e.orderId}):n.t1 instanceof Gx.NeedRefundAccountDetailError?void this.nativeSDKFacade.dispatchError({error:new RU,orderId:e.orderId}):n.t1 instanceof Gx.ExceedMaxDueDateError?void this.nativeSDKFacade.dispatchError({error:new bU,orderId:e.orderId}):n.t1 instanceof Gx.ExceedDepositAmountLimitError?void this.nativeSDKFacade.dispatchError({error:new PU,orderId:e.orderId}):void this.nativeSDKFacade.dispatchError({error:new Gx.UnknownError(n.t1),orderId:e.orderId}));case 20:if("CUSTOM"!==o.type){n.next=24;break}return n.next=23,r.paymentMethodsWidget.savePreviousPaymentMethod();case 23:return n.abrupt("return",void this.nativeSDKFacade.customPaymentRequest({methodKey:o.custom.methodKey}));case 24:return i=r.paymentMethodsWidget.getMidBySelectedPaymentMethod().value,n.next=27,r.paymentMethodsWidget.getSelectedPaymentInfo();case 27:a=n.sent,n.t2=a.code,n.next="BRANDPAY"===n.t2?31:"KEYIN"===n.t2?32:33;break;case 31:return n.abrupt("return",this.nativeSDKFacade.brandpayRequestPayment({brandpayPaymentInfo:ex($I({},e),{amount:t,methodId:a.params.methodId,cardInstallmentPlan:a.params.installmentPlan,useCardPoint:a.params.useCardPoint,discountCode:a.params.discountCode,cashReceipt:a.params.cashReceipt,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:a.params.customerEmail}),successUrl:this.appendParams(e.successUrl,{paymentType:"BRANDPAY"})})}));case 32:return n.abrupt("return",this.nativeSDKFacade.keyinRequestPayment({paymentInfo:ex($I(ex($I({},e),{amount:t.value,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:a.params.customerEmail})}),null!=i?{mId:i}:{}),{requesterService:"WIDGET",successUrl:this.appendParams(e.successUrl,{paymentType:"KEYIN"})})}));case 33:return n.next=35,r.paymentMethodsWidget.savePreviousPaymentMethod();case 35:s=this.customerSessionRepository.findCurrentSession(),u=ex($I({},e),{amount:t.value,currency:t.currency,country:t.country,successUrl:this.appendParams(e.successUrl,{paymentType:"NORMAL"}),customerKey:s.getCustomerKey().value,customerId:s.getCustomerKey().value,customerEmail:this.decideCustomerEmail({customerEmailFromMerchant:e.customerEmail,customerEmailFromWidget:a.params.customerEmail}),requesterService:"WIDGET",mId:i}),c=u.pendingUrl,l=tx(u,["pendingUrl"]),n.t3=a.code,n.next="PAYPAL"===n.t3?39:"GCASH"===n.t3||"TOUCHNGO"===n.t3||"BOOST"===n.t3||"BPI"===n.t3||"BILLEASE"===n.t3||"DANA"===n.t3||"ALIPAYHK"===n.t3||"TRUEMONEY"===n.t3||"RABBIT_LINE_PAY"===n.t3||"ALIPAY"===n.t3?40:"TRANSFER"===n.t3||"BANKPAY"===n.t3||"OPENBANKING"===n.t3?41:"VIRTUAL_ACCOUNT"===n.t3?43:"PINPAY"===n.t3?45:"TOSSPAY"===n.t3||"NAVERPAY"===n.t3||"SAMSUNGPAY"===n.t3||"APPLEPAY"===n.t3||"LPAY"===n.t3||"KAKAOPAY"===n.t3||"PAYCO"===n.t3||"SSG"===n.t3?46:"KBPAY"===n.t3?47:"JCB"===n.t3||"UNIONPAY"===n.t3||"MASTER"===n.t3||"VISA"===n.t3||"DINERS"===n.t3||"DISCOVER"===n.t3||"AMEX"===n.t3?48:"MOBILE_PHONE"===n.t3||"CULTURE_GIFT_CERTIFICATE"===n.t3||"GAME_GIFT_CERTIFICATE"===n.t3||"BOOK_GIFT_CERTIFICATE"===n.t3?49:"SHINHAN"===n.t3||"HYUNDAI"===n.t3||"SAMSUNG"===n.t3||"WOORI"===n.t3||"KOOKMIN"===n.t3||"LOTTE"===n.t3||"NONGHYEOP"===n.t3||"HANA"===n.t3||"BC"===n.t3||"KDBBANK"===n.t3||"TOSSBANK"===n.t3||"KAKAOBANK"===n.t3||"SUHYEOP"===n.t3||"JEONBUKBANK"===n.t3||"KBANK"===n.t3||"POST"===n.t3||"SAEMAUL"===n.t3||"CITI"===n.t3||"SAVINGBANK"===n.t3||"JEJUBANK"===n.t3||"GWANGJUBANK"===n.t3||"SHINHYEOP"===n.t3||"IBK_BC"===n.t3?50:51;break;case 39:return n.abrupt("return",this.nativeSDKFacade.requestPayment({paymentMethodCode:"FOREIGN_EASY_PAY",paymentInfo:ex($I({},l),{provider:a.code})}));case 40:return n.abrupt("return",this.nativeSDKFacade.requestPayment({paymentMethodCode:"FOREIGN_EASY_PAY",paymentInfo:ex($I({},l),{provider:a.code,pendingUrl:c})}));case 41:return d={BANKPAY:"BANKPAY",OPENBANKING:"OPENBANKING",TRANSFER:void 0}[a.code],n.abrupt("return",this.nativeSDKFacade.requestPayment({paymentMethodCode:"TRANSFER",paymentInfo:ex($I({},l),{_transferProvider:d})}));case 43:return h=a.params,m=h.depositDeadline,f=h.refundAccount,n.abrupt("return",this.nativeSDKFacade.requestPayment({paymentMethodCode:"VIRTUAL_ACCOUNT",paymentInfo:ex($I({},l),{dueDate:kx(m),refundReceiveAccount:null!=f?{bankCode:f.bankId,accountNumber:f.accountNumber,holderName:f.holderName}:void 0})}));case 45:return n.abrupt("return",this.nativeSDKFacade.requestPayment({paymentMethodCode:"CARD",paymentInfo:ex($I({},l),{cardInstallmentPlan:a.params.installmentPlan,flowMode:"DIRECT",easyPay:a.code,paymentMethodOptions:{pinpay:{pinpayCustomerKey:s.getCustomerKey().value}}})}));case 46:return n.abrupt("return",this.nativeSDKFacade.requestPayment({paymentMethodCode:"CARD",paymentInfo:ex($I({},l),{cardInstallmentPlan:a.params.installmentPlan,flowMode:"DIRECT",easyPay:a.code})}));case 47:return n.abrupt("return",this.nativeSDKFacade.requestPayment({paymentMethodCode:"CARD",paymentInfo:ex($I({},l),{cardInstallmentPlan:a.params.installmentPlan,useCardPoint:a.params.useCardPoint,freeInstallmentPlans:a.params.freeInstallmentPlans,flowMode:"DIRECT",cardCompany:"KOOKMIN",useAppCardOnly:!0,discountCode:a.params.discountCode})}));case 48:return n.abrupt("return",this.nativeSDKFacade.requestPayment({paymentMethodCode:"CARD",paymentInfo:ex($I({},l),{cardInstallmentPlan:a.params.installmentPlan,useInternationalCardOnly:!0,useAppCardOnly:a.params.useAppCardOnly,useCardPoint:a.params.useCardPoint,freeInstallmentPlans:a.params.freeInstallmentPlans,flowMode:"DEFAULT",cardCompany:a.code,discountCode:a.params.discountCode})}));case 49:return n.abrupt("return",this.nativeSDKFacade.requestPayment({paymentMethodCode:a.code,paymentInfo:l}));case 50:return n.abrupt("return",this.nativeSDKFacade.requestPayment({paymentMethodCode:"CARD",paymentInfo:ex($I({},l),{cardInstallmentPlan:a.params.installmentPlan,useInternationalCardOnly:e.useInternationalCardOnly,useAppCardOnly:a.params.useAppCardOnly,useCardPoint:a.params.useCardPoint,freeInstallmentPlans:a.params.freeInstallmentPlans,flowMode:"DIRECT",cardCompany:a.code,discountCode:a.params.discountCode})}));case 51:case"end":return n.stop()}}),n,this,[[4,8],[11,16]])})))}},{key:"isAmountValid",value:function(e){if(Number.isNaN(e))return!1;var t=Number(e);return String(e)===String(t)&&t>=0}},{key:"appendParams",value:function(e,t){var r=new URL(e),n=new URLSearchParams(r.search);return Object.entries(t).map((function(e){var t=g(e,2),r=t[0],o=t[1];n.append(r,o)})),r.search=n.toString(),r.href}},{key:"decideCustomerEmail",value:function(e){var t=e.customerEmailFromWidget,r=e.customerEmailFromMerchant;return Dx(t)?r:t}}]),e}(),LU=function(){function e(t,r,n,o,a,s,u){i(this,e),this.widgetKeyRepository=t,this.widgetVariantKeyRepository=r,this.normalPaymentGatewayMidRepository=n,this.keyinPaymentGatewayMidRepository=o,this.internationalPaymentGatewayMidRepository=a,this.brandpayMidRepository=s,this.externalPaymentWidgetService=u}return s(e,[{key:"resolve",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.externalPaymentWidgetService.fetchWidgetGroupKeys(e.clientKey,e.variantKey);case 2:r=t.sent,n=r.getWidgetVariantKey(),this.widgetVariantKeyRepository.saveCurrentVariantKey(n),this.widgetKeyRepository.saveCurrentClientKey(r.getWidgetClientKey()),null!=r.getNormalMid()&&this.normalPaymentGatewayMidRepository.saveCurrentMid(r.getNormalMid()),null!=r.getKeyinMid()&&this.keyinPaymentGatewayMidRepository.saveCurrentMid(r.getKeyinMid()),null!=r.getInternationalMid()&&this.internationalPaymentGatewayMidRepository.saveCurrentMid(r.getInternationalMid()),null!=r.getBrandpayMid()&&this.brandpayMidRepository.saveCurrentMid(r.getBrandpayMid());case 5:case"end":return t.stop()}}),t,this)})))}},{key:"findCurrentMid",value:function(e){var t=this;if("BRANDPAY"===e.type){var r=BU((function(){return t.brandpayMidRepository.findCurrentMid()}));return Cx(null!=r,"ë¸ëëíì´ MIDê° ì¡´ì¬íì§ ììµëë¤."),r}if("KEYIN"===e.type){var n=BU((function(){return t.keyinPaymentGatewayMidRepository.findCurrentMid()}));return Cx(null!=n,"í¤ì¸ MIDê° ì¡´ì¬íì§ ììµëë¤."),n}var o=BU((function(){return t.internationalPaymentGatewayMidRepository.findCurrentMid()}));if(null!=o)return o;var i=BU((function(){return t.normalPaymentGatewayMidRepository.findCurrentMid()}));return Cx(null!=i,"ì¼ë° MIDê° ì¡´ì¬íì§ ììµëë¤."),i}}]),e}();function BU(e){try{return e()}catch(e){return null}}var _U=function(){function e(t,r,n,o){i(this,e),this.widgetKeyRepository=t,this.widgetVariantKeyRepository=r,this.brandpayCustomerSessionRepository=n,this.externalPaymentWidgetService=o}return s(e,[{key:"resolve",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.widgetKeyRepository.findCurrentClientKey(),r=this.widgetVariantKeyRepository.findCurrentVariantKey(),e.next=4,this.externalPaymentWidgetService.fetchWidgetBrandpayConfig(t,r);case 4:n=e.sent,o=n.highlightColor,i=this.brandpayCustomerSessionRepository.findCurrentSession(),this.brandpayCustomerSessionRepository.saveCurrentSession(ex($I({},i),{getCustomStyle:function(){return ex($I({},i.getCustomStyle()),{highlightColor:null!=o?o:null})}}));case 8:case"end":return e.stop()}}),e,this)})))}}]),e}(),UU=function(){function e(t){i(this,e),this._value=t}return s(e,[{key:"value",get:function(){return this._value}},{key:"equals",value:function(e){return this.value===e.value}},{key:"isTestKey",value:function(){return this.value.startsWith("test_")}},{key:"isWidgetKey",value:function(){return this.value.startsWith("test_gck")||this.value.startsWith("live_gck")}},{key:"isAPIIndividualKey",value:function(){return this.value.startsWith("test_ck")||this.value.startsWith("live_ck")}}]),e}(),FU=function(){function e(t){i(this,e),this.value=t}return s(e,[{key:"equals",value:function(e){return this.value===e.value}},{key:"isAnonymous",value:function(){return this.value===e.ANONYMOUS}}]),e}();FU.ANONYMOUS="@@ANONYMOUS";var WU=FU,qU=function(){function e(t){i(this,e),this.value=t;var r=String(t);Cx(null!=r&&/^[A-Za-z0-9-_=.@]{2,50}$/.test(r),new Gx.InvalidCustomerKeyError),Cx(!this.isSecretKey(r),new Gx.InsecureKeyUsageError),this.value=r}return s(e,[{key:"equals",value:function(e){return this.value===e.value}},{key:"isAnonymous",value:function(){return this.value===WU.ANONYMOUS}},{key:"isSecretKey",value:function(e){return e.startsWith("test_sk")||e.startsWith("live_sk")||e.startsWith("test_gsk")||e.startsWith("live_gsk")}}]),e}();qU.ANONYMOUS="@@ANONYMOUS";var GU=function(e){c(r,e);var t=v(r);function r(e,n){var o;return i(this,r),(o=t.call(this,null!=n?n:"ì í¨íì§ ìì í´ë¼ì´ì¸í¸ í¤ìëë¤.")).name="InvalidClientKeyError",o.clientKey=e,o}return s(r)}(f(Error)),VU=function(e){c(r,e);var t=v(r);function r(){var e;return i(this,r),(e=t.call(this,"ë¤í¸ìí¬ ì¤ë¥ê° ë°ìíìµëë¤.")).name="NetworkError",e}return s(r)}(f(Error)),YU={};function HU(e){var t=e.methodCode,r=e.requestParams,n=function(e){if(function(e){return Object.keys(zU).includes(e)}(e))return zU[e];var t=e.toUpperCase();return function(e){return Object.values(zU).includes(e)}(t)?t:"CARD"}(t),o=function(e,t){if(e===zU.í ì¤íì´){var r=t;r.cardCompany;var n=tx(r,["cardCompany"]);return{methodCode:zU.ì¹´ë,params:ex($I({},n),{flowMode:"DIRECT",easyPay:"TOSSPAY"})}}return{methodCode:e,params:t}}(n,r),i=o.params;return"flowMode"in i&&null!=i.flowMode&&(i.flowMode=i.flowMode.toUpperCase()),"windowTarget"in i&&null!=i.windowTarget&&(i.windowTarget=rF(i.windowTarget)),{methodCode:o.methodCode,requestParams:i}}function jU(e){var t=e;return"windowTarget"in t&&null!=t.windowTarget&&(t.windowTarget=rF(t.windowTarget)),{params:t}}nx(YU,{getMidByClientKeyTransformedIntoWidgetKey:function(){return QU},isClientKeyTransformedIntoWidgetKey:function(){return JU},parseBillingAuthInfo:function(){return jU},parsePaymentParameters:function(){return HU}});var zU={"ì¹´ë":"CARD","ê°ìê³ì¢":"VIRTUAL_ACCOUNT","í´ëí°":"MOBILE_PHONE","í ì¤íì´":"TOSSPAY","í ì¤ê²°ì ":"TOSSPAY","ê³ì¢ì´ì²´":"TRANSFER","ë¬¸íìíê¶":"CULTURE_GIFT_CERTIFICATE","ê²ìë¬¸íìíê¶":"GAME_GIFT_CERTIFICATE","ëìë¬¸íìíê¶":"BOOK_GIFT_CERTIFICATE","í´ì¸ê°í¸ê²°ì ":"FOREIGN_EASY_PAY","ë¯¸ì í":""};function JU(e){return XU(e)||ZU(e)}function QU(e){var t,r;if(XU(e)){var n=$U.find((function(t){return t.liveClientKey===e}));return null!=(t=null==n?void 0:n.mid)?t:null}if(ZU(e)){var o=$U.find((function(t){return t.testClientKey===e}));return null!=(r=null==o?void 0:o.tmid)?r:null}return null}function XU(e){return tF.includes(e)}function ZU(e){return eF.includes(e)}var $U=[{mid:"idfarm9nnn",tmid:"tidfarm9nnn",liveClientKey:"live_ck_zZ0RnYX2w532b7Z9Yl3NeyqApQEJ",testClientKey:"test_ck_MGjLJoQ1aVZZqQjv1eJVw6KYe2RN"},{mid:"staygolf",tmid:"tstaygolf",liveClientKey:"live_ck_qLlDJaYngrokMekX7YlrezGdRpXx",testClientKey:"test_ck_dP9BRQmyarYnWQpwKM28J07KzLNk"},{mid:"lookpi1osy",tmid:"tlookpi1osy",liveClientKey:"live_ck_OEP59LybZ8Bv9gA6MQB86GYo7pRe",testClientKey:"test_ck_N5OWRapdA8dwEO67QGbro1zEqZKL"}],eF=$U.map((function(e){return e.testClientKey})),tF=$U.map((function(e){return e.liveClientKey}));function rF(e){return e.toLowerCase()}var nF=function(){function e(t,r,n,o){i(this,e),this.paymentGatewayCustomerSessionRepository=t,this.clientKeyRepository=r,this.customerSessionFactory=n,this.tracingIdRepository=o}return s(e,[{key:"execute",value:function(e){null!=e.gtid&&this.tracingIdRepository.saveGlobalTraceId(e.gtid),this.clientKeyRepository.saveCurrentClientKey(e.clientKey);var t=this.customerSessionFactory.createPaymentGatewayCustomerSession({customerKey:e.customerKey});return this.paymentGatewayCustomerSessionRepository.saveCurrentSession(t),this.paymentGatewayCustomerSessionRepository.findCurrentSession()}}]),e}(),oF=function(){function e(t,r,n,o,a,s){i(this,e),this.paymentGatewayCustomerSessionRepository=t,this.externalPaymentGatewayService=r,this.checkoutProductLauncherFactory=n,this.productStageRepository=o,this.clientKeyRepository=a,this.mutexRepository=s}return s(e,[{key:"execute",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function r(){var n,o,i,a,s,u,c,l,d,h,m,f,p,y,v,g,w,S,R=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((n=this.mutexRepository.findCurrentMutex()).isLocked()){r.next=34;break}return r.prev=2,r.next=5,n.acquire();case 5:return o=new Gx.Task(null),r.prev=6,i=this.clientKeyRepository.findCurrentClientKey(),a=$I({},t),JU(i.value)&&(Cx(null!=(s=QU(i.value)),new GU(i.value)),a.mId=s),u=this.paymentGatewayCustomerSessionRepository.findCurrentSession(),c=this.parseIsPromise(a),l="MOBILE"===u.getDeviceType(),d="flowMode"in a&&"DIRECT"===a.flowMode,h="FOREIGN_EASY_PAY"===e,m="self"===a.windowTarget,f=this.getDefaultLanguage(e,a),Cx(!(c&&l),new Gx.NotSupportedPromiseError("ëª¨ë°ì¼ íë©´ììë Promise ë°©ìì ì§ìíì§ ììµëë¤.")),Cx(!(c&&m),new Gx.NotSupportedPromiseError('windowTarget="self"ë Promise ë°©ìì ì§ìíì§ ììµëë¤.')),Cx(!(c&&h),new Gx.NotSupportedPromiseError("í´ì¸ê°í¸ê²°ì ë Promise ë°©ìì ì§ìíì§ ììµëë¤.")),p=this.checkoutProductLauncherFactory.getLauncher({target:l||m||h?"self":d?"full-iframe":"iframe"}),o.onCancel((function(){return p.shutdown()})),r.next=15,this.externalPaymentGatewayService.validatePaymentRequest({clientKey:i,isMobile:l,isPromise:c,isWidgetSession:u.isWidgetSession(),method:e,request:ex($I({},a),{language:f})});case 15:return y=r.sent,v=y.paymentToken,g=this.decideProductBuilder({isDirect:d,isMobile:l}),w=new g(this.clientKeyRepository.findCurrentClientKey().isTestKey()?this.productStageRepository.getPretestProductStage():this.productStageRepository.getLiveProductStage()).setClientKeyProvider((function(){return Promise.resolve(R.clientKeyRepository.findCurrentClientKey().value)})).setIsMobileProvider((function(){return Promise.resolve(l)})).setIsPromiseProvider((function(){return Promise.resolve(c)})).setGlobalTraceIdProvider((function(){return Promise.resolve(u.getGlobalTraceId())})).setPaymentTokenProvider((function(){return Promise.resolve(v)})).onCancel((function(){return p.shutdown(),o.cancel(new Gx.UserCancelError),Promise.resolve()})).onSuccess((function(e){return ax(R,[e],regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.paymentKey,n=t.orderId,i=t.amount,e.next=3,p.shutdown();case 3:o.finish({paymentKey:r,orderId:n,amount:i});case 4:case"end":return e.stop()}}),e)})))})).onFail((function(e){return ax(R,[e],regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.orderId,n=t.code,i=t.message,e.next=3,p.shutdown();case 3:o.cancel(new Gx.PaymentRequestFailError({orderId:r,code:n,message:i}));case 4:case"end":return e.stop()}}),e)})))})),null!=a.mId&&w.setMIdProvider((function(){var e;return Promise.resolve(null!=(e=a.mId)?e:null)})),S=w.build(),r.next=23,p.launch(S);case 23:r.next=28;break;case 25:r.prev=25,r.t0=r.catch(6),o.cancel(r.t0);case 28:return r.next=30,o.wait();case 30:return r.abrupt("return",r.sent);case 31:return r.prev=31,n.release(),r.finish(31);case 34:case"end":return r.stop()}}),r,this,[[2,,31,34],[6,25]])})))}},{key:"decideProductBuilder",value:function(e){var t=e.isDirect;return e.isMobile?t?Gx.V1PaymentGatewayRequestMobileCardPaymentDirectCheckoutProductBuilder:Gx.V1PaymentGatewayRequestMobilePaymentWindowCheckoutProductBuilder:t?Gx.V1PaymentGatewayRequestPCCardPaymentDirectCheckoutProductBuilder:Gx.V1PaymentGatewayRequestPCPaymentWindowCheckoutProductBuilder}},{key:"parseIsPromise",value:function(e){if("pendingUrl"in e&&void 0!==e.pendingUrl)return!1;var t="successUrl"in e&&void 0!==e.successUrl,r="failUrl"in e&&void 0!==e.failUrl;return!t||!r}},{key:"isInternationalCardOnly",value:function(e,t){return"CARD"===e&&"useInternationalCardOnly"in t&&!0===t.useInternationalCardOnly}},{key:"getDefaultLanguage",value:function(e,t){if("language"in t&&null!=t.language)return t.language;if(this.isInternationalCardOnly(e,t)){if("JPY"===t.currency)return"JA";if("USD"===t.currency)return"EN"}}}]),e}(),iF=function(){function e(t,r){i(this,e),this.checkoutProductLauncherRepository=t,this.mutexRepository=r}return s(e,[{key:"execute",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.mutexRepository.findCurrentMutex(),r=this.checkoutProductLauncherRepository.getActiveLauncher(),e.next=3,null==r?void 0:r.shutdown();case 3:t.release();case 4:case"end":return e.stop()}}),e,this)})))}}]),e}(),aF=function(){function e(t,r,n,o,a,s){i(this,e),this.customerSessionRepository=t,this.externalPaymentGatewayService=r,this.checkoutProductLauncherFactory=n,this.productStageRepository=o,this.clientKeyRepository=a,this.mutexRepository=s}return s(e,[{key:"execute",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function r(){var n,o,i,a,s,u,c,l,d,h=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((n=this.mutexRepository.findCurrentMutex()).isLocked()){r.next=27;break}return r.prev=2,r.next=5,n.acquire();case 5:return o=new Gx.Task(null),r.prev=6,i=t.customerKey,a=this.clientKeyRepository.findCurrentClientKey(),s="MOBILE"===this.customerSessionRepository.findCurrentSession().getDeviceType(),r.next=10,this.externalPaymentGatewayService.isValidBillingAuthenticationRequest({clientKey:a,isMobile:s,request:ex($I({},t),{method:e})});case 10:return u="self"===t.windowTarget,c=this.checkoutProductLauncherFactory.getLauncher({target:s||u?"self":"iframe"}),o.onCancel((function(){return c.shutdown()})),l=this.decideProductBuilder({isMobile:s}),d=new l(a.isTestKey()?this.productStageRepository.getPretestProductStage():this.productStageRepository.getLiveProductStage()).setClientKeyProvider((function(){return ax(h,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.clientKeyRepository.findCurrentClientKey().value);case 1:case"end":return e.stop()}}),e,this)})))})).setGtidProvider((function(){return ax(h,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.customerSessionRepository.findCurrentSession().getGlobalTraceId());case 1:case"end":return e.stop()}}),e,this)})))})).setIsMobileProvider((function(){return ax(h,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s);case 1:case"end":return e.stop()}}),e)})))})).setPayloadProvider((function(){return ax(h,null,regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",JSON.stringify(ex($I({},t),{referer:this.customerSessionRepository.findCurrentSession().getWindow().getOrigin(),payMethod:e,customerKey:i.value})));case 1:case"end":return r.stop()}}),r,this)})))})).onCancel((function(){return ax(h,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.shutdown();case 2:o.cancel(new Gx.UserCancelError);case 3:case"end":return e.stop()}}),e)})))})).build(),r.next=15,c.launch(d);case 15:return r.next=17,o.wait();case 17:return r.abrupt("return",r.sent);case 20:r.prev=20,r.t0=r.catch(6),o.cancel(r.t0);case 23:return r.abrupt("return",o.wait());case 24:return r.prev=24,n.release(),r.finish(24);case 27:case"end":return r.stop()}}),r,this,[[2,,24,27],[6,20]])})))}},{key:"decideProductBuilder",value:function(e){return e.isMobile?Gx.V1PaymentGatewayRequestBillingAuthMobileCheckoutProductBuilder:Gx.V1PaymentGatewayRequestBillingAuthPcCheckoutProductBuilder}}]),e}(),sF=function(){function e(){i(this,e),this.amount=null,this.subscribers=[]}return s(e,[{key:"addSubscriber",value:function(e){this.subscribers.push(e)}},{key:"setAmount",value:function(e){null!=this.amount&&this.amount.equals(e)||(this.amount=e,this.subscribers.map((function(t){return t.subscribeAmount(e)})))}},{key:"getAmount",value:function(){return this.amount}}]),e}(),uF=function(){function e(t){i(this,e),this.logger=t}return s(e,[{key:"openBridge",value:function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.targetWindow,n=t.runtimeWindow,o=t.reconnectTimeout,e.next=3,qO({targetWindow:r,runtimeWindow:n,reconnectTimeout:o});case 3:return i=e.sent,e.abrupt("return",(i.subscribeDebugger((function(e){return ax(a,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{null!=e&&this.logger.info(JSON.stringify(e))}catch(e){}case 1:case"end":return t.stop()}}),t,this)})))})),i.subscribeError((function(e){return ax(a,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null==e){t.next=5;break}if(!(e instanceof Error)){t.next=4;break}return t.abrupt("return",void this.logger.error(JSON.stringify(e.message),{stack:null!=(r=null==e?void 0:e.stack)?r:""}));case 4:this.logger.error(JSON.stringify(e));case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])})))})),i));case 5:case"end":return e.stop()}}),e)})))}}]),e}();function cF(){return"undefined"!=typeof window&&(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window)||!/MSIE|Trident/i.test(window.navigator.userAgent)&&/android/i.test(window.navigator.userAgent))}var lF=function(){function e(){i(this,e),this.key="tosspayments/ocr-license-".concat(Math.random().toString(36).substring(2)),this.storage=new nM.MemoryStorage}return s(e,[{key:"findCurrentOcrLicense",value:function(){return this.storage.get(this.key)}},{key:"saveOcrLicense",value:function(e){this.storage.set(this.key,e)}}]),e}(),dF=function(){function e(){i(this,e),this.key="tosspayments/custom-context-".concat(Math.random().toString(36).substring(2)),this.storage=new nM.MemoryStorage}return s(e,[{key:"findCustomContext",value:function(){var e;return null!=(e=this.storage.get(this.key))?e:"brandpay"}},{key:"saveCustomContext",value:function(e){this.storage.set(this.key,e)}}]),e}(),hF=function(){function e(){i(this,e)}return s(e,[{key:"publishBrandpayPaymentMethodUpdated",value:function(e){var t=new CustomEvent("paymentMethodUpdate",{detail:{paymentMethods:e}});window.dispatchEvent(t)}},{key:"publishBrandpayCustomerUpdated",value:function(){var e=new CustomEvent("customerUpdate",{detail:{}});window.dispatchEvent(e)}}]),e}(),mF=function(){function e(){i(this,e),this.key="tosspayments/variant-key-".concat(Math.random().toString(36).substring(2)),this.storage=new nM.MemoryStorage}return s(e,[{key:"findCurrentVariantKey",value:function(){var e=this.storage.get(this.key);return Cx(null!=e,new vU("4015","ì¡´ì¬íì§ ìë ìì ¯")),e}},{key:"saveCurrentVariantKey",value:function(e){this.storage.set(this.key,e)}}]),e}();function fF(e,t){for(var r in t)e.style[r]=t[r]}function pF(e,t){var r=document.getElementById(t);if(null!=r)return r;var n=document.createElement(e);return n.id=t,n}var yF="brandpay-loader-style",vF="#3188ff",gF={musinsa:vF,simsale:"#fd2f6f",golfzon:"#fe8320",giftistar:"#ffa400"};var wF=$I({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",zIndex:"9999999",transform:"translateZ(0)",backgroundColor:"rgba(0, 0, 0, 0.6)",margin:"0",padding:"0"},cF()?{background:"none"}:void 0),SF="___tosspayments_brandpay_dimmer___";function RF(e){var t=e.showDimmer,r=e.highlightColor,n=e.theme,o=bF();if(null!=o)return fF(o,wF),o;var i=function(e,t){var r=document.createElement("style"),n=document.createElement("div");return r.id=yF,r.innerHTML=function(e,t){var r;return"@keyframes brandpay-rotate{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes brandpay-turn{0%{stroke-dashoffset:180}50%{stroke-dashoffset:45;transform:rotate(108deg)}to{stroke-dashoffset:180;transform:rotate(1turn)}}.brandpay-loader{position:absolute;top:50%;left:50%;margin-left:-24px;margin-top:-24px;display:inline-flex;flex-direction:column;align-items:center}.brandpay-loader>svg{display:block;margin:2px;width:48px;height:48px;stroke:".concat(null!=t?null!=(r=gF[t])?r:vF:null!=e?e:vF,";animation:brandpay-rotate 1.8s linear infinite forwards}.brandpay-loader>svg>circle{stroke-dasharray:180;stroke-dashoffset:0;transform-origin:center;animation:brandpay-turn 1.8s ease-in-out infinite forwards}")}(e,t),null==document.querySelector("#".concat(yF))&&document.head.appendChild(r),n.id="brandpay-loader",n.classList.add("brandpay-loader"),n.innerHTML='<svg width="48" height="48" viewBox="0 0 66 66"><circle fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"/></svg>',n}(r,n),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.styles,r=pF("div",SF);return fF(r,$I($I({},wF),t)),r}();return a.appendChild(i),t&&document.body.appendChild(a),a}function bF(){return document.querySelector("#".concat(SF))}var PF={width:"1px",height:"1px",top:"-9999px",left:"-9999px"},EF=cF()?{position:"absolute",border:"none",width:"100%",height:"100%",top:"0",left:"0",transform:"none"}:{position:"absolute",border:"none",top:"50%",left:"50%",width:"375px",height:"667px",marginLeft:"-187.5px",marginTop:"-333.5px",backgroundColor:"#ffffff"},CF="__tosspayments_brandpay_iframe_v2__",kF=null;function AF(e,t){var r,n,o=t.container,i=t.permissions,a=null!=(r=TF())?r:function(){var e=document.createElement("iframe");return e.id=CF,xF(e),{iframe:e}}().iframe;if(a.removeAttribute("sandbox"),i.length>0){var s=i.map((function(e){var t=e.name,r=e.allowOrigin;return"".concat(t," ").concat(r)})).join("; ");a.setAttribute("allow",s)}return null==kF&&o.appendChild(a),null==(n=a.contentWindow)||n.location.replace(e),(kF=a).title="í ì¤íì´ë¨¼ì¸  ë¸ëëíì´",kF.addEventListener("load",NF),{iframe:a}}function IF(){return kF}function xF(e){fF(e,EF)}function TF(){return document.querySelector("#".concat(CF))}function NF(){null!=kF&&xF(kF)}var MF=function(){function e(t,r){i(this,e),this.Bridge=t,this.customContextRepository=r,this.mutex=new nM.AsyncSemaMutex}return s(e,[{key:"launch",value:function(e){var t=this;return new Promise((function(n){return ax(t,null,regeneratorRuntime.mark((function t(){var o,i,a,s,u,c,l,d,h,m,f,p=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cleanup();case 2:return i=new Map(e.getParameterResolvers()),t.next=5,null==(o=i.get("customStyle"))?void 0:o();case 5:return a=t.sent,s=e.getProductURL(),u=[],"samsung_electronics"===this.customContextRepository.findCustomContext()&&(c=new URL(s),l="".concat(c.protocol,"//").concat(c.host,"/"),u.push({name:"camera",allowOrigin:l})),AF(s,{container:RF({showDimmer:!0,highlightColor:null==a?void 0:a.highlightColor,theme:null==a?void 0:a.theme}),permissions:u}),t.next=12,this.Bridge.openBridge({targetWindow:IF().contentWindow,runtimeWindow:window});case 12:(d=t.sent).handleRequest("GET_PARAMETER",(function(e){return ax(p,[e],regeneratorRuntime.mark((function e(t){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,null==(o=i.get(n))){e.next=12;break}return e.prev=3,e.next=6,o();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",null!=e.t0&&"object"==r(e.t0)&&"code"in e.t0&&"message"in e.t0?e.t0:void 0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))})),d.subscribe("LIFECYCLE",(function(e){return ax(p,[e],regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"READY"!==t.name||n();case 2:case"end":return e.stop()}}),e)})))})),h=b(e.getEventListeners());try{for(f=function(){var e=g(m.value,2),t=e[0],r=e[1];d.subscribe(t,(function(e){return r(e)}))},h.s();!(m=h.n()).done;)f()}catch(e){h.e(e)}finally{h.f()}e.onExecuteQuery((function(e,t){return d.request(e,t,{timeout:45e3})})),e.onExecuteCommand((function(e,t){return d.request(e,t,{timeout:45e3})})),e.onFocus((function(){var e;null==(e=IF())||e.scrollIntoView()}));case 17:case"end":return t.stop()}}),t,this)})))}))}},{key:"shutdown",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mutex.acquire();case 2:return e.next=4,this.cleanup();case 4:!function(){var e=TF();null!=e&&fF(e,PF)}(),function(){var e=bF();null!=e&&fF(e,{width:"1px",height:"1px",top:"-9999px",left:"-9999px"})}(),this.mutex.release();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"cleanup",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var t,r=TF();null!=r?(null==(t=r.contentWindow)||t.location.replace("https://pages.tosspayments.com/blank.html"),r.onload=function(){r.onload=null,r.setAttribute("sandbox",""),e()},null==kF||kF.removeEventListener("load",NF)):e()}));case 2:case"end":return e.stop()}}),e)})))}}]),e}(),OF={menubar:!0,location:!1,resizable:!0,scrollbars:!0,status:!0,channelmode:!0};var DF=function(){function e(t){i(this,e),this.Bridge=t,this.popup=null,this.unsubscribePopupClosed=null}return s(e,[{key:"launch",value:function(e){var t=this;return new Promise((function(r){return ax(t,null,regeneratorRuntime.mark((function t(){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.cleanup();case 2:return null==this.popup?(this.popup=this.createPopup(e.getProductURL()),Cx(null!=this.popup,new Gx.NeedAllowPopupError)):(this.popup.location.href=e.getProductURL(),this.popup.focus()),t.next=5,this.openBridge();case 5:n=t.sent,this.connectBridge(n,e,(function(){r()})),this.unsubscribePopupClosed=this.subscribePopupClosed((function(){var t,r=b(e.getEventListeners());try{for(r.s();!(t=r.n()).done;){var n=g(t.value,2),o=n[0],i=n[1];"CLOSE_REQUEST"===o&&i()}}catch(e){r.e(e)}finally{r.f()}})),e.onFocus((function(){var e;null==(e=o.popup)||e.focus()}));case 7:case"end":return t.stop()}}),t,this)})))}))}},{key:"shutdown",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.cleanup(),null==(t=this.popup)||t.close(),this.popup=null;case 1:case"end":return e.stop()}}),e,this)})))}},{key:"cleanup",value:function(){var e;null==(e=this.unsubscribePopupClosed)||e.call(this)}},{key:"createPopup",value:function(e){return function(e,t){var r,n=t,o=n.title,i=tx(n,["title"]);return window.open(e,o,(r=$I($I({},OF),i),Object.entries(r).map((function(e){var t=g(e,2),r=t[0],n=t[1];return"boolean"!=typeof n?"".concat(r,"=").concat(n):"".concat(r,!0===n?"=yes":"=no")})).join(",")))}(e,{title:"ë¸ëëíì´",width:375,height:667})}},{key:"openBridge",value:function(){return this.Bridge.openBridge({targetWindow:this.popup,runtimeWindow:window})}},{key:"connectBridge",value:function(e,t,r){return ax(this,null,regeneratorRuntime.mark((function n(){var o,i,a,s,u=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=new Map(t.getParameterResolvers()),e.handleRequest("GET_PARAMETER",(function(e){return ax(u,[e],regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,null==(n=o.get(r))){e.next=12;break}return e.prev=3,e.next=6,n();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))})),e.subscribe("LIFECYCLE",(function(e){return ax(u,[e],regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"READY"!==t.name||r();case 2:case"end":return e.stop()}}),e)})))})),i=b(t.getEventListeners());try{for(s=function(){var t=g(a.value,2),r=t[0],n=t[1];e.subscribe(r,(function(e){return n(e)}))},i.s();!(a=i.n()).done;)s()}catch(e){i.e(e)}finally{i.f()}t.onExecuteQuery((function(t,r){return e.request(t,r,{timeout:45e3})})),t.onExecuteCommand((function(t,r){return e.request(t,r,{timeout:45e3})}));case 5:case"end":return n.stop()}}),n)})))}},{key:"subscribePopupClosed",value:function(e){var t=this,r=setInterval((function(){var r;(null==(r=t.popup)?void 0:r.closed)&&e()}),1e3);return function(){clearInterval(r)}}}],[{key:"getInstance",value:function(t){return null==e.instance&&(e.instance=new e(t)),e.instance}}]),e}();DF.instance=null;var KF=DF;function LF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.styles,r=pF("div","___tosspayments_dimmer___");return fF(r,$I({position:"fixed",width:"100%",height:"100%",top:"0",left:"0",zIndex:"9999999",transform:"translateZ(0)",backgroundColor:"rgba(0, 0, 0, 0.6)",margin:"0",padding:"0"},t)),r}var BF="___tosspayments_iframe___";function _F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.styles,r=pF("iframe",BF);return r.name=BF,fF(r,$I({border:"none"},t)),r}var UF=[];function FF(e){var t,r=e.data,n=b(UF);try{for(n.s();!(t=n.n()).done;){(0,t.value)({target:r.window,type:r.type,params:r.params})}}catch(e){n.e(e)}finally{n.f()}}var WF=function(e){1===(UF=[].concat(w(UF),[e])).length&&window.addEventListener("message",FF)},qF=function(){UF=[],window.removeEventListener("message",FF)},GF=function(){function e(){i(this,e),this.dimmer=null}return s(e,[{key:"launch",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u,c,l,d,h,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.dimmer=LF(),(r=_F({styles:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}})).title="í ì¤íì´ë¨¼ì¸  ì ìê²°ì ",n={},o=b(e.getParameterResolvers()),t.prev=5,o.s();case 7:if((i=o.n()).done){t.next=14;break}return a=g(i.value,2),s=a[0],u=a[1],t.next=11,u();case 11:n[s]=t.sent;case 12:t.next=7;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),o.e(t.t0);case 19:return t.prev=19,o.f(),t.finish(19);case 22:c="",!0!==n.isPromise?((l=n).isPromise,c=Nx(tx(l,["isPromise"]))):c=Nx(n),r.src=e.getProductURL()+c,this.dimmer.appendChild(r),document.body.appendChild(this.dimmer),d=b(e.getEventListeners());try{for(m=function(){var e=g(h.value,2),t=e[0],r=e[1];WF((function(e){var n=e.target,o=e.type,i=e.params;"LEGACY"===n&&o===t&&r(i)}))},d.s();!(h=d.n()).done;)m()}catch(e){d.e(e)}finally{d.f()}e.onFocus((function(){null==r||r.scrollIntoView()}));case 28:case"end":return t.stop()}}),t,this,[[5,16,19,22]])})))}},{key:"shutdown",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qF(),this.dimmer&&(document.body.removeChild(this.dimmer),this.dimmer=null);case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),VF=function(){function e(){i(this,e),this.dimmer=null}return s(e,[{key:"launch",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u,c,l,d,h,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.dimmer=LF(),r=function(e){var t=e.width,r=e.height,n=e.styles;return _F({styles:$I({position:"absolute",border:"none",top:"50%",left:"50%",width:"".concat(t,"px"),height:"".concat(r,"px"),marginLeft:"-".concat(t/2,"px"),marginTop:"-".concat(r/2,"px"),backgroundColor:"#707070"},n)})}({width:650,height:650,styles:{borderRadius:"20px"}}),r.title="í ì¤íì´ë¨¼ì¸  ì ìê²°ì ",n={},o=b(e.getParameterResolvers()),t.prev=5,o.s();case 7:if((i=o.n()).done){t.next=14;break}return a=g(i.value,2),s=a[0],u=a[1],t.next=11,u();case 11:n[s]=t.sent;case 12:t.next=7;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(5),o.e(t.t0);case 19:return t.prev=19,o.f(),t.finish(19);case 22:c="",!0!==n.isPromise?((l=n).isPromise,c=Nx(tx(l,["isPromise"]))):c=Nx(n),r.src=e.getProductURL()+c,this.dimmer.appendChild(r),document.body.appendChild(this.dimmer),d=b(e.getEventListeners());try{for(m=function(){var e=g(h.value,2),t=e[0],r=e[1];WF((function(e){var n=e.target,o=e.type,i=e.params;"LEGACY"===n&&o===t&&r(i)}))},d.s();!(h=d.n()).done;)m()}catch(e){d.e(e)}finally{d.f()}e.onFocus((function(){null==r||r.scrollIntoView()}));case 28:case"end":return t.stop()}}),t,this,[[5,16,19,22]])})))}},{key:"shutdown",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:qF(),this.dimmer&&(document.body.removeChild(this.dimmer),this.dimmer=null);case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),YF=function(){function e(){i(this,e)}return s(e,[{key:"launch",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i,a,s,u,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={},n=b(e.getParameterResolvers()),t.prev=2,n.s();case 4:if((o=n.n()).done){t.next=11;break}return i=g(o.value,2),a=i[0],s=i[1],t.next=8,s();case 8:r[a]=t.sent;case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),n.e(t.t0);case 16:return t.prev=16,n.f(),t.finish(16);case 19:this.subscribeBFCacheRestoreEvent().then((function(){var t,r=b(e.getEventListeners());try{for(r.s();!(t=r.n()).done;){var n=g(t.value,2),o=n[0],i=n[1];"cancel"===o&&i()}}catch(e){r.e(e)}finally{r.f()}})),u="",!0!==r.isPromise?((c=r).isPromise,u=Nx(tx(c,["isPromise"]))):u=Nx(r),location.href=e.getProductURL()+u;case 23:case"end":return t.stop()}}),t,this,[[2,13,16,19]])})))}},{key:"shutdown",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}},{key:"subscribeBFCacheRestoreEvent",value:function(){return new Promise((function(e){window.addEventListener("pageshow",(function t(r){r.persisted&&(window.removeEventListener("pageshow",t),e())}))}))}}]),e}(),HF=function(){function e(t){var r,n,o,a=t.src,s=t.title,u=t.styles,c=t.id,l=t.options;i(this,e),this.wrapper=this.createWrapper(),this.skeleton=null,this.skeletonOption={boxCount:0,padding:0,boxHeight:56},this.observers=[];var d=document.createElement("iframe");d.setAttribute("src",a),d.setAttribute("title",s),null!=c&&d.setAttribute("id",c),this.iframe=d,null!=u&&this.updateStyle(u),null!=(null==(r=null==l?void 0:l.skeleton)?void 0:r.boxCount)&&l.skeleton.boxCount>0&&(this.skeletonOption.boxCount=l.skeleton.boxCount,this.skeletonOption.padding=null!=(n=l.skeleton.padding)?n:0,this.skeletonOption.boxHeight=null!=(o=l.skeleton.boxHeight)?o:56,this.skeleton=this.createSkeleton(),this.wrapper.appendChild(this.skeleton))}return s(e,[{key:"onIframeRemoved",value:function(e){var t=this,r=new MutationObserver((function(r,n){var o,i=b(r);try{for(i.s();!(o=i.n()).done;){var a=o.value;"childList"===a.type&&a.removedNodes.forEach((function(r){r.contains(t.iframe)&&(e(),n.disconnect())}))}}catch(e){i.e(e)}finally{i.f()}}));r.observe(document.body,{childList:!0,subtree:!0}),this.observers.push(r)}},{key:"updateStyle",value:function(e){for(var t in e)this.iframe.style[t]=e[t]}},{key:"mount",value:function(e){e.innerHTML="",this.wrapper.appendChild(this.iframe),e.appendChild(this.wrapper)}},{key:"cleanup",value:function(){this.observers.forEach((function(e){return e.disconnect()})),this.observers=[],null!=this.skeleton&&this.hideSkeleton()}},{key:"createWrapper",value:function(){var e=document.createElement("div");return e.classList.add("__tosspayments_payment_widget_iframe_v2_wrapper__"),e.setAttribute("style","position: relative; width: 100%;"),e}},{key:"createSkeleton",value:function(){var e=document.createElement("div");return e.classList.add("__tosspayments_payment_widget_iframe_v2_skeleton__"),e.setAttribute("style","position: absolute; top: 0; left: 0; width: 100%; display: none; flex-direction: column; padding: ".concat(this.skeletonOption.padding,"px; box-sizing: border-box;")),e.appendChild(this.createTextSkeletonContainer()),e.appendChild(this.createBoxSkeletonContainer()),e}},{key:"hideSkeleton",value:function(){clearTimeout(this.skeletonTimeoutId),this.skeletonTimeoutId=void 0,clearInterval(this.skeletonAnimationIntervalId),this.skeletonAnimationIntervalId=void 0,Cx(null!=this.skeleton,new Error("options.skeletonBoxCountë¥¼ ë£ì´ì£¼ì¸ì.")),this.skeleton.style.display="none",this.wrapper.style.height="auto"}},{key:"showSkeleton",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null!=e.onTimeout&&(this.skeletonTimeoutId=window.setTimeout(e.onTimeout.fn,e.onTimeout.delay)),Cx(null!=this.skeleton,new Error("options.skeletonBoxCountë¥¼ ë£ì´ì£¼ì¸ì.")),this.skeleton.style.display="flex",this.wrapper.style.height="".concat(this.getSkeletonHeight(),"px")}},{key:"showFallback",value:function(){this.wrapper.innerHTML="",this.wrapper.appendChild(this.createFallback())}},{key:"createTextSkeletonContainer",value:function(){var e=document.createElement("div");e.setAttribute("style","height: 20px; text-align: left; margin-bottom: 20px;");var t=document.createElement("div");t.setAttribute("style","width: 40%; height: ".concat(this.skeletonOption.boxHeight/2,"px !important; background: linear-gradient(96deg, #f7f7f7 0%, hsl(0, 0%, 99%) 100%); border-radius: 8px;")),t.animate([{opacity:1},{opacity:0}],{duration:2e3,easing:"ease-in",fill:"forwards"}),e.appendChild(t);var r=["ê²°ì ìë¨ íì¸ ì¤","ì ìë§ ê¸°ë¤ë ¤ì£¼ì¸ì"],n=0;return this.skeletonAnimationIntervalId=setInterval((function(){e.innerHTML="";var t=document.createElement("span");t.textContent=r[n],t.setAttribute("style","color: #4e5968; font-size: 17px; font-weight: bold;"),t.animate([{opacity:0},{opacity:1},{opacity:0}],{duration:2e3,easing:"ease-in-out",iterations:Number.POSITIVE_INFINITY}),e.appendChild(t),n=(n+1)%r.length}),2e3),e}},{key:"createBoxSkeletonContainer",value:function(){var e=document.createElement("div");e.setAttribute("style","display: flex; flex-direction: column; gap: 8px;");var t=document.createElement("div");return t.setAttribute("style","width: 100%; height: ".concat(this.skeletonOption.boxHeight,"px !important; background: linear-gradient(96deg, rgba(160, 174, 189, 0.2) 0%, rgba(160, 174, 189, 0) 100%); border-radius: 8px;")),Array.from({length:this.skeletonOption.boxCount}).forEach((function(){return e.appendChild(t.cloneNode(!0))})),e}},{key:"createFallback",value:function(){var e=document.createElement("div");e.setAttribute("style","height: 280px; display: flex; flex-direction: column; justify-content: center; align-items: center;");var t=document.createElement("img");t.setAttribute("src","https://static.toss.im/lotties/error-spot-no-loop-space-apng.png"),t.setAttribute("style","width: 120px; height: 120px;");var r=document.createElement("p");r.textContent="ì¼ìì ì¼ë¡ ê²°ì ìë¨ì\në¶ë¬ì¤ì§ ëª»íì´ì",r.setAttribute("style","margin: 0; margin-bottom: 16px; white-space: pre; font-size: 18px; font-weight: 600; line-height: 31px; color: #191f28;");var n=document.createElement("button");return n.textContent="ë¤ì ë¶ë¬ì¤ê¸°",n.setAttribute("style","padding: 10px 16px; border-radius: 8px; border: none; box-shadow: none; cursor: pointer; background-color: #4e5968; font-size: 15px; font-weight: 400; color: #ffffff;"),n.addEventListener("click",(function(){location.reload()})),e.appendChild(t),e.appendChild(r),e.appendChild(n),e}},{key:"getSkeletonHeight",value:function(){return 40+this.skeletonOption.boxHeight*this.skeletonOption.boxCount+2*this.skeletonOption.padding+8*(this.skeletonOption.boxCount-1)}},{key:"focus",value:function(){var e;null==(e=this.iframe)||e.scrollIntoView({behavior:"smooth"})}}]),e}(),jF=function(){function e(t,r){i(this,e),this.selector=t,this.Bridge=r,this.widget=null}return s(e,[{key:"launch",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function r(){var n,o,i,a,s,u,c=this;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return this.shutdown(),i=null==(o=null==(n=null==t?void 0:t.skeleton)?void 0:n.show)||o,a=i?{boxCount:cF()?3:2,padding:cF()?24:30}:void 0,this.widget=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new HF({src:e,title:"í ì¤íì´ë¨¼ì¸  ê²°ì ìì ¯",styles:{display:"block",border:"0px",width:"100%",height:"0px"},options:r}),o=document.querySelector(t);return Cx(null!=o,new Gx.InvalidSelectorError),n.mount(o),n}(e.getProductURL(),this.selector,{skeleton:a}),i&&this.widget.showSkeleton({onTimeout:{fn:function(){},delay:12e3}}),this.widget.onIframeRemoved((function(){c.shutdown()})),s=new Map(e.getParameterResolvers()),u=this.widget.iframe.contentWindow,r.abrupt("return",new Promise((function(r,n){return ax(c,null,regeneratorRuntime.mark((function o(){var a,c,l,d,h,m=this;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,a=this.Bridge.openBridge({targetWindow:u,runtimeWindow:window}),e.onExecuteQuery((function(e,t){return a.then((function(r){return r.request(e,t,{timeout:45e3})}))})),e.onExecuteCommand((function(e,t){return a.then((function(r){return r.request(e,t,{timeout:45e3})}))})),e.onFocus((function(){var e;null==(e=m.widget)||e.focus()})),o.next=5,a;case 5:(c=o.sent).handleRequest("GET_PARAMETER",(function(e){return ax(m,[e],regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,null==(n=s.get(r))){e.next=12;break}return e.prev=3,e.next=6,n();case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))})),c.subscribe("LIFECYCLE",(function(e){var o,a,s,u,c,l=e.name,d=e.params;switch(l){case"READY":return i&&(null==(o=m.widget)||o.hideSkeleton()),void r();case"FAIL":return m.shutdown(),!0===(null==(a=null==t?void 0:t.fallback)?void 0:a.show)&&(null==(s=m.widget)||s.showFallback()),void n(new pU(null==d?void 0:d.code,null==d?void 0:d.message));case"RESIZED":return null==(u=m.widget)||u.updateStyle({height:"".concat(d.height,"px")}),void(null==(c=null==t?void 0:t.onResize)||c.call(t,{height:d.height}))}})),l=b(e.getEventListeners());try{for(h=function(){var e=g(d.value,2),t=e[0],r=e[1];c.subscribe(t,(function(e){return r(e)}))},l.s();!(d=l.n()).done;)h()}catch(e){l.e(e)}finally{l.f()}o.next=14;break;case 11:o.prev=11,o.t0=o.catch(0),n(o.t0);case 14:case"end":return o.stop()}}),o,this,[[0,11]])})))})));case 5:case"end":return r.stop()}}),r,this)})))}},{key:"shutdown",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this.widget)||t.cleanup();case 1:case"end":return e.stop()}}),e,this)})))}}],[{key:"getInstance",value:function(t,r){if(null==e.instance.get(t)){var n=new e(t,r);e.instance.set(t,n)}return e.instance.get(t)}}]),e}();jF.instance=new Map;var zF=jF,JF=function(){function e(t,r){i(this,e),this.customContextRepository=r,this.Bridge=new uF(t)}return s(e,[{key:"getLauncher",value:function(e){var t=e.target;switch(t){case"iframe":return new MF(this.Bridge,this.customContextRepository);case"full-iframe":throw new Gx.InvalidWindowTargetParameterError("full-iframe");case"popup":return KF.getInstance(this.Bridge);case"self":throw new Gx.InvalidWindowTargetParameterError("self");default:throw new Gx.InvalidWindowTargetParameterError(t)}}}]),e}(),QF=function(){function e(t){i(this,e),this.Bridge=new uF(t)}return s(e,[{key:"getLauncher",value:function(e){var t=e.target;switch(t){case"iframe":throw new Gx.InvalidWindowTargetParameterError("iframe");case"full-iframe":throw new Gx.InvalidWindowTargetParameterError("full-iframe");case"popup":throw new Gx.InvalidWindowTargetParameterError("popup");case"self":throw new Gx.InvalidWindowTargetParameterError("self");default:return zF.getInstance(t,this.Bridge)}}}]),e}(),XF=function(){function e(t){i(this,e),this.checkoutProductLauncherRepository=t}return s(e,[{key:"getLauncher",value:function(e){var t=e.target;switch(t){case"iframe":var r=new VF;return this.checkoutProductLauncherRepository.saveActiveLauncher(r),r;case"full-iframe":var n=new GF;return this.checkoutProductLauncherRepository.saveActiveLauncher(n),n;default:throw new Gx.InvalidWindowTargetParameterError(t);case"self":var o=new YF;return this.checkoutProductLauncherRepository.saveActiveLauncher(o),o}}}]),e}(),ZF=function(){function e(){i(this,e),this.activeLauncher=null}return s(e,[{key:"saveActiveLauncher",value:function(e){this.activeLauncher=e}},{key:"getActiveLauncher",value:function(){return this.activeLauncher}},{key:"clearActiveLauncher",value:function(){this.activeLauncher=null}}]),e}();function $F(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window)||navigator.userAgent.includes("Mac")&&null!=navigator.maxTouchPoints&&navigator.maxTouchPoints>0}function eW(){return!/MSIE|Trident/i.test(window.navigator.userAgent)&&/android/i.test(window.navigator.userAgent)}function tW(e){var t,r=e.clientKey,n=e.paymentMethod,o=e.requestParams,i=e.stage,a=e.service,s=e.gtid,u=function(e){return nW(rW(e))}(o),c=JSON.stringify(u);return'\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <script src="https://js.tosspayments.com/'.concat(function(e){switch(e){case"live":case"sandbox":return"v1";case"staging":return"beta";default:return"alpha"}}(i),"/payment\"><\/script>\n      </head>\n      <body>\n        <script>\n          var tossPayments = TossPayments('").concat(r,"', {\n            service: '").concat(a,"',\n            gtid: '").concat(s,"',\n          });\n          tossPayments\n            .requestPayment('").concat(n,"', JSON.parse(\n              '").concat((t=c,t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"')),"'\n            ))\n            .catch(function (err) {\n\n              // @deprecated NativeSDK ìë¬ í¸ë¤ë§ì PaymentWidgetAndroidSDK ì¸í°íì´ì¤ë¡ ê³ ì \n              if (window.TossPayment?.error != null) {\n                window.TossPayment.error(err.code, err.message, '").concat(o.orderId,"');\n              }\n\n              if (window.PaymentWidgetAndroidSDK?.error != null) {\n                window.PaymentWidgetAndroidSDK.error(err.code, err.message, '").concat(o.orderId,"');\n              }\n\n              if (window.webkit?.messageHandlers?.error?.postMessage != null) {\n                window.webkit.messageHandlers.error.postMessage({\n                  errorCode: err.code,\n                  errorMessage: err.message,\n                  orderId: '").concat(o.orderId,"',\n                });\n              }\n\n              if (window.PaymentWidgetFlutterSDK?.error?.postMessage != null) {\n                window.PaymentWidgetFlutterSDK.error.postMessage({\n                  errorCode: err.code,\n                  errorMessage: err.message,\n                  orderId: '").concat(o.orderId,"',\n                });\n              }\n\n              if (window.PaymentWidgetReactNativeSDK?.error?.postMessage != null) {\n                window.PaymentWidgetReactNativeSDK.error.postMessage({\n                  errorCode: err.code,\n                  errorMessage: err.message,\n                  orderId: '").concat(o.orderId,"',\n                });\n              }\n            });\n        <\/script>\n      </body>\n    </html>\n    ")}function rW(e){return Object.keys(e).reduce((function(t,r){var n=e[r];return oW(n)?t[r]=rW(n):!iW.includes(r)&&function(e){return""===e}(n)||(t[r]=n),t}),{})}function nW(e){return Object.keys(e).reduce((function(t,r){var n=e[r];if(oW(n)){var o=nW(n);Object.keys(o).length>0&&(t[r]=o)}else null!=n&&(t[r]=n);return t}),{})}function oW(e){return"object"==r(e)&&!Array.isArray(e)&&null!=e}var iW=["orderId","orderName","successUrl","failUrl"],aW=function(){function e(){i(this,e)}return s(e,[{key:"isUsableWidgetModule",value:function(){var e,t,r,n,o,i;if("undefined"==typeof window)return!1;var a=eW()&&null!=(null==(e=window.PaymentWidgetAndroidSDK)?void 0:e.message),s=window.navigator.userAgent.toLowerCase(),u=s.includes("android")&&(null!=(null==(t=window.PaymentWidgetAndroidSDK)?void 0:t.requestHTML)||null!=(null==(r=window.PaymentWidgetAndroidSDK)?void 0:r.success));return a!==u&&Ex.getDebugLogger().info("Android Native SDK íë¨ ì¡°ê±´ ê°ì´ ìë¡ ë¤ë¦ëë¤. ê²°ì ìì ¯ ì¡°ê±´: ".concat(eW(),", ").concat(null!=(null==(n=window.PaymentWidgetAndroidSDK)?void 0:n.message)," ë¸ëëíì´ ì¡°ê±´: ").concat(s.includes("android"),", ").concat(null!=(null==(o=window.PaymentWidgetAndroidSDK)?void 0:o.requestHTML),", ").concat(null!=(null==(i=window.PaymentWidgetAndroidSDK)?void 0:i.success))),a||u}},{key:"dispatchResize",value:function(e){this.sendMessage({name:"updateHeight",params:e})}},{key:"dispatchPaymentMethodWidgetReady",value:function(){this.sendMessage({name:"widgetStatus",params:{widget:"paymentMethods",status:"load"}})}},{key:"dispatchAgreementWidgetReady",value:function(){this.sendMessage({name:"widgetStatus",params:{widget:"agreement",status:"load"}})}},{key:"dispatchPaymentMethodSelect",value:function(e){this.sendMessage({name:"changePaymentMethod",params:e})}},{key:"dispatchAgreementStateUpdate",value:function(e){this.sendMessage({name:"updateAgreementStatus",params:e})}},{key:"dispatchCustomPaymentRequest",value:function(e){this.sendMessage({name:"customRequest",params:{paymentMethodKey:e.methodKey}})}},{key:"dispatchCustomPaymentMethodSelect",value:function(e){this.sendMessage({name:"customPaymentMethodSelect",params:{paymentMethodKey:e.methodKey}})}},{key:"dispatchCustomPaymentMethodUnselect",value:function(e){this.sendMessage({name:"customPaymentMethodUnselect",params:{paymentMethodKey:e.methodKey}})}},{key:"dispatchRequestPayment",value:function(e){var t=tW({clientKey:e.clientKey,requestParams:e.paymentInfo,paymentMethod:e.methodCode,stage:e.stage,gtid:e.gtid,service:"payment-widget-android"});this.sendRequestPayments(t)}},{key:"dispatchBrandpayRequestPayment",value:function(e){this.sendRequestPayments(e.html)}},{key:"dispatchBrandpayOpenSettings",value:function(e){this.sendRequestHTML(e.html)}},{key:"dispatchBrandpayAddPaymentMethod",value:function(e){this.sendRequestHTML(e.html)}},{key:"dispatchBrandpayChangeCashReceipt",value:function(e){this.sendRequestHTML(e.html)}},{key:"dispatchError",value:function(e){this.sendError(e.errorCode,e.errorMessage,null==e?void 0:e.orderId)}},{key:"success",value:function(e){var t;null==(t=window.PaymentWidgetAndroidSDK)||t.success(e)}},{key:"sendMessage",value:function(e){var t;null==(t=window.PaymentWidgetAndroidSDK)||t.message(JSON.stringify({name:e.name,params:e.params}))}},{key:"sendRequestHTML",value:function(e){var t,r;null==(r=null==(t=window.PaymentWidgetAndroidSDK)?void 0:t.requestHTML)||r.call(t,e)}},{key:"sendRequestPayments",value:function(e){var t,r;null==(r=null==(t=window.PaymentWidgetAndroidSDK)?void 0:t.requestPayments)||r.call(t,e)}},{key:"sendError",value:function(){for(var e,t,r,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];null==(r=null==(t=window.PaymentWidgetAndroidSDK)?void 0:t.error)||(e=r).call.apply(e,[t].concat(o))}}]),e}(),sW=function(){function e(){i(this,e)}return s(e,[{key:"isUsableWidgetModule",value:function(){var e,t;return"undefined"!=typeof window&&null!=(null==(t=null==(e=window.PaymentWidgetFlutterSDK)?void 0:e.message)?void 0:t.postMessage)}},{key:"dispatchResize",value:function(e){this.sendMessage({name:"updateHeight",params:e})}},{key:"dispatchPaymentMethodWidgetReady",value:function(){this.sendMessage({name:"widgetStatus",params:{widget:"paymentMethods",status:"load"}})}},{key:"dispatchAgreementWidgetReady",value:function(){this.sendMessage({name:"widgetStatus",params:{widget:"agreement",status:"load"}})}},{key:"dispatchPaymentMethodSelect",value:function(e){this.sendMessage({name:"changePaymentMethod",params:e})}},{key:"dispatchAgreementStateUpdate",value:function(e){this.sendMessage({name:"updateAgreementStatus",params:e})}},{key:"dispatchCustomPaymentRequest",value:function(e){this.sendMessage({name:"customRequest",params:{paymentMethodKey:e.methodKey}})}},{key:"dispatchCustomPaymentMethodSelect",value:function(e){this.sendMessage({name:"customPaymentMethodSelect",params:{paymentMethodKey:e.methodKey}})}},{key:"dispatchCustomPaymentMethodUnselect",value:function(e){this.sendMessage({name:"customPaymentMethodUnselect",params:{paymentMethodKey:e.methodKey}})}},{key:"dispatchRequestPayment",value:function(e){var t=tW({clientKey:e.clientKey,requestParams:e.paymentInfo,paymentMethod:e.methodCode,stage:e.stage,gtid:e.gtid,service:"payment-widget-flutter"});this.sendMessage({name:"requestPayments",params:{html:t}})}},{key:"dispatchBrandpayRequestPayment",value:function(e){this.sendMessage({name:"requestPayments",params:e})}},{key:"dispatchBrandpayOpenSettings",value:function(e){this.sendMessage({name:"requestHTML",params:e})}},{key:"dispatchBrandpayAddPaymentMethod",value:function(e){this.sendMessage({name:"requestHTML",params:e})}},{key:"dispatchBrandpayChangeCashReceipt",value:function(e){this.sendMessage({name:"requestHTML",params:e})}},{key:"dispatchError",value:function(e){this.sendError(e)}},{key:"sendMessage",value:function(e){var t;null==(t=window.PaymentWidgetFlutterSDK)||t.message.postMessage(JSON.stringify(e))}},{key:"sendError",value:function(e){var t;null==(t=window.PaymentWidgetFlutterSDK)||t.error.postMessage(JSON.stringify(e))}}]),e}(),uW=function(){function e(){i(this,e)}return s(e,[{key:"isUsableWidgetModule",value:function(){var e,t,r,n,o,i,a,s,u,c,l,d,h,m;if("undefined"==typeof window)return!1;var f=$F()&&null!=(null==(r=null==(t=null==(e=window.webkit)?void 0:e.messageHandlers)?void 0:t.message)?void 0:r.postMessage),p=window.navigator.userAgent.toLowerCase(),y=/iphone|ipad|ipod/.test(p)&&(null!=(null==(o=null==(n=window.webkit)?void 0:n.messageHandlers)?void 0:o.requestHTML)||null!=(null==(a=null==(i=window.webkit)?void 0:i.messageHandlers)?void 0:a.success));return f!==y&&Ex.getDebugLogger().info("iOS Native SDK íë¨ ì¡°ê±´ ê°ì´ ìë¡ ë¤ë¦ëë¤. ê²°ì ìì ¯ ì¡°ê±´: ".concat($F(),", ").concat(null!=(null==(c=null==(u=null==(s=window.webkit)?void 0:s.messageHandlers)?void 0:u.message)?void 0:c.postMessage)," ë¸ëëíì´ ì¡°ê±´: ").concat(/iphone|ipad|ipod/.test(p),", ").concat(null!=(null==(d=null==(l=window.webkit)?void 0:l.messageHandlers)?void 0:d.requestHTML),", ").concat(null!=(null==(m=null==(h=window.webkit)?void 0:h.messageHandlers)?void 0:m.success))),f||y}},{key:"dispatchResize",value:function(e){this.sendUpdateHeight(e.height)}},{key:"dispatchPaymentMethodWidgetReady",value:function(){this.sendMessage({name:"widgetStatus",params:{widget:"paymentMethods",status:"load"}})}},{key:"dispatchAgreementWidgetReady",value:function(){this.sendMessage({name:"widgetStatus",params:{widget:"agreement",status:"load"}})}},{key:"dispatchPaymentMethodSelect",value:function(e){this.sendMessage({name:"changePaymentMethod",params:e})}},{key:"dispatchAgreementStateUpdate",value:function(e){this.sendMessage({name:"updateAgreementStatus",params:e})}},{key:"dispatchCustomPaymentRequest",value:function(e){this.sendMessage({name:"customRequest",params:{paymentMethodKey:e.methodKey}})}},{key:"dispatchCustomPaymentMethodSelect",value:function(e){this.sendMessage({name:"customPaymentMethodSelect",params:{paymentMethodKey:e.methodKey}})}},{key:"dispatchCustomPaymentMethodUnselect",value:function(e){this.sendMessage({name:"customPaymentMethodUnselect",params:{paymentMethodKey:e.methodKey}})}},{key:"dispatchRequestPayment",value:function(e){var t=tW({clientKey:e.clientKey,requestParams:e.paymentInfo,paymentMethod:e.methodCode,stage:e.stage,gtid:e.gtid,service:"payment-widget-ios"});this.sendRequestPayments(t)}},{key:"dispatchBrandpayRequestPayment",value:function(e){this.sendRequestPayments(e.html)}},{key:"dispatchBrandpayOpenSettings",value:function(e){this.sendRequestHTML(e.html)}},{key:"dispatchBrandpayAddPaymentMethod",value:function(e){this.sendRequestHTML(e.html)}},{key:"dispatchBrandpayChangeCashReceipt",value:function(e){this.sendRequestHTML(e.html)}},{key:"dispatchError",value:function(e){this.sendError(e)}},{key:"success",value:function(e){var t,r,n;null==(n=null==(r=null==(t=window.webkit)?void 0:t.messageHandlers)?void 0:r.success)||n.postMessage(e)}},{key:"sendMessage",value:function(e){var t,r,n;null==(n=null==(r=null==(t=window.webkit)?void 0:t.messageHandlers)?void 0:r.message)||n.postMessage({name:e.name,params:e.params})}},{key:"sendRequestHTML",value:function(e){var t,r,n,o;null==(o=null==(n=null==(r=null==(t=window.webkit)?void 0:t.messageHandlers)?void 0:r.requestHTML)?void 0:n.postMessage)||o.call(n,e)}},{key:"sendRequestPayments",value:function(e){var t,r,n,o;null==(o=null==(n=null==(r=null==(t=window.webkit)?void 0:t.messageHandlers)?void 0:r.requestPayments)?void 0:n.postMessage)||o.call(n,e)}},{key:"sendUpdateHeight",value:function(e){var t,r,n,o;null==(o=null==(n=null==(r=null==(t=window.webkit)?void 0:t.messageHandlers)?void 0:r.updateHeight)?void 0:n.postMessage)||o.call(n,e)}},{key:"sendError",value:function(e){var t,r,n,o;null==(o=null==(n=null==(r=null==(t=window.webkit)?void 0:t.messageHandlers)?void 0:r.error)?void 0:n.postMessage)||o.call(n,e)}}]),e}(),cW=function(){function e(){i(this,e)}return s(e,[{key:"isUsableWidgetModule",value:function(){var e,t;return"undefined"!=typeof window&&null!=(null==(t=null==(e=window.PaymentWidgetReactNativeSDK)?void 0:e.message)?void 0:t.postMessage)}},{key:"dispatchResize",value:function(e){this.sendMessage({name:"updateHeight",params:e})}},{key:"dispatchPaymentMethodWidgetReady",value:function(){this.sendMessage({name:"widgetStatus",params:{widget:"paymentMethods",status:"load"}})}},{key:"dispatchAgreementWidgetReady",value:function(){this.sendMessage({name:"widgetStatus",params:{widget:"agreement",status:"load"}})}},{key:"dispatchPaymentMethodSelect",value:function(e){this.sendMessage({name:"changePaymentMethod",params:e})}},{key:"dispatchAgreementStateUpdate",value:function(e){this.sendMessage({name:"updateAgreementStatus",params:e})}},{key:"dispatchCustomPaymentRequest",value:function(e){this.sendMessage({name:"customRequest",params:{paymentMethodKey:e.methodKey}})}},{key:"dispatchCustomPaymentMethodSelect",value:function(e){this.sendMessage({name:"customPaymentMethodSelect",params:{paymentMethodKey:e.methodKey}})}},{key:"dispatchCustomPaymentMethodUnselect",value:function(e){this.sendMessage({name:"customPaymentMethodUnselect",params:{paymentMethodKey:e.methodKey}})}},{key:"dispatchRequestPayment",value:function(e){var t=tW({clientKey:e.clientKey,requestParams:e.paymentInfo,paymentMethod:e.methodCode,stage:e.stage,gtid:e.gtid,service:"payment-widget-react-native"});this.sendMessage({name:"requestPayments",params:{html:t}})}},{key:"dispatchBrandpayRequestPayment",value:function(e){this.sendMessage({name:"requestHTML",params:e})}},{key:"dispatchBrandpayOpenSettings",value:function(e){this.sendMessage({name:"requestHTML",params:e})}},{key:"dispatchBrandpayAddPaymentMethod",value:function(e){this.sendMessage({name:"requestHTML",params:e})}},{key:"dispatchBrandpayChangeCashReceipt",value:function(e){this.sendMessage({name:"requestHTML",params:e})}},{key:"dispatchError",value:function(e){this.sendError(e)}},{key:"sendMessage",value:function(e){var t;null==(t=window.PaymentWidgetReactNativeSDK)||t.message.postMessage(JSON.stringify(e))}},{key:"sendError",value:function(e){var t;null==(t=window.PaymentWidgetReactNativeSDK)||t.error.postMessage(JSON.stringify(e))}}]),e}(),lW=function(){function e(){i(this,e),this.isUsableWidgetModule=function(){return!1}}return s(e,[{key:"dispatchResize",value:function(){}},{key:"dispatchPaymentMethodWidgetReady",value:function(){}},{key:"dispatchAgreementWidgetReady",value:function(){}},{key:"dispatchPaymentMethodSelect",value:function(){}},{key:"dispatchAgreementStateUpdate",value:function(){}},{key:"dispatchCustomPaymentRequest",value:function(){}},{key:"dispatchCustomPaymentMethodSelect",value:function(){}},{key:"dispatchCustomPaymentMethodUnselect",value:function(){}},{key:"dispatchRequestPayment",value:function(){}},{key:"dispatchBrandpayRequestPayment",value:function(){}},{key:"dispatchBrandpayOpenSettings",value:function(){}},{key:"dispatchBrandpayAddPaymentMethod",value:function(){}},{key:"dispatchBrandpayChangeCashReceipt",value:function(){}},{key:"dispatchError",value:function(){}}]),e}();function dW(e){var t=e.script,r=e.stage;return'\n  <html>\n    <head>\n      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">\n      <script src="https://js.tosspayments.com/'.concat(hW(r),'/brandpay"><\/script>\n    </head>\n    <body>\n      <script>\n        ').concat(t,"\n      <\/script>\n    </body>\n  </html>\n  ").replace(/(\n|\s{2,})/g," ")}var hW=function(e){switch(e){case"live":case"sandbox":return"v1";case"staging":return"beta";default:return"alpha"}};function mW(e){return"(\n    function(){\n      const arguments = JSON.parse(params);\n\n      return (\n        typeof window.brandpayWebBridge !== 'undefined' &&\n        typeof window.brandpayWebBridge._callbacks[\"".concat(e,"\"] === 'function' &&\n        window.brandpayWebBridge._callbacks[\"").concat(e,'"](arguments)\n      );\n    }\n  )()').replace(/(\n|\s{2,})/g," ")}function fW(e,t){return new Promise((function(r,n){var o,i,a,s,u,c,l,d,h="var params = '".concat(JSON.stringify({eventId:String(e),error:"ì·¨ìëììµëë¤"}),"'; ").concat(mW(e));null==window.brandpayWebBridge&&(window.brandpayWebBridge={}),null==window.brandpayWebBridge._callbacks&&(window.brandpayWebBridge._callbacks={}),window.brandpayWebBridge._callbacks[e]=function(e){return null!=e.error?n(e.error):r(e.result)},null==(null==(a=null==(i=null==(o=window.webkit)?void 0:o.messageHandlers)?void 0:i.requestHTML)?void 0:a.postMessage)?null==(null==(s=window.PaymentWidgetAndroidSDK)?void 0:s.requestHTML)?null==(null==(c=null==(u=window.PaymentWidgetReactNativeSDK)?void 0:u.message)?void 0:c.postMessage)?null==(null==(d=null==(l=window.PaymentWidgetFlutterSDK)?void 0:l.message)?void 0:d.postMessage)||window.PaymentWidgetFlutterSDK.message.postMessage(JSON.stringify({name:"requestHTML",params:{html:t}})):window.PaymentWidgetReactNativeSDK.message.postMessage(JSON.stringify({name:"requestHTML",params:{html:t,scriptForOnCancel:h}})):window.PaymentWidgetAndroidSDK.requestHTML(t):window.webkit.messageHandlers.requestHTML.postMessage(t)}))}var pW=0;function yW(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e).concat(pW+=1)}var vW=function(){function e(t,r,n,o,a){i(this,e),this.resolver=t,this.clientKeyRepository=r,this.brandpayCustomerSessionRepository=n,this.productStageRepository=o,this.brandpayMidRepository=a}return s(e,[{key:"isAvailable",value:function(){return this.resolver.isUsableWidgetModule()}},{key:"resize",value:function(e){this.resolver.dispatchResize(e)}},{key:"paymentMethodWidgetReady",value:function(){this.resolver.dispatchPaymentMethodWidgetReady()}},{key:"agreementWidgetReady",value:function(){this.resolver.dispatchAgreementWidgetReady()}},{key:"agreementStatusUpdate",value:function(e){var t=e.agreementStatus,r=t.agreedRequiredTerms,n=t.agreements;this.resolver.dispatchAgreementStateUpdate({agreedRequiredTerms:r,terms:n.map((function(e){var t=e.term,r=e.agreed;return{id:t.id,required:t.required,agreed:r}}))})}},{key:"customPaymentRequest",value:function(e){this.resolver.dispatchCustomPaymentRequest(e)}},{key:"customPaymentMethodSelect",value:function(e){this.resolver.dispatchCustomPaymentMethodSelect(e)}},{key:"customPaymentMethodUnselect",value:function(e){this.resolver.dispatchCustomPaymentMethodUnselect(e)}},{key:"selectedPaymentMethodChange",value:function(e){this.resolver.dispatchPaymentMethodSelect(this.translatePaymentMethod(e.selectedPaymentMethod))}},{key:"requestPayment",value:function(e){this.resolver.dispatchRequestPayment({clientKey:this.clientKeyRepository.findCurrentClientKey().value,methodCode:e.paymentMethodCode,paymentInfo:e.paymentInfo,stage:this.productStageRepository.getLiveProductStage(),gtid:this.brandpayCustomerSessionRepository.findCurrentSession().getGlobalTraceId()})}},{key:"keyinRequestPayment",value:function(e){this.resolver.dispatchRequestPayment({clientKey:this.clientKeyRepository.findCurrentClientKey().value,methodCode:"CARD",paymentInfo:e.paymentInfo,stage:this.productStageRepository.getLiveProductStage(),gtid:this.brandpayCustomerSessionRepository.findCurrentSession().getGlobalTraceId()})}},{key:"brandpayRequestPayment",value:function(e){var t=this,r=function(e){var t,r=e.clientKey,n=e.customerKey,o=e.brandpayPaymentParams,i=e.stage,a={mid:e.mid,redirectUrl:e.redirectUrl,ui:e.ui,gtid:e.gtid,service:"payment-widget"},s=yW(),u=mW(s),c=JSON.stringify(ex($I({},o),{amount:o.amount.value}));return dW({script:'\n    var brandpay = BrandPay("'.concat(r,'", "').concat(n,"\", JSON.parse('").concat(JSON.stringify(a),'\'));\n    let payload = "";\n\n    function sendPayload({ payload, error }) {\n      if (window.webkit?.messageHandlers?.success?.postMessage != null) {\n        window.webkit.messageHandlers.success.postMessage(payload);\n\n        return;\n      }\n\n      if (window.PaymentWidgetAndroidSDK?.success != null) {\n        window.PaymentWidgetAndroidSDK?.success(payload);\n\n        return;\n      }\n\n      if (window.PaymentWidgetReactNativeSDK?.message?.postMessage != null) {\n        if (error != null) {\n          window.PaymentWidgetReactNativeSDK.message.postMessage(JSON.stringify({\n            name: "error",\n            params: {\n              errorCode: error.code,\n              errorMessage: error.message,\n              orderId: "').concat(o.orderId,'",\n            },\n          }));\n\n          return;\n        }\n\n        window.PaymentWidgetReactNativeSDK.message.postMessage(JSON.stringify({ name: "evaluateJavascriptOnPaymentMethodWidget", params: { script: payload } }));\n\n        return;\n      }\n\n      if (window.PaymentWidgetFlutterSDK?.message?.postMessage != null) {\n        window.PaymentWidgetFlutterSDK.message.postMessage(JSON.stringify({ name: "evaluateJavascriptOnPaymentMethodWidget", params: { script: payload } }));\n\n        return;\n      }\n    }\n\n    brandpay.requestPayment(JSON.parse(\'').concat((t=c,t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"')),"'))\n      .then(() => {\n        payload = `var params = '${JSON.stringify({ eventId: String(").concat(s,") })}'; ").concat(u,"`;\n        sendPayload({ payload });\n      })\n      .catch(error => {\n        payload = `var params = '${JSON.stringify({ eventId: String(").concat(s,"), error: error.message })}'; ").concat(u,"`;\n        sendPayload({ payload, error });\n      });\n  "),stage:i})}({clientKey:this.clientKeyRepository.findCurrentClientKey().value,customerKey:this.brandpayCustomerSessionRepository.findCurrentSession().getCustomerKey().value,mid:function(){var e;try{return null==(e=t.brandpayMidRepository.findCurrentMid())?void 0:e.value}catch(e){return}}(),brandpayPaymentParams:e.brandpayPaymentInfo,redirectUrl:this.brandpayCustomerSessionRepository.findCurrentSession().getRedirectURL(),stage:this.productStageRepository.getLiveProductStage(),gtid:this.brandpayCustomerSessionRepository.findCurrentSession().getGlobalTraceId()});this.resolver.dispatchBrandpayRequestPayment({html:r})}},{key:"brandpayChangeSettings",value:function(){var e;return function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.clientKey,n=t.customerKey,o=t.stage,i=t.brandpayOptions,a=yW(),s=mW(a),e.abrupt("return",fW(a,dW({script:'\n      var brandpay = BrandPay("'.concat(r,'", "').concat(n,"\", JSON.parse('").concat(JSON.stringify(i),"'));\n      let payload = \"\";\n\n      brandpay.openSettings()\n        .then(() => {\n          payload = `var params = '${JSON.stringify({ eventId: String(").concat(a,") })}'; ").concat(s,"`;\n        })\n        .catch(error => {\n          payload = `var params = '${JSON.stringify({ eventId: String(").concat(a,"), error: error.message })}'; ").concat(s,'`;\n        })\n        .finally(() => {\n          if (window.webkit?.messageHandlers?.success?.postMessage != null) {\n            window.webkit.messageHandlers.success.postMessage(payload);\n    \n            return;\n          }\n    \n          if (window.PaymentWidgetAndroidSDK?.success != null) {\n            window.PaymentWidgetAndroidSDK?.success(payload);\n    \n            return;\n          }\n\n          if (window.PaymentWidgetReactNativeSDK?.message?.postMessage != null) {\n            window.PaymentWidgetReactNativeSDK.message.postMessage(JSON.stringify({ name: "evaluateJavascriptOnPaymentMethodWidget", params: { script: payload } }));\n    \n            return;\n          }\n\n          if (window.PaymentWidgetFlutterSDK?.message?.postMessage != null) {\n            window.PaymentWidgetFlutterSDK.message.postMessage(JSON.stringify({ name: "evaluateJavascriptOnPaymentMethodWidget", params: { script: payload } }));\n    \n            return;\n          }\n        });\n    '),stage:o})));case 3:case"end":return e.stop()}}),e)})))}({clientKey:this.clientKeyRepository.findCurrentClientKey().value,customerKey:this.brandpayCustomerSessionRepository.findCurrentSession().getCustomerKey().value,brandpayOptions:{redirectUrl:this.brandpayCustomerSessionRepository.findCurrentSession().getRedirectURL(),mid:null==(e=this.brandpayMidRepository.findCurrentMid())?void 0:e.value},stage:this.productStageRepository.getLiveProductStage()})}},{key:"brandpayChangeCashReceiptSettings",value:function(){var e;return function(e){var t=e.clientKey,r=e.customerKey,n=e.brandpayOptions,o=e.stage,i=yW(),a=mW(i);return fW(i,dW({script:'\n      var brandpay = BrandPay("'.concat(t,'", "').concat(r,"\", JSON.parse('").concat(JSON.stringify(n),"'));\n      let payload = \"\";\n\n      brandpay.setupCashReceipt()\n        .then(data => {\n          payload = `var params = '${JSON.stringify({ eventId: String(").concat(i,"), result: data })}'; ").concat(a,"`;\n        })\n        .catch(error => {\n          payload = `var params = '${JSON.stringify({ eventId: String(").concat(i,"), error: error.message })}'; ").concat(a,'`;\n        })\n        .finally(() => {\n          if (window.webkit?.messageHandlers?.success?.postMessage != null) {\n            window.webkit.messageHandlers.success.postMessage(payload);\n    \n            return;\n          }\n    \n          if (window.PaymentWidgetAndroidSDK?.success != null) {\n            window.PaymentWidgetAndroidSDK?.success(payload);\n    \n            return;\n          }\n\n          if (window.PaymentWidgetReactNativeSDK?.message?.postMessage != null) {\n            window.PaymentWidgetReactNativeSDK.message.postMessage(JSON.stringify({ name: "evaluateJavascriptOnPaymentMethodWidget", params: { script: payload } }));\n    \n            return;\n          }\n\n          if (window.PaymentWidgetFlutterSDK?.message?.postMessage != null) {\n            window.PaymentWidgetFlutterSDK.message.postMessage(JSON.stringify({ name: "evaluateJavascriptOnPaymentMethodWidget", params: { script: payload } }));\n    \n            return;\n          }\n        });\n    '),stage:o}))}({clientKey:this.clientKeyRepository.findCurrentClientKey().value,customerKey:this.brandpayCustomerSessionRepository.findCurrentSession().getCustomerKey().value,brandpayOptions:{redirectUrl:this.brandpayCustomerSessionRepository.findCurrentSession().getRedirectURL(),mid:null==(e=this.brandpayMidRepository.findCurrentMid())?void 0:e.value},stage:this.productStageRepository.getLiveProductStage()})}},{key:"brandpayAddPaymentMethod",value:function(){var e;return function(e){var t=e.clientKey,r=e.customerKey,n=e.brandpayOptions,o=e.stage,i=e.type,a=void 0===i?"ë¯¸ì í":i,s=e.registerOptions,u=void 0===s?{resume:!1,methodType:"ë¯¸ì í"}:s,c=yW(),l=mW(c);return fW(c,dW({script:'\n      var brandpay = BrandPay("'.concat(t,'", "').concat(r,"\", JSON.parse('").concat(JSON.stringify(n),"'));\n      let payload = \"\";\n\n      brandpay.addPaymentMethod('").concat(a,"', JSON.parse('").concat(JSON.stringify(u),"'))\n        .then(paymentMethods => {\n          payload = `var params = '${JSON.stringify({ eventId: String(").concat(c,"), result: paymentMethods })}'; ").concat(l,"`;\n        })\n        .catch(error => {\n          payload = `var params = '${JSON.stringify({ eventId: String(").concat(c,"), error: error.message })}'; ").concat(l,'`;\n        })\n        .finally(() => {\n          if (window.webkit?.messageHandlers?.success?.postMessage != null) {\n            window.webkit.messageHandlers.success.postMessage(payload);\n    \n            return;\n          }\n    \n          if (window.PaymentWidgetAndroidSDK?.success != null) {\n            window.PaymentWidgetAndroidSDK?.success(payload);\n    \n            return;\n          }\n\n          if (window.PaymentWidgetReactNativeSDK?.message?.postMessage != null) {\n            window.PaymentWidgetReactNativeSDK.message.postMessage(JSON.stringify({ name: "evaluateJavascriptOnPaymentMethodWidget", params: { script: payload } }));\n    \n            return;\n          }\n\n          if (window.PaymentWidgetFlutterSDK?.message?.postMessage != null) {\n            window.PaymentWidgetFlutterSDK.message.postMessage(JSON.stringify({ name: "evaluateJavascriptOnPaymentMethodWidget", params: { script: payload } }));\n    \n            return;\n          }\n        });\n    '),stage:o}))}({clientKey:this.clientKeyRepository.findCurrentClientKey().value,customerKey:this.brandpayCustomerSessionRepository.findCurrentSession().getCustomerKey().value,brandpayOptions:{redirectUrl:this.brandpayCustomerSessionRepository.findCurrentSession().getRedirectURL(),mid:null==(e=this.brandpayMidRepository.findCurrentMid())?void 0:e.value},stage:this.productStageRepository.getLiveProductStage()})}},{key:"dispatchError",value:function(e){var t;this.resolver.dispatchError({errorMessage:e.error.message,errorCode:null!=(t=e.error.code)?t:"UNKNOWN_ERROR",orderId:e.orderId})}},{key:"translatePaymentMethod",value:function(e){switch(e.type){case"BRANDPAY":return{type:"BRANDPAY",methodId:e.brandpay.methodId};case"KEYIN":return{type:"KEYIN",method:"ì¹´ë"};case"CUSTOM":return{type:"CUSTOM",paymentMethodKey:e.custom.methodKey};case"NORMAL":return null!=e.normal.easyPay?{type:"NORMAL",method:"ê°í¸ê²°ì ",easyPay:e.normal.easyPay}:null!=e.normal.transfer?{type:"NORMAL",method:"ê³ì¢ì´ì²´"}:{type:"NORMAL",method:e.normal.method}}}}]),e}(),gW=function(){function e(t,r,n,o){i(this,e),this.clientKeyRepository=t,this.brandpayCustomerSessionRepository=r,this.productStageRepository=n,this.brandpayMidRepository=o}return s(e,[{key:"create",value:function(){return new vW(this.decideResolver(),this.clientKeyRepository,this.brandpayCustomerSessionRepository,this.productStageRepository,this.brandpayMidRepository)}},{key:"decideResolver",value:function(){var e=[new aW,new uW,new cW,new sW].find((function(e){return e.isUsableWidgetModule()}));return null!=e?e:new lW}}]),e}(),wW=function(){function e(){i(this,e)}return s(e,[{key:"isUsableBiometricAuthModule",value:function(){return null!=window.ConnectPayAuth}},{key:"isUsableOCRModule",value:function(){return null!=window.ConnectPayOcr}},{key:"sendToBiometricAuthModule",value:function(e){var t=window.ConnectPayAuth;if(null==t)throw new Error("aos: ConnectPayAuth ê°ì²´ê° ì¡´ì¬íì§ ììµëë¤.");t.postMessage(JSON.stringify(e))}},{key:"sendToOCRModule",value:function(e){var t=window.ConnectPayOcr;if(null==t)throw new Error("aos: ConnectPayAuth ê°ì²´ê° ì¡´ì¬íì§ ììµëë¤.");t.postMessage(JSON.stringify(e))}},{key:"isUsableKTAlphaOCRModule",value:function(){var e;return null!=(null==(e=window.KshopBridge)?void 0:e.goOCRCard)}},{key:"scanKTAlphaOCR",value:function(){window.KshopBridge.goOCRCard()}}]),e}();function SW(e,t){if(void 0!==t){var r={};for(var n in t){var o=t[n];RW(o)?r[n]=SW(e,o):r[n]="function"==typeof o?bW(o,{prefix:e})||"":o}return r}}function RW(e){return null!=e&&"object"==r(e)&&e.constructor===Object&&!Array.isArray(e)}function bW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.prefix;null==window.connectpayWebBridge&&(window.connectpayWebBridge={}),null==window.connectpayWebBridge._callbacks&&(window.connectpayWebBridge._callbacks={});var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.prefix,r=void 0===t?"":t;return"_tab_cb_".concat(r,"_").concat(PW())}({prefix:r}),o=function(e){if("function"==typeof e)return e;var t=window[e];return void 0!==t?t:void 0}(e);if(null!=o)return window.connectpayWebBridge._callbacks[n]=o,function(){try{return window.self!==window.top}catch(e){return!0}}()?"(\n          function(){\n            var connectpayWebBridge = document.getElementsByTagName('iframe')[0].contentWindow.connectpayWebBridge;\n\n            return (\n              typeof connectpayWebBridge !== 'undefined' &&\n              typeof connectpayWebBridge._callbacks.".concat(n," === 'function' &&\n              connectpayWebBridge._callbacks.").concat(n,".apply(connectpayWebBridge._callbacks, arguments)\n            );\n          }\n        )").replace(/(\n|\s{2,})/g," "):"(\n        function(){\n          return (\n            typeof connectpayWebBridge !== 'undefined' &&\n            typeof connectpayWebBridge._callbacks.".concat(n," === 'function' &&\n            connectpayWebBridge._callbacks.").concat(n,".apply(connectpayWebBridge._callbacks, arguments)\n          );\n        }\n      )").replace(/(\n|\s{2,})/g," ");console.log("Only functions or global function names (properties of window) can be supplied to registerCallback.")}function PW(e){return e?(e^16*Math.random()>>e/4).toString(16):(String(1e7)+1e3+4e3+8e3+1e11).replace(/[018]/g,PW)}var EW=function(){function e(t,r,n){i(this,e),this.brandpayCustomerSessionRepository=t,this.resolver=r,this.device=n}return s(e,[{key:"isUsableBiometricAuthModule",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.resolver.isUsableBiometricAuthModule());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"isUsableOCRModule",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=this.resolver.isUsableKTAlphaOCRModule(),e.t0){e.next=9;break}if(e.t1=this.resolver.isUsableOCRModule(),!e.t1){e.next=8;break}return e.next=7,this.getOCRAvailable();case 7:e.t1=e.sent;case 8:e.t0=e.t1;case 9:return e.abrupt("return",e.t0);case 12:return e.prev=12,e.t2=e.catch(0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})))}},{key:"isBiometricAuthAvailable",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isUsableBiometricAuthModule();case 2:return t=e.sent,e.next=5,this.getBiometricAuthMethods();case 5:return r=e.sent,e.abrupt("return",t&&r.length>0);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getAppInfo",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n={name:"getAppInfo"},o=t.setNativeSDKTimeout(r,n.name).removeTimeout;n.params=SW(n.name,{onSuccess:function(r){o();try{var n=JSON.parse(r);e({appId:n.app_id,os:n.os})}catch(r){e({appId:"",os:t.device})}},onError:function(e){o(),r(t.parseAndTranslateBiometricAuthNativeError(e))}}),t.sendToBiometricAuthModule(n)})));case 1:case"end":return e.stop()}}),e)})))}},{key:"hasBiometricAuthToken",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isUsableBiometricAuthModule();case 2:if(e.t0=!!e.sent,!e.t0){e.next=5;break}e.t0=new Promise((function(e,r){var n={name:"hasBiometricAuth"},o=t.setNativeSDKTimeout(r,n.name,3e3).removeTimeout;n.params=SW(n.name,{onSuccess:function(t){o(),kW(t)?e(CW(t)):e(t)},onError:function(e){o(),r(t.parseAndTranslateBiometricAuthNativeError(e))}}),t.sendToBiometricAuthModule(n)}));case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"setBiometricAuthToken",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,n){var o={name:"registerBiometricAuth",params:{biometricToken:e}};o.params=SW(o.name,ex($I({},o.params),{onSuccess:function(e){t(e)},onError:function(e){n(r.parseAndTranslateBiometricAuthNativeError(e))}})),r.sendToBiometricAuthModule(o)}));case 2:case"end":return t.stop()}}),t)})))}},{key:"getEncryptedBiometricAuthToken",value:function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.modulus,n=t.exponent,e.abrupt("return",new Promise((function(e,t){var i={name:"verifyBiometricAuth",params:{modulus:r,exponent:n}};i.params=SW(i.name,ex($I({},i.params),{onSuccess:function(t){e(t)},onError:function(e){t(o.parseAndTranslateBiometricAuthNativeError(e))}})),o.sendToBiometricAuthModule(i)})));case 2:case"end":return e.stop()}}),e)})))}},{key:"removeBiometricAuthToken",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){var n={name:"unregisterBiometricAuth"},o=t.setNativeSDKTimeout(r,n.name).removeTimeout;n.params=SW(n.name,{onSuccess:function(t){o(),e(t)},onError:function(e){o(),r(t.parseAndTranslateBiometricAuthNativeError(e))}}),t.sendToBiometricAuthModule(n)}));case 2:case"end":return e.stop()}}),e)})))}},{key:"getOCRAvailable",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n={name:"isOCRAvailable"},o=t.setNativeSDKTimeout(r,n.name,3e3).removeTimeout;n.params=SW(n.name,{onSuccess:function(t){o(),kW(t)?e(CW(t)):e(t)},onError:function(t){o(),e(!1)}}),t.resolver.sendToOCRModule(n)})));case 1:case"end":return e.stop()}}),e)})))}},{key:"scanCreditCard",value:function(e){var t=this;return new Promise((function(r,n){if(t.resolver.isUsableKTAlphaOCRModule()){window.callBackOCRCard=function(e){var t,o,i,a;try{var s=JSON.parse(e),u=s.resultCode,c=s.result;"1"!==u&&n(new G_("ì¹´ë ì¤ìºì ì¤í¨íìµëë¤. [resultCode: ".concat(u,"]")));var l=function(e){if(e.includes("-")){var t=g(e.split("-"),4);return[t[0],t[1],t[2],t[3]]}var r=e.match(/^(.{4})(.{4})(.{4})(.+)/);if(null!=r){var n=g(r,5);return[n[1],n[2],n[3],n[4]]}throw Error("ì¹´ë ë²í¸ê° ì¬ë°ë¥´ì§ ììµëë¤.")}(c.number),d=c.validity.replace("/","");r({cardNo1:null!=(t=l[0])?t:"",cardNo2:null!=(o=l[1])?o:"",cardNo3:null!=(i=l[2])?i:"",cardNo4:null!=(a=l[3])?a:"",expiryDate:null!=d?d:""})}catch(t){n(new G_("ìëµ íì±ì ì¤í¨íìµëë¤. [response: ".concat(e,"]")))}};try{t.resolver.scanKTAlphaOCR()}catch(e){n(new G_("scanKTAlphaOCR í¸ì¶ì ì¤í¨íìµëë¤. [e: ".concat(e,"]")))}}else{var o={name:"scanOCRCard",params:{license:e.ocrLicense}};o.params=SW(o.name,{onSuccess:function(e){var t,o,i,a,s;try{var u=JSON.parse(e);r({cardNo1:null!=(t=null==u?void 0:u.cardNo1)?t:"",cardNo2:null!=(o=null==u?void 0:u.cardNo2)?o:"",cardNo3:null!=(i=null==u?void 0:u.cardNo3)?i:"",cardNo4:null!=(a=null==u?void 0:u.cardNo4)?a:"",expiryDate:null!=(s=null==u?void 0:u.expiryDate)?s:""})}catch(t){n(new G_("ìëµ íì±ì ì¤í¨íìµëë¤. [result: ".concat(e,"]")))}},onError:function(e){n(t.parseAndTranslateOCRNativeError(e))}}),t.resolver.sendToOCRModule(o)}}))}},{key:"getBiometricAuthMethods",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isUsableBiometricAuthModule();case 2:if(!e.sent){e.next=6;break}e.t0=new Promise((function(e,r){var n={name:"getBiometricAuthMethods"},o=t.setNativeSDKTimeout(r,n.name,3e3).removeTimeout;n.params=SW(n.name,{onSuccess:function(t){o();try{e(JSON.parse(t))}catch(t){e([])}},onError:function(e){o(),r(t.parseAndTranslateBiometricAuthNativeError(e))}}),t.sendToBiometricAuthModule(n)})),e.next=7;break;case 6:e.t0=[];case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e,this)})))}},{key:"parseAndTranslateBiometricAuthNativeError",value:function(e){var t={};try{return AW(t=JSON.parse(e))?"BIOMETRIC_CANCELED"===t.code?new Gx.BiometricAuthCanceledError(t.message):new Gx.BiometricAuthFailedError(t.message):new Gx.BiometricAuthFailedError("ìë¬ íì±ì ì¤í¨íìµëë¤. [RawError: ".concat(e,"]"))}catch(e){return new Gx.BiometricAuthFailedError("ìë¬ íì±ì ì¤í¨íìµëë¤. [RawError: ".concat(e,"]"))}}},{key:"parseAndTranslateOCRNativeError",value:function(e){var t={};try{return AW(t=JSON.parse(e))?"OCR_INVALID"===t.code?new q_(t.message):new G_(t.message):new G_("ìë¬ íì±ì ì¤í¨íìµëë¤. [RawError: ".concat(e,"]"))}catch(e){return new G_("ìë¬ íì±ì ì¤í¨íìµëë¤. [RawError: ".concat(e,"]"))}}},{key:"setNativeSDKTimeout",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=window.setTimeout((function(){e(new Gx.BiometricAuthFailedError("ë¤ì´í°ë¸ SDKì ìëµì´ ììµëë¤. [message: ".concat(t,"]")))}),r);return{removeTimeout:function(){return window.clearTimeout(n)}}}},{key:"sendToBiometricAuthModule",value:function(e){try{var t=this.brandpayCustomerSessionRepository.findCurrentSession().getGlobalTraceId();this.resolver.sendToBiometricAuthModule(ex($I({},e),{params:ex($I({},e.params),{globalTraceId:t})}))}catch(t){this.resolver.sendToBiometricAuthModule(e)}}}]),e}();function CW(e){return"string"==typeof e?"true"===e:e}function kW(e){return"string"==typeof e&&("true"===e||"false"===e)}function AW(e){return"object"==r(e)&&null!=e.code&&null!=e.message}var IW=function(){function e(){i(this,e)}return s(e,[{key:"isUsableBiometricAuthModule",value:function(){var e,t,r,n;return null!=(null==(t=null==(e=window.webkit)?void 0:e.messageHandlers)?void 0:t.connectPayWebViewAction)||null!=(null==(n=null==(r=window.webkit)?void 0:r.messageHandlers)?void 0:n.ConnectPayAuth)}},{key:"isUsableOCRModule",value:function(){var e,t,r,n;return null!=(null==(t=null==(e=window.webkit)?void 0:e.messageHandlers)?void 0:t.connectPayWebViewAction)||null!=(null==(n=null==(r=window.webkit)?void 0:r.messageHandlers)?void 0:n.ConnectPayOcr)}},{key:"sendToBiometricAuthModule",value:function(e){var t,r,n,o,i=null==(r=null==(t=window.webkit)?void 0:t.messageHandlers)?void 0:r.ConnectPayAuth,a=null==(o=null==(n=window.webkit)?void 0:n.messageHandlers)?void 0:o.connectPayWebViewAction;if(null==i){if(null==a)throw new Error("ios: ConnectPayAuth, connectPayWebViewAction ê°ì²´ê° ì¡´ì¬íì§ ììµëë¤.");a.postMessage(e)}else i.postMessage(e)}},{key:"sendToOCRModule",value:function(e){var t,r,n,o,i=null==(r=null==(t=window.webkit)?void 0:t.messageHandlers)?void 0:r.ConnectPayOcr,a=null==(o=null==(n=window.webkit)?void 0:n.messageHandlers)?void 0:o.connectPayWebViewAction;if(null==i){if(null==a)throw new G_("ios: ConnectPayOcr, connectPayWebViewAction ê°ì²´ê° ì¡´ì¬íì§ ììµëë¤.");a.postMessage(e)}else i.postMessage(e)}},{key:"isUsableKTAlphaOCRModule",value:function(){var e,t;return null!=(null==(t=null==(e=window.webkit)?void 0:e.messageHandlers)?void 0:t.goOCRCard)}},{key:"scanKTAlphaOCR",value:function(){window.webkit.messageHandlers.goOCRCard.postMessage({})}}]),e}(),xW=function(e){c(r,e);var t=v(r);function r(e,n){var o;return i(this,r),(o=t.call(this,e)).brandpayCustomerSessionRepository=n,o}return s(r,[{key:"getBrandpayIosNativeSDKFacade",value:function(){return new EW(this.brandpayCustomerSessionRepository,new IW,"ios")}},{key:"getBrandpayAndroidNativeFacade",value:function(){return new EW(this.brandpayCustomerSessionRepository,new wW,"android")}}]),r}(nM.AbstractBrandpayNativeServiceFactory),TW=function(){function e(){i(this,e),this.key="tosspayments/client-key-".concat(Math.random().toString(36).substring(2)),this.storage=new nM.MemoryStorage}return s(e,[{key:"findCurrentClientKey",value:function(){var e=this.storage.get(this.key);return new UU(e)}},{key:"saveCurrentClientKey",value:function(e){this.storage.set(this.key,e.value)}}]),e}(),NW=function(){function e(){i(this,e),this.key="tosspayments/client-key-".concat(Math.random().toString(36).substring(2)),this.storage=new nM.MemoryStorage}return s(e,[{key:"findCurrentClientKey",value:function(){var e=this.storage.get(this.key);return new Gx.ClientKey(e)}},{key:"saveCurrentClientKey",value:function(e){this.storage.set(this.key,e.value)}}]),e}(),MW=function(){function e(){i(this,e),this.key="tosspayments/mid-".concat(Math.random().toString(36).substring(2)),this.storage=new nM.MemoryStorage}return s(e,[{key:"findCurrentMid",value:function(){var e=this.storage.get(this.key);return null==e?null:new Gx.Mid(e)}},{key:"saveCurrentMid",value:function(e){this.storage.set(this.key,e.value)}}]),e}(),OW=function(){function e(){i(this,e),null==e.instance&&(e.instance=new nM.AsyncSemaMutex)}return s(e,[{key:"findCurrentMutex",value:function(){return e.instance}},{key:"saveCurrentMutex",value:function(){throw new Error("V1AdapterPaymentGatewayGlobalMutexRepositoryë mutex instanceë¥¼ êµì²´í  ì ììµëë¤.")}}]),e}(),DW=function(){function e(t,r){i(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.httpClient=new nM.XHRHttpClient}return s(e,[{key:"addHyundaiDepartmentStoreCard",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.post("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/methods/card-hyundai-department-store"),{headers:ex($I({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader(e)}),credentials:!0});case 2:return r=t.sent,n=r.result,o=r.newCustomerToken,t.abrupt("return",{newCustomerToken:o,cardPaymentMethod:n});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"removeHyundaiDepartmentStoreCard",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.httpClient.post("".concat(this.compileConfigRepository.getBrandpayServerOrigin(),"/v1/brandpay/clients/methods/card-hyundai-department-store/remove"),{headers:ex($I({},this.getDefaultHeaders()),{authorization:this.getAuthorizationHeader(e.customerToken)}),body:{methodId:e.methodId},credentials:!0});case 2:return r=t.sent,n=r.result,o=r.newCustomerToken,t.abrupt("return",{newCustomerToken:o,result:n});case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getAuthorizationHeader",value:function(e){return"Bearer ".concat(e)}},{key:"getDefaultHeaders",value:function(){var e,t,r=this.customerSessionRepository.findCurrentSession();return{"x-tosspayments-global-trace-id":null!=(e=r.getGlobalTraceId())?e:"unknown","x-tosspayments-referrer":null!=(t=r.getWindow().getHref())?t:"unknown"}}}]),e}(),KW=function(){function e(t,r){i(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.hyundaiDepartmentServer=new DW(t,r)}return s(e,[{key:"addHyundaiDepartmentStoreCard",value:function(e){return this.hyundaiDepartmentServer.addHyundaiDepartmentStoreCard(e)}},{key:"removeHyundaiDepartmentStoreCard",value:function(e){return this.hyundaiDepartmentServer.removeHyundaiDepartmentStoreCard(e)}}]),e}(),LW=function(){function e(t,r){i(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.brandpayServer=new nM.BrandpayAuthenticatedServerAPI(t,r)}return s(e,[{key:"getIdentity",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.brandpayServer.getIdentity(e);case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),!(t.t0 instanceof Error&&["REQUIRED_VERIFICATION","REQUIRED_PLCC_VERIFICATION","REQUIRED_OPENPAY_MIGRATION_VERIFICATION"].includes(null==t.t0?void 0:t.t0.code))){t.next=10;break}throw new Gx.LockedUserError;case 10:throw t.t0;case 11:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"getRegisteredPaymentMethods",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.brandpayServer.getRegisteredPaymentMethods(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getTemporaryMethods",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.brandpayServer.getTemporaryMethods(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getProperties",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.brandpayServer.getProperties(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"updateProperties",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.brandpayServer.updateProperties(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}}]),e}(),BW=function(){function e(t,r,n,o,a){i(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.clientKeyRepository=n,this.customContextRepository=o,this.midRepository=a,this.brandpayServer=new nM.BrandpayPublicServerAPI(t,r,n,a)}return s(e,[{key:"authenticateCustomerToken",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._authenticateCustomerTokenV2();case 3:case 11:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!nM.isTossPaymentsError(e.t0)||!["FORBIDDEN_CONSECUTIVE_REQUEST","NOT_FOUND_CUSTOMER_SESSION"].includes(e.t0.code)){e.next=12;break}return e.next=11,this._authenticateCustomerTokenV2();case 12:throw e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"_authenticateCustomerTokenV2",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,s,u,c,l,d,h,m,f,p,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=150,r=null,n=0,o=null,i=null,e.next=3,this.brandpayServer.createAuthSession();case 3:return a=e.sent,i=a.customerAuthCode,s=this.getRedirectUrl(a.authorizationUrl),u=Ex.getDebugLogger(),e.prev=6,e.next=9,this.brandpayServer.requestRedirectUrl(s);case 9:c=e.sent,o=c.elapsedTimeMs,u.info("Redirect url success"),e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(6),l=function(e){try{return JSON.stringify(e)}catch(e){return"Fail to parse"}},u.error("Redirect url failed",{message:l(null==e.t0?void 0:e.t0.message),stack:l(null==e.t0?void 0:e.t0.stack),rawError:l(e.t0)}),e.t0;case 17:if(null!=r){e.next=43;break}return d=0===n,e.next=21,Promise.all([this.brandpayServer.fetchCustomerTokenV2({authorizationElapsedTime:o,customerAuthCode:i}),Ix(d?0:t)]);case 21:h=e.sent,m=g(h,1),f=m[0],e.t1=f.status,e.next="INVALID"===e.t1?27:"PENDING"===e.t1?29:"APPROVED"===e.t1?38:39;break;case 27:return t=1e3,e.abrupt("continue",41);case 29:if(!d){e.next=36;break}return e.next=32,this.brandpayServer.createAuthSession();case 32:p=e.sent,i=p.customerAuthCode,y=this.getRedirectUrl(p.authorizationUrl),o=null,this.brandpayServer.requestRedirectUrl(y).then((function(e){o=e.elapsedTimeMs}));case 36:return t=150,n++,e.abrupt("break",39);case 38:r=f.customerToken;case 39:if(!(n>=300)){e.next=41;break}throw new Gx.AuthenticateRequestDenyError;case 41:e.next=17;break;case 43:return e.abrupt("return",r);case 44:case"end":return e.stop()}}),e,this,[[6,13]])})))}},{key:"isTermsAgreed",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.brandpayServer.getCustomerAuthorizationStatus();case 2:return e.abrupt("return",e.sent.isAgree);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getMerchantIntegration",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.brandpayServer.getMerchantIntegration();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"validatePaymentRequest",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(r=e).amount,o=tx(r,["amount"]),t.next=3,this.brandpayServer.validatePaymentRequest($I({amount:n.value},o));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getRedirectUrl",value:function(e){if("samsungfire"!==this.customContextRepository.findCustomContext())return e;var t=Tx(e),r=t.baseUrl,n=t.query,o=JSON.stringify(n);return Mx(r,{header:JSON.stringify({tranId:"VD.MOVS0053",pageId:""}),body:o})}}]),e}(),_W=function(){function e(t,r,n,o){i(this,e),this.compileConfigRepository=t,this.runtimeConfigRepository=r,this.customerSessionRepository=n,this.debugLogger=o,this.pgWindowServerAPI=new nM.PGWindowServerAPI}return s(e,[{key:"validatePaymentRequest",value:function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,u,c,l,d,h,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.clientKey,n=t.isMobile,o=t.isPromise,i=t.isWidgetSession,a=t.method,s=t.request,e.prev=1,u=this.resolvePgWindowServerUrl(r.value),c=this.customerSessionRepository.findCurrentSession(),l=$I(ex($I({},s),{methodType:a}),i?{requesterService:"WIDGET"}:{}),e.next=7,this.pgWindowServerAPI.postV1PxPaymentParameters({origin:u,clientKey:r.value,isMobile:n,isPromise:o,globalTraceId:c.getGlobalTraceId(),paymentParameter:l});case 7:return d=e.sent,h=d.data,e.abrupt("return",{paymentToken:h.token});case 12:e.prev=12,e.t0=e.catch(1);try{m=function(e){try{return JSON.stringify(e)}catch(e){return"Fail to parse"}},this.debugLogger.info("Uncaught Payment Gateway Error",{message:m(null==e.t0?void 0:e.t0.message),stack:m(null==e.t0?void 0:e.t0.stack),rawError:m(e.t0)})}catch(e){}throw e.t0;case 16:case"end":return e.stop()}}),e,this,[[1,12]])})))}},{key:"isValidBillingAuthenticationRequest",value:function(e){return ax(this,arguments,regeneratorRuntime.mark((function e(t){var r,n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.clientKey,n=t.isMobile,o=t.request,e.prev=1,i=this.resolvePgWindowServerUrl(r.value),a=this.customerSessionRepository.findCurrentSession(),e.next=5,this.pgWindowServerAPI.getV3BillingRoute({origin:i,clientKey:r.value,isMobile:n,globalTraceId:a.getGlobalTraceId(),billingParameter:ex($I({},o),{customerKey:o.customerKey.value,payMethod:o.method})});case 5:e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(1),!nM.isTossPaymentsError(e.t0)){e.next=11;break}throw e.t0;case 11:throw new VU;case 12:case"end":return e.stop()}}),e,this,[[1,7]])})))}},{key:"resolvePgWindowServerUrl",value:function(e){var t,r=this.runtimeConfigRepository.findCurrentRuntimeConfig();return null!=(null==(t=null==r?void 0:r.server)?void 0:t.baseUrl)?r.server.baseUrl:new UU(e).isTestKey()?this.compileConfigRepository.getPaymentGatewaySandboxServerOrigin():this.compileConfigRepository.getPaymentGatewayServerOrigin()}}]),e}(),UW=function(){function e(t,r){i(this,e),this.compileConfigRepository=t,this.customerSessionRepository=r,this.widgetServerAPI=new nM.WidgetServerAPI}return s(e,[{key:"fetchWidgetGroupKeys",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=this.customerSessionRepository.findCurrentSession(),r.next=4,this.widgetServerAPI.getV1WidgetGroupsKeys({origin:this.compileConfigRepository.getPaymentWidgetServerOrigin(),widgetKey:e.value,variantKey:t,globalTraceId:n.getGlobalTraceId(),referrer:n.getWindow().getHref()});case 4:return o=r.sent.data,r.abrupt("return",{getWidgetClientKey:function(){return new UU(o.widget.key)},getWidgetVariantKey:function(){return o.widget.variantKey},getNormalMid:function(){return null!=o.normal?new Gx.Mid(o.normal.mid):null},getKeyinMid:function(){return null!=o.keyin?new Gx.Mid(o.keyin.mid):null},getInternationalMid:function(){return null!=o.international?new Gx.Mid(o.international.mid):null},getBrandpayMid:function(){return null!=o.brandpay?new Gx.Mid(o.brandpay.mid):null}});case 8:if(r.prev=8,r.t0=r.catch(0),!nM.isTossPaymentsError(r.t0)){r.next=16;break}if(!["4015","4009"].includes(r.t0.code)){r.next=13;break}throw new vU(r.t0.code,r.t0.message);case 13:if("UNAUTHORIZED_KEY"!==r.t0.code){r.next=15;break}throw new yU(r.t0.code,r.t0.message);case 15:throw new Gx.UnknownError(r.t0);case 16:throw r.t0;case 17:case"end":return r.stop()}}),r,this,[[0,8]])})))}},{key:"fetchWidgetBrandpayConfig",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=this.customerSessionRepository.findCurrentSession(),r.next=4,this.widgetServerAPI.getV1WidgetBrandpayConfig({origin:this.compileConfigRepository.getPaymentWidgetServerOrigin(),widgetKey:e.value,variantKey:t,globalTraceId:n.getGlobalTraceId(),referrer:n.getWindow().getHref()});case 4:return o=r.sent.data,r.abrupt("return",{highlightColor:null==o?void 0:o.highlightColor,availablePaymentMethods:null==o?void 0:o.availablePaymentMethods});case 8:if(r.prev=8,r.t0=r.catch(0),!nM.isTossPaymentsError(r.t0)||!["4015","4009"].includes(r.t0.code)){r.next=12;break}throw new vU(r.t0.code,r.t0.message);case 12:throw new Gx.UnknownError(r.t0);case 13:case"end":return r.stop()}}),r,this,[[0,8]])})))}}]),e}();function FW(e){var t=null;return{with:function(r,n){return e instanceof Error&&e instanceof r&&(t=n(e)),this},otherwise:function(e){return null==t?e():t}}}var WW=function(){function e(t,r,n){var o;i(this,e),this.sdkConstructorParams=t,this.dependencyConfigurations=r,this.debugLogger=n;var a=this.dependencyConfigurations.V1AdapterBrandpayStartCustomerSessionService.execute({clientKey:new __.V1AdapterClientKey(this.sdkConstructorParams.clientKey),customerKey:new __.V1AdapterCustomerKey(this.sdkConstructorParams.customerKey),redirectURL:this.sdkConstructorParams.redirectUrl,windowTarget:null!=(o=this.sdkConstructorParams.windowTarget)?o:"iframe",customStyle:this.sdkConstructorParams.customStyle,customContext:this.sdkConstructorParams.customContext,ocrLicense:this.sdkConstructorParams.ocrLicense,mid:this.sdkConstructorParams.mid,gtid:this.sdkConstructorParams.gtid});this.debugLogger.setGlobalTraceId(a.getGlobalTraceId()),this.debugLogger.setCustomerKey(a.getCustomerKey().value)}return s(e,[{key:"requestPayment",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"changePassword",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"openSettings",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"addPaymentMethod",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"toggleOneTouchPay",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"changeOneTouchPay",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("changeOneTouchPayë ì§ìíì§ ììµëë¤. setupOneTouchPayV1ë¥¼ ì¬ì©í´ì£¼ì¸ì.");case 1:case"end":return e.stop()}}),e)})))}},{key:"getPaymentMethods",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"requestAgreement",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"isOneTouchPayEnabled",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"addHyundaiDepartmentStoreCard",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"requestBillingAuth",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"addPaymentMethodV1",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.dependencyConfigurations.V1AdapterBrandpayAddPaymentMethodService.execute(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),FW(t.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).otherwise((function(){return t.t0}));case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"openSettingsV1",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.dependencyConfigurations.V1AdapterBrandpayChangeSettingsService.execute({oneTouchPayLabel:null==e?void 0:e.oneTouchPayLabel});case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),FW(t.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).otherwise((function(){return t.t0}));case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"setupPasswordV1",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.V1AdapterBrandpaySetupPasswordService.execute();case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),FW(e.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).otherwise((function(){return e.t0}));case 8:case"end":return e.stop()}}),e,this,[[0,5]])})))}},{key:"setupCashReceiptV1",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.V1AdapterBrandpayChangeCashReceiptService.execute();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),FW(e.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).otherwise((function(){return e.t0}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"isOneTouchPayEnabledV1",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.V1AdapterBrandpayGetIsOneTouchPayEnabledService.execute();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),FW(e.t0).with(Gx.NeedAgreementWithTermsError,(function(){return new iB.Errors.NeedAgreementWithTermsError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedMerchantOneTouchSettingError,(function(){return new iB.Errors.NeedMerchantOneTouchSettingError})).otherwise((function(){return e.t0}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"setupOneTouchPayV1",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.dependencyConfigurations.V1AdapterBrandpayChangeOneTouchPayService.execute(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),FW(t.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).with(Gx.NeedMerchantOneTouchSettingError,(function(){return new iB.Errors.NeedMerchantOneTouchSettingError})).otherwise((function(){return t.t0}));case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"toggleOneTouchPayV1",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.dependencyConfigurations.V1AdapterBrandpayToggleOneTouchPayService.execute(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),FW(t.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).with(Gx.NeedMerchantOneTouchSettingError,(function(){return new iB.Errors.NeedMerchantOneTouchSettingError})).otherwise((function(){return t.t0}));case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"requestPaymentV1",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.debugLogger.setOrderId(e.orderId),t.next=4,this.dependencyConfigurations.V1AdapterBrandpayRequestPaymentService.execute(ex($I({},e),{amount:__.V1AdapterDomesticAmount.of({value:e.amount})}));case 4:return r=t.sent,t.abrupt("return",{paymentKey:r.paymentKey,methodId:r.methodId,orderId:r.orderId,amount:r.amount.value});case 8:throw t.prev=8,t.t0=t.catch(0),FW(t.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).with(Gx.BelowZeroAmountError,(function(){return new iB.Errors.InvalidAmountValueError(e.amount)})).with(Gx.InvalidAmountValueError,(function(){return new iB.Errors.InvalidAmountValueError(e.amount)})).with(Gx.PaymentRequestFailError,(function(e){var t=e.code,r=e.message,n=e.orderId;return new iB.Errors.PaymentRequestFailError(r,t,n)})).with(__.AccountAuthNumberExpiredError,(function(){return new iB.Errors.AccountAuthNumberExpiredError})).with(__.PaymentMethodNotExistsError,(function(){return new iB.Errors.PaymentMethodNotExistsError})).otherwise((function(){return t.t0}));case 11:case"end":return t.stop()}}),t,this,[[0,8]])})))}},{key:"requestPaymentAuthV1",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.debugLogger.setOrderId(e.orderId),t.next=4,this.dependencyConfigurations.V1AdapterBrandpayRequestPaymentAuthService.execute(ex($I({},e),{amount:__.V1AdapterDomesticAmount.of({value:e.amount})}));case 4:t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),FW(t.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).with(__.AccountAuthNumberExpiredError,(function(){return new iB.Errors.AccountAuthNumberExpiredError})).with(__.PaymentMethodNotExistsError,(function(){return new iB.Errors.PaymentMethodNotExistsError})).otherwise((function(){return t.t0}));case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"isBiometricAuthEnabledV1",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.V1AdapterBrandpayGetIsBiometricAuthEnabledService.execute();case 3:return t=e.sent,r=t.isEnabled,e.abrupt("return",r);case 8:throw e.prev=8,e.t0=e.catch(0),FW(e.t0).with(Gx.NeedAgreementWithTermsError,(function(){return new iB.Errors.NeedAgreementWithTermsError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NotSupportedEnvironment,(function(){return new iB.Errors.NotSupportedEnvironment("isBiometricAuthEnabledë¥¼ ì´ì©í  ì ìë íê²½ìëë¤.")})).otherwise((function(){return e.t0}));case 11:case"end":return e.stop()}}),e,this,[[0,8]])})))}},{key:"toggleBiometricAuthV1",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.V1AdapterBrandpayToggleBiometricAuthService.execute();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),FW(e.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).with(Gx.NeedAgreementWithTermsError,(function(){return new iB.Errors.NeedAgreementWithTermsError})).with(Gx.NotSupportedEnvironment,(function(){return new iB.Errors.NotSupportedEnvironment("toggleBiometricAuthë¥¼ ì´ì©í  ì ìë íê²½ìëë¤.")})).otherwise((function(){return e.t0}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"setupBiometricAuthV1",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.V1AdapterBrandpayChangeBiometricAuthSettingsService.execute();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),FW(e.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NotSupportedEnvironment,(function(){return new iB.Errors.NotSupportedEnvironment("setupBiometricAuthë¥¼ ì´ì©í  ì ìë íê²½ìëë¤.")})).otherwise((function(){return e.t0}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"getPaymentMethodsV1",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.V1AdapterBrandpayGetPaymentMethodsService.execute();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),FW(e.t0).with(Gx.NeedAgreementWithTermsError,(function(){return new iB.Errors.NeedAgreementWithTermsError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).otherwise((function(){return e.t0}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"requestAgreementV1",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.dependencyConfigurations.V1AdapterBrandpayRequestManualAgreementService.execute(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),FW(t.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(__.InvalidTermScopeError,(function(){return new iB.Errors.InvalidTermScopeError})).otherwise((function(){return t.t0}));case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"requestPasswordAuthV1",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.V1AdapterBrandpayRequestPasswordAuthService.execute();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),FW(e.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).otherwise((function(){return e.t0}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"authenticateV1",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.V1AdapterBrandpayAuthenticateService.execute();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),FW(e.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).with(Gx.NotRegisteredRedirectUrlError,(function(){return new iB.Errors.NotRegisteredRedirectUrlError})).otherwise((function(){return e.t0}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"addHyundaiDepartmentStoreCardV1",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.dependencyConfigurations.V1AdapterBrandpayAddHyundaiDepartmentStoreCardService.execute();case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),FW(e.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.NotRegisteredRedirectUrlError,(function(){return new iB.Errors.NotRegisteredRedirectUrlError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).otherwise((function(){return e.t0}));case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"removeHyundaiDepartmentStoreCardV1",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.dependencyConfigurations.V1AdapterBrandpayRemoveHyundaiDepartmentStoreCardService.execute({methodId:e});case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),FW(t.t0).with(Gx.UserCancelError,(function(){return new iB.Errors.UserCancelError})).with(Gx.NotRegisteredRedirectUrlError,(function(){return new iB.Errors.NotRegisteredRedirectUrlError})).with(Gx.AuthenticateRequestDenyError,(function(){return new iB.Errors.AuthRequestMaximumCallExceededError})).with(Gx.AuthenticateTokenAcquireFailError,(function(){return new iB.Errors.AuthRequestFailError})).with(Gx.NeedAllowPopupError,(function(){return new iB.Errors.NeedAllowPopupError})).otherwise((function(){return t.t0}));case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}}]),e}(),qW=function(){function e(t,r,n){var o,a;i(this,e),this.sdkConstructorParams=t,this.dependencyConfigurations=r,this.debugLogger=n,this.dependencyConfigurations.PaymentGatewayStartRuntimeConfigurationService.execute({client:null==(o=this.sdkConstructorParams.environments)?void 0:o.client,server:null==(a=this.sdkConstructorParams.environments)?void 0:a.server});var s=new __.V1AdapterClientKey(this.sdkConstructorParams.clientKey),u=this.dependencyConfigurations.PaymentGatewayStartCustomerSessionService.execute({clientKey:s,customerKey:new __.V1AdapterCustomerKey(this.sdkConstructorParams.customerKey),gtid:this.sdkConstructorParams.gtid});this.debugLogger.setGlobalTraceId(u.getGlobalTraceId()),this.debugLogger.setCustomerKey(u.getCustomerKey().value),s.isWidgetKey()&&this.debugLogger.info("ìì ¯í¤ë¡ V1 Payment SDK Adapterë¥¼ ì´ê¸°ííììµëë¤.")}return s(e,[{key:"requestPayment",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"requestBillingAuth",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"requestPaymentV1",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function r(){var n,o,i,a,s,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=g("string"==typeof e?[e,t]:["",e],2),o=n[0],i=n[1],a=__.PaymentParameter.parsePaymentParameters({methodCode:o,requestParams:i}),s=a.methodCode,u=a.requestParams,this.debugLogger.setOrderId(u.orderId),r.prev=2,r.next=5,this.dependencyConfigurations.V1AdapterPaymentGatewayRequestPaymentService.execute(s,u);case 5:return r.abrupt("return",r.sent);case 8:throw r.prev=8,r.t0=r.catch(2),FW(r.t0).with(Gx.UserCancelError,(function(){return new OB.Errors.UserCancelError})).with(Gx.PaymentRequestFailError,(function(e){var t=e.message,r=e.orderId,n=e.code;return new OB.Errors.PaymentRequestFailError(t,{orderId:r,code:n})})).with(Gx.NotSupportedPromiseError,(function(e){var t=e.message;return new OB.Errors.InvalidParametersError(t)})).with(__.InvalidClientKeyError,(function(e){var t=e.clientKey;return new OB.Errors.InvalidClientKeyError(t)})).otherwise((function(){return r.t0}));case 11:case"end":return r.stop()}}),r,this,[[2,8]])})))}},{key:"requestBillingAuthV1",value:function(e,t){return ax(this,null,regeneratorRuntime.mark((function r(){var n,o,i,a;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=(n=t).customerKey,i=tx(n,["customerKey"]),a=__.PaymentParameter.parseBillingAuthInfo(ex($I({},i),{customerKey:new __.V1AdapterCustomerKey(o)})),r.prev=1,r.next=4,this.dependencyConfigurations.V1AdapterPaymentGatewayRequestBillingAuthenticationService.execute(e,a.params);case 4:return r.abrupt("return",r.sent);case 7:throw r.prev=7,r.t0=r.catch(1),FW(r.t0).with(Gx.UserCancelError,(function(){return new OB.Errors.UserCancelError})).with(__.NetworkError,(function(){return new OB.Errors.NetworkError})).otherwise((function(){return r.t0}));case 10:case"end":return r.stop()}}),r,this,[[1,7]])})))}},{key:"cancelPaymentV1",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.dependencyConfigurations.V1AdapterPaymentGatewayCancelPaymentService.execute();case 1:case"end":return e.stop()}}),e,this)})))}}]),e}(),GW=function(){function e(t,r,n){var o;i(this,e),this.sdkConstructorParams=t,this.dependencyConfigurations=r,this.debugLogger=n;try{this.checkout=new __.WidgetCheckout,this.widgets={paymentMethodsWidget:null,agreementWidget:null};var a=this.dependencyConfigurations.PaymentWidgetStartCustomerSessionService.execute({clientKey:new Gx.ClientKey(this.sdkConstructorParams.clientKey),customerKey:new __.V1AdapterWidgetCustomerKey(this.sdkConstructorParams.customerKey),brandpay:{redirectUrl:null==(o=this.sdkConstructorParams.brandpay)?void 0:o.redirectUrl},gtid:this.sdkConstructorParams.gtid});this.debugLogger.setGlobalTraceId(a.getGlobalTraceId()),this.debugLogger.setCustomerKey(a.getCustomerKey().value)}catch(t){throw FW(t).with(Gx.InvalidClientKeyError,(function(){return new SL.Errors.InvalidClientKeyError})).with(Gx.InvalidCustomerKeyError,(function(){return new SL.Errors.InvalidCustomerKeyError})).with(Gx.InsecureKeyUsageError,(function(){return new SL.Errors.InsecureKeyUsageError})).otherwise((function(){return t}))}}return s(e,[{key:"setAmount",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"renderPaymentMethods",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"renderAgreement",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"requestPayment",value:function(){return ax(this,null,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Not Supported for v1-adapter");case 1:case"end":return e.stop()}}),e)})))}},{key:"renderAgreementV1",value:function(e,t){function r(e){return{agreedRequiredTerms:e.agreedRequiredTerms,terms:e.agreements.map((function(e){var t=e.term,r=e.agreed;return{id:t.id,agreed:r,required:t.required,type:t.type,order:t.displayOrder,title:t.title,content:t.content,primary:t.isTosspaymentsTerm}}))}}try{var n=this.dependencyConfigurations.V1AdapterPaymentWidgetRenderAgreementService.execute({selector:e,clientKey:new Gx.ClientKey(this.sdkConstructorParams.clientKey),variantKey:t.variantKey});return this.widgets.agreementWidget=n,{on:function(e,t){return n.on(e,(function(e){var n=r(e);t(n)}))},getAgreementStatus:function(){return r(n.getAgreementStatus())}}}catch(e){throw FW(e).with(Gx.InvalidSelectorError,(function(){return new SL.Errors.InvalidSelectorError})).otherwise((function(){return e}))}}},{key:"renderPaymentMethodsV1",value:function(e,t,r){var n=this;try{var o=__.V1AdapterDomesticAmount.isDomestic(t)?__.V1AdapterDomesticAmount.of(t):__.V1AdapterOverseasAmount.of(t),i=t.currency,a=t.country;this.dependencyConfigurations.V1AdapterPaymentWidgetUpdateAmountService.execute(this.checkout,o);var s=this.dependencyConfigurations.V1AdapterPaymentWidgetRenderPaymentMethods.execute({selector:e,clientKey:new Gx.ClientKey(this.sdkConstructorParams.clientKey),variantKey:r.variantKey,checkout:this.checkout});return this.widgets.paymentMethodsWidget=s,s.on("internalError",(function(e){var t,r=FW(e).with(Gx.InvalidSelectorError,(function(){return new SL.Errors.InvalidSelectorError})).with(vU,(function(){return new SL.Errors.InvalidVariantKeyError})).with(yU,(function(){return new SL.Errors.InvalidClientKeyError})).with(Gx.UnknownError,(function(){return new SL.Errors.UnknownError})).otherwise((function(){return e}));n.debugLogger.error("V1AdapterPaymentWidgetRenderPaymentMethods error",{message:r.message,stack:null!=(t=r.stack)?t:"No stack",rawError:VW(r)}),Promise.reject(r)})),{getSelectedPaymentMethod:function(){var e,t;try{var r=s.getSelectedPaymentMethod();switch(r.type){case"BRANDPAY":return{type:"BRANDPAY",methodId:r.brandpay.methodId};case"CUSTOM":return{type:"CUSTOM",paymentMethodKey:r.custom.methodKey};case"KEYIN":return{type:"KEYIN",method:"ì¹´ë"}}return"NORMAL"===r.type&&"TRANSFER"===r.normal.method?{type:"NORMAL",method:"ê³ì¢ì´ì²´",transfer:{provider:null!=(t=null==(e=r.normal.transfer)?void 0:e.provider)?t:"UNKNOWN"}}:null!=r.normal.easyPay?{type:"NORMAL",method:"ê°í¸ê²°ì ",easyPay:{provider:r.normal.easyPay.provider}}:{type:"NORMAL",method:function(){switch(r.normal.method){case"CARD":return"ì¹´ë";case"TRANSFER":return"ê³ì¢ì´ì²´";case"VIRTUAL_ACCOUNT":return"ê°ìê³ì¢";case"MOBILE_PHONE":return"í´ëí°";case"CULTURE_GIFT_CERTIFICATE":return"ë¬¸íìíê¶";case"BOOK_GIFT_CERTIFICATE":return"ëìë¬¸íìíê¶";case"GAME_GIFT_CERTIFICATE":return"ê²ìë¬¸íìíê¶";case"FOREIGN_EASY_PAY":return"í´ì¸ê°í¸ê²°ì ";default:return}}()}}catch(e){throw FW(e).with(__.NotRenderedPaymentMethodsUI,(function(){return new SL.Errors.NotRenderedPaymentMethodsUIError})).with(__.NotSelectedPaymentMethod,(function(){return new SL.Errors.NotSelectedPaymentMethodError})).otherwise((function(){return e}))}},on:function(e,t){try{s.on(e,t)}catch(e){if(e instanceof Gx.InvalidCallbackParameterError)return;throw e}},updateAmount:function(e){var t=Gx.DomesticAmount.isDomestic({value:e,currency:i})?__.V1AdapterDomesticAmount.of({value:e}):__.V1AdapterOverseasAmount.of({value:e,currency:i,country:a});n.dependencyConfigurations.V1AdapterPaymentWidgetUpdateAmountService.execute(n.checkout,t)},__getSelectedPaymentMethods:function(){try{var e=s.getSelectedPaymentMethod();switch(e.type){case"BRANDPAY":return"BRANDPAY";case"CUSTOM":return"CUSTOM__".concat(e.custom.methodKey);case"NORMAL":case"KEYIN":return null!=e.normal.easyPay?"CARD":e.normal.method}}catch(e){return null}},getWidgetLogData:function(){var e,t,r,o,i=s.getWidgetKeyData(),a=s.getSelectedPaymentMethodLogData(),u=null!=(e=n.checkout.getAmount())?e:void 0;return{widgetKey:null==(t=i.getWidgetClientKey())?void 0:t.value,variantKey:null!=(r=i.getWidgetVariantKey())?r:void 0,mid:null==(o=i.getMid())?void 0:o.value,amount:u,paymentMethod:null==a?void 0:a.paymentMethod,cardCompany:null==a?void 0:a.cardCompany,easyPay:null==a?void 0:a.easyPay,provider:null==a?void 0:a.provider}}}}catch(e){throw FW(e).with(Gx.UserCancelError,(function(){return new SL.Errors.UserCancelError})).with(Gx.InvalidAmountValueError,(function(){return new SL.Errors.InvalidAmountValueError})).with(Gx.InvalidAmountCurrencyError,(function(){return new SL.Errors.InvalidCurrencyError})).with(Gx.InvalidSelectorError,(function(){return new SL.Errors.InvalidSelectorError})).otherwise((function(){return e}))}}},{key:"requestPaymentV1",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){var r,n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(n=this.widgets.paymentMethodsWidget)){t.next=3;break}throw new SL.Errors.NotSelectedPaymentMethodError;case 3:if(!(null==(o=this.checkout.getAmount())||Number.isNaN(Number(o.value))||Number(o.value)<0)){t.next=6;break}throw new SL.Errors.InvalidAmountValueError;case 6:if(!n.hasRenderFailed()){t.next=8;break}throw new SL.Errors.UnknownError;case 8:return t.prev=8,t.next=11,this.dependencyConfigurations.V1AdapterPaymentWidgetRequestPaymentService.execute(e,o,{paymentMethodsWidget:n,agreementWidget:null!=(r=this.widgets.agreementWidget)?r:void 0});case 11:if(void 0!==(i=t.sent)){t.next=14;break}return t.abrupt("return");case 14:return t.abrupt("return",ex($I({},i),{amount:i.amount.value}));case 17:if(t.prev=17,t.t0=t.catch(8),!(t.t0 instanceof Gx.UnsupportedTestPhasePaymentMethodError)){t.next=21;break}return t.abrupt("return",void alert("íì´ì½ë íì¤í¸ íê²½ ê²°ì ë¥¼ ì§ìíì§ ììµëë¤. ë¼ì´ë¸ í¤ë¡ íì¸í´ ì£¼ì¸ì."));case 21:throw FW(t.t0).with(Gx.UserCancelError,(function(){return new SL.Errors.UserCancelError})).with(Gx.ProviderStatusUnhealthyError,(function(){return new SL.Errors.ProviderStatusUnhealthyError})).with(Gx.NeedAgreementWithRequiredTermsError,(function(){return new SL.Errors.NeedAgreementWithRequiredTermsError})).with(Gx.InvalidAmountCurrencyError,(function(){return new SL.Errors.InvalidAmountValueError})).with(Gx.NeedCardPaymentDetailError,(function(){return new SL.Errors.NeedCardPaymentDetailError})).with(Gx.NeedRefundAccountDetailError,(function(){return new SL.Errors.NeedRefundAccountDetailError})).with(Gx.ExceedDepositAmountLimitError,(function(){return new SL.Errors.ExceedDepositAmountLimitError})).with(Gx.ExceedMaxDueDateError,(function(){return new SL.Errors.ExceedMaxDueDateError})).with(__.NotRenderedPaymentMethodsUI,(function(){return new SL.Errors.NotRenderedPaymentMethodsUIError})).with(Gx.NotSelectedPaymentMethodError,(function(){return new SL.Errors.NotSelectedPaymentMethodError})).with(Gx.PaymentRequestFailError,(function(e){var t=e.message,r=e.orderId,n=e.code;return new SL.Errors.PaymentRequestFailError(t,{orderId:r,code:n})})).with(Gx.NotSupportedPromiseError,(function(e){var t=e.message;return new SL.Errors.InvalidParametersError(t)})).with(Y_,(function(){return new SL.Errors.AccountAuthNumberExpiredError})).with(V_,(function(){return new SL.Errors.PaymentMethodNotExistsError})).with(Gx.UnknownError,(function(){return new SL.Errors.UnknownError})).otherwise((function(){return t.t0}));case 22:case"end":return t.stop()}}),t,this,[[8,17]])})))}},{key:"requestPaymentForNativeSDKV1",value:function(e){return ax(this,null,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.dependencyConfigurations.V1AdapterPaymentWidgetRequestPaymentForNativeSDKService.execute(e,this.checkout.getAmount(),{paymentMethodsWidget:this.widgets.paymentMethodsWidget});case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t.catch(0),this.debugLogger.error("Uncaught V1AdapterRequestPaymentForNativeSDK error",{message:null==t.t0?void 0:t.t0.message,stack:null==t.t0?void 0:t.t0.stack,rawError:VW(t.t0)}),t.t0;case 8:case"end":return t.stop()}}),t,this,[[0,5]])})))}}]),e}();function VW(e){try{return JSON.stringify(e)}catch(e){return"Fail to parse"}}var YW="4fb7b3fd55617f04db3fa08a053cf895f02479fe".slice(0,7);function HW(e,t){var r,n=function(e){try{return e.isActiveDebugLogger?new D_(e.stage,e.version,e.uri,e.sdkName,e.gtid):new L_(e.stage,e.version,e.uri,e.sdkName,e.gtid)}catch(e){return new K_}}({isActiveDebugLogger:!0,stage:"live",version:"c7d4edf18f768b7cb67e880e2cc64aff0c1b50db",userAgent:null==(r=null==window?void 0:window.navigator)?void 0:r.userAgent,uri:null==location?void 0:location.href,sdkName:"v1-adapter",gtid:t.gtid});n.setClientKey(e);var o=window.__SDK_LOAD_START_TIME__,i=window.__SDK_LOAD_END_TIME__;n.info(JSON.stringify({startTime:o,endTime:i,processingTime:null!=o&&null!=i?i.getTime()-o.getTime():void 0}),{transaction:"SDK Load"});var a=new Date;try{var s=new jW(n).create({clientKey:e,gtid:t.gtid,activeDebugLog:!0,deployVersion:"c7d4edf18f768b7cb67e880e2cc64aff0c1b50db",stage:"v2",sdkName:"v1-adapter",compileConfig:{brandpay:{productUrl:"https://connect.tosspayments.com",serverOrigin:"https://api.tosspayments.com"},paymentWidget:{productUrl:"https://payment-widget.tosspayments.com",serverOrigin:"https://api.tosspayments.com"},paymentGateway:{productUrl:"https://payment-gateway.tosspayments.com",sandboxProductUrl:"https://payment-gateway-sandbox.tosspayments.com",serverOrigin:"https://apigw.tosspayments.com",sandboxServerOrigin:"https://apigw-sandbox.tosspayments.com"}},debugLoggerTransport:n,domainLoggerTransport:{request:function(){},start:function(){},success:function(){},fail:function(){}}}),u=new Date;return n.info(JSON.stringify({startTime:a,endTime:u,processingTime:u.getTime()-a.getTime()}),{transaction:"SDK Init Success"}),s}catch(e){var c=new Date;throw n.error(JSON.stringify({startTime:a,endTime:c,processingTime:c.getTime()-a.getTime(),errorName:null==e?void 0:e.name,errorMessage:null==e?void 0:e.message,errorStack:null==e?void 0:e.stack}),{transaction:"SDK Init Fail"}),e}}HW.version="v1.".concat(YW),HW.ANONYMOUS="@@ANONYMOUS";var jW=function(e){c(r,e);var t=v(r);function r(e){var n;return i(this,r),(n=t.call(this)).debugLogger=e,n}return s(r,[{key:"createSDKInstance",value:function(e,t){return new zW(e,t,this.debugLogger)}},{key:"configDependency",value:function(e){var t=new OW,r=new TW,n=new lF,o=new dF,i=new hF,a=new MW,s=new LW(e.getDependency("CompileConfigRepository"),e.getDependency("BrandpayCustomerSessionRepository")),u=new Gx.BrandpayAuthenticatedAPIService(s,e.getDependency("BrandpayCustomerSessionRepository"),e.getDependency("AsyncSemaMutex")),c=new BW(e.getDependency("CompileConfigRepository"),e.getDependency("BrandpayCustomerSessionRepository"),r,o,a),l=new JF(this.debugLogger,o),d=new xW(e.getDependency("DeviceManager"),e.getDependency("BrandpayCustomerSessionRepository")),h=new __.V1AdapterBrandpayCustomerAuthService(u,c,e.getDependency("BrandpayCustomerSessionRepository"),l,e.getDependency("ProductStageRepository"),r,d.create(),n,o,a),m=new __.V1AdapterBrandpayStartCustomerSessionService(e.getDependency("BrandpayCustomerSessionRepository"),r,e.getDependency("CustomerSessionFactory"),n,o,a,e.getDependency("TracingIdRepository")),f=new __.V1AdapterBrandpayChangeOneTouchPayService(h,l,e.getDependency("BrandpayCustomerSessionRepository"),c,e.getDependency("ProductStageRepository"),r,d.create(),new nM.MemoryStorageNoopMidRepository),p=new __.V1AdapterBrandpayToggleOneTouchPayService(h,l,e.getDependency("BrandpayCustomerSessionRepository"),c,u,e.getDependency("ProductStageRepository"),r,d.create(),new nM.MemoryStorageNoopMidRepository),y=new __.V1AdapterBrandpayGetIsOneTouchPayEnabledService(e.getDependency("BrandpayCustomerSessionRepository"),u,c),v=new __.V1AdapterBrandpayGetIsBiometricAuthEnabledService(e.getDependency("BrandpayCustomerSessionRepository"),c,d.create()),g=new __.V1AdapterBrandpaySetupPasswordService(h,l,e.getDependency("BrandpayCustomerSessionRepository"),e.getDependency("ProductStageRepository"),r,d.create(),new nM.MemoryStorageNoopMidRepository),w=new __.V1AdapterBrandpayChangeCashReceiptService(h,l,e.getDependency("BrandpayCustomerSessionRepository"),e.getDependency("ProductStageRepository"),r,d.create(),a),S=new __.V1AdapterBrandpayChangeSettingsService(h,l,e.getDependency("BrandpayCustomerSessionRepository"),e.getDependency("ProductStageRepository"),r,d.create(),n,o,a,u,i),R=new __.V1AdapterBrandpayRequestPaymentService(h,l,e.getDependency("BrandpayCustomerSessionRepository"),e.getDependency("ProductStageRepository"),r,e.getDependency("DomainLogger"),d.create(),c,n,o,a),b=new __.V1AdapterBrandpayRequestPaymentAuthService(h,l,e.getDependency("BrandpayCustomerSessionRepository"),e.getDependency("ProductStageRepository"),r,e.getDependency("DomainLogger"),d.create(),n,o),P=new __.V1AdapterBrandpayAddPaymentMethodService(h,u,l,e.getDependency("BrandpayCustomerSessionRepository"),e.getDependency("ProductStageRepository"),r,e.getDependency("DomainLogger"),d.create(),n,o,a,i),E=new __.V1AdapterBrandpayToggleBiometricAuthService(e.getDependency("BrandpayCustomerSessionRepository"),h,e.getDependency("ProductStageRepository"),l,d.create(),r,new nM.MemoryStorageNoopMidRepository),C=new __.V1AdapterBrandpayChangeBiometricAuthSettingsService(e.getDependency("BrandpayCustomerSessionRepository"),h,e.getDependency("ProductStageRepository"),l,d.create(),r,new nM.MemoryStorageNoopMidRepository),k=new __.V1AdapterBrandpayGetPaymentMethodsService(e.getDependency("BrandpayCustomerSessionRepository"),u,c),A=new __.V1AdapterBrandpayRequestManualAgreementService(l,e.getDependency("BrandpayCustomerSessionRepository"),e.getDependency("ProductStageRepository"),r,new nM.MemoryStorageNoopMidRepository),I=new __.V1AdapterBrandpayRequestPasswordAuthService(h,l,e.getDependency("BrandpayCustomerSessionRepository"),e.getDependency("ProductStageRepository"),r,d.create(),new nM.MemoryStorageNoopMidRepository),x=new __.V1AdapterBrandpayAuthenticateService(h),T=new KW(e.getDependency("CompileConfigRepository"),e.getDependency("BrandpayCustomerSessionRepository")),N=new __.HyundaiDepartmentStoreAPIService(T,e.getDependency("BrandpayCustomerSessionRepository"),e.getDependency("AsyncSemaMutex")),M=new __.V1AdapterBrandpayAddHyundaiDepartmentStoreCardService(h,u,N,g),O=new __.V1AdapterBrandpayRemoveHyundaiDepartmentStoreCardService(h,N),D=new NW,K=new JF(this.debugLogger,o),L=new nM.WebStoragePaymentGatewayCustomerSessionRepository,B=new nM.MemoryStorageMidRepository,_=new nM.WebStoragePaymentGatewayCustomerSessionRepository,U=new nM.MemoryStorageMidRepository,F=new nM.WebStoragePaymentGatewayCustomerSessionRepository,W=new nM.MemoryStorageMidRepository,q=new nM.WebStorageBrandpayCustomerSessionRepository,G=new nM.MemoryStorageMidRepository,V=new UW(e.getDependency("CompileConfigRepository"),e.getDependency("PaymentWidgetCustomerSessionRepository")),Y=new mF,H=new __.V1AdapterWidgetMidResolver(D,Y,B,U,W,G,V),j=new __.V1AdapterWidgetBrandpayConfigResolver(D,Y,q,V),z=new QF(this.debugLogger),J=new JF(this.debugLogger,o),Q=new ZF,X=new XF(Q),Z=new nM.BrandpayAuthenticatedServerAPI(e.getDependency("CompileConfigRepository"),q),$=new Gx.BrandpayAuthenticatedAPIService(Z,q,e.getDependency("AsyncSemaMutex")),ee=new BW(e.getDependency("CompileConfigRepository"),q,D,o,G),te=new gW(D,q,e.getDependency("ProductStageRepository"),G),re=new __.V1AdapterBrandpayCustomerAuthService($,ee,q,J,e.getDependency("ProductStageRepository"),D,d.create(),n,o,G),ne=new __.V1AdapterBrandpayRequestPaymentService(re,J,q,e.getDependency("ProductStageRepository"),D,e.getDependency("DomainLogger"),d.create(),ee,n,o,new nM.MemoryStorageNoopMidRepository),oe=new __.V1AdapterPaymentWidgetStartCustomerSessionService(e.getDependency("PaymentWidgetCustomerSessionRepository"),D,e.getDependency("CustomerSessionFactory"),e.getDependency("TracingIdRepository"),q,_,F,L),ie=new __.V1AdapterBrandpayChangeSettingsService(re,K,q,e.getDependency("ProductStageRepository"),D,d.create(),n,o,G,$,i),ae=new __.V1AdapterBrandpayChangeCashReceiptService(re,K,q,e.getDependency("ProductStageRepository"),D,d.create(),G),se=new __.V1AdapterBrandpayAddPaymentMethodService(re,$,K,q,e.getDependency("ProductStageRepository"),D,e.getDependency("DomainLogger"),d.create(),n,o,G,i),ue=new __.V1AdapterPaymentGatewayRequestPaymentService(_,new _W(e.getDependency("CompileConfigRepository"),e.getDependency("PaymentGatewayRuntimeConfigRepository"),_,this.debugLogger),X,e.getDependency("ProductStageRepository"),D,t),ce=new __.V1AdapterPaymentGatewayRequestPaymentService(F,new _W(e.getDependency("CompileConfigRepository"),e.getDependency("PaymentGatewayRuntimeConfigRepository"),F,this.debugLogger),X,e.getDependency("ProductStageRepository"),D,t),le=new __.V1AdapterPaymentGatewayRequestPaymentService(L,new _W(e.getDependency("CompileConfigRepository"),e.getDependency("PaymentGatewayRuntimeConfigRepository"),L,this.debugLogger),X,e.getDependency("ProductStageRepository"),D,t),de=new __.V1AdapterPaymentWidgetRenderPaymentMethodsService(new Gx.TaskScheduler(new nM.AsyncSemaMutex),z,e.getDependency("PaymentWidgetCustomerSessionRepository"),e.getDependency("ProductStageRepository"),D,Y,H,re,q,ie,ae,se,G,e.getDependency("PaymentMethodIssuer"),te.create(),j),he=new __.V1AdapterPaymentWidgetRenderAgreementService(z,e.getDependency("PaymentWidgetCustomerSessionRepository"),e.getDependency("ProductStageRepository"),te.create()),me=new __.V1AdapterPaymentWidgetUpdateAmountService,fe=new __.V1AdapterPaymentWidgetRequestPaymentService(e.getDependency("PaymentWidgetCustomerSessionRepository"),D,(new __.WidgetRequestPaymentUseCaseBuilder).setRequestBrandpayPaymentUseCase(ne).setRequestKeyinPaymentGatewayUseCase(ue).setRequestInternationalPaymentGatewayUseCase(ce).setRequestNormalPaymentGatewayUseCase(le).build()),pe=new __.V1AdapterWidgetRequestPaymentForNativeSDKService(te.create(),e.getDependency("PaymentWidgetCustomerSessionRepository")),ye=new TW,ve=new _W(e.getDependency("CompileConfigRepository"),e.getDependency("PaymentGatewayRuntimeConfigRepository"),e.getDependency("PaymentGatewaySessionRepository"),this.debugLogger),ge=new __.V1AdapterPaymentGatewayStartCustomerSessionService(e.getDependency("PaymentGatewaySessionRepository"),ye,e.getDependency("CustomerSessionFactory"),e.getDependency("TracingIdRepository")),we=new __.V1AdapterPaymentGatewayRequestPaymentService(e.getDependency("PaymentGatewaySessionRepository"),ve,X,e.getDependency("PaymentGatewayProductStageRepository"),ye,t),Se=new __.V1AdapterPaymentGatewayCancelPaymentService(Q,t),Re=new __.V1AdapterPaymentGatewayRequestBillingAuthenticationService(e.getDependency("PaymentGatewaySessionRepository"),ve,X,e.getDependency("PaymentGatewayProductStageRepository"),ye,t);return{V1AdapterBrandpayGetIsOneTouchPayEnabledService:y,V1AdapterBrandpayGetIsBiometricAuthEnabledService:v,V1AdapterBrandpayChangeOneTouchPayService:f,V1AdapterBrandpayToggleOneTouchPayService:p,V1AdapterBrandpaySetupPasswordService:g,V1AdapterBrandpayChangeSettingsService:S,V1AdapterBrandpayRequestPaymentService:R,V1AdapterBrandpayAddPaymentMethodService:P,V1AdapterBrandpayToggleBiometricAuthService:E,V1AdapterBrandpayChangeBiometricAuthSettingsService:C,V1AdapterBrandpayGetPaymentMethodsService:k,V1AdapterBrandpayRequestPaymentAuthService:b,V1AdapterBrandpayRequestManualAgreementService:A,V1AdapterBrandpayChangeCashReceiptService:w,V1AdapterBrandpayRequestPasswordAuthService:I,V1AdapterBrandpayAuthenticateService:x,V1AdapterPaymentWidgetRequestPaymentForNativeSDKService:pe,V1AdapterBrandpayAddHyundaiDepartmentStoreCardService:M,V1AdapterBrandpayRemoveHyundaiDepartmentStoreCardService:O,V1AdapterBrandpayStartCustomerSessionService:m,PaymentWidgetStartCustomerSessionService:oe,V1AdapterPaymentWidgetRenderPaymentMethods:de,V1AdapterPaymentWidgetRenderAgreementService:he,V1AdapterPaymentWidgetUpdateAmountService:me,V1AdapterPaymentWidgetRequestPaymentService:fe,PaymentGatewayStartRuntimeConfigurationService:e.getDependency("PaymentGatewayStartRuntimeConfigurationService"),PaymentGatewayStartCustomerSessionService:ge,PaymentGatewayRequestBillingAuthService:e.getDependency("PaymentGatewayRequestBillingAuthService"),PaymentGatewayRequestPaymentService:e.getDependency("PaymentGatewayRequestPaymentService"),V1AdapterPaymentGatewayRequestPaymentService:we,V1AdapterPaymentGatewayCancelPaymentService:Se,V1AdapterPaymentGatewayRequestBillingAuthenticationService:Re,BrandpayStartCustomerSessionService:e.getDependency("BrandpayStartCustomerSessionService"),BrandpayRequestPaymentService:e.getDependency("BrandpayRequestPaymentService"),BrandpayAddPaymentMethodService:e.getDependency("BrandpayAddPaymentMethodService"),BrandpayChangePasswordService:e.getDependency("BrandpayChangePasswordService"),BrandpayChangeSettingsService:e.getDependency("BrandpayChangeSettingsService"),BrandpayChangeOneTouchPaySettingsService:e.getDependency("BrandpayChangeOneTouchPaySettingsService"),BrandpayGetIsOneTouchPayEnabledService:e.getDependency("BrandpayGetIsOneTouchPayEnabledService"),BrandpayRequestBillingAuthService:e.getDependency("BrandpayRequestBillingAuthService"),PaymentWidgetUpdateAmountService:e.getDependency("PaymentWidgetUpdateAmountService"),PaymentWidgetRenderPaymentMethods:e.getDependency("PaymentWidgetRenderPaymentMethods"),PaymentWidgetRequestPaymentService:e.getDependency("PaymentWidgetRequestPaymentService"),PaymentWidgetRenderAgreementService:e.getDependency("PaymentWidgetRenderAgreementService")}}}]),r}(WD),zW=function(e){c(r,e);var t=v(r);function r(e,n,o){var a;return i(this,r),(a=t.call(this,e,n)).debugLogger=o,a.customDependencyConfigurations=n,a}return s(r,[{key:"createBrandpaySDKInstance",value:function(e){return new WW($I($I({},this.constructorParams),e),this.customDependencyConfigurations,this.debugLogger)}},{key:"createWidgetsSDKInstance",value:function(e){return new GW($I($I({},this.constructorParams),e),this.customDependencyConfigurations,this.debugLogger)}},{key:"createPaymentGatewaySDKInstance",value:function(e){return new qW($I($I({},this.constructorParams),e),this.customDependencyConfigurations,this.debugLogger)}}]),r}(qD);
/*! Bundled license information:

  object-assign/index.js:
    (*
    object-assign
    (c) Sindre Sorhus
    @license MIT
    *)
  */function JW(e){var t=e.clientKey,r=e.gtid,n=e.params;try{var o;return{instance:HW(t,{gtid:r}).payment({customerKey:"v1-adapter-payment",environments:{client:{productStage:null!==(o=QW(n.clientUrl))&&void 0!==o?o:void 0},server:{baseUrl:n.pgWindowServerUrl}}}),reason:null}}catch(e){return{instance:null,reason:{title:"V1_ADAPTER_INSTANCE_LOAD_FAIL",description:"V1 ì´ëí° ì¸ì¤í´ì¤ ìì±ì ì¤í¨íìµëë¤.",exception:String(e)}}}}function QW(e){if(null==e)return null;try{switch(new URL(e).hostname){case"payment-gateway-dev.tosspayments.com":return"dev";case"payment-gateway-staging.tosspayments.com":return"staging";case"payment-gateway-staging-1.tosspayments.com":return"staging-1";case"payment-gateway-staging-2.tosspayments.com":return"staging-2";case"payment-gateway-staging-3.tosspayments.com":return"staging-3";case"payment-gateway-sandbox.tosspayments.com":return"sandbox";case"payment-gateway.tosspayments.com":return"live";default:return null}}catch(e){return null}}window.__SDK_LOAD_END_TIME__=new Date;var XW=1006096;function ZW(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};SI(e);var n=r.clientUrl,i=r.serverUrl,a=r.serverHeaders,s=r.pgWindowServerUrl,u=r.gtid,c=r.service;null!=n&&(bp.clientUrl=n),null!=i&&(bp.serverUrl=i),null!=s&&(bp.pgWindowServerUrl=s),null!=c&&(bp.service=c),null!=a&&(bp.serverHeaders=a),bp.gtid=null!=u?u:Sp();var l=$E({isActiveDebugLogger:null!==(t=!0)&&void 0!==t&&t,stage:eC(Pp),service:Pp.includes("baemin")?"payment-v1-beamin-js-sdk":"payment-v1-js-sdk",clientKey:e,globalTraceId:bp.gtid,uri:window.location.href,version:"c7d4edf18f768b7cb67e880e2cc64aff0c1b50db"});l.info("SDK initialized",{transaction:"PaymentGateway",tag:"v1"}),tq();var d=JW({clientKey:e,gtid:bp.gtid,params:{clientUrl:n,pgWindowServerUrl:s}});function h(e,t){return m.apply(this,arguments)}function m(){return(m=o(regeneratorRuntime.mark((function t(r,n){var o,i,a,s,u,c,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null!=d.instance,l.info("check v1 adapter enabled result",{transaction:"requestPayment",orderId:null==n?void 0:n.orderId,tag:i?"v1-adapter":"v1"}),a=BC(e,r,n),s=a.methodCode,u=a.decidedParams,Dp(e,s,u),!i){t.next=8;break}return t.next=7,d.instance.requestPaymentV1(r,n);case 7:case 17:return t.abrupt("return",t.sent);case 8:if(c=d.reason,h=null===(o=d.reason)||void 0===o?void 0:o.exception,l.info("v1 adapter disabled by reason: ".concat(null==c?void 0:c.description),{transaction:"requestPayment",tag:null==c?void 0:c.title,exception:h}),Bp.isReady){t.next=13;break}return t.abrupt("return");case 13:return t.prev=13,Bp.setOnPayment(),t.next=17,CC(e,s,u);case 20:throw t.prev=20,t.t0=t.catch(13),Bp.setReady(),t.t0;case 24:case"end":return t.stop()}}),t,null,[[13,20]])})))).apply(this,arguments)}var f,p=e.startsWith("test_");return p&&Np({log_name:"payment_window::tosspayments_init",schema_id:XW,screen_name:"payment_window",log_type:"event",event_type:"background",event_name:"tosspayments_init",value:xf()}),{requestPayment:h,requestBillingAuth:(f=o(regeneratorRuntime.mark((function t(r,n){var o,i,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null!=d.instance,l.info("check v1 adapter enabled result",{transaction:"requestBillingAuth",tag:i?"v1-adapter":"v1"}),!i){t.next=6;break}return t.next=5,d.instance.requestBillingAuthV1(r,n);case 5:case 11:return t.abrupt("return",t.sent);case 6:return a=d.reason,s=null===(o=d.reason)||void 0===o?void 0:o.exception,l.info("v1 adapter disabled by reason: ".concat(null==a?void 0:a.description),{transaction:"requestBillingAuth",tag:null==a?void 0:a.title,exception:s}),t.next=11,uE(e,r,n);case 12:case"end":return t.stop()}}),t)}))),function(e,t){return f.apply(this,arguments)}),cancelPayment:function(){var e=null!=d.instance;if(l.info("check v1 adapter enabled result",{transaction:"cancelPayment",tag:e?"v1-adapter":"v1"}),e)d.instance.cancelPaymentV1();else{var t,r=d.reason,n=null===(t=d.reason)||void 0===t?void 0:t.exception;l.info("v1 adapter disabled by reason: ".concat(null==r?void 0:r.description),{transaction:"cancelPayment",tag:null==r?void 0:r.title,exception:n})}return tC()}}}ZW.__versionHash__=Cp,ZW.version="v1.".concat(Cp.slice(0,7));try{if(null!=window.TossPayments&&window.TossPayments.isV2){var $W={service:"PX SDK V1",deployVersion:Cp,uri:location.href,exception:"V1 SDKë V2 SDKì í¨ê» ì¬ì©í  ì ìì´ì. ë§ì´ê·¸ë ì´ì ê°ì´ëë¥¼ íì¸í´ì£¼ì¸ì. https://docs.tosspayments.com/guides/v2/get-started/migration-guide"};fetch(new Request("https://log.tosspayments.com/v1/log"),{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"log=".concat(JSON.stringify($W))}).catch((function(){}))}}catch(ET){}if(null!=window.TossPayments&&window.TossPayments.isV2)throw new Tf({code:"INCOMPATIBLE_SDK_VERSION",message:"V1 SDKë V2 SDKì í¨ê» ì¬ì©í  ì ìì´ì. ë§ì´ê·¸ë ì´ì ê°ì´ëë¥¼ íì¸í´ì£¼ì¸ì. https://docs.tosspayments.com/guides/v2/get-started/migration-guide"});function eq(e){if(qP()){var t=document.createEvent("Event");return t.initEvent(e,!1,!0),void window.dispatchEvent(t)}window.dispatchEvent(new Event(e))}function tq(){window.addEventListener("pageshow",(function(e){e.persisted&&Bp.setReady()}))}return window.TossPayments=ZW,eq("tossPaymentsInitialize"),eq("TossPayments:initialize:TossPayments"),ZW}();
